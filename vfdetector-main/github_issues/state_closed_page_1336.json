[{"number": 13013, "title": "Android Detect demo is not working (not detecting/drawing anything)", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 Pro / Android 6\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 1.3.0\r\n- **Python version**: N/A\r\n- **Bazel version (if compiling from source)**: N/A (using cmake)\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n- **Phone**: Moto G4 Play (need to use Camera, not Camera2)\r\n\r\n### Describe the problem\r\nI start the \"TF Detect\" demo using my smartphone and nothing happens. It just seems that is not operating, neither trying to detect anything. No matter how long I stay or how many things I try to detect, nothing happens (and the log, as copied below, doesn't change too).\r\n\r\n### Source code / logs\r\n```\r\n09-13 09:15:32.129 16678-16678/org.tensorflow.demo I/art: Late-enabling -Xcheck:jni\r\n09-13 09:15:32.270 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_dependencies_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_dependencies_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.335 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_0_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_0_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.401 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_1_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_1_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.467 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_2_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_2_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.530 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_3_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_3_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.601 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_4_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_4_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.658 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_5_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_5_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.722 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_6_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_6_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.782 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_7_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_7_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.851 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_8_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_8_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.929 16678-16678/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=cortex-a53 --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-2/split_lib_slice_9_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-2@split_lib_slice_9_apk.apk@classes.dex) because non-0 exit status\r\n09-13 09:15:32.937 16678-16678/org.tensorflow.demo I/InstantRun: starting instant run server: is main process\r\n09-13 09:15:33.007 16678-16678/org.tensorflow.demo D/tensorflow: CameraActivity: onCreate org.tensorflow.demo.DetectorActivity@838da96\r\n09-13 09:15:33.026 16678-16678/org.tensorflow.demo I/CameraManagerGlobal: Connecting to camera service\r\n09-13 09:15:33.046 16678-16678/org.tensorflow.demo I/tensorflow: CameraActivity: Camera API lv2?: false\r\n09-13 09:15:33.124 16678-16678/org.tensorflow.demo D/tensorflow: CameraActivity: onStart org.tensorflow.demo.DetectorActivity@838da96\r\n09-13 09:15:33.124 16678-16678/org.tensorflow.demo D/tensorflow: CameraActivity: onResume org.tensorflow.demo.DetectorActivity@838da96\r\n09-13 09:15:33.138 16678-16731/org.tensorflow.demo D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true\r\n09-13 09:15:33.187 16678-16731/org.tensorflow.demo I/Adreno-EGL: <qeglDrvAPI_eglInitialize:379>: EGL 1.4 QUALCOMM build:  (Ifd751822f5)\r\n                                                                 OpenGL ES Shader Compiler Version: XE031.06.00.05\r\n                                                                 Build Date: 01/26/16 Tue\r\n                                                                 Local Branch: AU12_SBA\r\n                                                                 Remote Branch: \r\n                                                                 Local Patches: \r\n                                                                 Reconstruct Branch: \r\n09-13 09:15:33.189 16678-16731/org.tensorflow.demo I/OpenGLRenderer: Initialized EGL, version 1.4\r\n09-13 09:15:33.771 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: person\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bicycle\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: car\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: motorcycle\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: airplane\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bus\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: train\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: truck\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: boat\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: traffic light\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: fire hydrant\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: stop sign\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: parking meter\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bench\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bird\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cat\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: dog\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: horse\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sheep\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cow\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: elephant\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bear\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: zebra\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: giraffe\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: backpack\r\n09-13 09:15:33.772 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: umbrella\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: handbag\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: tie\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: suitcase\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: frisbee\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: skis\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: snowboard\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sports ball\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: kite\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: baseball bat\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: baseball glove\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: skateboard\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: surfboard\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: tennis racket\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bottle\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: wine glass\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cup\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: fork\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: knife\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: spoon\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bowl\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: banana\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: apple\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sandwich\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: orange\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: broccoli\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: carrot\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: hot dog\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: pizza\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: donut\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cake\r\n09-13 09:15:33.773 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: chair\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: couch\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: potted plant\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bed\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: dining table\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toilet\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: tv\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: laptop\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: mouse\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: remote\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: keyboard\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cell phone\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: microwave\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: oven\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toaster\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sink\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: refrigerator\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: book\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: clock\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: vase\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: scissors\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: teddy bear\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: hair drier\r\n09-13 09:15:33.774 16678-16678/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toothbrush\r\n09-13 09:15:33.778 16678-16678/org.tensorflow.demo I/TensorFlowInferenceInterface: Checking to see if TensorFlow native methods are already loaded\r\n09-13 09:15:33.779 16678-16678/org.tensorflow.demo E/art: No implementation found for long org.tensorflow.contrib.android.RunStats.allocate() (tried Java_org_tensorflow_contrib_android_RunStats_allocate and Java_org_tensorflow_contrib_android_RunStats_allocate__)\r\n09-13 09:15:33.779 16678-16678/org.tensorflow.demo I/TensorFlowInferenceInterface: TensorFlow native methods not found, attempting to load via tensorflow_inference\r\n09-13 09:15:33.853 16678-16678/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)\r\n09-13 09:15:35.690 16678-16678/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1780ms, TensorFlow version: 1.3.0\r\n09-13 09:15:35.692 16678-16678/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'\r\n09-13 09:15:35.695 16678-16678/org.tensorflow.demo I/tensorflow: DetectorActivity: Sensor orientation: 90, Screen orientation: 0\r\n09-13 09:15:35.695 16678-16678/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 1280x960\r\n\r\n```", "comments": ["/CC @andrewharp", "Seems that some problems with lv2 API or with checking if that is allowed. \r\n\r\nBecause I got the same bug on Google Nexus 4 with Android 5.1 and on Samsung Galaxy Tab S 10.5 (T805) with Android 7.0. And I fixed it while set\r\n`useCamera2API = true`\r\nin CameraActivity.java:300.\r\n\r\nHope that info will help with fix.\r\n"]}, {"number": 13012, "title": "Elastic Average optimizer", "body": "I have implemented a new distributed optimizer \"ElasticAverageOptimizer\". It is mentioned in the following issue:\r\n#12472\r\n\r\nEASGD is an async optimizer. During the training, Each worker will update the local variables and maintains its own local_step, which starts from 0 and is incremented by 1 after each update of local variables. Whenever the communication period divides the local step, the worker requests the current global center variables and then computed the elastic difference between global center variables and local variables. The elastic difference then be used to update both local variables and global variables.\r\n\r\n**[Reference]**: https://arxiv.org/pdf/1412.6651.pdf", "comments": ["Can one of the admins verify this patch?", "@joshburkart could you take a look?", "Unfortunately I don't feel comfortable reviewing this... I don't know the paper referenced and I also am not super familiar with using TF in distributed contexts... Sorry!", "cc @ry who's reviewing related method in https://github.com/tensorflow/tensorflow/pull/11581", "@jinxin0924 @yaroslavvb I'm happy to review it (which entails trying to repeat the results) but I won't have time for two weeks. Hit me up around Oct 2 if someone else hasn't yet.", "@ry Thanks a lot. Besides, I have also implemented model average, which may be better than #11581. Do you think it is appropriate to make a new pull request? ", "@jinxin0924 Let's do one at a time : ) \r\nPlease have a test similar to what I proposed here https://github.com/ry/tensorflow/commit/764cd38b6407421e4fe23cf8cd9d2518ef043c8d . I wasn't able to get the original ModelAvg working due, I think, to a bug demonstrated in that commit.", "@jinxin0924 can you take a look at the comment from @ry about adding a test.", "@sb2nov I think the test @ry mentioned  is about Model Average, other optimizer that I want to make pull request in the future, not this EASGD pr. :)", "@ry ping for review", "@jinxin0924 Could you attach some test results(like Execl tables, benchmark pictures, etc)? Moreover, would you completely implement the EASGD as the paper described?\r\n\r\n@drpngx @joshburkart I'm familiar with EASGD, so I may help review the PR. ", "Jenkins, test this please.\r\n\r\n", "@ry any thoughts on the newest code?", "@drpngx I'm sorry, I've left Google, and cannot review this anymore. I apologize for not handing this off to someone else. \r\n\r\n@vrv might be able to suggest a new reviewer. (I have some code in my experimental directory called distbench to test distributed training, in case that's helpful.)", "@jinxin0924 Would you mind attaching some test results and test scripts for EASGD? I think that would help us judge and evaluate the PR.\r\n\r\n@drpngx Personally speaking, the implementation and code are make sense. Hope get some advice from @vrv .", "@alextp, thanks for review.\r\n\"I prefer if you implement trainable as an explicit parameter to your custom_getter, like other custom_getters in tf are implemented.\" - Could you please give me some examples? \r\n", "@jinxin0924 example https://github.com/tensorflow/tensorflow/blob/15b1cf025da5c6ac2bcf4d4878ee222fca3aec4a/tensorflow/contrib/framework/python/ops/variables.py#L161", "I agree these updates should be placed in the apply_gradients function, but\nI think they can be handled independently in the apply_dense / apply_sparse\nmethods.\n\nOn Sun, Nov 12, 2017 at 5:19 PM, JxKing <notifications@github.com> wrote:\n\n> *@jinxin0924* commented on this pull request.\n> ------------------------------\n>\n> In tensorflow/contrib/opt/python/training/elastic_average_optimizer.py\n> <https://github.com/tensorflow/tensorflow/pull/13012#discussion_r150432917>\n> :\n>\n> > +      An `Operation` that applies the specified gradients. If `global_step`\n> +      was not None, that operation also increments `global_step`.\n> +\n> +    Raises:\n> +      TypeError: If `grads_and_vars` is malformed.\n> +      ValueError: If none of the variables have gradients.\n> +    \"\"\"\n> +    apply_updates = self._opt.apply_gradients(grads_and_vars)\n> +    with ops.control_dependencies([apply_updates]):\n> +      local_update = state_ops.assign_add(\n> +        self._local_step, 1, name='local_step_update').op\n> +\n> +    # update global variables.\n> +    def _Update_global_variables():\n> +      local_vars = variables.trainable_variables()\n> +      global_center_vars = ops.get_collection_ref(GLOBAL_CENTER_VARIABLE)\n>\n> In EASGD, the vars in grads_and_vars should be updated at each step, and\n> the global variables will be updated when the step is divided by\n> communication_period. I think these variables update should be placed in\n> apply_gradients function. Should I add local_vars and global_center_vars to\n> the apply_gradients function as arguments?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/13012#discussion_r150432917>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAATxVXHHahWWs22bf77OkU790NBNkJbks5s15kxgaJpZM4PV-8Y>\n> .\n>\n\n\n\n-- \n - Alex\n", "@alextp, I have updated the custome_getter. Now the customer_getter has two maps and is directly available to the optimizer.\r\nI do not understand why the update of global/local center variables will be better in apply_dense / apply_sparse methods. It may needs much more codes.", "@jinxin0924 I think you have to rebase your dev branch to solve the conflict.", "@DjangoPeng , Sure, thanks for reminding.", "Jenkins, test this please.", "@alextp, could you help me with the failed checks? I did not understand what happened.", "Jenkins, test this please.", "It claimed an infrastructure error so let's try again.", "Traceback (most recent call last):\r\n  File \"/Volumes/BuildData/tmpfs/tmp/bazel/execroot/org_tensorflow/bazel-out/darwin_x86_64-opt/bin/tensorflow/tools/test/check_futures_test.runfiles/org_tensorflow/tensorflow/tools/test/check_futures_test.py\", line 107, in <module>\r\n    main()\r\n  File \"/Volumes/BuildData/tmpfs/tmp/bazel/execroot/org_tensorflow/bazel-out/darwin_x86_64-opt/bin/tensorflow/tools/test/check_futures_test.runfiles/org_tensorflow/tensorflow/tools/test/check_futures_test.py\", line 103, in main\r\n    raise AssertionError('Error in %s: %s' % (short_path, str(e)))\r\nAssertionError: Error in contrib/opt/python/training/elastic_averaging_optimizer_test.py: Missing futures: division absolute_import print_function\r\n\r\nTo fix this you need to \"from future import ..\"; copy all the imports in the other tensorflow python files.", "@alextp, thanks so much.", "@tensorflow-jenkins test this please", "@jinxin0924 It looks like a test file is missing from this PR:\r\nhttps://ci.tensorflow.org/job/tensorflow-pull-requests-gpu/7893/consoleFull\r\n\r\n> ERROR: missing input file '//tensorflow/contrib/opt:python/training/elastic_average_optimizer_test.py'.\r\n> ERROR: /workspace/tensorflow/contrib/opt/BUILD:177:1: //tensorflow/contrib/opt:elastic_average_optimizer_test: missing input file '//tensorflow/contrib/opt:python/training/elastic_average_optimizer_test.py'.\r\n> INFO: Building complete.\r\n> ERROR: /workspace/tensorflow/contrib/opt/BUILD:177:1 1 input file(s) do not exist.", "@caisq , It was a stupid mistake... I have renamed the test file.  ", "@tensorflow-jenkins test this please", "@jinxin0924 There are test failures. For example: https://ci.tensorflow.org/job/tensorflow-pull-requests-cpu-python3/7533/consoleFull\r\n\r\nPlease take a look and see if you can fix them.", "@caisq It was the zip difference in py2 and py3 which caused failures.  I have modified it and tested both in py2 and py3.", "Jenkins, test this please\n\nOn Sun, Dec 10, 2017, 9:45 PM JxKing <notifications@github.com> wrote:\n\n> @caisq <https://github.com/caisq> It was the zip difference in py2 and\n> py3 which caused failures. I have modified it and tested both in py2 and\n> py3.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/13012#issuecomment-350627738>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AT_SbRCJ22v9YlcYqPCB4bua9l7bXMrdks5s_MGDgaJpZM4PV-8Y>\n> .\n>\n", "Thanks, @jinxin0924 !", "@jinxin0924 Congratulations! \ud83c\udf89 ", "@caisq @DjangoPeng Thanks!"]}, {"number": 13011, "title": "Failed to run the benchmark_model", "body": "System information\r\n- Have I written custom code: No \r\n- OS Platform and Distribution: Linux Ubuntu 14.04\r\n- TensorFlow installed from: source\r\n- TensorFlow version: ('v1.3.0-rc1-1951-g04c318b', '1.3.0')\r\n- Python version: 2.7.12\r\n- Bazel version (if compiling from source): 0.5.0\r\n- CUDA/cuDNN version: 8.0/5.1\r\n- GPU model and memory: Quadro M4000 8Gb\r\nExact command to reproduce: bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true\r\n\r\nProblem\r\nI follow the instruction on https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark to run the benchmark_model on desktop but it failed when I set the --show_flops=true. The tensorflow_inception_graph.pb is downloaded from the link provided on the page. \r\n\r\nLogs\r\n(my_project) ubuntu@ubuntu-desktop:~/Desktop/virtualroiflow/tensorflow$ bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true\r\n2017-09-13 17:53:21.911797: I tensorflow/tools/benchmark/benchmark_model.cc:426] Graph: [inception5h/tensorflow_inception_graph.pb]\r\n2017-09-13 17:53:21.911837: I tensorflow/tools/benchmark/benchmark_model.cc:427] Input layers: [input:0]\r\n2017-09-13 17:53:21.911841: I tensorflow/tools/benchmark/benchmark_model.cc:428] Input shapes: [1,224,224,3]\r\n2017-09-13 17:53:21.911844: I tensorflow/tools/benchmark/benchmark_model.cc:429] Input types: [float]\r\n2017-09-13 17:53:21.911846: I tensorflow/tools/benchmark/benchmark_model.cc:430] Output layers: [output:0]\r\n2017-09-13 17:53:21.911852: I tensorflow/tools/benchmark/benchmark_model.cc:431] Num runs: [1000]\r\n2017-09-13 17:53:21.911870: I tensorflow/tools/benchmark/benchmark_model.cc:432] Inter-inference delay (seconds): [-1.0]\r\n2017-09-13 17:53:21.911873: I tensorflow/tools/benchmark/benchmark_model.cc:433] Inter-benchmark delay (seconds): [-1.0]\r\n2017-09-13 17:53:21.911877: I tensorflow/tools/benchmark/benchmark_model.cc:435] Num threads: [-1]\r\n2017-09-13 17:53:21.911894: I tensorflow/tools/benchmark/benchmark_model.cc:436] Benchmark name: []\r\n2017-09-13 17:53:21.911897: I tensorflow/tools/benchmark/benchmark_model.cc:437] Output prefix: []\r\n2017-09-13 17:53:21.911900: I tensorflow/tools/benchmark/benchmark_model.cc:438] Show sizes: [0]\r\n2017-09-13 17:53:21.911917: I tensorflow/tools/benchmark/benchmark_model.cc:439] Warmup runs: [2]\r\n2017-09-13 17:53:21.911920: I tensorflow/tools/benchmark/benchmark_model.cc:54] Loading TensorFlow.\r\n2017-09-13 17:53:21.911941: I tensorflow/tools/benchmark/benchmark_model.cc:61] Got config, 0 devices\r\n2017-09-13 17:53:21.912358: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\n2017-09-13 17:53:22.022462: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-09-13 17:53:22.022832: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \r\nname: Quadro M4000 major: 5 minor: 2 memoryClockRate(GHz): 0.7725\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.93GiB freeMemory: 7.61GiB\r\n2017-09-13 17:53:22.022864: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Quadro M4000, pci bus id: 0000:01:00.0, compute capability: 5.2)\r\n2017-09-13 17:53:22.078421: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"sergey\"') for unknown op: Fact\r\n2017-09-13 17:53:22.078460: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"Sergey\"') for unknown op: Fact\r\n2017-09-13 17:53:22.078466: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"GPU\" host_memory_arg: \"fact\"') for unknown op: Fact\r\n2017-09-13 17:53:22.081269: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 2 iterations, max -1 seconds without detailed stat logging, with -1s sleep between inferences\r\n2017-09-13 17:53:22.173360: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=2 first=59501 curr=32424 min=32424 max=59501 avg=45962.5 std=13538\r\n\r\n2017-09-13 17:53:22.173384: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds without detailed stat logging, with -1s sleep between inferences\r\n2017-09-13 17:53:32.199487: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=33259 curr=33929 min=29881 max=34487 avg=31683.6 std=684\r\n\r\n2017-09-13 17:53:32.199512: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds with detailed stat logging, with -1s sleep between inferences\r\n2017-09-13 17:53:32.200083: I tensorflow/stream_executor/dso_loader.cc:139] successfully opened CUDA library libcupti.so.8.0 locally\r\n2017-09-13 17:53:42.310948: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=51892 curr=32599 min=29882 max=51892 avg=31710.3 std=1338\r\n\r\n2017-09-13 17:53:42.310986: I tensorflow/tools/benchmark/benchmark_model.cc:538] Average inference timings in us: Warmup: 45962, no stats: 31683, with stats: 31710\r\n2017-09-13 17:53:42.311006: I tensorflow/core/util/stat_summarizer.cc:358] Number of nodes executed: 141\r\n2017-09-13 17:53:42.311157: I tensorflow/core/util/stat_summarizer.cc:468] ============================== Summary by node type ==============================\r\n2017-09-13 17:53:42.311162: I tensorflow/core/util/stat_summarizer.cc:468] \t             [Node type]\t  [count]\t  [avg ms]\t    [avg %]\t    [cdf %]\t  [mem KB]\t[times called]\r\n2017-09-13 17:53:42.311166: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Conv2D\t       22\t    35.377\t    76.119%\t    76.119%\t 10077.888\t       22\r\n2017-09-13 17:53:42.311170: I tensorflow/core/util/stat_summarizer.cc:468] \t                     LRN\t        2\t     4.296\t     9.243%\t    85.362%\t  3211.264\t        2\r\n2017-09-13 17:53:42.311173: I tensorflow/core/util/stat_summarizer.cc:468] \t                 MaxPool\t        6\t     3.124\t     6.722%\t    92.084%\t  3562.496\t        6\r\n2017-09-13 17:53:42.311177: I tensorflow/core/util/stat_summarizer.cc:468] \t                 BiasAdd\t       24\t     1.677\t     3.608%\t    95.692%\t     0.000\t       24\r\n2017-09-13 17:53:42.311195: I tensorflow/core/util/stat_summarizer.cc:468] \t                    Relu\t       23\t     0.740\t     1.592%\t    97.285%\t     0.000\t       23\r\n2017-09-13 17:53:42.311199: I tensorflow/core/util/stat_summarizer.cc:468] \t                  MatMul\t        2\t     0.703\t     1.513%\t    98.797%\t     8.128\t        2\r\n2017-09-13 17:53:42.311216: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Concat\t        3\t     0.375\t     0.807%\t    99.604%\t  2706.368\t        3\r\n2017-09-13 17:53:42.311220: I tensorflow/core/util/stat_summarizer.cc:468] \t                   Const\t       51\t     0.082\t     0.176%\t    99.781%\t     0.000\t       51\r\n2017-09-13 17:53:42.311225: I tensorflow/core/util/stat_summarizer.cc:468] \t                 AvgPool\t        1\t     0.057\t     0.123%\t    99.903%\t    32.512\t        1\r\n2017-09-13 17:53:42.311229: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Softmax\t        1\t     0.028\t     0.060%\t    99.963%\t     0.000\t        1\r\n2017-09-13 17:53:42.311232: I tensorflow/core/util/stat_summarizer.cc:468] \t                    NoOp\t        1\t     0.006\t     0.013%\t    99.976%\t     0.000\t        1\r\n2017-09-13 17:53:42.311236: I tensorflow/core/util/stat_summarizer.cc:468] \t                    _Arg\t        1\t     0.004\t     0.009%\t    99.985%\t     0.000\t        1\r\n2017-09-13 17:53:42.311252: I tensorflow/core/util/stat_summarizer.cc:468] \t                 _Retval\t        1\t     0.003\t     0.006%\t    99.991%\t     0.000\t        1\r\n2017-09-13 17:53:42.311256: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Reshape\t        2\t     0.003\t     0.006%\t    99.998%\t     0.000\t        2\r\n2017-09-13 17:53:42.311274: I tensorflow/core/util/stat_summarizer.cc:468] \t                Identity\t        1\t     0.001\t     0.002%\t   100.000%\t     0.000\t        1\r\n2017-09-13 17:53:42.311278: I tensorflow/core/util/stat_summarizer.cc:468] \r\n2017-09-13 17:53:42.416261: E tensorflow/tools/benchmark/benchmark_model.cc:556] FLOPs calculation failed with Invalid argument: You must feed a value for placeholder tensor 'input' with dtype float\r\n\t [[Node: input = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\r\n", "comments": ["@andrewharp can you fix this?", "Hi @andrewharp , any update on this issue?", "Problem solved after I modified the input argument.\r\n`bazel-bin/tensorflow/tools/benchmark/benchmark_model --graph=inception5h/tensorflow_inception_graph.pb --input_layer=\"input\" --input_layer_shape=\"1,224,224,3\" --input_layer_type=\"float\" --output_layer=\"output\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true `", "well, the reason is:\r\nin tensorflow/tools/benchmark/benchmark_model.cc, function GetOutputShapes will determining which graph node will be fecthed. code is list below:  \r\n`  \r\n   for (const string& wanted_shape : wanted_shapes) {\r\n\r\n      bool is_input = false;\r\n      for (const std::pair<string, tensorflow::Tensor>& input_tensor :\r\n           input_tensors) {                                                                \r\n        if (input_tensor.first == wanted_shape) {\r\n          (*node_shapes)[wanted_shape] = input_tensor.second.shape();\r\n          is_input = true;\r\n          break;\r\n        }   \r\n      }        \r\n      input_count++;\r\n      if (!is_input) {\r\n        output_tensor_names.push_back(wanted_shape);\r\n      }        \r\n    }        `\r\nwanted_shape include all ops that its type is [\"Conv2D\", \"MatMul\", \"QuantizedConv2D\", \"QuantizedMatMul\", \"DepthwiseConv2dNative\" ], if you pass \"input:0\" to input_layer then \"input:0\" not match wanted_shape or its input tensors(ops), so \"input:0\" will put into fetch_list. In session run, method RewriteGraphForExecution will be invoke to replace placeholder with real op.(see in tensorflow/core/graph/subgraph.cc). but that cause a problem since \"input:0\" is in fetch_list, the graph will change to that:\r\nBefore rewrite:\r\n_source --> \"input:0\" -> other op(e.g. Conv2D) --> _sink\r\nafter rewrite:\r\n_source --> \"__arg_input\"(type: _Arg) --> other op -> _sink\r\n_source --> \"input:0\"(type:PlaceHolderOp) --> _sink\r\nthat cause a problem because no placeholder op exist in the runtime(Before Executor::Process).\r\nHowever if you set input_layer=\"input\",  the placeholderop is not exist in fetch_list, so the graph is changed to:\r\n_source --> \"input:0\"(type:PlaceHolderOp)\r\nthat will optimized since this path not link to _sink.\r\n", "Another problem that confuses me is that although set input_layer=\"input:0\" but it not cause a error at warmup phase, model execute phase(see in benckmark_model.cc). And I find the reason is fetch_nodes is exactly equal to output_layer.\r\nSo a patch can fixed this problem:\r\n`\r\nstd::vector<string> placeholder_name;\r\nStatus CalculateFlops(...) {\r\n  if (node.op().compare(\"Placeholder\") == 0 ||\r\n              node.op().compare(\"PlaceholderV2\") == 0) {\r\n    placeholder_name.push_back(node.name());\r\n  }\r\n  Status GetOutputShapes(const std::vector<InputLayerInfo>& inputs,\r\n                         const std::set<string>& wanted_shapes, Session* session,\r\n                         std::unordered_map<string, TensorShape>* node_shapes) {\r\n    a   for (const string& wanted_shape : wanted_shapes) {\r\n      bool is_input = false;                                                                                                                                                               \r\n      for (const std::pair<string, tensorflow::Tensor>& input_tensor :\r\n           input_tensors) {\r\n        /..../\r\n        if (input_tensor.first == wanted_shape) {\r\n          (*node_shapes)[wanted_shape] = input_tensor.second.shape();\r\n          is_input = true;\r\n          break;\r\n        } \r\n      }   \r\n      input_count++;\r\n      if (!is_input) {\r\n        bool match= false;\r\n        for (auto feeds_name : placeholder_name) {\r\n          if (feeds_name.compare(wanted_shape) == 0) {\r\n           match = true;\r\n            break;\r\n          }\r\n          if (match)\r\n            continue;\r\n        } \r\n        output_tensor_names.push_back(wanted_shape);\r\n      }   \r\n    }     \r\n\r\n  }\r\n}\r\n`"]}, {"number": 13010, "title": "Merge pull request #1 from tensorflow/master", "body": "pull_master_6.19", "comments": ["Can one of the admins verify this patch?", "Thanks for your pull request.  It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit <https://cla.developers.google.com/> to sign.**\n\nOnce you've signed, please reply here (e.g. `I signed it!`) and we'll verify.  Thanks.\n\n---\n\n- If you've already signed a CLA, it's possible we don't have your GitHub username or you're using a different email address.  Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n- If your company signed a CLA, they designated a Point of Contact who decides which employees are authorized to participate. You may need to contact the Point of Contact for your company and ask to be added to the group of authorized contributors. If you don't know who your Point of Contact is, direct the project maintainer to go/cla#troubleshoot.\n- In order to pass this check, please resolve this problem and have the pull request author add another comment and the bot will run again.\n\n<!-- need_sender_cla -->", "Can one of the admins verify this patch?", "Not sure this is valid. Please start over."]}, {"number": 13009, "title": "'load_csv_with_header' no longer works. Please suggest a solution.", "body": "I've been trying to run the tutorial program on IRIS data set and everytime when I try to run the program am seeing this error.\r\n\r\n'module' object has no attribute 'load_csv_with_header'\r\n\r\nPlease suggest me how to solve this. ", "comments": ["Could you paste the full stack trace of exception? ", "Please provide details about what platform you are using  (operating system, architecture). Also include your TensorFlow version. Also, did you compile from source or install a binary?  Make sure you also include the exact command if possible to produce  the output included in your test case. If you are unclear what to include  see the issue template displayed in  [the Github new issue template](https://github.com/tensorflow/tensorflow/issues/new).\r\n\r\n We ask for this in the issue submission template, because    it is really difficult to help without that information. Thanks!", "@reedwm  Thank you for the reply. I'm using \r\nUbuntu 16.04 64-bit.  \r\nTensorflow version 0.9.0. with CPU. \r\nPython version :  2.7.\r\n  \r\nI copied the code and saved it as peptide_trail.py. I activated tensorflow with the following command. (source activate  tensorflow). After that I run this program with this command.\r\n (python peptide_trail.py). then I got the error saying \r\n\r\nAttributeError: 'module' object has no attribute 'load_csv_with_header'\r\n", "I assume you're referring to the tutorial [here](https://www.tensorflow.org/get_started/estimator#load_the_iris_csv_data_to_tensorflow). Upgrade to the latest version of TensorFlow, 1.3. I'm guessing the problem is that your TensorFlow version is too old.", "@reedwm  I just updated my tensorflow and tried to run the program again. But, The error is completely insane. I don't understand why my university website link is in the error. Could you please explain to me what's the error saying?\r\n\r\nhere is the error: (Filename is iristutorial)\r\nTraceback (most recent call last):\r\n  File \"iristutorial.py\", line 87, in <module>\r\n    main()\r\n  File \"iristutorial.py\", line 38, in main\r\n    features_dtype=np.float32)\r\n  File \"/home/chandrasekhar/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/datasets/base.py\", line 48, in load_csv_with_header\r\n    n_samples = int(header[0])\r\nValueError: invalid literal for int() with base 10: \"<html><head><META http-equiv='refresh' content='1;URL=https://ccas-zone1-1.wku.edu/auth/perfigo_weblogin.jsp?cm=ws32vklm&uri=http%3A%2F%2Fdownload.tensorflow.org%2Fdata%2Firis_test%2Ecsv'></head><body\"\r\n![iris](https://user-images.githubusercontent.com/4417615/30528395-2ed7e2a8-9bf8-11e7-8ee2-d2f8169a6939.png)\r\n\r\n\r\n\r\n", "My guess is that your university has some sort of login page before you can access the internet, and that the program is downloading the login page instead of the datasets. Try manually downloading the datasets in a web browser.\r\n\r\nAsk on StackOverflow if you have more questions."]}, {"number": 13008, "title": "EHN: csv supports missing value", "body": "### What changes were proposed in this pull request?\r\n\r\n`tf.decode_csv` support NA values, see #13007 \r\n\r\n### How was this patch tested?\r\n\r\n+ [x] add unit tests.\r\n+ [ ] pass all tests.", "comments": ["Can one of the admins verify this patch?", "@facaiy, thanks for your PR! By analyzing the history of the files in this pull request, we identified @ebrevdo, @keveman and @tensorflower-gardener to be potential reviewers.", "This pull request introduced an API change.\r\n```\r\n   member_method {\r\n     name: \"decode_csv\"\r\n-    argspec: \"args=[\\'records\\', \\'record_defaults\\', \\'field_delim\\', \\'use_quote_delim\\', \\'name\\'], varargs=None, keywords=None, defaults=[\\',\\', \\'True\\', \\'None\\'], \"\r\n+    argspec: \"args=[\\'records\\', \\'record_defaults\\', \\'field_delim\\', \\'use_quote_delim\\', \\'na_value\\', \\'name\\'], varargs=None, keywords=None, defaults=[\\',\\', \\'True\\', \\'\\', \\'None\\'], \"\r\n   }\r\n```\r\n@martinwicke Looking at the diff above, does it look OK, or should we revert and go through the API review", "Thank you @gunan for figuring this out!!\n\nOn Sep 14, 2017 2:47 PM, \"gunan\" <notifications@github.com> wrote:\n\n> This pull request introduced an API change.\n>\n>    member_method {\n>      name: \"decode_csv\"\n> -    argspec: \"args=[\\'records\\', \\'record_defaults\\', \\'field_delim\\', \\'use_quote_delim\\', \\'name\\'], varargs=None, keywords=None, defaults=[\\',\\', \\'True\\', \\'None\\'], \"\n> +    argspec: \"args=[\\'records\\', \\'record_defaults\\', \\'field_delim\\', \\'use_quote_delim\\', \\'na_value\\', \\'name\\'], varargs=None, keywords=None, defaults=[\\',\\', \\'True\\', \\'\\', \\'None\\'], \"\n>    }\n>\n> @martinwicke <https://github.com/martinwicke> Looking at the diff above,\n> does it look OK, or should we revert and go through the API review\n>\n> \u2014\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/13008#issuecomment-329617833>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AT_Sbb4l2ndDG-8yDPEAub7BrgAnIN9_ks5siZ7hgaJpZM4PVfvo>\n> .\n>\n", "Thank you, @gunan . #13007 is reopened for discussion.", "This just needs to go through API review, somehow I missed this.\n\nOn Sep 14, 2017 3:21 PM, \"Yan Facai (\u989c\u53d1\u624d)\" <notifications@github.com> wrote:\n\n> Thank you, @gunan <https://github.com/gunan> . #13007\n> <https://github.com/tensorflow/tensorflow/issues/13007> is reopened for\n> discussion.\n>\n> \u2014\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/13008#issuecomment-329624300>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AT_SbUL9wQj9zMv5EFM3Z55bYjBADDYaks5siabrgaJpZM4PVfvo>\n> .\n>\n", "Hi, @gunan @martinwicke @drpngx . May I ask when is API review? Thanks. ", "Can you revert the revert (`b6f2534`) and submit a PR? Thank you. You also need to run the `api_compatibility_test` do update the goldens.", "Thank you for explanation, @drpngx . I have created #13205 , however I don't know how to run `api_compatibility_test`, use bazel?", "Continuing on that thread\n\nOn Sep 20, 2017 10:57 PM, \"Yan Facai (\u989c\u53d1\u624d)\" <notifications@github.com>\nwrote:\n\nThank you for explanation, @drpngx <https://github.com/drpngx> . I have\ncreated #13205 <https://github.com/tensorflow/tensorflow/pull/13205> ,\nhowever I don't know how to run api_compatibility_test, use bazel?\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<https://github.com/tensorflow/tensorflow/pull/13008#issuecomment-331058711>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/AT_SbVhjgka3lZJlJFZvalus7-ibmqLLks5skfrJgaJpZM4PVfvo>\n.\n"]}, {"number": 13007, "title": "Feature: tf.decode_csv support NA values", "body": "I found many people prefer to using `NA`, `null` or `NULL` or other string as missing value in HIVE table. But `tf.decode_csv` cannot handle the case. So, I suggest to add `na_value` argument like [`pd.read_csv`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html).", "comments": []}, {"number": 13006, "title": "pip error while training model on cloud", "body": "The replica master 0 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-9_013O-build/setup.py' The replica worker 0 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-QNtwDr-build/setup.py' The replica worker 1 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-pA8eBo-build/setup.py' The replica worker 2 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-Xk5nGm-build/setup.py' The replica worker 3 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-3VkzR6-build/setup.py' The replica worker 4 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-NIf2Jb-build/setup.py' The replica worker 5 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-RlyPFQ-build/setup.py' The replica worker 6 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-QXzr7y-build/setup.py' The replica worker 7 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-FvkZhP-build/setup.py' The replica worker 8 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-Ue8_oJ-build/setup.py' The replica ps 0 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-AxLdZ1-build/setup.py' The replica ps 1 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-7nE9PF-build/setup.py' The replica ps 2 exited with a non-zero status of 1. Termination reason: Error. Traceback (most recent call last): File \"<string>\", line 1, in <module> IOError: [Errno 2] No such file or directory: '/tmp/pip-GSkkn1-build/setup.py' To find out more about why your job exited please check the logs: https://console.cloud.google.com/logs/viewer?project=802068032926&resource=ml_job%2Fjob_id%2Fhotifya9f40b85_e142_431b_82fc_8be28b5dc8c2&advancedFilter=resource.type%3D%22ml_job%22%0Aresource.labels.job_id%3D%22hotifya9f40b85_e142_431b_82fc_8be28b5dc8c2%22", "comments": ["Could you please somebody help me to sort this out. I have already pip even though i am getting same", "Could you please make the logs public. Also, does your training work on your local computer?", "I apologize but I am having a hard time understanding what the problem is, where the problem is, and what version it affects. Please resubmit and pay attention to the issue template (https://github.com/tensorflow/tensorflow/issues/new) . Please provide all the information it asks. Thank you."]}, {"number": 13005, "title": "tf.nn.in_top_k strange behavior", "body": "Based on the documentation [here](https://www.tensorflow.org/api_docs/python/tf/nn/in_top_k) tf.nn.in_top_k treats ties as positive, which is almost never what you'd want. This is a major flaw, which leads to misleading metrics. An all zero predictions would give you 0 error with any targets. I think the default behavior should be to not count ties, ", "comments": ["@honkentuber does this proposal seem reasonable? We cannot change the default due to backwards compatibility concerns but we can add a flag.", "+wicke,ispir\n\nI don't know if a flag is worth the cost of complicating the interface, and\nit doesn't address the original commenter's point that a counting ties is\nunexpected or counterintuitive. It's probably worth updating the docs that\nthe more likelihood there is of ties, the less meaningful this metric is.\n\nMy intuition is that it should remain the way it is, or we should count\nties as a single true positive; i.e., in_top_k([10, 9, 8, 8, 8, 7, 6, 5],\nk=3) should return either 5 or 3, but not 2.\n\n\nPhilip Tucker |  Software Engineer |  ptucker@google.com |\n\nOn Wed, Sep 13, 2017 at 12:09 PM, Reed <notifications@github.com> wrote:\n\n> @honkentuber <https://github.com/honkentuber> does this proposal seem\n> reasonable? We cannot change the default due to backwards compatibility\n> concerns but we can add a flag.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/13005#issuecomment-329266277>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AS8QxX2o85brDFcWQLDJVdyacvDfOAIDks5siCiCgaJpZM4PVeqO>\n> .\n>\n", "If I understand correctly, for a sample, the sum of prediction probabilities of all classes for it should be 1, right? So I cannot understand why all predictions can be zero.\r\n\r\nI believe that `prediction` in document is prediction probability. And output:\r\n```\r\n\\[ out_i = target_i \\in TopKIncludingTies(prediction_i) \\]\r\n```", "No one said they have to be probabilities. And even if they are probabilities, they can still be all equal.\r\n\r\nThis is actually a duplicate issue of #10767.", "The likelihood of ties is much lower with continuous values. But you're\ncorrect, this op does not assume that about the input.\n\nOn Sep 14, 2017 8:22 AM, \"Yuxin Wu\" <notifications@github.com> wrote:\n\n> No one said they have to be probabilities. And even if they are\n> probabilities, they can still be all equal.\n>\n> This is actually a duplicate issue of #10767\n> <https://github.com/tensorflow/tensorflow/issues/10767>.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/13005#issuecomment-329515775>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AS8QxZYuHXGmtSk_1x3-Dkty30I0W9YTks5siUS8gaJpZM4PVeqO>\n> .\n>\n", "In my opinion there's no need for a flag. Counting ties as positive is never a wanted behavior for a metric.", "No one said this function has to be used for a metric..", "Are you sure? I think someone said.\r\nhttps://www.tensorflow.org/versions/master/api_guides/python/nn#Evaluation", "I have no doubt they are designed for metrics but you can certainly use it for something else...", "This is a duplicate of #10767. I wrote there that the flag would be good to clarify the behavior. This is more important for `top_k` than for `in_top_k`, but it may still be nice for consistency."]}, {"number": 13004, "title": "Tensorflow import breaks numpy calls", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n\r\nSee source code below.\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n```\r\n% cat tf_env.txt\r\n== cat /etc/issue ===============================================\r\nLinux bda9acc7988e 4.12.9-300.fc26.x86_64 #1 SMP Fri Aug 25 13:09:43 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"\r\nVERSION_ID=\"16.04\"\r\nVERSION_CODENAME=xenial\r\n== are we in docker =============================================\r\nYes\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n== uname -a =====================================================\r\nLinux bda9acc7988e 4.12.9-300.fc26.x86_64 #1 SMP Fri Aug 25 13:09:43 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n- **TensorFlow installed from (source or binary)**:\r\n`pip install tensorflow-gpu`\r\n\r\n- **TensorFlow version (use command below)**:\r\n```\r\n % pip list | grep 'numpy\\|scipy\\|tensorflow\\|wheel'\r\nDEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(leg\r\nacy|columns) in your pip.conf under the [list] section) to disable this warning.\r\nnumpy (1.12.1)\r\nscipy (0.19.0)\r\ntensorflow-gpu (1.3.0)\r\ntensorflow-tensorboard (0.1.6)\r\nwheel (0.29.0)\r\n```\r\n```\r\n% python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nv1.3.0-rc2-20-g0787eee 1.3.0\r\n```\r\n- **Python version**: \r\n```\r\n % python\r\nPython 3.5.3 |Intel Corporation| (default, Apr 27 2017, 18:08:47)\r\n[GCC 4.8.2 20140120 (Red Hat 4.8.2-15)] on linux\r\n```\r\n- **Bazel version (if compiling from source)**:\r\nNot compiling from source.\r\n\r\n- **CUDA/cuDNN version**:\r\n`/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudart.so.8.0.61`\r\n\r\n- **GPU model and memory**:\r\n```\r\n % nvidia-smi\r\nTue Sep 12 21:56:13 2017\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 384.69                 Driver Version: 384.69                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 106...  Off  | 00000000:01:00.0  On |                  N/A |\r\n|  0%   56C    P8    12W / 200W |     62MiB /  6070MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\n- **Exact command to reproduce**:\r\nRun this test1.py in a new python terminal (below), once with the `import tensorflow` line, once without it. The code loads a stock image, and calls np.fft.fft2, and reads values on the corners of the resulting matrix. Output is as follows:\r\n\r\nExpected:\r\n```\r\n % python\r\nPython 3.5.3 |Intel Corporation| (default, Apr 27 2017, 18:08:47)\r\n[GCC 4.8.2 20140120 (Red Hat 4.8.2-15)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\nIntel(R) Distribution for Python is brought to you by Intel Corporation.\r\nPlease check out: https://software.intel.com/en-us/python-distribution\r\n>>> exec(open('test1.py').read()) # WITHOUT TF IMPORT\r\n(768, 1024)\r\n-- loop 0 --\r\n0.825823 0.593467 0.860577 0.842033\r\n(595544+0j) (-41240.3+54651.8j) (-28777.7+57397.5j) (28693.1-15865.9j)\r\n\r\n-- loop 1 --\r\n0.825823 0.593467 0.860577 0.842033\r\n(595544+0j) (-41240.3+54651.8j) (-28777.7+57397.5j) (28693.1-15865.9j)\r\n\r\n-- loop 2 --\r\n0.825823 0.593467 0.860577 0.842033\r\n(595544+0j) (-41240.3+54651.8j) (-28777.7+57397.5j) (28693.1-15865.9j)\r\n```\r\n\r\nProblem: non-deterministic loop after TF import,\r\n```\r\n % python\r\nPython 3.5.3 |Intel Corporation| (default, Apr 27 2017, 18:08:47)\r\n[GCC 4.8.2 20140120 (Red Hat 4.8.2-15)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\nIntel(R) Distribution for Python is brought to you by Intel Corporation.\r\nPlease check out: https://software.intel.com/en-us/python-distribution\r\n>>> exec(open('test1.py').read()) # WITH TF IMPORT\r\n(768, 1024)\r\n-- loop 0 --\r\n0.825823 0.593467 0.860577 0.842033\r\n(4.01544e+06-4.30166e+06j) (-384357+1.41085e+06j) (349169+983449j) (228823-235335j)\r\n\r\n-- loop 1 --\r\n0.825823 0.593467 0.860577 0.842033\r\n(6.03746e+06+42733.2j) (83067.3-1.09108e+06j) (-331458-151395j) (-87943.5+165673j)\r\n\r\n-- loop 2 --\r\n0.825823 0.593467 0.860577 0.842033\r\n(475988+254405j) (11989.8+49912j) (13361.2+6137.22j) (-3503.42-15194.5j)\r\n```\r\n\r\n### Describe the problem\r\nImporting tensorflow causes numpy.fft.fft2 to produce non-deterministic results. This is not expected. Why does importing tensorflow break the numpy call?\r\n\r\nJust for reference, I have been able to tf.Session() with the GPU. In any case, tensorflow should not override / affect the numpy package. I am not sure what is going on here.\r\n```\r\n % python\r\nPython 3.5.3 |Intel Corporation| (default, Apr 27 2017, 18:08:47)\r\n[GCC 4.8.2 20140120 (Red Hat 4.8.2-15)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\nIntel(R) Distribution for Python is brought to you by Intel Corporation.\r\nPlease check out: https://software.intel.com/en-us/python-distribution\r\n>>> import tensorflow as tf\r\ntf.S>>> tf.Session()\r\n2017-09-12 22:04:13.379385: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1\r\n instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-09-12 22:04:13.379504: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2\r\n instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-09-12 22:04:13.379534: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX in\r\nstructions, but these are available on your machine and could speed up CPU computations.\r\n2017-09-12 22:04:13.379560: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 i\r\nnstructions, but these are available on your machine and could speed up CPU computations.\r\n2017-09-12 22:04:13.379584: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA in\r\nstructions, but these are available on your machine and could speed up CPU computations.\r\n2017-09-12 22:04:13.512425: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had neg\r\native value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-09-12 22:04:13.512712: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties:\r\nname: GeForce GTX 1060 6GB\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.7335\r\npciBusID 0000:01:00.0\r\nTotal memory: 5.93GiB\r\nFree memory: 5.80GiB\r\n2017-09-12 22:04:13.512727: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0\r\n2017-09-12 22:04:13.512731: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y\r\n2017-09-12 22:04:13.512739: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device:\r\n 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:01:00.0)\r\n<tensorflow.python.client.session.Session object at 0x7f396c316c88>\r\n```\r\n\r\n### Source code / logs\r\ntest1.py\r\n```\r\nimport numpy as np\r\nimport scipy.misc\r\nimport tensorflow as tf # comment this out to make deterministic\r\n\r\nDTYPE = np.complex64\r\nim_uint8 = scipy.misc.face()\r\nim = im_uint8.astype(DTYPE) / (np.power(2,im_uint8.itemsize*8) - 1)\r\nim = np.linalg.norm(im, axis=-1)\r\nprint(im.shape)\r\nprintcorners = lambda M: print( M[0,0], M[-1,0], M[0,-1], M[-1,-1])\r\n\r\nfor i in range(0,3):\r\n    # THIS LOOP SHOULD BE DETERMINISTIC!\r\n    print('-- loop',i,'--')\r\n    B = im.copy()\r\n    printcorners(B)\r\n    Bhat = np.fft.fft2(B.copy())\r\n    printcorners(Bhat)\r\n    print('')\r\n#\r\n```\r\n\r\nThanks in advance.", "comments": ["Are you using MKL by any chance? There's known bad interaction between MKL and TensorFlow (ie, see https://github.com/tensorflow/tensorflow/issues/11724)\r\n\r\nTry `np.__config__.get_info(\"lapack_mkl_info\")` to see if MKL is there\r\n\r\nMKL issue might be solved by setting `export MKL_NUM_THREADS=\"1\"`", "I think you might be right.. since I was using the stock Intel install, it was probably MKL. I went ahead and did : \r\n`pip install numpy scipy tensorflow-gpu --ignore-installed`\r\n\r\nwhich upgraded numpy:\r\n```\r\n% pip list | grep 'numpy\\|scipy\\|tensorflow\\|wheel'\r\nDEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(leg\r\nacy|columns) in your pip.conf under the [list] section) to disable this warning.\r\nnumpy (1.13.1)\r\nscipy (0.19.1)\r\ntensorflow-gpu (1.3.0)\r\ntensorflow-tensorboard (0.1.6)\r\nwheel (0.30.0)\r\n```\r\nso now:\r\n```\r\n>>> np.__config__.get_info(\"lapack_mkl_info\")\r\n{}\r\n```\r\n\r\nAnd the original issue seems to be resolved. Not sure what the culprit was, but it was one of those. Thanks, can close now."]}, {"number": 13003, "title": "Branch 168439341", "body": "", "comments": []}, {"number": 13002, "title": "1_notmnist assignment1 zero mean equation in code", "body": "Okay in tutorial its say to make zero mean do r-128/128 but in code its r-128/255\r\nBelow is the code provided in ipython notebook\r\nimage_size = 28  # Pixel width and height.\r\npixel_depth = 255.0  # Number of levels per pixel.\r\n\r\ndef load_letter(folder, min_num_images):\r\n  \"\"\"Load the data for a single letter label.\"\"\"\r\n  image_files = os.listdir(folder)\r\n  dataset = np.ndarray(shape=(len(image_files), image_size, image_size),\r\n                         dtype=np.float32)\r\n  print(folder)\r\n  num_images = 0\r\n  for image in image_files:\r\n    image_file = os.path.join(folder, image)\r\n    try:\r\n      image_data = (ndimage.imread(image_file).astype(float) - \r\n                    pixel_depth / 2) / pixel_depth\r\n      if image_data.shape != (image_size, image_size):\r\n        raise Exception('Unexpected image shape: %s' % str(image_data.shape))\r\n      dataset[num_images, :, :] = image_data\r\n      num_images = num_images + 1\r\n    except IOError as e:\r\n      print('Could not read:', image_file, ':', e, '- it\\'s ok, skipping.')", "comments": ["I'm sorry, @shadmanssk, but I don't understand what you're asking. Is there a bug or a feature request you'd like to make? Are you asking that we change or fix the tutorial? Or is there some aspect of the tutorial that you'd like explained? Also, which tutorial are you referring to?", "\u200b\r\nTutorial: Deep Learning\r\nLesson 1 Concept 19 and Assignment 1\r\nLink: https://classroom.udacity.com/courses/ud730/lessons/6370362152/concepts/71191606550923\r\n\r\nAssignment :\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/udacity/1_notmnist.ipynb\r\n\r\nIssue:\r\nAbove equation of normalizing pixel inputs are not followed in code\r\n\r\nCode (in above ipynb) :\r\n\r\nimage_size = 28  # Pixel width and height.pixel_depth = 255.0  #\r\nNumber of levels per pixel.\r\n\r\n\r\ndef load_letter(folder, min_num_images):\r\n  \"\"\"Load the data for a single letter label.\"\"\"\r\n  image_files = os.listdir(folder)\r\n  dataset = np.ndarray(shape=(len(image_files), image_size, image_size),\r\n                         dtype=np.float32)\r\n  print(folder)\r\n  num_images = 0\r\n  for image in image_files:\r\n    image_file = os.path.join(folder, image)\r\n    try:\r\n      image_data = (ndimage.imread(image_file).astype(float) -\r\n                    pixel_depth / 2) / pixel_depth\r\n      if image_data.shape != (image_size, image_size):\r\n        raise Exception('Unexpected image shape: %s' % str(image_data.shape))\r\n\r\n\r\nOn Thu, Sep 14, 2017 at 10:17 PM, Cliff Young <notifications@github.com>\r\nwrote:\r\n\r\n> I'm sorry, @shadmanssk <https://github.com/shadmanssk>, but I don't\r\n> understand what you're asking. Is there a bug or a feature request you'd\r\n> like to make? Are you asking that we change or fix the tutorial? Or is\r\n> there some aspect of the tutorial that you'd like explained? Also, which\r\n> tutorial are you referring to?\r\n>\r\n> \u2014\r\n> You are receiving this because you were mentioned.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/tensorflow/tensorflow/issues/13002#issuecomment-329541252>,\r\n> or mute the thread\r\n> <https://github.com/notifications/unsubscribe-auth/AS-E5NvwVceCBUu8YfVWLQyp7VuFPhr-ks5siVidgaJpZM4PVH1k>\r\n> .\r\n>\r\n", "You're quite right that the Udacity slides and the code in the ipynb don't match up exactly. But I don't think it matters for educational purposes. \r\n\r\nI think there are two points in what Vincent is saying:\r\n1. Having a zero mean makes it easier for the optimizer to work. \r\n2. Normalizing different axes to have the same scale (so circular, or standard deviations, rather than oval, as shown in slides) also makes it easier for the optimizer to work. \r\n\r\nI think the code gets both right. The -128 moves the mean of the [0,255] image data close to zero. \r\nThe /255 rescales so that values will be in the range [-.5,.5]. The formulas that Vincent showed would have scaled to [-1,1]. But as long as everything rescales to the same ranges (so you get circularity across dimensions, not ovals), then the optimizer will still have an easier time. It's not the absolute magnitude of the rescaling that matters; it's the relative scales across the dimensions. \r\n\r\nNot sure if the course has gotten to batch normalization at this point, but that strives to rescale a standard deviation to have value about 1.0. Then you don't know the absolute max/min bounds, but you do have some statistical beliefs that your data are now spread out similarly in multiple dimensions. \r\n\r\nDoes that make sense? @vincentvanhoucke, feel free to amend or comment, but I'll close for now. ", "yeah even I realised that so I totally get your point still, it was\nconfusing at first but thanks for clearing out this thing.\n\nOn Sat, Sep 16, 2017 at 12:20 AM, Cliff Young <notifications@github.com>\nwrote:\n\n> You're quite right that the Udacity slides and the code in the ipynb don't\n> match up exactly. But I don't think it matters for educational purposes.\n>\n> I think there are two points in what Vincent is saying:\n>\n>    1. Having a zero mean makes it easier for the optimizer to work.\n>    2. Normalizing different axes to have the same scale (so circular, or\n>    standard deviations, rather than oval, as shown in slides) also makes it\n>    easier for the optimizer to work.\n>\n> I think the code gets both right. The -128 moves the mean of the [0,255]\n> image data close to zero.\n> The /255 rescales so that values will be in the range [-.5,.5]. The\n> formulas that Vincent showed would have scaled to [-1,1]. But as long as\n> everything rescales to the same ranges (so you get circularity across\n> dimensions, not ovals), then the optimizer will still have an easier time.\n> It's not the absolute magnitude of the rescaling that matters; it's the\n> relative scales across the dimensions.\n>\n> Not sure if the course has gotten to batch normalization at this point,\n> but that strives to rescale a standard deviation to have value about 1.0.\n> Then you don't know the absolute max/min bounds, but you do have some\n> statistical beliefs that your data are now spread out similarly in multiple\n> dimensions.\n>\n> Does that make sense? @vincentvanhoucke\n> <https://github.com/vincentvanhoucke>, feel free to amend or comment, but\n> I'll close for now.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/13002#issuecomment-329867691>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AS-E5OT3O6vzZDOnRiMT2xyaXAlivBPiks5siscEgaJpZM4PVH1k>\n> .\n>\n"]}, {"number": 13001, "title": "Branch 168392949", "body": "", "comments": ["/CC @gunan for merge notification", "Maybe some timeout on the GPU build? Trying again.\r\n\r\nJenkins, test this please."]}, {"number": 13000, "title": "error while validating the installation of tensorflow", "body": "When I try to validate installation, following error occur. How can I solve this error ? \r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 18, in swig_import_helper\r\n    return importlib.import_module(mname)\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 666, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 577, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 906, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 41, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 21, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 20, in swig_import_helper\r\n    return importlib.import_module('_pywrap_tensorflow_internal')\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\nImportError: No module named '_pywrap_tensorflow_internal'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<pyshell#0>\", line 1, in <module>\r\n    import tensorflow as tf\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in <module>\r\n    from tensorflow.python import *\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 52, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 18, in swig_import_helper\r\n    return importlib.import_module(mname)\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 666, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 577, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 906, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 41, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 21, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 20, in swig_import_helper\r\n    return importlib.import_module('_pywrap_tensorflow_internal')\r\n  File \"C:\\Users\\omkar\\AppData\\Local\\Programs\\Python\\Python35\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\nImportError: No module named '_pywrap_tensorflow_internal'\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/install_sources#common_installation_problems\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.", "comments": ["Can one of the admins verify this patch?", "could you pull rebase?", "Oh, I see, this is a bug report to do with invalid install. Please file an issue instead."]}, {"number": 12999, "title": "data_format=\"NCHW\"    didn't   work  for    tf.nn.max_pool", "body": "In [78]: x2 = tf.random_uniform([64,3,32,32])\r\n\r\nIn [79]: x2_pool = tf.nn.max_pool(x2,  [1,3,3,1], [1,2,2,1], padding=\"VALID\", data_format=\"NHWC\")\r\n\r\nIn [80]: x2_pool.shape\r\nOut[80]: TensorShape([Dimension(64), Dimension(1), Dimension(15), Dimension(32)])\r\n\r\nIn [81]: x2_pool = tf.nn.max_pool(x2,  [1,3,3,1], [1,2,2,1], padding=\"VALID\", data_format=\"NCHW\")\r\n\r\nIn [82]: x2_pool.shape\r\nOut[82]: TensorShape([Dimension(64), Dimension(1), Dimension(15), Dimension(32)])\r\n", "comments": ["Isn't the above question more suited for SO ?", "You have to provide ksize and strides in the same format as the data. \r\n\r\n```\r\nIn [3]: x2 = tf.random_uniform([64,3,32,32])\r\n\r\nIn [4]: x2_pool = tf.nn.max_pool(x2, [1,3,3,1], [1,2,2,1], padding=\"VALID\", data_format=\"NHWC\")\r\n\r\nIn [5]: x2_pool.shape\r\nOut[5]: TensorShape([Dimension(64), Dimension(1), Dimension(15), Dimension(32)])\r\n\r\nIn [6]: x2_pool = tf.nn.max_pool(x2, [1,3,3,1], [1,2,2,1], padding=\"VALID\", data_format=\"NCHW\")\r\n\r\nIn [7]: x2_pool.shape\r\nOut[7]: TensorShape([Dimension(64), Dimension(1), Dimension(15), Dimension(32)])\r\n\r\nIn [8]: x2_pool = tf.nn.max_pool(x2, [1, 1, 3,3], [1, 1, 2,2], padding=\"VALID\", data_format=\"NCHW\")\r\n\r\nIn [9]: x2_pool.shape\r\nOut[9]: TensorShape([Dimension(64), Dimension(3), Dimension(15), Dimension(15)])\r\n\r\n```", "thank you very much"]}, {"number": 12998, "title": "An error in  llvm/Object/SymbolicFile.h : expected ')' before 'PRIxPTR'", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  CentOS Linux release 7.2.1511 (Core)\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**:  git hash 1e96d54d9f928c4ea4bf0564ef9900f6bd03acd5\r\n- **Python version**:  3.6.1\r\n- **Bazel version (if compiling from source)**: 0.5.3\r\n- **CUDA/cuDNN version**: CUDA 8.0, cudnn : 5.1.5 \r\n- **GPU model and memory**: Titan X (Maxwell) + Titan X (Pascal) + GTX 1080(Pascal)\r\n- **Exact command to reproduce**: bazel build --config=opt --verbose_failures --config=cuda //tensorflow/tools/pip_package:build_pip_package \r\n\r\nCompiler used : `gcc` \r\n```\r\n-bash-4.2$ gcc --version\r\ngcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)\r\n\r\n```\r\n\r\nOn compiling the source with the hash `1e96d54d9f928c4ea4bf0564ef9900f6bd03acd5` , the compilation goes on smoothly and towards the end produces an error as follows : \r\n`/home/uujjwal/opensource/tensorflow/tensorflow/compiler/xla/service/cpu/BUILD:124:1: C++ compilation of rule '//tensorflow/compiler/xla/service/cpu:cpu_executable' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed`\r\n\r\nI am trying to build with XLA JIT compilation enabled. The problem comes from that. Lower down the long message, following comes as an error : \r\n\r\n```\r\nIn file included from external/llvm/include/llvm/Object/ObjectFile.h:23:0,\r\n                 from external/llvm/include/llvm/DebugInfo/DIContext.h:19,\r\n                 from external/llvm/include/llvm/ExecutionEngine/RuntimeDyld.h:19,\r\n                 from external/llvm/include/llvm/ExecutionEngine/Orc/RTDyldObjectLinkingLayer.h:21,\r\n                 from ./tensorflow/compiler/xla/service/cpu/simple_orc_jit.h:25,\r\n                 from ./tensorflow/compiler/xla/service/cpu/cpu_executable.h:26,\r\n                 from tensorflow/compiler/xla/service/cpu/cpu_executable.cc:16:\r\nexternal/llvm/include/llvm/Object/SymbolicFile.h: In function 'OStream& llvm::object::operator<<(OStream&, const llvm::object::DataRefImpl&)':\r\nexternal/llvm/include/llvm/Object/SymbolicFile.h:48:31: error: expected ')' before 'PRIxPTR'\r\n   OS << \"(\" << format(\"0x%08\" PRIxPTR, D.p) << \" (\" << format(\"0x%08x\", D.d.a)\r\n```\r\nIt seems to be a problem with a header file and hence I'd be grateful for answering this bug.", "comments": ["@mrry Could you kindly take a look at this ? This has been bugging me for several days and I have exhausted all efforts.", "It sounds like this is an issue with building LLVM: the `PRIxPTR` macro isn't defined on your system, but it is on the Ubuntu machines that we use to run the continuous build. Perhaps [this Stack Overflow answer](https://stackoverflow.com/a/30851225/3574081) would be helpful: it suggests that with some toolchains it is necessary to `#define __STDC_FORMAT_MACROS` before using macros like `PRIxPTR`. Perhaps you could try the following modified build command to see if it fixes things (although it doesn't seem like a general solution)?\r\n\r\n```\r\nbazel build --config=opt --copt=\"-D__STDC_FORMAT_MACROS\" --verbose_failures --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n(In the meantime, I'm assigning this to @hawkinsp, since he wrote the external `BUILD` file for LLVM, and he might know what the proper solution is.)", "Thanks. Your fix is working for now. However a long term solution would be very helpful.", "I tried with the following patch and it seems to build successfully:\r\n```diff\r\ndiff --git a/third_party/llvm/llvm.BUILD b/third_party/llvm/llvm.BUILD\r\nindex bd82081..5e8ff70 100644\r\n--- a/third_party/llvm/llvm.BUILD\r\n+++ b/third_party/llvm/llvm.BUILD\r\n@@ -251,6 +251,7 @@ cc_library(\r\n         \"LLVM_ENABLE_STATS\",\r\n         \"__STDC_LIMIT_MACROS\",\r\n         \"__STDC_CONSTANT_MACROS\",\r\n+       \"__STDC_FORMAT_MACROS\",\r\n         \"_DEBUG\",\r\n         \"LLVM_BUILD_GLOBAL_ISEL\",\r\n     ],\r\n```", "I've checked in a tentative fix to this in our internal staging tree.  It should get merged into the github repository in a day or two."]}, {"number": 12997, "title": "Ability to read multi-channel image format", "body": "Though the `tf.decode_image()` function can handle a few different image encodings, all of these encodings can only support a maximum of 4 channels in an image (RGBA).   One format which can support a larger number of channels is TIFF (which is currently not supported in TF, perhaps due to its complex specification?).  It would be convenient if TF could support decoding TIFF or some other format that is able to represent an arbitrary number of channels, `N` (which could be decoded into an `[H, W, N]` shaped tensor).\r\n", "comments": ["Marking as contributions welcome if someone wants to implement this.", "Perhaps it is easier to use `mogrify -format jpg *.tif`", "@facaiy the whole point is to be able to have an image format that could, for example, represent 15 channels.  A single JPEG cannot do this.", "Hi, @edgimar .\r\nI am not clear which one you need:\r\n1. an solution to handle other image format,\r\n2. or, a new parse ops `tf.decode_tiff` (`tf.decode_image` is just a wrapper outside) .\r\n\r\nFor the first one: In fact, `Tensor` supports arbitrary dimensions. So if TIFF or any format desired can be converted to array by Python, we are free to feed them into TensorFlow.\r\n\r\nFor the second one, perhaps the work will be difficult. And moreover, since most operators of `tf.image` seems designed for 3d / 4d nowadays, I don't know whether they are compatible if done.\r\n\r\nAnyway, it is cool if someone wants to implement this.", "I'm looking for a parse op -- something that can be included as part of a TF graph.", "Any update on this? Also interested in Tiff support for tensorflow", "Cross-posting: https://github.com/tensorflow/io/issues/72", "@edgimar TIFF has been added in [tensorflow/io](https://github.com/tensorflow/io). I will close this issue for now. Please take a look in [tensorflow/io](https://github.com/tensorflow/io) and let us know if there are any questions, and feel free to open issue there."]}, {"number": 12996, "title": "restore part of model using Estimator API", "body": "Hi, \r\n\r\nI am trying to restore part of model using tensorflow high level API Estimator,  but I can not find I way.\r\nI can only specify checkpoint_path for Estimator.\r\n\r\nHere is an example.\r\nI what to extract COCO images feature using tf-slim pretrained model resnet_v2, but this pretrained model does not provide \"resnet_v2_152/block1/unit_1/bottleneck_v2/conv2/biases\". So, I need to initialize it to zero.\r\nBut using Estimator, It will find that this biases not in checkpoint and raise a Not found error.\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nimport tensorflow.contrib.slim.python.slim.nets.resnet_v2 as resnet_v2\r\n\r\n\r\ndef cnn_model_fn(features, labels, mode):\r\n    net, end_points = resnet_v2.resnet_v2_152(inputs=features, is_training=mode == tf.estimator.ModeKeys.TRAIN)\r\n    if mode == tf.estimator.ModeKeys.PREDICT:\r\n        return tf.estimator.EstimatorSpec(mode=mode, predictions=net)\r\n    else:\r\n        raise NotImplementedError('only support predict!')\r\n\r\n\r\ndef parse_filename(filename):\r\n    image_string = tf.read_file(filename)\r\n    image_decoded = tf.image.decode_jpeg(image_string, channels=3)\r\n    image_resized = tf.image.resize_images(image_decoded, [256, 256])\r\n    return image_resized\r\n\r\n\r\ndef dataset_input_fn(dataset, num_epochs=None, batch_size=128, shuffle=False, buffer_size=1000, seed=None):\r\n    def input_fn():\r\n        d = dataset.repeat(num_epochs).batch(batch_size)\r\n        if shuffle:\r\n            d = d.shuffle(buffer_size)\r\n        iterator = d.make_one_shot_iterator()\r\n        next_example = iterator.get_next()\r\n        return next_example\r\n\r\n    return input_fn\r\n\r\n\r\nfilenames = sorted(tf.gfile.Glob('/root/data/COCO/download/val2014/*'))\r\ndataset = tf.contrib.data.Dataset.from_tensor_slices(filenames).map(parse_filename)\r\n\r\ninput_fn = dataset_input_fn(dataset, num_epochs=1, batch_size=1, shuffle=False)\r\n\r\nestimator = tf.estimator.Estimator(model_fn=cnn_model_fn, model_dir=None)\r\n\r\nes = estimator.predict(input_fn=input_fn,\r\n                       checkpoint_path='/root/data/checkpoints/resnet_v2_152_2017_04_14/resnet_v2_152.ckpt')\r\nprint(es.__next__())\r\n\r\n\r\nprint(\"Done!\")\r\n\r\n```\r\n\r\nThe error is obvious.\r\n`2017-09-12 20:36:31.231422: W tensorflow/core/framework/op_kernel.cc:1192] Not found: Tensor name \"resnet_v2_152/block1/unit_1/bottleneck_v2/conv2/biases\" not found in checkpoint files /root/data/checkpoints/resnet_v2_152_2017_04_14/resnet_v2_152.ckpt`\r\n\r\n\r\n", "comments": ["This question is better asked on  [StackOverflow](http://stackoverflow.com/questions/tagged/tensorflow) since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!"]}, {"number": 12995, "title": "boringssl sha256 checksum mismatched", "body": "issue #12986 .\r\n\r\n### How to test \r\n\r\n+ [ ] confirmed by #12752 @louiehelm @gunan ", "comments": ["Can one of the admins verify this patch?", "@facaiy, thanks for your PR! By analyzing the history of the files in this pull request, we identified @jart, @tensorflower-gardener and @kirilg to be potential reviewers.", "How can the SHA be off?", "This also happened for gemmlowp.\r\nSomeone mentioned github regenerated all their compressed archive files which can explain all these failures.\r\n\r\nSince we also have a mirror, this is not as simple. I would like to triage this internally and push out the change.", "So the best way is to stop check SHA for Github, right?", "No, we will try to find a stable source for our dependencies. We will always enforce sha checks whenever we depend on other repositories."]}, {"number": 12994, "title": "Steps in getting started guide are incorrect.", "body": "Hi, would appreciate if someone can help me get started. It must be something very trivial, but as a beginner, I did not find an answer anywhere. Looking for help.\r\n\r\n1. I had to refer to stack overflow for basic installation on windows - https://stackoverflow.com/questions/38896424/tensorflow-not-found-in-pip\r\n\r\n2. Even after that I get error as below (just trying import tensorflow as tf)- \r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 18, in swig_import_helper\r\n    fp, pathname, description = imp.find_module('_pywrap_tensorflow', [dirname(__file__)])\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\imp.py\", line 296, in find_module\r\n    raise ImportError(_ERR_MSG.format(name), name=name)\r\nImportError: No module named '_pywrap_tensorflow'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 54, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 28, in <module>\r\n    _pywrap_tensorflow = swig_import_helper()\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 20, in swig_import_helper\r\n    import _pywrap_tensorflow\r\nModuleNotFoundError: No module named '_pywrap_tensorflow'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"gs.py\", line 1, in <module>\r\n    import tensorflow as tf\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in <module>\r\n    from tensorflow.python import *\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 60, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 18, in swig_import_helper\r\n    fp, pathname, description = imp.find_module('_pywrap_tensorflow', [dirname(__file__)])\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\imp.py\", line 296, in find_module\r\n    raise ImportError(_ERR_MSG.format(name), name=name)\r\nImportError: No module named '_pywrap_tensorflow'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 54, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 28, in <module>\r\n    _pywrap_tensorflow = swig_import_helper()\r\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 20, in swig_import_helper\r\n    import _pywrap_tensorflow\r\nModuleNotFoundError: No module named '_pywrap_tensorflow'\r\n\r\n\r\nError importing tensorflow.  Unless you are using bazel,\r\nyou should not try to import tensorflow from its source directory;\r\nplease exit the tensorflow source tree, and relaunch your python interpreter\r\nfrom there.\r\n```\r\nThis is same as https://github.com/tensorflow/tensorflow/issues/1402, which is closed and I could not find a solution anywhere.\r\n\r\nPlease let me know if more information is needed, I am looking forward to get started successfully and learn tensor flow.\r\n------------------------\r\n\r\n### System information\r\n- import tensorflow as tf\r\n- **windows 10\r\n- **binary**:\r\n- **command below doesn't work, downloaded the latest version just now.**:\r\n- **Python version 3.6.3**: \r\n- **Bazel version (if compiling from source)**:\r\n- **CUDA/cuDNN version -- no idea**:\r\n- **GPU model and memory - NA, 32GB TAM**:\r\n- **Exact command to reproduce -- import tensorflow as tf**:\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n~~above command does not work and gives the same error.\r\n", "comments": ["@martinwicke, this seems like a reasonable followup to the multithread in #1402, but specific to Windows. Could you please advise?", "I just went ahead and started using linux. Everything works just great. Thanks!"]}, {"number": 12993, "title": "Different corrupted record Issue with TFRecordReader ", "body": "Hi, I am trying to convert some 11 mn features and labels into TFRecords; I convert my examples into scipy csr/coo and the features are simple 1Dim features. I am trying to make a batch of features of 1000 in a csr and I am able to write it into TFRecordWriter. The files are generated.\r\n The problem is when I try to read it using parse_example, I am trying to create a tensor equivalent to compressed sparse matrix of scipy and I am running into issues. I am ONLY trying to test my tensor values using sess.run(<tensor>) and I am getting this corrupted error. I tried to change different reading formats , FixedFeature, VarLenFeature, but no breakthrough.\r\n  \r\ncorrupted record at 0\r\n\t [[Node: ReaderReadV2 = ReaderReadV2[_device=\"/job:localhost/replica:0/task:0/cpu:0\"](TFRecordReaderV2, input_producer)]]\r\n\r\nHere is how I am trying to parse the TFRecord\r\n\r\n features={\r\n                'feature_data' : tf.FixedLenFeature([],tf.string),\r\n                'feature_row' : tf.FixedLenFeature([],tf.string),\r\n                'feature_col' : tf.FixedLenFeature([], tf.string),\r\n                'feature_shape' : tf.FixedLenFeature([], tf.string)}\r\n#                 'feature_dim2' : tf.FixedLenFeature([1], tf.int64)}\r\n        print 'Reader initialized'\r\n        tfrecord_features = tf.parse_single_example(serialized_example, features)\r\n        fea_data = tf.decode_raw(tfrecord_features['feature_data'], tf.int32)\r\n        fea_row = tf.decode_raw(tfrecord_features['feature_row'], tf.int32)\r\n        fea_col = tf.decode_raw(tfrecord_features['feature_col'], tf.int32)\r\n        fea_shape = tf.decode_raw(tfrecord_features['feature_shape'], tf.int32)\r\n        print 'Parsed example'\r\n        print type(fea_data)\r\n        print type(fea_row)\r\n        ade_features = tf.sparse_to_dense(sparse_indices=[fea_row, fea_col], \r\n                                    sparse_values=fea_data, \r\n                                    output_shape=fea_shape)\r\n       ............\r\n       sess.run(ade_features)\r\n\r\nHere is how I am trying to write the feature.\r\n\r\n writer = tf.python_io.TFRecordWriter(filename)\r\n        #for index in range(features_vectors.shape[0]):\r\n        for iteration, (start, end) in enumerate(batches):\r\n            #print('Writing label index: ' + str(index))\r\n            feature_batch = features_vectors[start:end] # again a csr\r\n            feature_batch = feature_batch.tocoo()\r\n            label_vec = labels[start:end] # csr\r\n            label_vec = label_vec.tocoo()\r\n            example = tf.train.Example(features=tf.train.Features(feature={\r\n                'feature_data' : self.bytes_feature(feature_batch.data.tobytes()),\r\n                'feature_row' : self.bytes_feature(feature_batch.row.tobytes()),\r\n                'feature_col' : self.bytes_feature(feature_batch.col.tobytes()),\r\n                'feature_shape' : self.bytes_feature(np.array(feature_batch.shape, np.int32).tobytes())\r\n            writer.write(example.SerializeToString())\r\n        writer.close()\r\n\r\nI am using tensorflow 1.2.1", "comments": ["There was another line of code which was overwriting TFrecords file with the contents of some dataFrame. Lost of lot of time fixing tensors while there was a trivial mistake elsewhere. Learnt lot about tensors though \ud83d\udc4d "]}, {"number": 12992, "title": "Mixture model with gaussians fails to create", "body": "Hello! \r\n\r\nI have written some code to model GMM and further prob some data points. I already have weights and other params for initialization. Here is the code:\r\n\r\n```\r\nds = tf.contrib.distributions\r\ngaussians = []\r\nfor i in range(0, len(weights)):\r\n    mns = means[i]\r\n    covs = covariances[i]\r\n    gaussians.append(ds.MultivariateNormalFullCovariance(loc=np.array(means).astype(np.float64), covariance_matrix=np.array(covariances).astype(np.float64)))\r\n\r\ngmm = ds.Mixture(\r\n  cat=ds.Categorical(probs=weights.astype(np.float64)),\r\n  components=gaussians\r\n)\r\n```\r\n\r\nHowever in this stage:\r\n` cat=ds.Categorical(probs=weights.astype(np.float64)),`\r\n\r\nthere is this error:\r\n\r\n> Traceback (most recent call last):\r\n>   File \"D:\\Programs\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 560, in merge_with\r\n>     self.assert_same_rank(other)\r\n>   File \"D:\\Programs\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 605, in assert_same_rank\r\n>     other))\r\n> ValueError: Shapes () and (32,) must have the same rank\r\n\r\nI have 32 gaussians per mixture, data has 26 features. \r\nWeights is a list of floats, means - list of floats for each gaussian, covariances - matrix in form of list of lists for each gaussian.\r\n\r\nI started to see why Shapes is just empty, and found this piece of code from tf from exception:\r\n```\r\n  @property\r\n  def batch_shape(self):\r\n    \"\"\"Shape of a single sample from a single event index as a `TensorShape`.\r\n\r\n    May be partially defined or unknown.\r\n\r\n    The batch dimensions are indexes into independent, non-identical\r\n    parameterizations of this distribution.\r\n\r\n    Returns:\r\n      batch_shape: `TensorShape`, possibly unknown.\r\n    \"\"\"\r\n    return self._batch_shape()\r\n```\r\n\r\nSo, the problem might be somewhere in **self._batch_shape()** function. And in categorical.py, I found this lines of code:\r\n \r\n```\r\n def _batch_shape(self):\r\n    return self.logits.get_shape()[:-1]\r\n```\r\n\r\nWhen debugging, I found out that this exact function is hit when Shape check is performed. And **self.logits.get_shape()** does return Shape(32,), but taking **[:-1]** from it, leads to an error. \r\n\r\nIs this an intended behaviour?\r\n\r\n\r\n", "comments": ["This question is better asked on  [StackOverflow](http://stackoverflow.com/questions/tagged/tensorflow) since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!"]}, {"number": 12991, "title": "Correct minor typo in substr docs example", "body": "This fixes a very minor typo.\r\nPython strings should be started and ended with same character.\r\n\r\nShows up at: https://www.tensorflow.org/api_docs/python/tf/substr\r\n\r\n![error in doc webpage](https://user-images.githubusercontent.com/5127634/30311220-d618d526-97c6-11e7-9817-6382edc14036.png)\r\n\r\n\r\nThis was raised at https://github.com/malmaud/TensorFlow.jl/issues/318\r\nby @shencebebetterme ", "comments": ["Can one of the admins verify this patch?"]}, {"number": 12990, "title": "Does tensorflow is used for content based recommendations?", "body": "Hi,\r\nI wanted to perform content based recommendation (context based) but I did not find any example of tensor flow doing it.can we use tensor flow for doing content based recommendations. ", "comments": ["This question is better asked on  [StackOverflow](http://stackoverflow.com/questions/tagged/tensorflow) since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!", "Hi @dilipbobby,\r\nDid you find anything with content based?\r\nthanks", "No ! not yet ! I worked out that with normal python code.I will look into how to perform content based recommendations using tensor-flow when I have some free time. "]}, {"number": 12989, "title": "[ImgBot] optimizes images", "body": "Hey there. I've just optimized all of your images. They are the same dimensions and quality as before, only they take up less space now.\r\n\r\n\\tensorflow\\examples\\android\\res\\drawable-xxhdpi\\ic_launcher.png (16.04%))\r\n\\tensorflow\\contrib\\factorization\\g3doc\\gmm.png (61.79%))\r\n\\tensorflow\\core\\profiler\\g3doc\\profiler_ui.jpg (12.02%))\r\n\\tensorflow\\contrib\\pi_examples\\label_image\\data\\grace_hopper.jpg (4.83%))\r\n\\tensorflow\\contrib\\factorization\\g3doc\\kmeans.png (61.21%))\r\n\\tensorflow\\contrib\\factorization\\g3doc\\wals.png (3.51%))\r\n\\tensorflow\\core\\profiler\\g3doc\\code_timeline.png (39.87%))\r\n\\tensorflow\\contrib\\kernel_methods\\g3doc\\acc_vs_outdim.png (13.7%))\r\n\\tensorflow\\core\\lib\\png\\testdata\\lena_rgba.png (5.21%))\r\n\\tensorflow\\contrib\\kernel_methods\\g3doc\\acc-vs-trn_time.png (14.03%))\r\n\\tensorflow\\contrib\\kernel_methods\\g3doc\\kernel_mapping.png (2.08%))\r\n\\tensorflow\\contrib\\linear_optimizer\\kernels\\g3doc\\newton.png (38.51%))\r\n\\tensorflow\\core\\lib\\jpeg\\testdata\\medium.jpg (7.52%))\r\n\\tensorflow\\core\\profiler\\g3doc\\graph_timeline.png (0.3%))\r\n\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\g3doc\\svm.png (57.3%))\r\n\\tensorflow\\core\\lib\\jpeg\\testdata\\small.jpg (26.06%))\r\n\\tensorflow\\core\\profiler\\g3doc\\scope_timeline.png (45.94%))\r\n\\tensorflow\\examples\\android\\res\\drawable-hdpi\\ic_action_info.png (23.61%))\r\n\\tensorflow\\examples\\ios\\benchmark\\data\\grace_hopper.jpg (11.77%))\r\n\\tensorflow\\examples\\label_image\\data\\grace_hopper.jpg (4.83%))\r\n\\tensorflow\\contrib\\linear_optimizer\\kernels\\g3doc\\mod_newton.png (34.1%))\r\n\\tensorflow\\examples\\android\\res\\drawable-mdpi\\ic_launcher.png (8.74%))\r\n\\tensorflow\\examples\\android\\res\\drawable-hdpi\\ic_launcher.png (10.83%))\r\n\\tensorflow\\examples\\ios\\camera\\data\\grace_hopper.jpg (11.77%))\r\n\\tensorflow\\examples\\android\\res\\drawable-xhdpi\\ic_action_info.png (23.69%))\r\n\\tensorflow\\examples\\multibox_detector\\data\\surfers.jpg (8.2%))\r\n\\tensorflow\\examples\\android\\res\\drawable-hdpi\\tile.9.png (30.1%))\r\n\\tensorflow\\examples\\android\\res\\drawable-xhdpi\\ic_launcher.png (12.39%))\r\n\\tensorflow\\contrib\\linear_optimizer\\kernels\\g3doc\\newton_compare_experiment.png (35.35%))\r\n\\tensorflow\\examples\\android\\res\\drawable-mdpi\\ic_action_info.png (23.61%))\r\n\\tensorflow\\examples\\tutorials\\deepdream\\pilatus800.jpg (35.75%))\r\n\\tensorflow\\contrib\\verbs\\design_diagram.png (44.22%))\r\n\\tensorflow\\examples\\ios\\simple\\data\\grace_hopper.jpg (11.77%))\r\n\\tensorflow\\examples\\android\\res\\drawable-xxhdpi\\ic_action_info.png (25.65%))\r\n\\tensorflow\\core\\lib\\png\\testdata\\lena_gray.png (24.95%))", "comments": ["@ImgBotApp, thanks for your PR! By analyzing the history of the files in this pull request, we identified @tensorflower-gardener to be a potential reviewer.", "Can one of the admins verify this patch?", "Thanks! Since these are binaries, for security reasons we'll probably want to run the optimizer ourselves. How did compress them?", "ImgBot uses Imagemagick - https://github.com/dlemstra/Magick.NET - utilizing the `LosslessCompress` routine\r\n\r\nsee\r\nhttps://github.com/dabutvin/ImgBot/blob/78efe1179df81acb9990bbba52cee072e6ac42d9/ImgBot.Function/CompressImages.cs#L64-L89\r\n\r\nThis bot is designed as a GitHub app that you can install into a GitHub repo.\r\n\r\nhttps://github.com/apps/ImgBot", "@drpngx what should be the next steps here?", "Thank you @dabutvin sorry it dropped off my list.\r\n\r\n@MarkDaoust @mhyttsten Any suggestions here?", "I can recompress the images, but I'm not sure about the value of doing this, on github.\r\n\r\nGit stores the history, so while looking at an image will be more efficient, doesn't this just add bloat for anyone doing a git clone (without using the --depth flag)? \r\n\r\nIsn't the right solution to move these to tensorflow.org and compress them there?\r\n\r\n\r\n", "Technically, no images >20k should be in the repo. We once had a presubmit for that, but not sure it's doing its job. Especially the images in various g3doc subfolders seem very suspect.\r\n\r\nThose should probably be deleted (the folders) -- they don't belong on github at all, docs_srcs should be it.", "I will close this PR -- I do like the bot though, it's very cool!"]}, {"number": 12988, "title": "android //tensorflow:libtensorflow.so build fails due to missing build target", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 14.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: master\r\n- **Python version**: 3.6.2\r\n- **Bazel version (if compiling from source)**: 0.5.4\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**:\r\n\r\n```\r\nexport CC_OPT_FLAGS=\"-march=armv7-a -std=c++11\"\r\nyes '' | ./configure\r\nbazel build --config=opt --verbose_failures //tensorflow/contrib/android:libtensorflow_inference.so //tensorflow:libtensorflow.so --crosstool_top=//external:android/crosstool --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cpu=armeabi-v7a\r\n```\r\n\r\n### Describe the problem\r\n`//tensorflow/c/eager:c_api` depends on `//tensorflow/c/eager:c_api_internal` when building with `//tensorflow:android`, but `:c_api_internal` doesn't exist.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/eager/BUILD#L19\r\n\r\n### Source code / logs\r\n\r\nError:\r\n```\r\nERROR: /home/travis/tensorflow/tensorflow/c/eager/BUILD:11:1: in deps attribute of cc_library rule //tensorflow/c/eager:c_api: target '//tensorflow/c/eager:c_api_internal' does not exist. Since this rule was created by the macro 'tf_cuda_library', the error might have been caused by the macro implementation in /home/travis/tensorflow/tensorflow/tensorflow.bzl:669:12\r\n```\r\n\r\nFull build: https://travis-ci.org/luk-ai/build-tensorflow/builds/274455610", "comments": ["Think it should be `//tensorflow/c:c_api_internal` instead.\r\n```\r\nsed -i 's@\":c_api_internal\"@\"//tensorflow/c:c_api_internal\"@' tensorflow/c/eager/BUILD\r\n```", "Once that's fixed there's also a missing header file error. Seems like c/eager is all messed up with regards to Android.\r\n\r\n```\r\nERROR: /home/travis/tensorflow/tensorflow/c/eager/BUILD:11:1: C++ compilation of rule '//tensorflow/c/eager:c_api' failed (Exit 1): clang failed: error executing command \r\n  (cd /home/travis/.cache/bazel/_bazel_travis/c397b760afc31b444fffb10b0086dea5/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\r\n    TF_NEED_CUDA=0 \\\r\n    TF_NEED_OPENCL=0 \\\r\n  external/androidndk/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/clang -gcc-toolchain external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64 -fpic -ffunction-sections -funwind-tables -fstack-protector-strong -Wno-invalid-command-line-argument -Wno-unused-command-line-argument -no-canonical-prefixes -fno-integrated-as -target armv7-none-linux-androideabi '-march=armv7-a' '-mfloat-abi=softfp' '-mfpu=vfpv3-d16' -mthumb -Os -g -DNDEBUG '-march=armv7-a' '-march=armv7-a' '-std=c++11' -MD -MF bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/bin/tensorflow/c/eager/_objs/c_api/tensorflow/c/eager/c_api.d '-frandom-seed=bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/bin/tensorflow/c/eager/_objs/c_api/tensorflow/c/eager/c_api.o' -DEIGEN_MPL2_ONLY -iquote . -iquote bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles -iquote external/protobuf_archive -iquote bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf_archive -iquote external/bazel_tools -iquote bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -iquote external/eigen_archive -iquote bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/local_config_sycl -iquote external/nsync -iquote bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/nsync -isystem external/protobuf_archive/src -isystem bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf_archive/src -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/eigen_archive -isystem bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/eigen_archive -isystem external/nsync/public -isystem bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/genfiles/external/nsync/public -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions '-ftemplate-depth=900' '-mfpu=neon' '-std=c++11' -DTF_LEAN_BINARY -O2 -Wno-narrowing -fomit-frame-pointer '--sysroot=external/androidndk/ndk/platforms/android-23/arch-arm' -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c tensorflow/c/eager/c_api.cc -o bazel-out/arm-linux-androideabi-clang3.8-v7a-gnu-libstdcpp-opt/bin/tensorflow/c/eager/_objs/c_api/tensorflow/c/eager/c_api.o)\r\nIn file included from tensorflow/c/eager/c_api.cc:26:\r\nIn file included from ./tensorflow/c/eager/runtime.h:31:\r\nIn file included from ./tensorflow/core/platform/fingerprint.h:82:\r\n./tensorflow/core/platform/default/fingerprint.h:19:10: fatal error: 'farmhash.h' file not found\r\n#include <farmhash.h>\r\n         ^\r\n1 error generated.\r\nINFO: Elapsed time: 907.512s, Critical Path: 40.08s\r\nFAILED: Build did NOT complete successfully\r\n```", "@d4l3k //tensorflow:libtensorflow.so is a non-mobile target and is not expected to build for Android. libtensorflow_inference.so should contain everything you need for inference on Android (no training is supported at this time). With the exception of the Java API JNI interface all valid Android targets start with the prefix \"android_\".", "@andrewharp, I'm trying to get the Go API working on Android but it requires the full C API. Any suggestions about how to go about that? Seems surprising that the C API isn't portable", "@d4l3k Sorry, not too familiar with Go API -- what is missing from the C API supported by the Android targets?", "@andrewharp The Go API binds to the C API. Whereas the Android `libtensorflow_inference.so` is completely different.\r\n\r\nhttps://gist.github.com/d4l3k/ea9119dfe11d1c12b0494d570ade289f\r\n\r\n## Android\r\n```\r\n00098959 g    DF .text\t000004c4  VERS_1.0    Java_org_tensorflow_Session_run\r\n00098905 g    DF .text\t00000054  VERS_1.0    Java_org_tensorflow_Session_delete\r\n000988f1 g    DF .text\t00000012  VERS_1.0    Java_org_tensorflow_Session_allocate\r\n00096f55 g    DF .text\t0000000a  VERS_1.0    Java_org_tensorflow_Graph_allocate\r\n00096f61 g    DF .text\t0000000e  VERS_1.0    Java_org_tensorflow_Graph_delete\r\n00096f71 g    DF .text\t00000068  VERS_1.0    Java_org_tensorflow_Graph_operation\r\n00096fd9 g    DF .text\t000000e8  VERS_1.0    Java_org_tensorflow_Graph_importGraphDef\r\n000987d5 g    DF .text\t0000011c  VERS_1.0    Java_org_tensorflow_Session_allocate2\r\n000982e1 g    DF .text\t00000084  VERS_1.0    Java_org_tensorflow_Operation_dtype\r\n0009840d g    DF .text\t00000294  VERS_1.0    Java_org_tensorflow_SavedModelBundle_load\r\n000970c1 g    DF .text\t000000b4  VERS_1.0    Java_org_tensorflow_Graph_toGraphDef\r\n00098365 g    DF .text\t0000006c  VERS_1.0    Java_org_tensorflow_Operation_inputListLength\r\n00098091 g    DF .text\t00000030  VERS_1.0    Java_org_tensorflow_Operation_numOutputs\r\n00097191 g    DF .text\t00000078  VERS_1.0    Java_org_tensorflow_OperationBuilder_allocate\r\n00098055 g    DF .text\t0000003c  VERS_1.0    Java_org_tensorflow_Operation_type\r\n00097209 g    DF .text\t0000004a  VERS_1.0    Java_org_tensorflow_OperationBuilder_finish\r\n0009812d g    DF .text\t000001b4  VERS_1.0    Java_org_tensorflow_Operation_shape\r\n00097255 g    DF .text\t00000054  VERS_1.0    Java_org_tensorflow_OperationBuilder_addInput\r\n000980c1 g    DF .text\t0000006c  VERS_1.0    Java_org_tensorflow_Operation_outputListLength\r\n000972a9 g    DF .text\t00000194  VERS_1.0    Java_org_tensorflow_OperationBuilder_addInputList\r\n00099ed1 g    DF .text\t0000003c  VERS_1.0    Java_org_tensorflow_TensorFlow_registeredOpList\r\n0009743d g    DF .text\t00000054  VERS_1.0    Java_org_tensorflow_OperationBuilder_addControlInput\r\n00099eb9 g    DF .text\t00000018  VERS_1.0    Java_org_tensorflow_TensorFlow_version\r\n00097491 g    DF .text\t0000004c  VERS_1.0    Java_org_tensorflow_OperationBuilder_setDevice\r\n00099e31 g    DF .text\t00000088  VERS_1.0    Java_org_tensorflow_Tensor_readNDArray\r\n000974dd g    DF .text\t0000007e  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrString\r\n0009755d g    DF .text\t00000054  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrInt\r\n00099abd g    DF .text\t000000bc  VERS_1.0    Java_org_tensorflow_Tensor_scalarInt\r\n000975b1 g    DF .text\t0000011a  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrIntList\r\n000999e9 g    DF .text\t000000d4  VERS_1.0    Java_org_tensorflow_Tensor_scalarDouble\r\n00099931 g    DF .text\t000000b8  VERS_1.0    Java_org_tensorflow_Tensor_scalarFloat\r\n000976cd g    DF .text\t00000052  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrFloat\r\n000996b5 g    DF .text\t0000027c  VERS_1.0    Java_org_tensorflow_Tensor_setValue\r\n00097721 g    DF .text\t0000013e  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrFloatList\r\n00099cd9 g    DF .text\t00000158  VERS_1.0    Java_org_tensorflow_Tensor_scalarBytes\r\n00099c49 g    DF .text\t00000090  VERS_1.0    Java_org_tensorflow_Tensor_scalarBoolean\r\n00097861 g    DF .text\t00000052  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrBool\r\n00099b79 g    DF .text\t000000d0  VERS_1.0    Java_org_tensorflow_Tensor_scalarLong\r\n000995f1 g    DF .text\t00000030  VERS_1.0    Java_org_tensorflow_Tensor_dtype\r\n000978b5 g    DF .text\t000001a6  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrBoolList\r\n000995a1 g    DF .text\t00000050  VERS_1.0    Java_org_tensorflow_Tensor_buffer\r\n00097a5d g    DF .text\t00000052  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrType\r\n00097ab1 g    DF .text\t00000104  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrTypeList\r\n00099621 g    DF .text\t00000094  VERS_1.0    Java_org_tensorflow_Tensor_shape\r\n00097bb5 g    DF .text\t00000088  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrTensor\r\n000994b9 g    DF .text\t000000d8  VERS_1.0    Java_org_tensorflow_Tensor_allocateScalarBytes\r\n00097c3d g    DF .text\t0000013c  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrTensorList\r\n0009933d g    DF .text\t0000017c  VERS_1.0    Java_org_tensorflow_Tensor_allocate\r\n00097d79 g    DF .text\t00000144  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrShape\r\n00099591 g    DF .text\t0000000e  VERS_1.0    Java_org_tensorflow_Tensor_delete\r\n00097ebd g    DF .text\t0000015a  VERS_1.0    Java_org_tensorflow_OperationBuilder_setAttrStringList\r\n00098019 g    DF .text\t0000003c  VERS_1.0    Java_org_tensorflow_Operation_name\r\n```\r\n## C\r\n```\r\n00000000002d4820 g    DF .text\t000000000000003a  VERS_1.0    TF_SetAttrType\r\n00000000002d42d0 g    DF .text\t0000000000000070  VERS_1.0    TF_DeleteDeviceList\r\n00000000002d5460 g    DF .text\t0000000000000190  VERS_1.0    TF_OperationGetAttrTensor\r\n00000000002db710 g    DF .text\t0000000000000052  VERS_1.0    TF_ImportGraphDefOptionsAddControlDependency\r\n00000000002d3d60 g    DF .text\t0000000000000029  VERS_1.0    TF_SetTarget\r\n00000000002d6b50 g    DF .text\t00000000000000d3  VERS_1.0    TF_StringDecode\r\n00000000002df7a0 g    DF .text\t000000000000006b  VERS_1.0    TF_DeleteSessionOptions\r\n00000000002d3ff0 g    DF .text\t00000000000001b2  VERS_1.0    TF_Reset\r\n00000000002d4780 g    DF .text\t0000000000000099  VERS_1.0    TF_SetAttrBoolList\r\n00000000002da4c0 g    DF .text\t000000000000037c  VERS_1.0    TF_SetAttrTensorShapeProtoList\r\n00000000002d3cb0 g    DF .text\t000000000000000a  VERS_1.0    TF_NumDims\r\n00000000002d4600 g    DF .text\t000000000000003c  VERS_1.0    TF_SetAttrString\r\n00000000002d5c90 g    DF .text\t000000000000014a  VERS_1.0    TF_NewSession\r\n00000000002d66e0 g    DF .text\t00000000000000a9  VERS_1.0    TF_SetConfig\r\n00000000002d9c90 g    DF .text\t0000000000000170  VERS_1.0    TF_SetAttrStringList\r\n00000000002d3d90 g    DF .text\t0000000000000027  VERS_1.0    TF_NewBuffer\r\n00000000002d49a0 g    DF .text\t000000000000000a  VERS_1.0    TF_OperationNumOutputs\r\n00000000002e4680 g    DF .text\t00000000000006f9  VERS_1.0    TF_LoadSessionFromSavedModel\r\n00000000002e2cb0 g    DF .text\t00000000000004ef  VERS_1.0    TF_NewWhile\r\n00000000002d5de0 g    DF .text\t000000000000008c  VERS_1.0    TF_CloseSession\r\n00000000002d8fe0 g    DF .text\t0000000000000102  VERS_1.0    TF_DeleteImportGraphDefOptions\r\n00000000002dae20 g    DF .text\t00000000000001d5  VERS_1.0    TF_OperationOutputListLength\r\n00000000002df0f0 g    DF .text\t00000000000002ac  VERS_1.0    TF_SetAttrTensorList\r\n00000000002d4860 g    DF .text\t000000000000003c  VERS_1.0    TF_SetAttrTypeList\r\n00000000002defa0 g    DF .text\t000000000000014a  VERS_1.0    TF_SetAttrTensor\r\n00000000002d6080 g    DF .text\t0000000000000404  VERS_1.0    TF_PRunSetup\r\n00000000002dcdd0 g    DF .text\t000000000000010a  VERS_1.0    TF_GraphOperationByName\r\n00000000002d4a80 g    DF .text\t00000000000000d8  VERS_1.0    TF_OperationOutputNumConsumers\r\n00000000002d7970 g    DF .text\t000000000000012b  VERS_1.0    TF_OperationGetAttrFloatList\r\n00000000002d7de0 g    DF .text\t0000000000000171  VERS_1.0    TF_OperationGetAttrStringList\r\n00000000002dfb80 g    DF .text\t0000000000000012  VERS_1.0    TF_GraphImportGraphDef\r\n00000000002d39e0 g    DF .text\t000000000000019e  VERS_1.0    TF_NewTensor\r\n00000000002dde70 g    DF .text\t00000000000001a9  VERS_1.0    TF_ImportGraphDefOptionsRemapControlDependency\r\n00000000002e2200 g    DF .text\t00000000000002fc  VERS_1.0    TF_SetAttrTensorShapeProto\r\n00000000002d45b0 g    DF .text\t0000000000000028  VERS_1.0    TF_SetDevice\r\n00000000002d44e0 g    DF .text\t00000000000000cf  VERS_1.0    TF_NewOperation\r\n00000000002d6640 g    DF .text\t0000000000000096  VERS_1.0    TF_OperationToNodeDef\r\n00000000002e2500 g    DF .text\t0000000000000103  VERS_1.0    TF_SetAttrValueProto\r\n00000000002d4980 g    DF .text\t000000000000000e  VERS_1.0    TF_OperationOpType\r\n00000000002d5140 g    DF .text\t00000000000000ce  VERS_1.0    TF_OperationGetAttrBool\r\n00000000002d45e0 g    DF .text\t000000000000000a  VERS_1.0    TF_AddInput\r\n00000000002d49e0 g    DF .text\t000000000000009e  VERS_1.0    TF_OperationInput\r\n00000000002d52e0 g    DF .text\t0000000000000177  VERS_1.0    TF_OperationGetAttrShape\r\n00000000002d6e90 g    DF .text\t000000000000027d  VERS_1.0    TF_OperationGetAttrShapeList\r\n00000000002dc810 g    DF .text\t000000000000006f  VERS_1.0    TF_ImportGraphDefOptionsAddReturnOutput\r\n00000000002d3d30 g    DF .text\t0000000000000028  VERS_1.0    TF_NewSessionOptions\r\n00000000002d3e70 g    DF .text\t00000000000000ac  VERS_1.0    TF_NewDeprecatedSession\r\n00000000002d55f0 g    DF .text\t000000000000021e  VERS_1.0    TF_OperationGetAttrTensorList\r\n00000000002d69b0 g    DF .text\t0000000000000097  VERS_1.0    TF_DeviceListMemoryBytes\r\n00000000002d3fb0 g    DF .text\t0000000000000038  VERS_1.0    TF_DeleteDeprecatedSession\r\n00000000002d4970 g    DF .text\t000000000000000e  VERS_1.0    TF_OperationName\r\n00000000002d5b10 g    DF .text\t0000000000000020  VERS_1.0    TF_ImportGraphDefOptionsNumReturnOutputs\r\n00000000002d3b80 g    DF .text\t000000000000005a  VERS_1.0    TF_AllocateTensor\r\n00000000002d7690 g    DF .text\t00000000000000a9  VERS_1.0    TF_OperationGetAttrValueProto\r\n00000000002e14e0 g    DF .text\t000000000000055f  VERS_1.0    TF_SessionRun\r\n00000000002d9a40 g    DF .text\t0000000000000138  VERS_1.0    TF_ColocateWith\r\n00000000002d49c0 g    DF .text\t000000000000000a  VERS_1.0    TF_OperationNumInputs\r\n00000000002d37a0 g    DF .text\t0000000000000077  VERS_1.0    TF_DeleteStatus\r\n00000000002d44c0 g    DF .text\t000000000000001f  VERS_1.0    TF_DeviceListCount\r\n00000000002e0060 g    DF .text\t00000000000004de  VERS_1.0    TF_SessionPRunSetup\r\n00000000002d7f60 g    DF .text\t00000000000001bb  VERS_1.0    TF_OperationGetAttrTensorShapeProtoList\r\n00000000002e1fa0 g    DF .text\t000000000000025e  VERS_1.0    TF_GetAllOpList\r\n00000000002d4f90 g    DF .text\t00000000000000ce  VERS_1.0    TF_OperationGetAttrInt\r\n00000000002d7aa0 g    DF .text\t0000000000000128  VERS_1.0    TF_OperationGetAttrBoolList\r\n00000000002d4680 g    DF .text\t000000000000003c  VERS_1.0    TF_SetAttrIntList\r\n00000000002d5060 g    DF .text\t00000000000000d1  VERS_1.0    TF_OperationGetAttrFloat\r\n00000000002e2ba0 g    DF .text\t0000000000000076  VERS_1.0    TF_FinishOperation\r\n00000000002d5210 g    DF .text\t00000000000000cd  VERS_1.0    TF_OperationGetAttrType\r\n00000000002dd380 g    DF .text\t0000000000000446  VERS_1.0    TF_AddGradients\r\n0000000000000000 g    DO *ABS*\t0000000000000000  VERS_1.0    VERS_1.0\r\n00000000002d3ca0 g    DF .text\t0000000000000008  VERS_1.0    TF_TensorType\r\n00000000002d4b60 g    DF .text\t0000000000000100  VERS_1.0    TF_OperationOutputConsumers\r\n00000000002e37f0 g    DF .text\t0000000000000e32  VERS_1.0    TF_FinishWhileHelper\r\n00000000002d3cc0 g    DF .text\t000000000000000e  VERS_1.0    TF_Dim\r\n00000000002d9160 g    DF .text\t0000000000000145  VERS_1.0    TF_GraphGetTensorNumDims\r\n00000000002dbd00 g    DF .text\t0000000000000363  VERS_1.0    TF_GraphGetTensorShape\r\n00000000002d4280 g    DF .text\t0000000000000020  VERS_1.0    TF_GetOpList\r\n00000000002d3be0 g    DF .text\t000000000000004b  VERS_1.0    TF_TensorMaybeMove\r\n00000000002d49b0 g    DF .text\t000000000000000a  VERS_1.0    TF_OperationOutputType\r\n00000000002df900 g    DF .text\t000000000000010a  VERS_1.0    TF_GraphToGraphDef\r\n00000000002d4c60 g    DF .text\t0000000000000059  VERS_1.0    TF_OperationNumControlInputs\r\n00000000002d5900 g    DF .text\t0000000000000028  VERS_1.0    TF_NewGraph\r\n00000000002d7d00 g    DF .text\t00000000000000e0  VERS_1.0    TF_OperationGetAttrTensorShapeProto\r\n00000000002d48a0 g    DF .text\t00000000000000cf  VERS_1.0    TF_SetAttrShape\r\n00000000002d4400 g    DF .text\t00000000000000bd  VERS_1.0    TF_DeprecatedSessionListDevices\r\n00000000002db000 g    DF .text\t00000000000001d6  VERS_1.0    TF_OperationInputListLength\r\n00000000002d95d0 g    DF .text\t00000000000002ba  VERS_1.0    TF_AddInputList\r\n00000000002d3e20 g    DF .text\t000000000000002c  VERS_1.0    TF_DeleteBuffer\r\n00000000002d7bd0 g    DF .text\t0000000000000127  VERS_1.0    TF_OperationGetAttrTypeList\r\n00000000002d38d0 g    DF .text\t0000000000000014  VERS_1.0    TF_GetCode\r\n00000000002e4630 g    DF .text\t0000000000000050  VERS_1.0    TF_FinishWhile\r\n00000000002d49d0 g    DF .text\t000000000000000a  VERS_1.0    TF_OperationInputType\r\n00000000002d3cf0 g    DF .text\t0000000000000012  VERS_1.0    TF_TensorData\r\n00000000002d6790 g    DF .text\t0000000000000107  VERS_1.0    TF_DeviceListName\r\n00000000002db2a0 g    DF .text\t000000000000008d  VERS_1.0    TF_DeleteGraph\r\n00000000002df810 g    DF .text\t00000000000000f0  VERS_1.0    TF_ExtendGraph\r\n00000000002d42a0 g    DF .text\t0000000000000023  VERS_1.0    TF_DeleteLibraryHandle\r\n00000000002e1080 g    DF .text\t0000000000000458  VERS_1.0    TF_PRun\r\n00000000002d4740 g    DF .text\t000000000000003f  VERS_1.0    TF_SetAttrBool\r\n00000000002d3cd0 g    DF .text\t0000000000000012  VERS_1.0    TF_TensorByteSize\r\n00000000002db3a0 g    DF .text\t00000000000000e6  VERS_1.0    TF_DeleteSession\r\n00000000002ddcb0 g    DF .text\t00000000000001b8  VERS_1.0    TF_ImportGraphDefOptionsAddInputMapping\r\n00000000002d7840 g    DF .text\t0000000000000127  VERS_1.0    TF_OperationGetAttrIntList\r\n00000000002d3780 g    DF .text\t0000000000000017  VERS_1.0    TF_NewStatus\r\n00000000002d4cc0 g    DF .text\t00000000000000f0  VERS_1.0    TF_OperationGetControlInputs\r\n00000000002d5930 g    DF .text\t00000000000000ef  VERS_1.0    TF_GraphNextOperation\r\n00000000002d3770 g    DF .text\t000000000000000d  VERS_1.0    TF_DataTypeSize\r\n00000000002d3e50 g    DF .text\t000000000000001f  VERS_1.0    TF_GetBuffer\r\n00000000002dc240 g    DF .text\t0000000000000337  VERS_1.0    TF_GraphSetTensorShape\r\n00000000002d3c30 g    DF .text\t0000000000000068  VERS_1.0    TF_DeleteTensor\r\n00000000002d4e90 g    DF .text\t00000000000000f8  VERS_1.0    TF_OperationGetControlOutputs\r\n00000000002d4990 g    DF .text\t000000000000000e  VERS_1.0    TF_OperationDevice\r\n00000000002da130 g    DF .text\t00000000000001b7  VERS_1.0    TF_SetAttrShapeList\r\n00000000002d46c0 g    DF .text\t000000000000003a  VERS_1.0    TF_SetAttrFloat\r\n00000000002d5e70 g    DF .text\t0000000000000012  VERS_1.0    TF_DeletePRunHandle\r\n00000000002d5a20 g    DF .text\t0000000000000071  VERS_1.0    TF_NewImportGraphDefOptions\r\n00000000002d4640 g    DF .text\t000000000000003a  VERS_1.0    TF_SetAttrInt\r\n00000000002d3dc0 g    DF .text\t0000000000000053  VERS_1.0    TF_NewBufferFromString\r\n00000000002d7740 g    DF .text\t00000000000000f5  VERS_1.0    TF_OperationGetAttrString\r\n00000000002d3820 g    DF .text\t00000000000000a3  VERS_1.0    TF_SetStatus\r\n00000000002d3760 g    DF .text\t000000000000000d  VERS_1.0    TF_Version\r\n00000000002d38f0 g    DF .text\t000000000000001e  VERS_1.0    TF_Message\r\n00000000002d4700 g    DF .text\t000000000000003c  VERS_1.0    TF_SetAttrFloatList\r\n00000000002d5aa0 g    DF .text\t0000000000000027  VERS_1.0    TF_ImportGraphDefOptionsSetPrefix\r\n00000000002dfa10 g    DF .text\t0000000000000164  VERS_1.0    TF_GraphImportGraphDefWithReturnOutputs\r\n00000000002e1a40 g    DF .text\t000000000000055f  VERS_1.0    TF_SessionPRun\r\n00000000002d4340 g    DF .text\t00000000000000bd  VERS_1.0    TF_SessionListDevices\r\n00000000002d3d10 g    DF .text\t000000000000001d  VERS_1.0    TF_StringEncodedSize\r\n00000000002d8780 g    DF .text\t00000000000006e1  VERS_1.0    TF_OperationGetAttrMetadata\r\n00000000002d45f0 g    DF .text\t000000000000000a  VERS_1.0    TF_AddControlInput\r\n00000000002e0c20 g    DF .text\t0000000000000458  VERS_1.0    TF_Run\r\n00000000002d41b0 g    DF .text\t00000000000000ce  VERS_1.0    TF_LoadLibrary\r\n00000000002d4db0 g    DF .text\t00000000000000d8  VERS_1.0    TF_OperationNumControlOutputs\r\n00000000002d68a0 g    DF .text\t0000000000000107  VERS_1.0    TF_DeviceListType\r\n00000000002db390 g    DF .text\t000000000000000a  VERS_1.0    TF_AbortWhile\r\n00000000002d7290 g    DF .text\t000000000000013b  VERS_1.0    TF_StringEncode\r\n00000000002d3f20 g    DF .text\t000000000000008c  VERS_1.0    TF_CloseDeprecatedSession\r\n```", "The Java API actually interfaces with TF through the C API, so most of the functionality needed should be compiled in already -- It's just possible that it gets stripped out at link time if it's not accessed via a Java JNI function in order to save space.", "FYI, you need to modify `tensorflow/contrib/android/jni/version_script.lds`\r\n\r\n```diff\r\nVERS_1.0 {\r\n  # Export JNI symbols.\r\n  global:\r\n    Java_*;\r\n    JNI_OnLoad;\r\n    JNI_OnUnload;\r\n+    *TF_*;\r\n+    *TFE_*;\r\n\r\n  # Hide everything else.\r\n  local:\r\n    *;\r\n};\r\n```\r\n\r\nhttps://github.com/luk-ai/tensorflow/commit/2814fa49f9cc1b36a2e3966352383aef982a49be#diff-df6db502bb3780540dc626b51c895c42", "Hi all,\r\n I'm also facing issues when compiling the libraries for android.\r\nMy intention is to link the library (say libtensorflow_inference.so) to a native c code that runs from the shell with no Java involved.\r\nWhen I compile the android libraries, the build succeed but the symbols are not like extern c symbols but more like c++ symbols with decorations. I can see the symbols by using readelf on the resulted library.\r\n\r\nThe build command I ran is:\r\nbazel build  --config=android //tensorflow/examples/android:tensorflow_native_libs --cpu=armeabi-v7a --verbose_failures --copt=-g --copt=-fPIC\r\nI also tried it without the -g and without the -fPIC with no change.\r\n\r\nThe c code did not link with the libraries, unless I also linked the code with \r\n-l:libandroid_tensorflow_inference_jni.lo\r\n\r\nbut still when I try to run the application it says:\r\nCANNOT LINK EXECUTABLE: cannot find \"libtensorflow_inference.so\" from verneed[1] in DT_NEEDED list for \"./dczoom_native\"\r\npage record for 0xf769203c was not found (block_size=16)\r\n\r\nAlthough the library is in the path and I added LD_LIBRARY_PATH=./; before running the application.\r\n\r\nThen I added the exports to tensorflow/contrib/android/jni/version_script.lds. Now it links without adding -l:libandroid_tensorflow_inference_jni.lo but still the symbols seems to be C++ mingled and not extern \"C\".\r\n\r\nfor example:\r\n00d501ec  00003216 R_ARM_JUMP_SLOT   000bb355   TF_NewStatus\r\n50: 000bb355    14 FUNC    GLOBAL DEFAULT   10 TF_NewStatus@@VERS_1.0\r\n\r\nHow did you produce the symbol table above? And what should I do to enable the executable succeed with loading the dynamic library in runtime?\r\n\r\nThanks.\r\n Guy.", "@andrewharp  @d4l3k Think you , I got symbols, but I can't use it. \r\n\r\n    08-13 06:05:26.290 12497 12497 E AndroidRuntime: java.lang.UnsatisfiedLinkError: dlopen failed: library \"bazel-out/android-armeabi-v7a-opt/bin/tensorflow/contrib/android/libtensorflow_inference.so\" not found\r\n    08-13 06:05:26.290 12497 12497 E AndroidRuntime: \tat java.lang.Runtime.loadLibrary0(Runtime.java:989)\r\n    08-13 06:05:26.290 12497 12497 E AndroidRuntime: \tat java.lang.System.loadLibrary(System.java:1562)\r\n\r\n`arm-linux-androideabi-readelf -a libtensorflow_inference.so`\r\n\r\n    Version definition section '.gnu.version_d' contains 2 entries:\r\n      Addr: 0x00000000000052e0  Offset: 0x0052e0  Link: 2 (.dynstr)  000000: Rev: 1  Flags: BASE   \r\n    Index: 1  Cnt: 1  Name: bazel-out/android-armeabi-v7a-opt/bin/tensorflow/contrib/android/libtensorflow_inference.so\r\n      0x001c: Rev: 1  Flags: none  Index: 2  Cnt: 1  Name: VERS_1.0\r\n\r\n    Version needs section '.gnu.version_r' contains 3 entries:\r\n     Addr: 0x0000000000005318  Offset: 0x005318  Link: 2 (.dynstr)\r\n      000000: Version: 1  File: libc.so  Cnt: 1\r\n      0x0010:   Name: LIBC  Flags: none  Version: 3\r\n      0x0020: Version: 1  File: libm.so  Cnt: 1\r\n      0x0030:   Name: LIBC  Flags: none  Version: 4\r\n      0x0040: Version: 1  File: libdl.so  Cnt: 1\r\n      0x0050:   Name: LIBC  Flags: none  Version: 5\r\n\r\n    Displaying notes found at file offset 0x00e062ac with length 0x0000001c:\r\n      Owner                 Data size\tDescription\r\n      GNU                  0x00000009\tNT_GNU_GOLD_VERSION (gold version)\r\n        Version: gold 1.11\r\n    Attribute Section: aeabi\r\n    File Attributes\r\n      Tag_CPU_name: \"ARM v7\"\r\n      Tag_CPU_arch: v7\r\n      Tag_CPU_arch_profile: Application\r\n      Tag_ARM_ISA_use: Yes\r\n      Tag_THUMB_ISA_use: Thumb-2\r\n      Tag_FP_arch: VFPv3\r\n      Tag_Advanced_SIMD_arch: NEONv1\r\n      Tag_ABI_PCS_GOT_use: GOT-indirect\r\n      Tag_ABI_PCS_wchar_t: 4\r\n      Tag_ABI_FP_denormal: Needed\r\n      Tag_ABI_FP_exceptions: Needed\r\n      Tag_ABI_FP_number_model: IEEE 754\r\n      Tag_ABI_align_needed: 8-byte\r\n      Tag_ABI_enum_size: int\r\n      Tag_ABI_HardFP_use: SP and DP\r\n      Tag_ABI_optimization_goals: Aggressive Speed\r\n      Tag_CPU_unaligned_access: v6\r\n      Tag_ABI_FP_16bit_format: IEEE 754\r\n      Tag_Virtualization_use: TrustZone\r\n\r\nName: bazel-out/android-armeabi-v7a-opt/bin/tensorflow/contrib/android/libtensorflow_inference.so\r\nI think that's a mistake"]}, {"number": 12987, "title": "fix ExponentialMovingAverage documentation regarding control_dependencies", "body": "This PR fixes the documentation for ExponentialMovingAverage so that `ema.apply([var0, var1])` is evaluated within `tf.control_dependencies([opt_op])`.\r\n\r\nThe documentation for [`ExponentialMovingAverage`](https://www.tensorflow.org/api_docs/python/tf/train/ExponentialMovingAverage) contains the following code:\r\n```python\r\nvar0 = tf.Variable(...)\r\nvar1 = tf.Variable(...)\r\nopt_op = opt.minimize(my_loss, [var0, var1])\r\nema = tf.train.ExponentialMovingAverage(decay=0.9999)\r\n\r\nmaintain_averages_op = ema.apply([var0, var1])\r\nwith tf.control_dependencies([opt_op]):\r\n    training_op = tf.group(maintain_averages_op)\r\n```\r\nHowever, according to my understanding, the last three lines are actually equivalent to\r\n```python\r\nmaintain_averages_op = ema.apply([var0, var1])\r\ntraining_op = tf.group(opt_op, maintain_averages_op)\r\n```\r\nfor which the evaluation order of `opt_op` and `maintain_averages_op` is undefined.\r\nI think the last three lines should be replaced with\r\n```python\r\nwith tf.control_dependencies([opt_op]):\r\n    training_op = ema.apply([var0, var1])\r\n```\r\nso that `opt_op` is evaluated before `ema.apply([var0, var1])`, which is what the current documentation is suggestive of. This PR makes this correction.\r\n\r\nThis issue was previously brought up in P.S. in #2131, but was ignored because it was posed as a question more appropriate for StackOverflow.\r\n\r\nIt is easy to test that this makes a difference. Below we calculate the moving average of a variable that gets incremented by 1 for each step. We do this 5 times using 5 different sessions. When `follow_doc = True`, we follow the current documentation's example and each of the 5 sessions returns a different moving average (on my computer). However, the moving averages should all be the same, which is achieved using `follow_doc = False`, which instead follows the (correct) documentation written in this PR.\r\n```python\r\nimport tensorflow as tf\r\nfollow_doc = True\r\navgs = []\r\nfor i in range(5):\r\n    var = tf.Variable(0., dtype=tf.float32)\r\n    ema = tf.train.ExponentialMovingAverage(decay=0.75)\r\n    opt_op = var.assign_add(1)\r\n    if follow_doc:\r\n        maintain_averages_op = ema.apply([var])\r\n        with tf.control_dependencies([opt_op]):\r\n            training_op = tf.group(maintain_averages_op)\r\n    else:\r\n        with tf.control_dependencies([opt_op]):\r\n            training_op = ema.apply([var])\r\n    with tf.Session() as sess:\r\n        sess.run(tf.global_variables_initializer())\r\n        for i in range(10):\r\n            sess.run(training_op)\r\n        avgs.append(sess.run(ema.average(var)))\r\nprint(avgs)\r\n```", "comments": ["Can one of the admins verify this patch?", "@kjslag, thanks for your PR! By analyzing the history of the files in this pull request, we identified @keveman, @tensorflower-gardener and @vrv to be potential reviewers."]}, {"number": 12986, "title": "boringssl sha256 checksum mismatched", "body": "https://github.com/tensorflow/tensorflow/blob/5541ef4fbba56cf8930198373162dd3119e6ee70/tensorflow/workspace.bzl#L583\r\n\r\nwhen download from https://github.com/google/boringssl/archive/e3860009a091cd1bd2bc189cdbc3c6d095abde84.tar.gz, the sha256 checksum is \r\n```\r\na9a3673b1f7bd80ef563e9de1d9ccdb5126dc0cce6377977009092148993c4fe\r\n```\r\n\r\n , but expected is\r\n```\r\n02f5950f93c4fd3691771c07c9d04cf2999ab01383ff99da345249e93b0fcfb2 \r\n```\r\n.\r\n\r\nIs there something wrong?\r\n\r\nthanks.", "comments": ["Also at https://github.com/tensorflow/tensorflow/issues/12979", "Also at #12984", "@gunan, can you please take a look? ", "Are we still seeing this?\r\nThe root cause is changes in github side.\r\nThey are just creating archives differently now. We are looking into if we can mirror our dependencies ourselves now.", "deduping this against #12979 Please watch that issue for progress."]}, {"number": 12985, "title": "Possible bug in nightly build for Linux-gpu", "body": "- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  CentOS Linux release 7.2.1511 (Core)\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: v1.3.0-rc1-2023-g4af9be9\r\n- **Python version**: 3.6.1\r\n- **Bazel version (if compiling from source)**: 0.5.4\r\n- **CUDA/cuDNN version**: cuda 8.0 , cudnn - 5.1.5\r\n- **GPU model and memory**: Titan X (Maxwell) + Titan X (Pascal)\r\n\r\nThe compilation fails with the following error \r\n\r\n```\r\nERROR: /home/uujjwal/opensource/tensorflow/tensorflow/tools/pip_package/BUILD:139:1 C++ compilation of rule '//tensorflow/compiler/xla/service/cpu:parallel_cpu_executable' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\r\n  (cd /home/uujjwal/.cache/bazel/_bazel_uujjwal/bc79cf6944ed9a65fbe038e7ed177538/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/misc/opt/cuda/8.0 \\\r\n    CUDNN_INSTALL_PATH=/misc/opt/cudnn/5.1-cuda-8.0 \\\r\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\r\n    LD_LIBRARY_PATH=/home/uujjwal/dlang/usr/lib64:/home/uujjwal/dlang/usr/lib:/home/uujjwal/cntk/cntkfixed/CNTK/bindings/python/cntk/libs:/home/uujjwal/cntk/mpi-new/lib: \\\r\n    PATH=/home/uujjwal/collection-stars/build-sources/bazel-0.5.4/output:/home/uujjwal/dlang/usr/bin:/home/uujjwal/gocodes/bin:/home/uujjwal/opensource/go1.9/bin:/home/uujjwal/collection-stars/anaconda3/bin:/home/uujjwal/cntk/cntkfixed/CNTK/bin:/home/uujjwal/bin:/home/uujjwal/cntk/mpi-new/bin:/home/uujjwal/p33/bin:/home/uujjwal/bin:/home/uujjwal/cntk/mpi-new/bin:/home/uujjwal/anaconda3/bin:/home/uujjwal/anaconda3/bin:/data/stars/share/michal_toolbox:/usr/lib/oar/oardodo:/usr/lib/oar/oardodo:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/uujjwal/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/home/uujjwal/collection-stars/anaconda3/bin/python \\\r\n    PYTHON_LIB_PATH=/home/uujjwal/collection-stars/anaconda3/lib/python3.6/site-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=5.2,6.1 \\\r\n    TF_CUDA_VERSION=8.0 \\\r\n    TF_CUDNN_VERSION=5.1.5 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL=0 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++11' '-march=native' -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/compiler/xla/service/cpu/_objs/parallel_cpu_executable/tensorflow/compiler/xla/service/cpu/parallel_cpu_executable.pic.d '-frandom-seed=bazel-out/local_linux-py3-opt/bin/tensorflow/compiler/xla/service/cpu/_objs/parallel_cpu_executable/tensorflow/compiler/xla/service/cpu/parallel_cpu_executable.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DTENSORFLOW_USE_JEMALLOC -DSNAPPY -DTENSORFLOW_USE_VERBS -DTENSORFLOW_USE_GDR -DLLVM_ENABLE_STATS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -D_DEBUG -DLLVM_BUILD_GLOBAL_ISEL -iquote . -iquote bazel-out/local_linux-py3-opt/genfiles -iquote external/nsync -iquote bazel-out/local_linux-py3-opt/genfiles/external/nsync -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -iquote external/jemalloc -iquote bazel-out/local_linux-py3-opt/genfiles/external/jemalloc -iquote external/protobuf_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/protobuf_archive -iquote external/eigen_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local_linux-py3-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local_linux-py3-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/local_linux-py3-opt/genfiles/external/fft2d -iquote external/highwayhash -iquote bazel-out/local_linux-py3-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -iquote external/snappy -iquote bazel-out/local_linux-py3-opt/genfiles/external/snappy -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -iquote external/llvm -iquote bazel-out/local_linux-py3-opt/genfiles/external/llvm -isystem external/nsync/public -isystem bazel-out/local_linux-py3-opt/genfiles/external/nsync/public -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/jemalloc/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/jemalloc/include -isystem external/protobuf_archive/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/protobuf_archive/src -isystem external/eigen_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local_linux-py3-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/cuda/include -isystem external/llvm/lib/IR -isystem bazel-out/local_linux-py3-opt/genfiles/external/llvm/lib/IR -isystem external/llvm/include/llvm/IR -isystem bazel-out/local_linux-py3-opt/genfiles/external/llvm/include/llvm/IR -isystem external/llvm/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/llvm/include -isystem external/llvm/lib/Target/PowerPC -isystem bazel-out/local_linux-py3-opt/genfiles/external/llvm/lib/Target/PowerPC -isystem external/llvm/lib/Target/X86 -isystem bazel-out/local_linux-py3-opt/genfiles/external/llvm/lib/Target/X86 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/compiler/xla/service/cpu/parallel_cpu_executable.cc -o bazel-out/local_linux-py3-opt/bin/tensorflow/compiler/xla/service/cpu/_objs/parallel_cpu_executable/tensorflow/compiler/xla/service/cpu/parallel_cpu_executable.pic.o).\r\n```\r\nOn the TensorFlow GitHub page, it shows that the nightly build is passing. I am confused by this", "comments": []}, {"number": 12984, "title": "bazel build failed due to boringssl checksum mismatches", "body": "No custom code.\r\nSystem snapshot:\r\nGCC 5.3.1\r\nCentos 7\r\nBazel 0.5.4\r\n\r\nBuilding from commit id 79517578deb4ea2a8dea641f1a8fa4363c13f76b from master.\r\n\r\n[user@master tensorflow]$ bazel build --config=mkl --copt=\"-march=knl\" --copt=\"-O3\" -s -c opt //tensorflow/tools/pip_package:build_pip_package\r\nWARNING: ignoring http_proxy in environment.\r\nERROR: /home/user/tensorflow/tensorflow/tools/pip_package/BUILD:101:1: no such package '@boringssl//': java.io.IOException: Error downloading [http://mirror.bazel.build/github.com/google/boringssl/archive/e3860009a091cd1bd2bc189cdbc3c6d095abde84.tar.gz, https://github.com/google/boringssl/archive/e3860009a091cd1bd2bc189cdbc3c6d095abde84.tar.gz] to /home/user/.cache/bazel/_bazel_user/59b9d4cecf85aafc18f6c320e7734241/external/boringssl/e3860009a091cd1bd2bc189cdbc3c6d095abde84.tar.gz: Checksum was a9a3673b1f7bd80ef563e9de1d9ccdb5126dc0cce6377977009092148993c4fe but wanted 02f5950f93c4fd3691771c07c9d04cf2999ab01383ff99da345249e93b0fcfb2 and referenced by '//tensorflow/tools/pip_package:licenses'.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\nINFO: Elapsed time: 6.963s\r\n[user@master tensorflow]$", "comments": ["I am having the same issue", "Also at https://github.com/tensorflow/tensorflow/issues/12979", "Have same issue.\r\nbuild with cuda on Master branch of Sep.12", "It seams change the checksum of boringssl in tensorflow/workspace.bzl works as a temporary workaround.\r\n\r\nChange the checksum in line 583 of workspace.bzl from \"02f***\" to \"a9a***\" (The checksum you get).", "Yeah, @Chao1155 this is how I worked around this as well", "@Chao1155 thanks", "Thanks, that worked.\r\n\r\nChecksum was **a9a3673b1f7bd80ef563e9de1d9ccdb5126dc0cce6377977009092148993c4fe** but wanted **02f5950f93c4fd3691771c07c9d04cf2999ab01383ff99da345249e93b0fcfb2** and referenced by '//tensorflow/tools/pip_package:licenses\r\n", "I've changed the line 583 of workspace.bzl to the new checksum as follows but still cannot build.\r\n\r\nThe error I got was \r\n\r\nno such package '@boringssl//': java.io.IOException: Error downloading .....\r\n\r\n  patched_http_archive(\r\n      name = \"boringssl\",\r\n      urls = [\r\n          \"http://mirror.bazel.build/github.com/google/boringssl/archive/e3860009a091cd1bd2bc189cdbc3c6d095abde84.tar.gz\",\r\n          \"https://github.com/google/boringssl/archive/e3860009a091cd1bd2bc189cdbc3c6d095abde84.tar.gz\",  # 2017-07-07\r\n      ],\r\n      sha256 = \"a9a3673b1f7bd80ef563e9de1d9ccdb5126dc0cce6377977009092148993c4fe\",\r\n      strip_prefix = \"boringssl-e3860009a091cd1bd2bc189cdbc3c6d095abde84\",\r\n      # Add patch to boringssl code to support s390x\r\n      patch_file = str(Label(\"//third_party/boringssl:add_boringssl_s390x.patch\")),\r\n  )", "@oscarkfpang what's the full text of the error?", "@kdatta \r\nSorry I didn't copy the full text of error. I tried to build the source on raspberry pi 3 and have encountered many times the error of check sum as above. Finally I give up and install tensorflow on Pi from pip.", "similar issue\r\nhttps://github.com/bazelbuild/bazel/issues/3737", "@gunan, another example of this issue. \r\nsee also #13080 ", "Also #12979 ", "deduping and merging all of these on #12979 ", "thanks"]}]