[{"number": 2774, "title": "Poor numerics in CPU tf.multinomial", "body": "The CPU implementation of tf.multinomial seems to have numerical underflow/overflow when logits are outside of a certain narrow range. The usable logit range on my system is about -88 to 88, which is unacceptably small for my use case (where the logits come from an automatically-trained hidden layer).\n\nFor example:\n\n```\n>>> logits = np.array([[1000.]*5])\n>>> sess.run(tf.multinomial(logits, 10))\narray([[5, 5, 5, 5, 5, 5, 5, 5, 5, 5]])\n```\n\nNote that the index 5 is out of range (which is the _undocumented_ behavior used to signal an error condition). Expected behavior is to sample uniformly from [0, 4], such as in this workaround:\n\n```\n>>> logits = np.array([[1000.]*5])\n>>> sess.run(tf.multinomial(tf.nn.log_softmax(logits), 10))\narray([[2, 0, 4, 1, 0, 0, 2, 2, 2, 4]])\n```\n\nIt's a similar story for negative logits:\n\n```\n>>> logits = np.array([[-1000.]*5])\n>>> sess.run(tf.multinomial(logits, 10))\narray([[5, 5, 5, 5, 5, 5, 5, 5, 5, 5]])\n>>> sess.run(tf.multinomial(tf.nn.log_softmax(logits), 10))\narray([[2, 4, 3, 3, 3, 2, 2, 2, 3, 0]])\n```\n\nI think tf.multinomial should be fixed to accept a wider range of inputs. Or, if that's not possible e.g. due to speed tradeoffs, the workaround above should be noted in the documentation.\n\n**System info**: tensorflow 845fb7ab77fae53b849894925c7d13c1b8918675, Python 3, CPU only on Mac OSX.\n", "comments": ["@concretevitamin Looks like `tf.multinomial` doesn't subtract off the maximum logit before taking exponentials.  Can you fix it to do that?  The undocumented error case is also bad; not sure where in the code it's doing that.\n", "I'm looking into this.\n", "I pushed a fix via commit [de6ce1de08](https://github.com/tensorflow/tensorflow/commit/de6ce1de08ea97d599687fbbe5196ca4af5232ae).  Please feel free to re-open if related issues come up.  Thanks!\n", "@concretevitamin In future, please automatically close issues from the commit by saying \"Fixes #2774\" or similar: https://help.github.com/articles/closing-issues-via-commit-messages\n", "Yep, if you look at my commit message, I included something similar but\nslightly more complicated for Github to grasp (\"fixes github issue\n#????\").  Will make it simpler next time :)\n\nOn Thu, Jun 16, 2016 at 11:40 PM, Geoffrey Irving notifications@github.com\nwrote:\n\n> @concretevitamin https://github.com/concretevitamin In future, please\n> automatically close issues from the commit by saying \"Fixes #2774\n> https://github.com/tensorflow/tensorflow/issues/2774\" or similar:\n> https://help.github.com/articles/closing-issues-via-commit-messages\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2774#issuecomment-226524821,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAkLHpDHlnUsuzAfX927wAtVFFh1Ht2Lks5qMW5hgaJpZM4IyloD\n> .\n", "This still occurs for Python 2, Ubuntu 14.04\n", "@seansaito We'll need more information to be able to help, including the TensorFlow version.\n", "The out of range index can be still produced, if the input is not finite.\r\nIs it desired? Should it be documented?\r\n\r\nExample:\r\n```\r\n>>> sess.run(tf.multinomial([[1e1000] * 5], 10))\r\narray([[5, 5, 5, 5, 5, 5, 5, 5, 5, 5]])\r\n```", "Yeah, I met this problem, too. I'm doing sampling from my vocabulary distribution:\r\n```python\r\nnext_token = tf.cast(tf.reshape(tf.multinomial(log_prob, 1), [self.batch_size]), tf.int32)\r\n```\r\nand the token sampled by multinomial is out of vocabulary.", "Me too.\r\nSimple way to reproduce:\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nisess = tf.InteractiveSession()\r\ndist = tf.multinomial([[np.inf, np.inf]], 1)\r\nisess.run(dist) # outputs 2, instead of 0 or 1\r\n```\r\nUbuntu 16.04, CPU tensorflow 1.9, python3.6, it also happens in python2.7, "]}, {"number": 2773, "title": "Segmentation fault on tensorflow 0.9.0", "body": "Hello, \nI installed tensorflow 0.9.0 from source in conda environment, It seems that the last comit didn't solve completely the problem, because I'm getting a segmentation fault while importing tensorflow (even if I import or not numpy and scipy before).\n\nNote: this error occur only in tf 0.9, when trying tf 0.8, everything works well (but no GPU support for iOS in 0.8 version)\n### Environment info\n\nOS X 10.11.5\nPython 2.7.11\nCuda 7.5\nCudnn 5\nnumpy 1.11.1rc1\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n-rwxr-xr-x@ 1 root  wheel   8.1K Apr 13 15:02 /usr/local/cuda/lib/libcuda.dylib*\nlrwxr-xr-x@ 1 root  wheel    45B Apr 13 15:03 /usr/local/cuda/lib/libcudadevrt.a@ -> /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel    50B Apr 13 15:03 /usr/local/cuda/lib/libcudart.7.5.dylib@ -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46B Apr 13 15:03 /usr/local/cuda/lib/libcudart.dylib@ -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel    49B Apr 13 15:03 /usr/local/cuda/lib/libcudart_static.a@ -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n```\n\nIf installed from sources, provide the commit hash:\n\n> 1c618bca14dcd92669a3c1deb8a802f1867a68f7\n### Steps to reproduce\n1. Create a conda environment\n2. Clone tensorflow 0.9.0 repository\n3. Build it from souce using the instructions in Readme file\n4. Launch python and import numpy and tensorflow (or import just tensorflow)\n### What have you tried?\n1. import tensorflow\n2. import numpy and scipy, then tensorflow\n3. uninstall tensorflow 0.8 outside the conda evironment\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\n```\n>>> import tensorflow\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nSegmentation fault: 11\n```\n", "comments": ["@amineHorseman Could you give run this through gdb and give us a stack trace?  It's not enough information to debug as is.\n", "Sorry for the delay:\n\nHere's what I get when I execute it with gdb:\n\n```\nTraceback (most recent call last):\n\n  File \"test.py\", line 1, in <module>\n\n    import tensorflow\n\n  File \"/Users/amine/anaconda/envs/tensorflow_gpu/lib/python2.7/site-packages/tensorflow/__init__.py\", line 23, in <module>\n\n    from tensorflow.python import *\n\n  File \"/Users/amine/anaconda/envs/tensorflow_gpu/lib/python2.7/site-packages/tensorflow/python/__init__.py\", line 48, in <module>\n\n    from tensorflow.python import pywrap_tensorflow\n\n  File \"/Users/amine/anaconda/envs/tensorflow_gpu/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\n\n    _pywrap_tensorflow = swig_import_helper()\n\n  File \"/Users/amine/anaconda/envs/tensorflow_gpu/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\n\nImportError: dlopen(/Users/amine/anaconda/envs/tensorflow_gpu/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so, 10): Library not loaded: @rpath/libcudart.7.5.dylib\n\n  Referenced from: /Users/amine/anaconda/envs/tensorflow_gpu/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n\n  Reason: image not found\n\n[Inferior 1 (process 1228) exited with code 01]\n```\n", "It looks like your library path doesn't include `libcudart.7.5.dylib`.\n", "Yes, \n\nThank you.\n\nI checked and I found that my library path points to `/usr/local/cuda/lib` and this folder contains a link to `libcudart.7.5.dylib` which is in `/Developer/NVIDIA/CUDA-7.5/lib` folder (the [installation tutorial](https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html) suggested to move the files to this folder, but this one is not included in the path).\n\nSo, I simply added the `/Developer/NVIDIA/CUDA-7.5/lib` to the library path and now it works.\n\n**EDIT:** We should may be add this line to the installation tutorial just after linking the cuDNN libraries (last step of the [Dependencies section for Mac OS](https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#installation-for-mac-os-x)):\n`export DYLD_LIBRARY_PATH=\"$DYLD_LIBRARY_PATH:$CUDA_HOME/lib:/Developer/NVIDIA/CUDA-7.5/lib\"`\n", "Hi,\n\nI just ran into the same issue and adding /Developer/NVIDIA/CUDA-7.5/lib in DYLD_LIBRARY_PATH as suggested didn't help.\n\n$ python\nPython 2.7.11 (default, Jan 22 2016, 08:29:18) \n[GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n> > > import tensorflow as tf\n> > > I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\n> > > I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\n> > > I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\n> > > Segmentation fault: 11\n\nTrying to run imagenet_train produced the following:\n\n$ bazel-bin/inception/imagenet_train --num_gpus=1 --batch_size=32 --train_dir=/tmp/imagenet_train --data_dir=$HOME/ImageNet\nTraceback (most recent call last):\n  File \"/Users/peter_wang/TF/models/inception/bazel-bin/inception/imagenet_train.runfiles/**main**/inception/imagenet_train.py\", line 23, in <module>\n    import tensorflow as tf\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/**init**.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/**init**.py\", line 48, in <module>\n    from tensorflow.python import pywrap_tensorflow\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\n    _pywrap_tensorflow = swig_import_helper()\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\nImportError: dlopen(/usr/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so, 10): Library not loaded: @rpath/libcudart.7.5.dylib\n  Referenced from: /usr/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n  Reason: image not found\n\nOn OS X 10.11.5, brew'ed Python 2.7.11. Followed the [install instruction](https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#create-the-pip-package-and-install) and built from cloned source on 7/3. \n\n$ ./bin/x86_64/darwin/release/deviceQuery\n./bin/x86_64/darwin/release/deviceQuery Starting...\n\n CUDA Device Query (Runtime API) version (CUDART static linking)\n\nDetected 1 CUDA Capable device(s)\n\nDevice 0: \"GeForce GT 650M\"\n  CUDA Driver Version / Runtime Version          7.5 / 7.5\n  CUDA Capability Major/Minor version number:    3.0\n  Total amount of global memory:                 512 MBytes (536543232 bytes)\n  ( 2) Multiprocessors, (192) CUDA Cores/MP:     384 CUDA Cores\n  GPU Max Clock rate:                            405 MHz (0.41 GHz)\n  Memory Clock rate:                             2000 Mhz\n  Memory Bus Width:                              128-bit\n  L2 Cache Size:                                 262144 bytes\n  Maximum Texture Dimension Size (x,y,z)         1D=(65536), 2D=(65536, 65536), 3D=(4096, 4096, 4096)\n  Maximum Layered 1D Texture Size, (num) layers  1D=(16384), 2048 layers\n  Maximum Layered 2D Texture Size, (num) layers  2D=(16384, 16384), 2048 layers\n  Total amount of constant memory:               65536 bytes\n  Total amount of shared memory per block:       49152 bytes\n  Total number of registers available per block: 65536\n  Warp size:                                     32\n  Maximum number of threads per multiprocessor:  2048\n  Maximum number of threads per block:           1024\n  Max dimension size of a thread block (x,y,z): (1024, 1024, 64)\n  Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)\n  Maximum memory pitch:                          2147483647 bytes\n  Texture alignment:                             512 bytes\n  Concurrent copy and kernel execution:          Yes with 1 copy engine(s)\n  Run time limit on kernels:                     Yes\n  Integrated GPU sharing Host Memory:            No\n  Support host page-locked memory mapping:       Yes\n  Alignment requirement for Surfaces:            Yes\n  Device has ECC support:                        Disabled\n  Device supports Unified Addressing (UVA):      Yes\n  Device PCI Domain ID / Bus ID / location ID:   0 / 1 / 0\n  Compute Mode:\n     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >\n\ndeviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 7.5, CUDA Runtime Version = 7.5, NumDevs = 1, Device0 = GeForce GT 650M\nResult = PASS\n", "I'm having the same problem as @peterswang.\n\n$ python\nPython 2.7.12 |Continuum Analytics, Inc.| (default, Jul  2 2016, 17:43:17) \n[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nAnaconda is brought to you by Continuum Analytics.\nPlease check out: http://continuum.io/thanks and https://anaconda.org\n\n> > > import tensorflow\n> > > I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\n> > > I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\n> > > I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\n> > > Segmentation fault: 11\n\nAlso, running the deviceQuery sample,\n./bin/x86_64/darwin/release/deviceQuery \n./bin/x86_64/darwin/release/deviceQuery Starting...\n\n CUDA Device Query (Runtime API) version (CUDART static linking)\n\nDetected 1 CUDA Capable device(s)\n\nDevice 0: \"GeForce GT 750M\"\n  CUDA Driver Version / Runtime Version          7.5 / 7.5\n  CUDA Capability Major/Minor version number:    3.0\n  Total amount of global memory:                 2048 MBytes (2147024896 bytes)\n  ( 2) Multiprocessors, (192) CUDA Cores/MP:     384 CUDA Cores\n  GPU Max Clock rate:                            926 MHz (0.93 GHz)\n  Memory Clock rate:                             2508 Mhz\n  Memory Bus Width:                              128-bit\n  L2 Cache Size:                                 262144 bytes\n  Maximum Texture Dimension Size (x,y,z)         1D=(65536), 2D=(65536, 65536), 3D=(4096, 4096, 4096)\n  Maximum Layered 1D Texture Size, (num) layers  1D=(16384), 2048 layers\n  Maximum Layered 2D Texture Size, (num) layers  2D=(16384, 16384), 2048 layers\n  Total amount of constant memory:               65536 bytes\n  Total amount of shared memory per block:       49152 bytes\n  Total number of registers available per block: 65536\n  Warp size:                                     32\n  Maximum number of threads per multiprocessor:  2048\n  Maximum number of threads per block:           1024\n  Max dimension size of a thread block (x,y,z): (1024, 1024, 64)\n  Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)\n  Maximum memory pitch:                          2147483647 bytes\n  Texture alignment:                             512 bytes\n  Concurrent copy and kernel execution:          Yes with 1 copy engine(s)\n  Run time limit on kernels:                     Yes\n  Integrated GPU sharing Host Memory:            No\n  Support host page-locked memory mapping:       Yes\n  Alignment requirement for Surfaces:            Yes\n  Device has ECC support:                        Disabled\n  Device supports Unified Addressing (UVA):      Yes\n  Device PCI Domain ID / Bus ID / location ID:   0 / 1 / 0\n  Compute Mode:\n     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >\n\ndeviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 7.5, CUDA Runtime Version = 7.5, NumDevs = 1, Device0 = GeForce GT 750M\nResult = PASS\n", "here's my output from gdb after running a script that only imports tensorflow, followed by bt.\n\n(gdb) run testtf.py\nStarting program: /Users/lw17567/anaconda2/envs/tensorflow2/bin/python testtf.py\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_codecsmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_sre.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_weakref.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/config.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/errnomodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/gcmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/getbuildinfo.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/getpath.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/main.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/posixmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/pwdmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/signalmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/symtablemodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/threadmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/xxsubtype.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/zipimport.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/abstract.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/boolobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/bufferobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/bytearrayobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/bytes_methods.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/capsule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/cellobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/classobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/cobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/codeobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/complexobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/descrobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/dictobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/enumobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/exceptions.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/fileobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/floatobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/frameobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/funcobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/genobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/intobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/iterobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/listobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/longobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/memoryobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/methodobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/moduleobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/object.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/obmalloc.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/rangeobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/setobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/sliceobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/stringobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/structseq.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/tupleobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/typeobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/unicodectype.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/unicodeobject.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Objects/weakrefobject.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/acceler.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/bitset.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/firstsets.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/grammar.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/grammar1.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/listnode.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/metagrammar.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/myreadline.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/node.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/parser.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/parsetok.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/pgen.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Parser/tokenizer.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/Python-ast.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/_warnings.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/asdl.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/ast.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/bltinmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/ceval.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/codecs.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/compile.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/dtoa.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/dynload_shlib.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/errors.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/formatter_string.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/formatter_unicode.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/frozen.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/frozenmain.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/future.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/getargs.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/getcompiler.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/getcopyright.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/getopt.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/getplatform.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/getversion.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/graminit.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/import.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/importdl.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/mactoolboxglue.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/marshal.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/modsupport.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/mysnprintf.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/mystrtoul.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/peephole.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pyarena.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pyctype.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pyfpe.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pystate.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pystrcmp.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pystrtod.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/pythonrun.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/random.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/structmember.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/symtable.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/sysmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/thread.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Python/traceback.o': can't open to read symbols: No such file or directory.\nwarning: `/BinaryCache/coreTLS/coreTLS-35.40.1~1/Objects/coretls.build/coretls.build/Objects-normal/x86_64/system_coretls_vers.o': can't open to read symbols: No such file or directory.\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.40.1~1/Symbols/BuiltProducts/libcoretls_ciphersuites.a\"\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.40.1~1/Symbols/BuiltProducts/libcoretls_handshake.a\"\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.40.1~1/Symbols/BuiltProducts/libcoretls_record.a\"\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.40.1~1/Symbols/BuiltProducts/libcoretls_stream_parser.a\"\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_localemodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/_ctypes.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/callbacks.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/callproc.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/cfield.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/libffi_osx/ffi.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/libffi_osx/x86/darwin64.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/libffi_osx/x86/x86-ffi64.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/malloc_closure.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_ctypes/stgdict.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_struct.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/stropmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/itertoolsmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/operator.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_collectionsmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_heapqmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_math.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/mathmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/multiarray/arraytypes.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/multiarray/einsum.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/multiarray/lowlevel_strided_loops.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/multiarray/nditer_templ.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/multiarray/scalartypes.o': can't open to read symbols: No such file or directory.\nwarning: Could not open OSO archive file \"/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/libnpymath.a\"\nwarning: Could not open OSO archive file \"/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/libnpysort.a\"\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/alloc.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/array_assign.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/array_assign_array.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/array_assign_scalar.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/arrayobject.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/buffer.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/calculation.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/cblasfuncs.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/common.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/compiled_base.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/conversion_utils.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/convert.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/convert_datatype.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/ctors.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/datetime.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/datetime_busday.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/datetime_busdaycal.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/datetime_strings.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/descriptor.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/dtype_transfer.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/flagsobject.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/getset.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/hashdescr.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/item_selection.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/iterators.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/mapping.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/methods.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/multiarraymodule.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/nditer_api.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/nditer_constr.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/nditer_pywrap.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/number.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/numpymemoryview.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/numpyos.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/python_xerbla.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/refcount.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/scalarapi.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/sequence.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/shape.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/ucsnarrow.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/usertypes.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/multiarray/vdot.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/private/mem_overlap.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/numpy/_build_utils/src/apple_sgemv_fix.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/datetimemodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/timemodule.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/umath/loops.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/core/src/umath/scalarmath.o': can't open to read symbols: No such file or directory.\nwarning: Could not open OSO archive file \"/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/libnpymath.a\"\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/umath/reduction.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/umath/ufunc_object.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/umath/ufunc_type_resolution.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/core/src/umath/umathmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/cPickle.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/cStringIO.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_functoolsmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/timemodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/grpmodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/_iomodule.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/bufferedio.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/bytesio.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/fileio.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/iobase.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/stringio.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_io/textio.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/binascii.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/build/temp.macosx-10.6-x86_64-2.7/_hashopenssl.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/_randommodule.o': can't open to read symbols: No such file or directory.\nwarning:`/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/fcntlmodule.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/linalg/lapack_lite/python_xerbla.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/linalg/lapack_litemodule.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/numpy/linalg/umath_linalg.o': can't open to read symbols: No such file or directory.\nwarning: Could not open OSO archive file \"/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/libnpymath.a\"\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/linalg/lapack_lite/python_xerbla.o': can't open to read symbols: No such file or directory.\nwarning: `/Users/ilan/minonda/conda-bld/work/Python-2.7.12/build/temp.macosx-10.6-x86_64-2.7/Users/ilan/minonda/conda-bld/work/Python-2.7.12/Modules/future_builtins.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/fft/fftpack.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/fft/fftpack_litemodule.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/random/mtrand/distributions.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/random/mtrand/initarray.o': can't open to read symbols: No such file or directory.\nwarning:`/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/random/mtrand/mtrand.o': can't open to read symbols: No such file or directory.\nwarning: `/private/var/folders/gw/_2jq29095y7b__wtby9dg_5h0000gn/T/pip-HMZkfc-build/build/temp.macosx-10.6-intel-2.7/numpy/random/mtrand/randomkit.o': can't open to read symbols: No such file or directory.\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007fff8d2b8f92 in strlen () from /usr/lib/system/libsystem_c.dylib\n(gdb) py-bt\nUndefined command: \"py-bt\".  Try \"help\".\n(gdb) bt\n#0  0x00007fff8d2b8f92 in strlen () from /usr/lib/system/libsystem_c.dylib\n#1  0x0000000104a0b4f0 in perftools::gputools::internal::DsoLoader::GetDsoHandle(tensorflow::StringPiece, void**, perftools::gputools::internal::DsoLoader::LoadKind) ()\n   from /Users/lw17567/anaconda2/envs/tensorflow2/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#2  0x0000000104a0c06c in perftools::gputools::internal::DsoLoader::GetLibcudaDsoHandle(void**) ()\n   from /Users/lw17567/anaconda2/envs/tensorflow2/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#3  0x0000000104a0d0d2 in std::__1::__function::__func<tensorflow::Status (*)(void**), std::__1::allocator<tensorflow::Status (*)(void**)>, tensorflow::Status (void**)>::operator()(void**&&) ()\n   from /Users/lw17567/anaconda2/envs/tensorflow2/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#4  0x0000000104a0c86f in perftools::gputools::internal::CachedDsoLoader::FetchHandleResult(std::__1::function<tensorflow::Status (void**)>) ()\n   from /Users/lw17567/anaconda2/envs/tensorflow2/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#5  0x0000000104a0cdcf in perftools::gputools::internal::CachedDsoLoader::GetLibcudaDsoHandle() ()\n   from /Users/lw17567/anaconda2/envs/tensorflow2/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n---Type <return> to continue, or q <return> to quit---\n#6  0x0000000104a8ebe5 in perftools::gputools::initialize_cuda_gpu_executor()\n    ()\n   from /Users/lw17567/anaconda2/envs/tensorflow2/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007fff5fc12d4b in ?? ()\n#8  0x000000155fbfc830 in ?? ()\n#9  0x0000000000000001 in ?? ()\n#10 0x00000001034c02e8 in ?? ()\n#11 0x00000001034c0740 in ?? ()\n#12 0x00000001034c0420 in ?? ()\n#13 0x00007fff5fc38660 in ?? ()\n#14 0x00000000000001b8 in ?? ()\n#15 0x00000001004613d0 in ?? ()\n#16 0x00007fff5fbfc8a0 in ?? ()\n#17 0x0000000000000713 in ?? ()\n#18 0x00007fff5fc38598 in ?? ()\n#19 0x00007fff5fc41a38 in ?? ()\n#20 0x00007fff5fbfc830 in ?? ()\n#21 0x00007fff5fc12ed8 in ?? ()\n#22 0x00000001004613d0 in ?? ()\n#23 0x0000b481cbaa22ee in ?? ()\n#24 0x00007fff5fbfc890 in ?? ()\n#25 0x00007fff5fc0f8d1 in ?? ()\n---Type <return> to continue, or q <return> to quit---\n#26 0x0000000000000000 in ?? ()\n"]}, {"number": 2772, "title": "Please consider adding flatten", "body": "Please consider adding [flatten](http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.ndarray.flatten.html) to `tensorflow`.\n", "comments": []}, {"number": 2771, "title": " output ImportError libcudart.so.7.5. in window 7 pycharm", "body": "### Environment info\n\nOperating System:  \n\n```\n tensorflow in Ubuntu 14.04 \n pycharm in window 7\n```\n\nInstalled version of CUDA and cuDNN: \n\n```\n cuda 7.5 and cudnn v4.0\n```\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n   \n    tensorflow-0.8-GPU-whl \n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n   \n    0.8\n### Steps to reproduce\n1. start samba in ubuntu\n2. import remote  mnist example by pycharm in window 7\n3. change python interpreter to remote ubuntu python\n4. run mninst\n### What have you tried?\n1.  according to above step , output ImportError libcudart.so.7.5.  but ok if run mnist directly \n   by pycharm and command line in ubuntu machine .\n### Logs or other output that would be helpful\n\nImportError libcudart.so.7.5\n", "comments": ["We wouldn't be able to reproduce this since it involves Windows, but it could be a path issue (maybe LD_LIBRARY_PATH?).\n", "Automatically closing due to lack of recent activity. Please reopen when further information becomes available.\n"]}, {"number": 2770, "title": "LookupError: No gradient defined for operation 'ScatterUpdate_675' (op type: ScatterUpdate)", "body": "### Environment info\n\nOperating System:  Ubuntu 14.04 TLS\n\nInstalled version of CUDA and cuDNN: \n-rw-r--r-- 1 root root 189170 May 10 10:51 /usr/local/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 May 10 10:51 /usr/local/cuda/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root     19 May 10 10:51 /usr/local/cuda/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root 311596 May 10 10:51 /usr/local/cuda/lib/libcudart.so.7.5.18\n-rw-r--r-- 1 root root 558020 May 10 10:51 /usr/local/cuda/lib/libcudart_static.a\n\nusing 0.8.0 and  0.9.0rc0 version cpu only.\nI am building a graph involving scatter_update operation. When building optimizer op I am getting following error\n**LookupError: No gradient defined for operation 'ScatterUpdate_675' (op type: ScatterUpdate)**\n\nLooks like gradient is not defined for scatter_update. \n", "comments": ["This is expected.\n\nScatterUpdate is a stateful operation on a variable.  If you use operations like this in your model then you will not be able to automatically compute the gradient. (You will notice that none of the state related ops have an associated gradient function.)\n\nIf you would like to discuss this limitation further, please feel free to ask on StackOverflow and tag it with the `tensorflow` tag.\n"]}, {"number": 2769, "title": "Bad example in docs for tf.multinomial", "body": "I think this comment in the docstring for tf.multinomial is wrong:\n\n```\nsamples = tf.multinomial([[1, -1, -1]], 10) # samples is equivalent to tf.zeros([1, 10], dtype=tf.int64)\n```\n\nLogits of [1, -1, -1] do not assign zero probability to class 1 and 2.  Additionally, multinomial op has no kernel for `logits` of integer type, which is what's happening here. (Note usage of 1, not 1.0)\n\nSince I can't figure out what purpose this example serves, my suggestion would be to remove it entirely.\n\nI'm using tensorflow 845fb7ab77fae53b849894925c7d13c1b8918675 with Python 3.\n", "comments": ["Fixed by [f36659](https://github.com/tensorflow/tensorflow/commit/f36659f555027481788d14cc388cec1071a3182a).\n"]}, {"number": 2768, "title": "Checkpoint Restore blocked by changed default bias variable name", "body": "### Environment info\n\nOperating System: Ubuntu 14.04\nBuilt from source (016da8c9b9f171235a528e3361b8068c693c5529)\n\nHas there been a recent change that modified the default name of the bias variable from \"bias\" to \"biases\" (in the nn_ops.conv2d)?\n\nWhen loading from a checkpoint there is an error:\ntensorflow.python.framework.errors.NotFoundError: Tensor name \"model/attention_decoder/Attention_0/fully_connected/biases\" not found in checkpoint files .../model.ckpt\n\nLooking the variables stored in a checkpoint file the closest match is:\nmodel/attention_decoder/Attention_0/fully_connected/bias (DT_FLOAT) [512]\n\nLoading this checkpoint file had been working fine for weeks, so it seems like a TF update that has caused the issue.\n\nCan the model.ckpt[.meta] be edited to work around the change?  If so, is there a guide or any pointers for how to do it.  \n", "comments": ["The easiest way to work around this is to specify a list of explicit variable names when creating your `tf.train.Saver()`. Creating a `tf.train.Saver` with no arguments is equivalent to doing:\n\n``` python\nsaver = tf.train.Saver({v.op.name: v for v in tf.all_variables()})\n```\n\nThe dictionary keys correspond to the names in the checkpoint file that will be read/written by the saver. You can customize the dictionary so that it matches your old checkpoint. For example:\n\n``` python\nnames_to_vars = {v.op.name: v for v in tf.all_variables()}\nbias_var = names_to_vars[\"model/attention_decoder/Attention_0/fully_connected/biases\"]\nnames_to_vars[\"model/attention_decoder/Attention_0/fully_connected/bias\"] = bias_var\ndel names_to_vars[\"model/attention_decoder/Attention_0/fully_connected/biases\"]\nsaver = tf.train.Saver(var_list=names_to_vars)\n```\n\nPS. This is probably more appropriate as a Stack Overflow question, rather than a GitHub issue.\n", "You need to call inception_v3() within the arg_scope() returned by inception_v3_arg_scope()"]}, {"number": 2767, "title": "Initializer for Input->H & H->H weight matrices for RNNCells", "body": "This modification allows initializer (with trainability) for the Input -> Hidden and Hidden to Hidden layer when using the _linear function. Currently, only BasicRNNCell has the new arguments in it's __call__ function, but this could easily be solved. The motivation for such a modification is that it would easily allow different weight architecture for each component of the cell. For example, one could have a one-to-one connection from input -> H, all-to-all from H -> H and one-to-one for H->Output. One could also easily create sparse weight matrices for the input->H and H->H.  \n\n**Example code:**\n\n```\n# Initializer ~ 1st matrix acts as an index for which unit is trainable, 2st is the weight of the units\ninit  = [ tf.constant(np.identity(n_input+n_hidden), dtype = 'float32'), tf.random_normal([n_input+n_hidden,1]) ]\n\n# Whether matrix1 and matrix2 are trainable\ntrain = [False, True]\n\n#Creating cell\ncell  = rnn_cell.BasicRNNCell(n_hidden, initializer = init, trainable = train)\n\n#Executing cell\noutputs, states = rnn.rnn(cell, Input, initial_state=_istate, dtype=tf.float32)\n```\n", "comments": ["Can one of the admins verify this patch?\n", "Thanks for your pull request.  It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit https://cla.developers.google.com/ to sign.**\n\nOnce you've signed, please reply here (e.g. `I signed it!`) and we'll verify.  Thanks.\n\n---\n- If you've already signed a CLA, it's possible we don't have your GitHub username or you're using a different email address.  Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n- If you signed the CLA as a corporation, please let us know the company's name.\n\n<!-- need_sender_cla -->\n", "@googlebot Signed it\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "Assigning to RNN API people -- I suspect they are going to push back on these changes without a very compelling reason.  In general, our base libraries should strive to be simple and this seems to be trying to do a little too much.  But we'll see what they say.\n", "@vrv I see. Although all of the added features here are optional, which means it wouldn't impact people that don't want to use them. I could always make it more explicit with a trainIndex matrix argument and the initializer as the second argument, which would get rid of the trainable argument and would make the two matrices separate. Let's see what the RNN group think first, but thank you for your feedback!\n", "I'm afraid I don't understand the problem this PR is attempting to solve. Initializers are part of variable scope, and all RNN cells rely on this mechanism. If you want to change the initializer, you can set your own function for that in variable scope. Is that mechanism not flexible enough? Why can't you write your own (maybe complex) initializer function and just pass it as initializer to variable scope, so it gets used in all RNN cells?\n", "@lukaszkaiser Yes, you can use initializer for the RNN cells, I did miss that. On the other hand, my feature does not only allow initializers. Here, initializers can be a list of 2 matrices that are multipled together before going through the transfer function. The first matrix can be used as an logical index matrix (composed of 1 and 0) which allows you to have various kind of connectivity patterns ( if you set the learnability for this matrix to zero obviously). For example, you can now have a sparse weight matrix or only allow self-connections (identity matrix), but other designs could be used. The second matrix is your real weight matrix, that you put as learnable. Hence, when they are multipled, only the weights that have a non zero index in the first matrix are used. \n\nThis is convenient as you do not need to reassign the weights at every iteration, which is the case if you want a self-connection (identity) constraint with the current initializer. With a few hundred thousands iterations and multiple variables, this could have an impact on performance.  \n", "It looks like what you're proposing is kind-of a new cell. Maybe a separate cell class for that would be more appropriate? It would be clear then that these are new designs rather than just parameters to re-set initializers -- I think you might prefer that too, right?\n", "Hum, yes that would be interesting. On the other hand, this is something that could be implemented for any type of cell (e.g. LSTM, GRU) and transfer function (not just linear). Also, I don't think I am the only one who want such a feature, as I remember reading a stackoverflow question related to having an identity connectivity matrix, only learnable on the diagonal. \n", "If you put it into contrib, you can also use the linear operators in tf.contrib.layers (which we can't move to because rnn is in core).\n", "@ebrevdo if you don't see this eventually making it into core, it's best that it lives as a useful library outside of this repo.\n", "This does seem to be very specialized code that belongs in its own repository.\n", "Closing this for now. If you feel strongly that this belongs in tf.contrib.rnn, consider resubmitting a pr to that location and meeting the python pep8 guidelines.\n"]}, {"number": 2766, "title": "Dataflow execution model for tensorflow", "body": "GitHub issues are for bugs / installation problems / feature requests.  \nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\n\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\n### Environment info\n\nOperating System:\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n\n1.\n2.\n3.\n### What have you tried?\n\n1.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n", "comments": ["I am thinking of  porting the tensorflow computation model to data-flow execution, e.g. codelet execution model or tasking execution model.\n", "Can you elaborate?  TensorFlow is already a dataflow system.  Are you imagining building a separate repository on top of TensorFlow with alternate semantics?\n", "Automatically closing due to lack of recent activity. Please reopen when further information becomes available.\n"]}, {"number": 2765, "title": "Initializing all weight matrices for RNN", "body": "It is currently impossible to initialize the input -> hidden connectivity matrix, and the hidden->hidden connectivity matrix in RNNCells. Indeed, these are generated automatically in tf.python.ops.rnn_cell._linear, which constricts the connectivity architecture. As an example, I would like to have an identity connectivity matrix for input->hidden (H), an all-to-all for H->H and another identity for H->output. This is currently not feasible if you don't want to correct the weights at every iteration. \n\nI am not sure if this is the right place to post it, since I have never contributed to big projects like tensorflow. Nevertheless, I modified the BasicRNNCell and _linear function in order to allow such initialization.\n\n_High level description_: \nBasicRNNCell can now take 'initializer' and 'trainable' as inputs, which can be both list of two elements.\n**Initializer**: Weight matrix combining Input -> H and H -> H connections. Initializer can actually be a list of two matrices, or a matrice and a vector. The first matrix can act as an update index (if trainable of the first matrix is set to False) and the other one (trainable) will either do a dot product (if w2 is a vector) or element wise model (if w2 is a matrix). \n**Trainable**: Whether the specified weight matrice can be trained. If 'initializer' is composed of two matrices, 'trainable' has to be a boolean list of two elements. \n\nThis allows a full control of the weight matrices for the cell, while still leaving all the defaults behaviours. \n\n**Code changes are wrap between double stars ( *\\* ). Do a CTRL+F to highlight them.**\n## BasicRNNCell function\n\n```\n`class BasicRNNCell(RNNCell):\n  \"\"\"The most basic RNN cell.\"\"\"\n\n  def __init__(self, num_units, input_size=None, activation=tanh,\n                     **initializer = None, trainable = True**):\n    if input_size is not None:\n      logging.warn(\"%s: The input_size parameter is deprecated.\" % self)\n   self._num_units   = num_units\n    self._activation  = activation\n   **self._initializer = initializer**\n    **self._trainable   = trainable**\n  @property\n  def state_size(self):\n    return self._num_units\n\n  @property\n  def output_size(self):\n    return self._num_units\n\n  def __call__(self, inputs, state, scope=None):\n    \"\"\"Most basic RNN: output = new_state = activation(W * input + U * state + B).\"\"\"\n    with vs.variable_scope(scope or type(self).__name__):  # \"BasicRNNCell\"\n      output = self._activation(_linear([inputs, state], \n                                        self._num_units, \n                                        True,\n                                        **initializer = self._initializer**,\n                                        **trainable   = self._trainable**))\n    return output, output`\n```\n## _linear function\n\n```\ndef _linear(args, output_size, bias, bias_start=0.0, scope=None,\n            **initializer=None, trainable=True**):\n  \"\"\"Linear map: sum_i(args[i] * W[i]), where W[i] is a variable.\n\n  Args:\n    args: a 2D Tensor or a list of 2D, batch x n, Tensors.\n    output_size: int, second dimension of W[i].\n    bias: boolean, whether to add a bias term or not.\n    bias_start: starting value to initialize the bias; 0 by default.\n    scope: VariableScope for the created subgraph; defaults to \"Linear\".\n    **initializer: Initial weight tensor. Can be a list with up to 2 tensors. \n                 If both tensors are 2D, an element wise multiplication \n                 will be applied. If the first tensor is 2D and the second 1D, \n                 innder product will be applied. Ws have to have inner dimension\n                 equal to total_arg_size.\n    trainable: True if the variable is trainable. Can be a list with \n               same dimension as initializer.**\n\n  Returns:\n    A 2D Tensor with shape [batch x output_size] equal to\n    sum_i(args[i] * W[i]), where W[i]s are newly created matrices.\n\n  Raises:\n    ValueError: if some of the arguments has unspecified or wrong shape.\n  \"\"\"\n  if args is None or (_is_sequence(args) and not args):\n    raise ValueError(\"`args` must be specified\")\n  if not _is_sequence(args):\n    args = [args]\n\n  # Calculate the total size of arguments on dimension 1.\n  total_arg_size = 0\n  shapes = [a.get_shape().as_list() for a in args]\n  for shape in shapes:\n    if len(shape) != 2:\n      raise ValueError(\"Linear is expecting 2D arguments: %s\" % str(shapes))\n    if not shape[1]:\n      raise ValueError(\"Linear expects shape[1] of arguments: %s\" % str(shapes))\n    else:\n      total_arg_size += shape[1]   \n\n  **if not np.shape(initializer) and not np.shape(trainable):\n    trainLen = initLen = 0\n  elif not np.shape(trainable):\n    initLen  = np.shape(initializer)[0]\n    trainLen = 1\n  else:\n    initLen = len(initializer)\n    trainLen = len(trainable)\n  if initLen != trainLen:\n    raise ValueError(\"`initializer`(len: %s) and `trainable`(len: %s) must be the same len.\"\n                      % (str(initLen), str(trainLen)))**\n\n  # Now the computation.\n  with vs.variable_scope(scope or \"Linear\"):\n    **if not initializer:**\n      matrix = vs.get_variable(\"Matrix\", [total_arg_size, output_size], \n                                 **trainable = trainable)\n    else:\n      if initLen == 1: \n        matrix = vs.get_variable(\"Matrix\",initializer = initializer,\n                                          trainable   = trainable)\n      elif initLen == 2:\n        init0Shape = initializer[0].get_shape().as_list()\n        init1Shape = initializer[1].get_shape().as_list() \n\n        if init0Shape[0] !=total_arg_size:\n          raise ValueError(\n    \"`initializer` first dimension (%s,) should be equal to the `input` inner dimension (%s,).\"\n                            % (str(init0Shape[0]),str(total_arg_size)))\n\n        matrix0 = vs.get_variable(\"Matrix0\",initializer = initializer[0],\n                                            trainable   = trainable[0]  )\n        matrix1 = vs.get_variable(\"Matrix1\",initializer = initializer[1],\n                                            trainable   = trainable[1]  )            \n        if init0Shape[1] > init1Shape[1]:\n          matrix = math_ops.matmul(matrix0,matrix1)\n        elif init0Shape[1] == init1Shape[1]:\n          matrix = math_ops.mul(matrix0,matrix1)\n        else:\n          raise ValueError(\"First matrix in `initializer` should be equal or bigger \\\n                            than the second matrix\")\n      else:\n        raise ValueError(\"`initializer`and `trainable` must be lists of 2 elements \\\n                               maximum\") \n    if len(args) == 1:\n      res = math_ops.matmul(args[0], matrix)\n    else:\n      res = math_ops.matmul(array_ops.concat(1, args), matrix)**\n    if not bias:\n      return res\n    bias_term = vs.get_variable(\n        \"Bias\", [output_size],\n        initializer = init_ops.constant_initializer(bias_start))\n  return res + bias_term`\n```\n\nWould this be an interesting feature for a future release? I added error raises that cover pretty much all errors I could think of. This is a simple change and could be implemented in the other RNNCells type.\n\nThank you for your feedback.\n", "comments": ["@ebrevdo Do you think this is a reasonable approach?  I don't know enough about the API to answer.\n", "@girving Sorry, someone directed me and I made a pull request for this feature, which you can find [here](https://github.com/tensorflow/tensorflow/pull/2767). \n", "Please see my comment on the pull request. Closing this for now, feel free to reopen once you've decided on a way forward.\n"]}, {"number": 2764, "title": "Run train op multiple times", "body": "I have some fairly large batch sizes on which I'd like to take multiple gradient steps. While I could easily do this with a python for loop, I imagine that there might be a more efficient method that doesn't involve transferring the data to gpu on each iteration.\n\n@yaroslavvb has confirmed that putting the train op in the fetch list multiple times doesn't work, and suggested that I could save my input tensors as variables with `tf.assign`. Unfortunately, this doesn't work for me because my input tensors have variable sizes, and tensorflow variables must have a fixed size.\n", "comments": ["Updated [SO discussion](http://stackoverflow.com/a/37736888/419116) with another suggestion\n", "Your second answer solved my problem. Thanks for the help!\n", "For future reference, the solution was to use @yuanbyu 's persistent tensors to persist the input tensors between run calls\n"]}, {"number": 2763, "title": "Enable tf.log() for SparseTensor", "body": "Enabled `tf.log()` for `SparseTensor`. Added tests and verified locally. This partially addresses #1828.\n", "comments": ["Can one of the admins verify this patch?\n", "@tensorflow-jenkins test this please\n"]}, {"number": 2762, "title": "Missing space;", "body": "(1) bash file check will fail without the space;\n", "comments": ["Can one of the admins verify this patch?\n"]}, {"number": 2761, "title": "Branch 124454600", "body": "", "comments": ["We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for the commit author(s).  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\n\n<!-- need_author_cla -->\n"]}, {"number": 2760, "title": "Provide variable scoping documentation", "body": "This is to track a documentation request from an external user:\n\nThe section on variable scopes is pretty helpful and we have been using it to make more complicated nets more manageable. I think some information (could be informal, like a blog post) on best practices that perhaps Googlers are encouraged to follow in structuring their tensorflow code (e.g. for the purposes of speed, variable re-use, minimizing memory consumption, code reusability) would be of high interest to a lot of people. I get the feeling that most of that information might already be available but just that it is distributed across different parts of the documentation.\n", "comments": ["@petewarden @xmbrst Any updates here?\n", "This would be nice to have, but since we do have some documentation on variable scopes it's probably lower priority than some other gaps.\n", "Closing due to inactivity, not sure if it's obsolete. Feel free to re-open."]}, {"number": 2759, "title": "Fix typo", "body": "", "comments": ["Can one of the admins verify this patch?\n"]}, {"number": 2758, "title": "cuDNN DSO loaded in command line, but not by apache", "body": "GitHub issues are for bugs / installation problems / feature requests.  \nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\n\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\n### Environment info\n\nOperating System:\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n-rw-r--r-- 1 root root   322936 May 23 07:11 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 23 07:11 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 May 23 07:11 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336 May 23 07:11 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192 May 23 07:11 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 61453024 May 24 06:29 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 61453024 May 24 06:29 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x 1 root root 61453024 May 24 06:29 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rw-r--r-- 1 root root 62025862 May 24 06:29 /usr/local/cuda/lib64/libcudnn_static.a\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n   I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\n   I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\n   I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\n   I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\n   I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n\nSegmentation fault (core dumped)\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n1. Install a Flask app along this tutorial: http://www.datasciencebytes.com/bytes/2015/02/24/running-a-flask-app-on-aws-ec2/\n2. Install an image classification web app along this tutorial, but using tensorflow instead of caffe: https://clearsite.io/blog/2016/01/24/using-caffe-in-a-flask-application/\n   3.\n### What have you tried?\n1. I tried various AWS EC2 AMI with tensorflow installed, and always the same problem. \n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\nerror.log of apache server:\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcudnn.so. LD_LIBRARY_PATH:\nI tensorflow/stream_executor/cuda/cuda_dnn.cc:1562] Unable to load cuDNN DSO\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n\nif I import tensorflow from command line:\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n\necho $LD_LIBRARY_PATH\n/usr/local/cuda/lib64\n", "comments": ["W'hat is the output of `python -c \"import tensorflow; print(tensorflow.__version__)\"`?\n", "The problem is possibly caused by Apache or Flask not providing the necessary value of `LD_LIBRARY_PATH` to your Flask app. There are a couple of suggestions in [this Stack Overflow answer](http://stackoverflow.com/a/37731516/3574081).\n", "Automatically closing due to lack of recent activity. Please reopen when further information becomes available.\n"]}, {"number": 2757, "title": "Logistic regression weights: Using a `tf.Tensor` as a Python `bool` is not allowed", "body": "Trying to use logistic_regression weights led me to the exception:\n\n```\nTraceback (most recent call last):\n  File \"train.py\", line 22, in <module>\n    results = run(X, y, hyperparams, args.model_name)\n  File \"/opt/app/app/logistic_classifier.py\", line 104, in run\n    logdir='/opt/app/log/' + model_name\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 227, in fit\n    self._setup_training()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 148, in _setup_training\n    self._inp, self._out)\n  File \"/opt/app/app/logistic_classifier.py\", line 204, in model\n    init_mean=params['init_mean'], init_stddev=params['init_stddev']\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/models.py\", line 158, in logistic_regression\n    if not class_weight:\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 475, in __nonzero__\n    raise TypeError(\"Using a `tf.Tensor` as a Python `bool` is not allowed. \"\nTypeError: Using a `tf.Tensor` as a Python `bool` is not allowed. Use `if t is not None:` instead of `if t:` to test if a tensor is defined, and use the logical TensorFlow ops to test the value of a tensor.\n```\n\nwhich is fixed by attached change.\n", "comments": ["Can one of the admins verify this patch?\n", "Thanks for your pull request.  It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit https://cla.developers.google.com/ to sign.**\n\nOnce you've signed, please reply here (e.g. `I signed it!`) and we'll verify.  Thanks.\n\n---\n- If you've already signed a CLA, it's possible we don't have your GitHub username or you're using a different email address.  Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n- If you signed the CLA as a corporation, please let us know the company's name.\n\n<!-- need_sender_cla -->\n", "I signed it!\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "@ilblackdragon @martinwicke  are there really no tests for this? :)\n", "@vrv Let me know if you want me to add any. \n\nI stumbled upon this quite randomly and might need some guidance on where it would be appropriate to put the tests for this.\n", "I feel like some test should be written that exercises this behavior, but I'm not too familiar with this code so I've assigned those who might know more.\n", "That's why we're having a special event next week to add tests. :/\n", "@vrv @martinwicke Let's start with class weights were tested until we stopped supporting them. (see tensorflow/contrib/learn/python/learn/tests/base_test.py?l=58) and this before was a deprecation warning which wasn't failing them.\n\n@tensorflow-jenkins test this please!\n", "PS. @vrv @martinwicke  really need that test coverage showing here if you really want to keep test coverage up. Jenkins will do\n", "@ilblackdragon the code is wrong and there is no test for it, so we need a test to validate this is workign as intended before accepting.  Can you suggest a good place for a test?\n", "We deprecated it in our interface so it's quiet hard to test :)\n", "@petrjanda you can implement test that uses custom Estimator with class weight - that should hit this code.\n", "you probably want to revert this, the check is the reverse of what you had before\n"]}, {"number": 2756, "title": "Dataset in GPU memory: updating specific elements in existing tf.Variable", "body": "My machine has a Titan X card so I would like to use the memory as efficient as possible to avoid expensive data transfer between the CPU and GPU. Therefore, I want to have as many images as possible (let's say 5 GB) on the GPU memory inside a `tf.Variable` or `tf.constant`. However, I also want to update these data tensors after a number of iterations (_e.g._ a replay memory). For training, I then only need to send sample indices to the GPU and use `tf.slice` to generate a training batch.\n\nMy question is what the correct way is to update specific elements in an existing `tf.Variable`? I already found methods using `tf.scatter_update` and `tf.slice`:\n\nhttp://stackoverflow.com/questions/34685947/adjust-single-value-within-tensor-tensorflow\nhttp://stackoverflow.com/questions/37593960/set-k-largest-elements-of-a-tensor-to-zero-in-tensorflow\n\nBut these methods seem cumbersome and tricky. Are there better ways of updating existing variables? \n", "comments": ["Some of this is covered #206.  For single variables and unordered sets of elements `tf.scatter_update` is the right thing, and #206 proposes `tf.assign_slice_*` which cover what you want.  Our hope is to make most of these available with something like `x[i].assign(...)`, but there are a few steps before we get there.\n\nIf your satisfied with #206 I'll close as duplicate, but let me know if not!\n", "Hi Geoffrey, thanks for your reply. I am satisfied with the conversation and proposed solutions in https://github.com/tensorflow/tensorflow/issues/206. You can close this one. Hopefully the assign operations will arrive soon!\n"]}, {"number": 2755, "title": "Apply fully connected activation function on flat data", "body": "`layers.fully_connected` flattens all dimensions of the input but the last, transforms the flat rows using the same weight matrix, and unflattens the result. One use case is to apply the same layer to each output of an RNN like in this example.\n\n``` python\nfrom tensorflow.models.rnn import rnn\nfrom tensorflow.contrib import layers\n\noutput, _ = rnn.dynamic_rnn(...)\nprediction = layers.fully_connected(output, out_size, tf.nn.softmax)\n```\n\nHowever, the example failed using `tf.nn.softmax` since the activation function was applied on the unflattened result already. This pull request applies the activation function before unflattening so that any activation function that works with normal layers (without flattening) can be used.\n", "comments": ["Can one of the admins verify this patch?\n", "Jenkins, test this please!\n"]}, {"number": 2754, "title": "iOS example running bug", "body": "### Environment info\n\nOperating System: iOS\n### Steps to reproduce\n1. Follow the contrib/makefile/README to install the tensorflow iOS core lib\n2. Download the graph .pb files and copy them in the .xcodeproj\n3. Run the example, an error is logged\n### Logs or other output that would be helpful\n\n```\nRunning model failed:Invalid argument: No OpKernel was registered to support Op 'DecodeJpeg' with these attrs\n    [[Node: DecodeJpeg = DecodeJpeg[acceptable_fraction=1, channels=3, fancy_upscaling=true, ratio=1, try_recover_truncated=false](DecodeJpeg/contents)]]\n```\n\nIs there a modification to do to the building of the lib to include jpeg ops?\n\nOther notes:\n- the version of Eigen downloaded in the `Makefile` is not the same as the one configured in the `.xcodeproj` (the include path uses another version hash), I kept the one from the `Makefile`\n- after downloading http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz as indicated in the `README`, the `.pb` and `.txt` files don't have the same names as the ones in the iOS examples, I renamed them, although I'm not sure if the examples refer to the same model\n\nThose last issues seem fixed by https://github.com/tensorflow/tensorflow/commit/a9d1af0cf55a28e46b0527dc927e249eafea4418#diff-05f2ac6ab411cf0c1e4ad1d7b96caf22R45\n", "comments": ["Might be related to bug https://github.com/tensorflow/tensorflow/issues/2570\n", "Can you try the model located here:\n\n[https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip](https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip)\n\nThis is the one that is referenced in the Android example documentation and is working for me on iOS.\n\nRe: Eigen. The hash was updated a few days ago. Are you running from the latest version?\n", "Hey @StephenOman thanks!\n\nThe new file contains the proper model\n\nI still can't build the lib with the `DecodeJPEG` op for some reason, did you change something to the build file when you built it? The jpeg files seem to be explicitly removed from the `contrib` build in `gen_file_lists.sh` https://github.com/tensorflow/tensorflow/blob/3c5233d54d3dc431bdee2a5756cc2f1f9b270503/tensorflow/contrib/makefile/gen_file_lists.sh#L22\n\nThanks for Eigen -- so I should update the hash in the Makefile, can you tell which one you are using?\n", "I've fixed my comment so the URL to the model is correct. Thanks for flagging that.\n\nI didn't have to change either the Eigen hash or the build file. I simply checked out the code (master branch) two days ago and ran the build scripts, before opening the xcode project.\n", "@StephenOman did you manage to run and test the model? The app builds fine, but then it crashes at runtime\n", "Yes, have it running and working on my iPhone.\n", "Did you try deploying on a device with the newer model?\n", "It is running with this model, closing this issue !\n"]}, {"number": 2753, "title": "C++ compilation of rule '@highwayhash//:sip_hash' failed (Tensorflow serving on Android)", "body": "Operating System: Ubuntu 16 64bit\n\nInstalled:\nAndroid NDK (r10e / r11c), \nAndroid SDK (Latest), \nTensorflow (Latest), \nTensorflow serving (Latest), \nBazel (0.2.1 / 0.2.3)\n\nI can build android projects (SDK and NDK) with bazel, build Tensorflow with bazel and build android jni projects with bazel. \n\nThis is the Error I get when trying to build an android project which uses tensorflow serving: ($ bazel build //MouthDetection:android).\n\n`ERROR: /home/michiel/.cache/bazel/_bazel_michiel/224c8e6cc63c3cf5a14b148ed24603d7/external/highwayhash/BUILD:17:1: C++ compilation of rule '@highwayhash//:sip_hash' failed: arm-linux-androideabi-gcc failed: error executing command external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables ... (remaining 38 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from external/highwayhash/highwayhash/sip_hash.h:23:0,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::uint64, State*)':\nexternal/highwayhash/highwayhash/state_helpers.h:36:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive]\n   static_assert((kPacketSize & (kPacketSize - 1)) == 0, \"Size must be 2^i.\");\n                                                                            ^\nexternal/highwayhash/highwayhash/state_helpers.h:36:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:31:9: error: expected nested-name-specifier before 'Key'\n   using Key = uint64[2];\n         ^\nexternal/highwayhash/highwayhash/sip_hash.h:34:38: error: 'Key' does not name a type\n   explicit INLINE SipHashState(const Key& key) {\n                                      ^\nexternal/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashState::SipHashState(const int&)':\nexternal/highwayhash/highwayhash/sip_hash.h:35:39: error: invalid types 'const int[int]' for array subscript\n     v0 = 0x736f6d6570736575ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:36:39: error: invalid types 'const int[int]' for array subscript\n     v1 = 0x646f72616e646f6dull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript\n     v2 = 0x6c7967656e657261ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript\n     v3 = 0x7465646279746573ull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:114:50: error: 'Key' in 'class highwayhash::SipHashState' does not name a type\n static INLINE uint64 SipHash(const SipHashState::Key& key, const char* bytes,\n                                                  ^\nexternal/highwayhash/highwayhash/sip_hash.h: In function 'highwayhash::uint64 highwayhash::SipHash(const int&, const char*, highwayhash::uint64)':\nexternal/highwayhash/highwayhash/sip_hash.h:116:52: error: no matching function for call to 'ComputeHash(const int&, const char*&, const uint64&)'\n   return ComputeHash<SipHashState>(key, bytes, size);\n                                                    ^\nexternal/highwayhash/highwayhash/sip_hash.h:116:52: note: candidate is:\nIn file included from external/highwayhash/highwayhash/sip_hash.h:23:0,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h:63:8: note: template<class State> highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&, const char*, highwayhash::uint64)\n uint64 ComputeHash(const typename State::Key& key, const char* bytes,\n        ^\nexternal/highwayhash/highwayhash/state_helpers.h:63:8: note:   template argument deduction/substitution failed:\nexternal/highwayhash/highwayhash/state_helpers.h: In substitution of 'template<class State> highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&, const char*, highwayhash::uint64) [with State = highwayhash::SipHashState]':\nexternal/highwayhash/highwayhash/sip_hash.h:116:52:   required from here\nexternal/highwayhash/highwayhash/state_helpers.h:63:8: error: no type named 'Key' in 'class highwayhash::SipHashState'\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:120:60: error: 'Key' in 'class highwayhash::SipHashState' does not name a type\n static INLINE uint64 ReduceSipTreeHash(const SipHashState::Key& key,\n                                                            ^\nTarget //MouthDetection:android failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 32.618s, Critical Path: 18.78s\n`\n\nDoes anyone know a solution to this problem\n", "comments": ["Are you trying to run a Tensorflow server on Android? Currently we only support the named Android libraries such as //tensorflow/core:android_tensorflow_lib -- it's not expected that others will compile for Android.\n\nAlso, as a note, Bazel 0.2.3 and below do not support Android NDK11. The next release of Bazel should, though.\n", "Automatically closing due to lack of recent activity. Please reopen when further information becomes available.\n", "Operating System: Ubuntu 14.04 LTS 64bit\n\nInstalled:\nAndroid NDK (r12b), \nAndroid SDK (Latest), \nTensorflow (0.9), \nBazel (0.3.0)\n\nI faced the same problem, then I changed to use \"//tensorflow/core:android_tensorflow_lib\", now the error is:\n\n```\nexternal/eigen_archive/eigen-eigen-d02e6a705c30/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/CUDA/TypeCasting.h: In function 'TgtPacket Eigen::internal::pcast(const SrcPacket&) [with SrcPacket = Eigen::internal::Packet4h; TgtPacket = __vector(4) float]':\nexternal/eigen_archive/eigen-eigen-d02e6a705c30/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/CUDA/TypeCasting.h:143:38: error: '_mm_cvtm64_si64' was not declared in this scope\n   __int64_t a64 = _mm_cvtm64_si64(a.x);\n                                      ^\nTarget //tensorflow/mydemo:mydemo failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 174.487s, Critical Path: 168.61s\n```\n\nI'm building with the following command:\n\n`bazel build :mydemo --crosstool_top=//external:android/crosstool --cpu=x86 --host_crosstool_top=@bazel_tools//tools/cpp:toolchain`\n\nAnd with the following BUILD file:\n\n```\ncc_binary(\n    name = \"mydemo\",\n    srcs = [\"mydemo.cc\"],\n    deps = [\n        \"//tensorflow/core:android_tensorflow_lib\",\n    ]\n)\n```\n\nI'm just trying to build a very simple C++ TensorFlow example for Android x86.\n"]}, {"number": 2752, "title": "Fix typo 'puth' instead of 'put'", "body": "Extract `patches` from `images` and **put** them in the \"depth\" output dimension.\n", "comments": ["Can one of the admins verify this patch?\n", "I updated my original pull request: #2724 \n"]}, {"number": 2751, "title": "Fail to build tensorflow pip - \"...external\" failed: No such file or directory ", "body": "I'm using bazel 0.2.3 as well, Ubuntu 16.04 + GCC 5.3.1, Cuda 7.5 + cudnn 5.0.5 .\nI strictly followed https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#installation-for-linux, but run into the same error \n\n> $ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\n> Wed Jun 8 17:48:44 PDT 2016 : === Using tmpdir: /tmp/tmp.67PiK9GeAe\n> rsync: change_dir \"/home/jiapei/Downloads/machinelearning/deeplearning/tensorflow//bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/external\" failed: No such file or directory (2)\n> rsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1183) [sender=3.1.1]\n\nI noticed that I do **NOT** have the subfolder **external**, but only a folder **org_tensorflow**. In addition, I do **NOT** have a folder **main** .\n\n> .../pip_package/build_pip_package.runfiles$ ls \n> d3                             iron_collapse               iron_range_behavior        paper_dropdown_menu  paper_styles\n> dagre                          iron_dropdown               iron_resizable_behavior    paper_header_panel   paper_tabs\n> eigen_archive                  iron_fit_behavior           iron_selector              paper_icon_button    paper_toggle_button\n> es6_promise                    iron_flex_layout            iron_validatable_behavior  paper_input          paper_toolbar\n> font_roboto                    iron_form_element_behavior  lodash                     paper_item           plottable\n> graphlib                       iron_icon                   MANIFEST                   paper_material       polymer\n> **init**.py                    iron_icons                  neon_animation             paper_menu           promise_polyfill\n> iron_a11y_announcer            iron_iconset_svg            org_tensorflow             paper_menu_button    protobuf\n> iron_a11y_keys_behavior        iron_input                  paper_behaviors            paper_progress       six_archive\n> iron_ajax                      iron_list                   paper_button               paper_radio_button   web_animations_js\n> iron_autogrow_textarea         iron_menu_behavior          paper_checkbox             paper_radio_group    webcomponentsjs\n> iron_behaviors                 iron_meta                   paper_dialog               paper_ripple\n> iron_checked_element_behavior  iron_overlay_behavior       paper_dialog_behavior      paper_slider\n\nCan anybody help please?\n\nCheers\nPei\n", "comments": ["@martinwicke This seems like a Bazel issue.  Have you seen it before?\n", "also pinging @damienmg and @kchodorow  (did something change in bazel 0.2.3?)\n", "It should have an external folder. This is not 0.2.3, what does `bazel version` says? By the way this should be fixed @HEAD also (an in 0.3.0rc2)\n", "@damienmg \n\nI installed a bazel-0.2.3 release, and then rebuild bazel-git, and overwrite the installed bazel with my output/bazel.\n\n```\njiapei@jiapei-GT72-6QE:~$ bazel version\nBuild label: 0.2.3-2016-06-08 (@caa000a)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Jun 8 23:20:40 2016 (1465428040)\nBuild timestamp: 1465428040\nBuild timestamp as int: 1465428040\n```\n\nSo, do you mean, if I checkout 0.3.0rc2 now, bazel will successfully build through tensorflow?\n\ncheers\n", "Yes either check out 0.2.3 tag or pull the new head (or the 0.3.0-release branch).\n\nWe rolled back a change that introduced since 0.2.3 for 0.3.0 because of those kind of symptoms.\n", "@damienmg \nWhat if the current bazel-git? Will that work as well???\nYou don't have a 0.3.0 release here yet ????  [https://github.com/bazelbuild/bazel/releases](url)\n", "Yes it will work as well, we did the rollback yesterday.\n\nOur release candidates are on GCS:  https://storage.googleapis.com/bazel/0.3.0/rc2/index.html\n", "@damienmg \n\nI just have bazel-git built, and it seems only one single file is produced:\n`Build successful! Binary is here: ... /bazel/output/bazel`\n\nHowever, if I install bazel from the release [https://github.com/bazelbuild/bazel/releases](url)\nI will get three files under  /usr/local/lib/bazel/bin\n\n```\njiapei@jiapei-GT72-6QE:/usr/local/lib/bazel/bin$ ls\nbazel  bazel-complete.bash  bazel-real\n```\n\nSo, I guess bazel-complete.bash and bazel-real don't matter at all ?? I can just copy the built-from-source .../output/bazel under /usr/local/lib/bazel/bin directly?\nThat's it???? That's all???\n", "output/bazel to /usr/local/lib/bazel/bin/bazel-real (you can replace bazel too won't matter much, but the actual binary is bazel-real).\n", "@damienmg \nGreat... It builds... Thank you ... \n", "@girving: is there a bazel test we could run to test those regression on ci.bazel.io?\n\nI am adding building the build_pip_package script but that might not be enough since it failed at run time.\n", "Is it possible to build the tensorflow pip wheel with the following version of bazel ?\n\n[sfux@develop01 ~]$ bazel version\n..\nBuild label: 0.2.3- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Mon Jun 6 08:27:55 2016 (1465201675)\nBuild timestamp: 1465201675\nBuild timestamp as int: 1465201675\n[sfux@develop01 ~]$\n", "I have this version and encountered the problem with the missing \"external\" directory.\n", "@damienmg could we have a sh_test that simply runs build_pip_package? That\nshould have caught this one at least, right?\n\nOn Fri, Jun 10, 2016 at 6:50 AM samfux84 notifications@github.com wrote:\n\n> I have this version and encountered the problem with the missing\n> \"external\" directory.\n> \n> \u2014\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2751#issuecomment-225187004,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAjO_dDhd9UQSPXzyzw0j6NFR0pKOEACks5qKWupgaJpZM4IxqNV\n> .\n", "Yes this is possible,\n\nBy the way, `bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles` is a bit weird, we generally use `$PYTHON_RUNFILES` if it exisrts or `$0.runfiles` instead. Every other file should be included as inputs of the target. Seeing the build_pip_package.sh script I actually wonder why it is not a build step for bazel?\n", "Good question. What's the easiest way to do that?\nOn Fri, Jun 10, 2016 at 08:32 Damien Martin-Guillerez <\nnotifications@github.com> wrote:\n\n> Yes this is possible,\n> \n> By the way,\n> bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles is a\n> bit weird, we generally use $PYTHON_RUNFILES if it exisrts or $0.runfiles\n> instead. Every other file should be included as inputs of the target.\n> Seeing the build_pip_package.sh script I actually wonder why it is not a\n> build step for bazel?\n> \n> \u2014\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2751#issuecomment-225215659,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAjO_cnd4UVgiUsuScvDXK885sk-jyMgks5qKYOpgaJpZM4IxqNV\n> .\n", "Having a genrule that call the build_pip_package script should be enough. Some adaptation will be needed from the pip package. Actually let me try to do it.\n", "(sorry I have to leave, my fast test show it should not be too hard, I'll try to send a PR for doing so on monday).\n", "Awesome! That would be a great improvement of our installation process.\nOn Fri, Jun 10, 2016 at 09:35 Damien Martin-Guillerez <\nnotifications@github.com> wrote:\n\n> (sorry I have to leave, my fast test show it should not be too hard, I'll\n> try to send a PR for doing so on monday).\n> \n> \u2014\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2751#issuecomment-225232212,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAjO_btKNE1mBCo1rDEALu5YVfh7zeLOks5qKZJjgaJpZM4IxqNV\n> .\n", "So I made it work but it's hacky:\n1. the name of the package encode the version of tensorflow (not a problem), the version of python and the system (not a problem). The version of python might be an issue. A workaround is to wrap the package in another zip but that's not really nice.\n2. pip is non deterministic, it stores the timestamp of the zip file. It's ok overall to mark the genrule as time stamped as this is for building a release binary.\n\nSo overall my only trouble is the name of the package. I also figured out it might be good to have a skylark rules to do it that does not depends on bash, this would help the windows port too.\n", "Ok the name can be resolve with apropriate auto-configuration I think. I think I'll take today to do it for python :)\n", "Hi,\n\nany news about the problem with the missing 'external' directory ?\n\nI could still not install tensorflow.\n\nPython 3 is only recognized if I check out the release 0.9 from github (a check out of the current master branch still does not recognize Python 3 installed in a non-standard location, even when specifying the path to the installation in the configure script). But with r 0.9, I still hit the problem with the external folder:\n\n```\n[sfux@e3001 tensorflow]$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\nMon Jun 20 14:16:57 CEST 2016 : === Using tmpdir: /scratch/21391859.tmpdir/tmp.HQP10lzxmo\nrsync: change_dir \"/scratch/21391859.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/external\" failed: No such file or directory (2)\nrsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1039) [sender=3.0.6]\n[sfux@e3001 tensorflow]$ \n```\n\nI am trying now since end of may to make a central installation of tensorflow on the HPC cluster of ETH to provide it to our more than 2000 users. We can not install the precompiled binaries, because of GLIBC being too old. There are one or two users, which compiled a newer version of GLIBC in order to be able to install the precompiled binaries of tensorflow in their home directories, but this is not an option for a central installation of tensorflow on our cluster.\n\nCan you please provide some help, or update the description on\n\nhttps://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#create-the-pip-package-and-install\n\nbecause it does apparently not work, if one follows the steps described there.\n\nPlease find below the steps that I used in my attempts to install tensorflow:\n\n1.) bsub -Is -n 24 -W 4:00 bash\n(start a bash interactive job to get a 24-core compute node for compiling tensorflow)\n\n2.) module load new gcc/4.8.2 java/1.8.0_91 bazel/0.2.3 swig/3.0.5 python/3.3.3\n(load all required modules, to make sure that PATH, LD_LIBRARY_PATH etc. contain all paths to the executables and libraries)\n\n3.) cd $TMPDIR\n(go to $TMPDIR to compile on local scratch of the compute node)\n\n4.) git clone -b r0.9 https://github.com/tensorflow/tensorflow\n\n5.) cd tensorflow\n\n6.) git submodule update --init --recursive\n\n7.) export http_proxy=http://proxy.ethz.ch:3128\n8.) export https_proxy=http://proxy.ethz.ch:3128\n(set proxy server variables)\n\n9.) ./configure\n(t automatically finds our Python 3 installation and suggests already the correct path)\n\n10.) vi tools/bazel.rc\n(add build --host_force_python=py3)\n\n11.) bazel build --verbose_failures -c opt //tensorflow/tools/pip_package:build_pip_package\n\n12.) bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\n\nAnd then I am stuck with the error message mentioned above.\n\nBest regards\n\nSam\n", "Can you check your bazel version just to be sure nothing is getting picked up by accident?\n", "[sfux@euler04 ~]$ module load new gcc/4.8.2 java/1.8.0_91 bazel/0.2.3 swig/3.0.5 python/3.3.3\nAutoloading openblas/0.2.8_seq\n[sfux@euler04 ~]$ bazel version\nWarning: ignoring _JAVA_OPTIONS in environment.\nWARNING: Output base '/cluster/home/sfux/.cache/bazel/_bazel_sfux/0973bb30a23240a9299c1053c5a39bb3' is on NFS. This may lead to surprising failures and undetermined behavior.\nExtracting Bazel installation...\n...\nBuild label: 0.2.3- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Mon Jun 6 08:27:55 2016 (1465201675)\nBuild timestamp: 1465201675\nBuild timestamp as int: 1465201675\n[sfux@euler04 ~]$\n", "Can you upgrade to bazel 0.3.0?\n", "@damienmg do we effectively require bazel 0.3 at this point? \n", "No but in the 0.2.3 baseline there was a change that have been rolled back\nin 0.3 that cause the missing external directory. 0.2.3 itself does not\ncontains the culprit change but if the repository was not cloned from the\ntag then there might be the culprit.\n\nOn Tue, Jun 21, 2016, 8:36 AM Martin Wicke notifications@github.com wrote:\n\n> @damienmg https://github.com/damienmg do we effectively require bazel\n> 0.3 at this point?\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2751#issuecomment-227352548,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/ADjHf5GMwXHy9nBOwVtyfc8hviz9Oq7iks5qN4ZVgaJpZM4IxqNV\n> .\n", "Thank you very much for your help. With bazel 0.3.0 creating the wheel worked:\n\n```\n[sfux@e2319 tensorflow]$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\nTue Jun 21 10:11:31 CEST 2016 : === Using tmpdir: /scratch/21408461.tmpdir/tmp.uoFXuaUHI5\n/scratch/21408461.tmpdir/tmp.uoFXuaUHI5 /scratch/21408461.tmpdir/tensorflow\nTue Jun 21 10:11:31 CEST 2016 : === Building wheel\n/scratch/21408461.tmpdir/tensorflow\nTue Jun 21 10:11:40 CEST 2016 : === Output wheel file is in: /tmp/tensorflow_pkg\n[sfux@e2319 tensorflow]$ pip\npip         pip3        pip3.3      pipeclient  \n[sfux@e2319 tensorflow]$\n```\n\nNow pip is going ballistic and tries to delete parts of my numpy etc. installations (I would rather prefer to install a newer version of numpy in user space and to involve it through PYTHONPATH instead of pip trying to delete stuff and reinstalling a newer version, which does most likely not automatically link against OpenBLAS), but this problem is not related to tensorflow.\n\n```\n[sfux@e2319 tensorflow]$ pip install /tmp/tensorflow_pkg/tensorflow-0.9.0-py3-none-any.whl \nProcessing /tmp/tensorflow_pkg/tensorflow-0.9.0-py3-none-any.whl\nCollecting numpy>=1.8.2 (from tensorflow==0.9.0)\n  Downloading numpy-1.11.0.tar.gz (4.2MB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 4.2MB 144kB/s \nCollecting six>=1.10.0 (from tensorflow==0.9.0)\n  Downloading six-1.10.0-py2.py3-none-any.whl\nCollecting protobuf==3.0.0b2 (from tensorflow==0.9.0)\n  Downloading protobuf-3.0.0b2-py2.py3-none-any.whl (326kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 327kB 1.2MB/s \nRequirement already satisfied (use --upgrade to upgrade): wheel>=0.26 in /cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/wheel-0.29.0-py3.3.egg (from tensorflow==0.9.0)\nCollecting setuptools (from protobuf==3.0.0b2->tensorflow==0.9.0)\n  Downloading setuptools-23.0.0-py2.py3-none-any.whl (435kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 438kB 1.1MB/s \nBuilding wheels for collected packages: numpy\n  Running setup.py bdist_wheel for numpy\n  Stored in directory: /cluster/home/sfux/.cache/pip/wheels/d9/cc/5c/f60303cc48ac18e6bd359aa88e4fa50e8bd88fc7e9f001cfd8\nSuccessfully built numpy\nInstalling collected packages: numpy, six, setuptools, protobuf, tensorflow\n  Found existing installation: numpy 1.8.0\n    DEPRECATION: Uninstalling a distutils installed project (numpy) has been deprecated and will be removed in a future version. This is due to the fact that uninstalling a distutils project will only partially uninstall the project.\n    Uninstalling numpy-1.8.0:\n      Successfully uninstalled numpy-1.8.0\n  Rolling back uninstall of numpy\nException:\nTraceback (most recent call last):\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/basecommand.py\", line 211, in main\n    status = self.run(options, args)\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/commands/install.py\", line 311, in run\n    root=options.root_path,\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/req/req_set.py\", line 646, in install\n    **kwargs\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/req/req_install.py\", line 803, in install\n    self.move_wheel_files(self.source_dir, root=root)\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/req/req_install.py\", line 998, in move_wheel_files\n    isolated=self.isolated,\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/wheel.py\", line 339, in move_wheel_files\n    clobber(source, lib_dir, True)\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/pip-7.1.2-py3.3.egg/pip/wheel.py\", line 317, in clobber\n    shutil.copyfile(srcfile, destfile)\n  File \"/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/shutil.py\", line 110, in copyfile\n    with open(dst, 'wb') as fdst:\nPermissionError: [Errno 13] Permission denied: '/cluster/apps/python/3.3.3/x86_64/lib64/python3.3/site-packages/numpy/_import_tools.py'\nYou are using pip version 7.1.2, however version 8.1.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n[sfux@e2319 tensorflow]$\n```\n\nThank you again for your help. It would be very nice if you could add a note to\n\nhttps://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#requirements\n\nwhich explains that you need to have a particular version of bazel (I am refering to the last reply from daminegm about how to correctly checkout 0.2.3 such that you get the proper version of bazel, because from the bazel webpage it is not very clear, what to download). Due to the dependency on bazel, one also need to have Java 1.8.0, SWIG > 3.0.0. It would also be great if you would mention the dependencies of tensorflow with respect to other Python packages (numpy>=1.8.2, six>=1.10.0, protobus 3.0.0b2, setuptools 23.0.0, wheel>=0.26), because on a larger clusters, one does not just run pip as root and hope that everything goes well. I usually check the list of dependencies, install all of them from source in user space and then try on install the main package in user space before installing anything centrally.\n\nBest regards\n", "Yes adding a note to checkout a tagged version of bazel and not the master branch would be better for people building from head. Maybe pointing to the Bazel release page?\n", "I was very happy to finally be able to build tensorflow from source, but when running it for the first time, I was hitting issue #121. \"ImportError: undefined symbol: clock_gettime #121\".\n\nThis seems to be a never ending story.\n\nFirst I had a problem with \"ulimit -u\" for installing bazel, which is required for building tensorflow. On many systems it is set to 256 by default, which is not enough to build bazel.\n\nThen I hit a problem with specifying a proxy server, such that tensorflow can download some dependencies (tensorflow fails to use a proxy server, when the hostname ends with a \"/\". The solution is to remove the slash)\n\nThen I had the problem with tensorflow not recognizing Python in a non-standard location, which was solved by checking out release 0.9 from github.\n\nThen I hit the problem with the non-existing \"external\" directory, solved by downloading release 0.3.0 of bazel\n\nThen I had to fight with pip that it does not destroy my Python 3.3.3 installation.\n\nAnd finally I get runtime errors.\n\nIt be nice if the \"troubleshooting\" paragraph at the bottom of the instructions for building tensorflow from source could be extended, such that other users do not need experience the above-mentioned problems themselves, especially since some of them are known issues.\n", "We should point people to the bazel releases page for sure. \n\nThe troubleshooting paragraph could be extended, but it cannot grow to contain all of the issue tracker. But we can certainly add a note that searching on the issue tracker is a sensible thing to do.\n", "In fact, we do point to bazel's releases page.\n"]}, {"number": 2750, "title": "Host a TensorBuilder patch for TensorFlow", "body": "Hi,\n\n> [TensorBuilder](https://github.com/cgarciae/tensorbuilder) is light-weight extensible library that enables you to easily create complex deep neural networks using functions from any Tensor-based library through a functional fluent immutable API based on the Builder Pattern. As a side effect, TensorBuilder is a library that gives expressive power to any Tensor-based library that decide to implement a TensorBuilder patch.\n\nTensorBuilder hosts a patch for `tensorflow`, using this patch you can rewrite the code like this\n\n```\nimport tensorflow as tf\n\nx = tf.placeholder(tf.float32, shape=[None, 5])\nkeep_prob = tf.placeholder(tf.float32)\n\nnet = tf.contrib.layers.fully_connected(x, 10, activation_fn=tf.nn.tanh) # tanh(x * w + b)\nnet = tf.nn.dropout(net, keep_prob) # dropout(x, keep_prob)\nh =  tf.contrib.layers.fully_connected(net, 3, activation_fn=tf.nn.softmax) # softmax(x * w + b)\n```\n\nas this \n\n```\nimport tensorflow as tf\nimport tensorbuilder as tb\nimport tensorbuilder.patches.tensorflow.slim\n\nx = tf.placeholder(tf.float32, shape=[None, 5])\nkeep_prob = tf.placeholder(tf.float32)\n\nh = (\n    x.builder()\n    .fully_connected(10, activation_fn=tf.nn.tanh)\n    .map(tf.nn.dropout, keep_prob)\n    .fully_connected(3, activation_fn=tf.nn.softmax)\n    .tensor()\n)\n```\n\nor even like this using a stronger patch\n\n```\nimport tensorflow as tf\nimport tensorbuilder as tb\nimport tensorbuilder.patches.tensorflow.patch\n\nx = tf.placeholder(tf.float32, shape=[None, 5])\nkeep_prob = tf.placeholder(tf.float32)\n\nh = (\n    x.builder()\n    .tanh_layer(10) \n    .dropout(keep_prob)\n    .softmax_layer(3)\n    .tensor()\n)\n```\n\nThe patch for the `tensorflow` library currently has full support for branching, see this example with the strong patch\n\n``` python\nimport tensorflow as tf\nimport tensorbuilder as tb\nimport tensorbuilder.patches.tensorflow.patch\n\nx = tf.placeholder(tf.float32, shape=[None, 5])\nkeep_prob = tf.placeholder(tf.float32)\n\nh = (\n    x.builder()\n    .fully_connected(10)\n    .branch(lambda root:\n    [\n        root\n        .relu_layer(3)\n    ,\n        root\n        .tanh_layer(9)\n        .branch(lambda root2:\n        [\n          root2\n          .sigmoid_layer(6)\n        ,\n          root2\n          .dropout(keep_prob)\n          .softmax_layer(8)\n        ])\n    ])\n    .sigmoid_layer(6) #<== This connects all the branches to a single output layer\n    .tensor()\n)\n```\n\nTensorBuilder even has a DSL that you get for free, so you could rewrite the previous as\n\n```\nimport tensorflow as tf\nimport tensorbuilder as tb\nimport tensorbuilder.patches.tensorflow.patch\nimport tensorbuilder.dsl as dl #<== Notice the alias\n\nx = tf.placeholder(tf.float32, shape=[None, 5])\nkeep_prob = tf.placeholder(tf.float32)\n\nh = x.builder().pipe(\n    dl.fully_connected(10),\n    [\n        dl.relu_layer(3)\n    ,\n        (dl.tanh_layer(9),\n        [\n            dl.sigmoid_layer(6)\n        ,\n            dl\n            .dropout(keep_prob)\n            .softmax_layer(8)\n        ])\n    ],\n    dl.sigmoid_layer(6)\n    .tensor()\n)\n```\n### Invitation\n\nI'd like to invite you to eventually host the TensorFlow patch for TensorBuilder on the TensorFlow library, because TensorBuilder really is just an empty shell, it doesn't even know about tensors, its a sort of functional tool for making non-composable/fluent APIs into composable/fluent APIs (in e.g. Elixir or Elm you wouldn't even need it), but it benefits a lot from libraries, and I am sure that tensorflow users will benefit a lot from it too.\n", "comments": ["@cgarciae That sounds like a great contribution.  What do you mean by hosting a patch?  It seems like it would be best as a separate repository.\n", "@girving The proposal is to eventually move the module `tensorbuilder.patches.tensorflow` out of TensorBuilder to a repo managed by the TensorFlow team, that way TensorBuilder can concentrate in being a wrapper that gives nice syntax to Tensor-based libraries.\n", "Here is the code that patches all the functions in the `tf.nn` as methods of the `Builder` class, just so you have a taste of the kind of code involved\n\n```\nimport tensorflow as tf\nimport tensorbuilder as tb\nimport inspect\n\nfor _f_name, f in inspect.getmembers(tf.nn, inspect.isfunction):\n    tb.Builder.register_map_method(f, \"tensorflow.nn\")\n```\n", "@cgarciae We wouldn't be able to support it, but it's possible it could go in `tf.contrib`.  @martinwicke What do you think?\n", "Since we cannot support it (and we would like to avoid confusion about that), it should not go into contrib. For now, keeping it in your repo makes the most sense. This is somewhat similar to PrettyTensor, but the DSL aspect is certainly nice -- it's been requested a lot.\n", "1. I'll maintain it for the moment but leave the invitation open.\n2. @martinwicke Yeah, its actually inspired by PrettyTensor (initially) but with some changes, the original README had this comment\n\n> TensorBuilder takes inspiration from [prettytensor](https://github.com/google/prettytensor) but its internals are simpler, its API is smaller but equally powerfull, its branching mechanism is more expresive and doesn't break the fluent API, and its immutable nature helps avoid a lot of conceptual complexity.\n\nA lot of problems I found with PrettyTensor is that its API was mutable, where as Tensor operations are immutable. So TensorBuilder is immutable, this makes creating an arbitrary number of branches trivial, you also don't need the Templates concept to specify a procedure, you just use a plain old python function from Builder to Builder.\n\nIn the last release I removed the core functionality for creating layers and delegated that to libraries through patches. Now TensorBuilder's focus is to enable Tensor-based libraries with nice syntax, branching capabilities, and the DSL.\n", "It is very cool. I have to look at the code more, we have always had issues\nwith special casing ops that don't work well with chaining (first arg not\nwhat you expect, etc).\nOn Thu, Jun 9, 2016 at 10:57 cgarciae notifications@github.com wrote:\n\n> 1. I'll maintain it for the moment but leave the invitation open.\n> 2. @martinwicke https://github.com/martinwicke Yeah, its actually\n>    inspired by PrettyTensor (initially) but with some changes, the original\n>    README had this comment\n> \n> TensorBuilder takes inspiration from prettytensor\n> https://github.com/google/prettytensor but its internals are simpler,\n> its API is smaller but equally powerfull, its branching mechanism is more\n> expresive and doesn't break the fluent API, and its immutable nature helps\n> avoid a lot of conceptual complexity.\n> \n> A lot of problems I found with PrettyTensor is that its API was mutable,\n> where as Tensor operations are immutable. So TensorBuilder is immutable,\n> this makes creating an arbitrary number of branches trivial, you also don't\n> need the Templates concept to specify a procedure, you just use a plain old\n> python function from Builder to Builder.\n> \n> In the last release I removed the core functionality for creating layers\n> and delegated that to libraries through patches. Now TensorBuilder's focus\n> is to enable Tensor-based libraries with nice syntax, branching\n> capabilities, and the DSL.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2750#issuecomment-224975942,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAjO_ci99ZcbgWdIdm4sLRbY59YkA6jEks5qKFQfgaJpZM4Ixorg\n> .\n", "Closing the issue for now since it isn't likely to go in the core `tensorflow` repo, but we'd be happy to point to it from the community resources page once it's up and running.\n"]}, {"number": 2749, "title": "Fix for build issue #2742;", "body": "(1) Additionally added linking against pthread for linux machines\n", "comments": ["Can one of the admins verify this patch?\n", "@tensorflow-jenkins test this please\n", "I had to add the pthread library on the Raspberry Pi too (though I'm not sure why some distros don't require it), so this additional change looks good to me. Thanks Gregory, I'll merge it once the tests pass.\n"]}, {"number": 2748, "title": "Skflow monitor bug?", "body": "I tried to use the monitor functionality from the [latest build of tensorflow](http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_CONTAINER_TYPE=CPU,TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=PYTHON2,label=cpu-slave/lastStableBuild/), in order to keep track of validation loss. Here is my code:\n\n`classifier = learn.TensorFlowRNNClassifier(rnn_size=EMBEDDING_SIZE, n_classes=8, cell_type='gru', input_op_fn=input_op_fn, num_layers=3, bidirectional=False, sequence_length=None, batch_size=50, steps=2000, optimizer='Adam', learning_rate=exp_decay, continue_training=False, clip_gradients=5.0)\n\nval_monitor = learn.monitors.ValidationMonitor(X_test, y_test)\n\nclassifier.fit(X_train, y_train, val_monitor, logdir='log_rnn')`\n\nHere is the error message:\n\n> Traceback (most recent call last):\n>   File \"/home/yangmch/Documents/FB word2vec/RNN/FB RNN.py\", line 38, in <module>\n>     classifier.fit(X_train, y_train, val_monitor, logdir='log_rnn')\n>   File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 160, in fit\n>     monitors=monitors)\n>   File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 498, in _train_model\n>     monitors=monitors)\n>   File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 225, in train\n>     monitor.begin(max_steps=start_step + steps)\n> TypeError: unsupported operand type(s) for +: 'int' and 'ValidationMonitor'\n", "comments": ["I'm getting the same issue using RNN in Python 3.5 with the current and nightly build. Any ideas?\n", "@yangmch @Anjum48 tf.learn and tensorflow in general are better used with named arguments.\nFor example in this case you are passing `ValidationMonitor` as number of steps.\nIf you should be `classifier.fit(x=X_train, y=y_train, steps=100, logdir='/path/', monitors=[ValidationMonitor])`.\n\nPlease let me know if this fixes your issue. Also can you point me where you took this usage from? [This example](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/skflow/iris_val_based_early_stopping.py#L47) shows it correctly, so if there is another example somewhere we should fix it.\n", "Thanks for the reply @ilblackdragon. I'm using the [digits example](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/skflow/digits.py) as a guide for my project, which also recreates the error @yangmch first mentioned.\n\nAfter changing the code to use named arguments in line 57:\n`classifier.fit(x=X_train, y=y_train, monitors=[val_monitor])`\n\nI'm now seeing this error:\n\n```\n/usr/bin/python3.5 /home/anjum/Python/digits.py\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmp11b6ov7o\nWARNING:tensorflow:learn.ops.conv2d is deprecated. Please use contrib.layers.convolution2d.\nTraceback (most recent call last):\n  File \"/home/anjum/Python/test.py\", line 57, in <module>\n    classifier.fit(x=X_train, y=y_train, monitors=[val_monitor])\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 161, in fit\n    monitors=monitors)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 508, in _train_model\n    monitors=monitors)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 343, in train\n    reraise(*excinfo)\n  File \"/usr/lib/python3/dist-packages/six.py\", line 686, in reraise\n    raise value\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 272, in train\n    session, last_step + 1, [train_op, loss_op], feed_dict, monitors)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 121, in _run_with_monitors\n    induce_stop = monitor.step_end(step, outputs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/monitors.py\", line 206, in step_end\n    to_stop = self.every_n_step_end(step, output)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/monitors.py\", line 368, in every_n_step_end\n    metrics=self.metrics, name=self.name)\nTypeError: evaluate() got an unexpected keyword argument 'batch_size'\n\nProcess finished with exit code 1\n```\n\nUsing the Linux CPU only version in Python 3.5. Tested with v0.9 and the nightly build\n", "I am seeing the \"got an unexpected keyword argument 'batch_size'\" error as well. I'm trying to set the batch size of the monitor in order to lower the number of CV values to test during each monitor iteration. I'm using tf 0.9 and I'm calling the monitor like so\n\n```\nval_monitor = monitors.ValidationMonitor(valid_X, valid_y, every_n_steps=100, batch_size=64)\nclassifier = learn.TensorFlowEstimator(model_fn=conv_model_v3, n_classes=my_classes,steps=my_steps, learning_rate=my_learning_rate,batch_size=my_batch_size)\nclassifier.fit(train_X, train_y, monitors=[val_monitor]) \n```\n\nThe error I get:\n\n```\nTraceback (most recent call last):\n  File \"/data/BitBucket/distracted-drivers/model3-deeper-cnn-with-gpu.py\", line 481, in <module>\n    val_monitor = monitors.ValidationMonitor(valid_X, valid_y, every_n_steps=100, batch_size=64)\nTypeError: __init__() got an unexpected keyword argument 'batch_size'\n```\n", "I've met the same problem when I used Jupyter Notebook environment to implement convolutional networks model with early stoping and custom decay function for learning rate according to [scikit-flow-intro](http://terrytangyuan.github.io/2016/03/14/scikit-flow-intro/).\n\nThe error log from Jupyter Notebook environment is here: https://gist.github.com/huixutech/1763c1b992247eecf639c38d5df4fe72\n\nMy script is here: https://gist.github.com/huixutech/f0ebd95cf0b1dff9102ca33fe7d58c87\n\nHowever, when I run the python script in terminal environment, this problem also appears, but it can get a good score result. A little bit strange.\n\nIs there any suggested solution?\n", "@huixutech which version are you using?\n", "@terrytangyuan The TensorFlow commit version number is 10fbaf0581700641fc9b38b1bd722044bfb7c638 \n", "@huixutech The examples are out-dated. Estimators starting with `TensorFlow***` are deprecated and will be removed soon. Could you try using the new estimators? Pull requests for fixing those examples are more than welcomed!\n", "@terrytangyuan Sure, I'll try it. Thank you for your suggestion. \n", "Automatically closing due to lack of recent activity. Please re-open when more information becomes available.\n", "I have same issue and find that it is because TensorFlowEstimator doesn't match base estimator for evaluate method, although it is going to be deprecated:\n\nhttps://github.com/tensorflow/tensorflow/commit/a10fae7e2fb7fbe0a4b009e05692ec249cab76e1#diff-368aea0dba09d3a39aa518badc526cdb\n", "@terrytangyuan: \"The examples are out-dated. Estimators starting with TensorFlow**\\* are deprecated and will be removed soon. Could you try using the new estimators? \" - which one works with monitors?\n", "All other estimators should work\n\nOn Friday, August 19, 2016, Lucian Sasu notifications@github.com wrote:\n\n> @terrytangyuan https://github.com/terrytangyuan: \"The examples are\n> out-dated. Estimators starting with TensorFlow**\\* are deprecated and will\n> be removed soon. Could you try using the new estimators? \" - which one\n> works with monitors?\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2748#issuecomment-241017880,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AEEnSjIS_LhNYUZ6S-EKBqpV_CpIeqWFks5qha9ogaJpZM4Ixnl8\n> .\n"]}, {"number": 2747, "title": "Immediate execution mode with graph caching.", "body": "Implementation of immediate mode execution in TensorFlow. The idea is to wrap original tensorflow API, but provide session/run management logic so that commands execute immediately, and graph caching to avoid modifying graph when same op is run repeatedly. Data is kept in TensorFlow runtime whenever possible using persistent tensors and transferred to Python runtime on demand when needed for printing/control flow.\n\n```\nimport tensorflow as tf\nfrom tensorflow.contrib import immediate\n\ntfi = immediate.Env(tf).tf        # wraps \"tf\" namespace, saves it as \"tfi\"\nval1 = tfi.ones((3,))             # creates tensor on GPU\nval2 = val1 + val1                # runs into tf.add, keeps result on GPU\nval3 = tfi.ones((2, 2, 2, 2))\nval4 = tfi.nn.conv2d(val3, val3, [1, 1, 1, 1], \"VALID\")   # run CuDNN conv2d\nif (tfi.reduce_sum(val3)>0.):     # runs reduce_sum on GPU, transfers bool to CPU\n  print(val4)                     # transfers whole tensor to CPU for display\n\n```\n\nThis is a single commit rebase of a previous pull request from https://github.com/tensorflow/tensorflow/pull/2346\n\n@keveman @yuanbyu \n", "comments": ["Can one of the admins verify this patch?\n", "Can one of the admins verify this patch?\n", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for the commit author(s).  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\n\n<!-- need_author_cla -->\n", "https://github.com/edx/edx-platform/wiki/How-to-Rebase-a-Pull-Request\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "I tried the following :\n\n```\nimport tensorflow as tf\nfrom tensorflow.contrib import immediate\ntfi = immediate.Env(tf).tf\n\nval1 = tfi.ones((3,))\nval2 = val1 + val1\n```\n\nand got :\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/tmp/imm_venv/local/lib/python2.7/site-packages/tensorflow/contrib/immediate/python/immediate/itensor.py\", line 103, in __add__\n    return self.env.tf.add(self, other)\n  File \"/tmp/imm_venv/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 70, in add\n    result = _op_def_lib.apply_op(\"Add\", x=x, y=y, name=name)\n  File \"/tmp/imm_venv/local/lib/python2.7/site-packages/tensorflow/contrib/immediate/python/immediate/op.py\", line 158, in apply_op\n    name=op_name)\nTypeError: get_session_tensor() takes at least 2 arguments (2 given)\n```\n\nDo you think you forgot to commit and push some changes?\n", "It looks like https://github.com/tensorflow/tensorflow/commit/bf8084b71006123575c6416d69efdd00c13fe41c has changed the signature of `get_session_tensor`, let me update it with new sig\n", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for the commit author(s).  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\n\n<!-- need_author_cla -->\n", "So I just sequence below which brought a bunch of extra commits. [hood-devel](https://github.com/yaroslavvb/tensorflow/tree/hood-devel) is my develoment branch which is one commit ahead of master, and hood is my pull request branch, and merging hood-devel into hood like below pulls new commits into pull request for some reason\n\n```\ngit checkout hood-devel\ngit merge -s ours hood\ngit checkout hood\ngit merge hood-devel\ngit push\n```\n\nOK, seems like merge always needs to be followed by rebase, TLDR; to squash, rebase and overwrite all conflicting files by version in $mybranch\n\n```\ngit checkout $mybranch\ngit remote add tfmain https://github.com/tensorflow/tensorflow.git\ngit fetch --all\nexport merge_root=`git merge-base $mybranch tfmain/master`\ngit rebase -i $merge_root\ngit rebase -Xtheirs tfmain/master\n```\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "Jenkins, test this please.\n", "There's a failure in `//tensorflow/tools/test:check_futures_test` in `Linux CPU Tests (Python 3) \u2014 FAILURE`. I can run it locally with `bazel test //tensorflow/tools/test:check_futures_test` and it passes. Any suggestions how I can see the logs/reproduce the failure?\n", "I think I fixed test_util issue, can someone trigger tests again? I believe \"test_util\" failure is caused by \"bazel test\" not being hermetic. If you build pip package and do `python setup.py develop`, then future `bazel test` will prefer try to grab python files from pip-package path, rather than dependencies specified for the test in `BUILD` file . Work-around is to make sure all Python files make it into pip package. The `check_futures_test` ones I fixed by running \"check_futures_test\" as a binary, not as `bazel test` and editing source to specify new `BASE_DIR`\n", "Jenkins, test this please.\n", "Tweaked/disabled some failing tests caused by Jenkins environment being different from mine ([issue #2844](https://github.com/tensorflow/tensorflow/issues/2844) ). Didn't have any luck debugging 2to3 failure in Python3 compatibility test (bazel [issue #1393](https://github.com/bazelbuild/bazel/issues/1393)), but this is ready for another Jenkins run\n", "Jenkins, test this please.\n", "On this [ci.tensorflow.org](http://ci.tensorflow.org/job/tensorflow-pull-requests-cpu-python3/731/consoleFull) I see failure in `tensor_handle_test`, but it doesn't give any details, is there a way to see the log file linked `/var/lib/jenkins/workspace/tensorflow-pull-requests-cpu-python3/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/workspace/bazel-out/local_linux-py3-opt/testlogs/tensorflow/contrib/immediate/tensor_handle_test/test.log` ?\n", "This kind of error is usually because you don't have srcs_version = \"PY2AND3\" on some python target. I see a bunch of cases in your BUILD files, so maybe that's it?\n", "@martinwicke maybe, although that particular test already had `PY2AND3` on its deps. I've added it on all targets anyway, could you trigger the tests again?\n", "Jenkins, test this please.\n", "There was [internal commit](https://github.com/tensorflow/tensorflow/commit/a558c6e3b38846727873b5afbbc3ba309ae5dff5) yesterday that moved some libraries around and broke immediate, just updated it with the fix. PS: I'm going traveling at the end of next week, let me know if there's something I can do to help get this in before it bit rots.\n", "Jenkins, test this please.\n", "@yaroslavvb Thanks for working on this and sending the PR. Imperative mode of execution is a really important feature that many users have asked for. While your implementation is impressive, it doesn't support a major feature that users ask for and we would like to get working, namely, automatic differentiation via `tf.gradients`. We believe the best way to implement the imperative mode that is efficient and would allow automatic differentiation to work out of the box would need some significant support in the backend. We are working on adding that support currently. I will keep you posted on its progress.\n", "So is the gradient support an alternative to this implementation, or is it something that can be built on top?\n", "It's an alternative implementation.\n", "Closing this to spin it off into stand-alone library\n"]}, {"number": 2746, "title": "Missing pywrap_tensorflow", "body": "### Environment info\n\nOperating System: Linux Mint 17 (Ubuntu 14.04)\n\nInstalled version of CUDA and cuDNN: \nN/A - running CPU mode only\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n\n```\n$ python -c \"import tensorflow; print(tensorflow.__version__)\"\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"tensorflow/python/__init__.py\", line 48, in <module>\n    from tensorflow.python import pywrap_tensorflow\nImportError: cannot import name pywrap_tensorflow\n```\n\nIf installed from sources, provide the commit hash:\n\n```\n$ git rev-parse HEAD\nb2a812b962f8088a8256d4e6271b9cd425936446\n```\n### Steps to reproduce\n1. In python: import tensorflow\n   1a. Alternatively in python: import pywraper_tensorflow\n### What have you tried?\n1. pip install, pip uninstall/reinstall, built from source\n", "comments": ["I've seen this happen when the build failed for some reason. Do you have\nany errors when you do \"bazel build\"?\n\nAlso you could try a sample test to see if anything works at all, ie:\nbazel test -c opt //tensorflow/python:graph_util_test\n\nOn Wed, Jun 8, 2016 at 5:53 PM, ss32 notifications@github.com wrote:\n\n> Environment info\n> \n> Operating System: Linux Mint 17 (Ubuntu 14.04)\n> \n> Installed version of CUDA and cuDNN:\n> N/A - running CPU mode only\n> \n> If installed from binary pip package, provide:\n> 1. Which pip package you installed.\n> 2. The output from python -c \"import tensorflow;\n>    print(tensorflow.**version**)\".\n> \n> $ python -c \"import tensorflow; print(tensorflow.**version**)\"\n> Traceback (most recent call last):\n>   File \"<string>\", line 1, in <module>\n>   File \"tensorflow/**init**.py\", line 23, in <module>\n>     from tensorflow.python import *\n>   File \"tensorflow/python/**init**.py\", line 48, in <module>\n>     from tensorflow.python import pywrap_tensorflow\n> ImportError: cannot import name pywrap_tensorflow\n> \n> If installed from sources, provide the commit hash:\n> \n> $ git rev-parse HEAD\n> b2a812b962f8088a8256d4e6271b9cd425936446\n> \n> Steps to reproduce\n> 1. In python: import tensorflow 1a. Alternatively in python: import\n>    pywraper_tensorflow\n> \n> What have you tried?\n> 1. pip install, pip uninstall/reinstall, built from source\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2746, or mute the thread\n> https://github.com/notifications/unsubscribe/AABaHFxHqyPAzkuS9Horc_GFHVLAOAWyks5qJ2P2gaJpZM4Ixi2T\n> .\n", "It failed, which is odd because the eigenvalue test worked without any issues.  When I installed via pip I was getting this same error message at first, and then reinstalled via pip and got the error message from my first post\n\n`cat /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/testlogs/tensorflow/python/graph_util_test/test.log`\n\n```\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\nTraceback (most recent call last):'\n\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/client/graph_util_test.py\", line 21, in <module>\n    import tensorflow as tf\n\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 97, in <module>\n    from tensorflow.python.platform import test\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/test.py\", line 62, in <module>\n    from tensorflow.python.framework import test_util\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 41, in <module>\n    from tensorflow.python.platform import googletest\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/googletest.py\", line 32, in <module>\n    from tensorflow.python.platform import benchmark  # pylint: disable=unused-import\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/benchmark.py\", line 112, in <module>\n    class Benchmark(six.with_metaclass(_BenchmarkRegistrar, object)):\n\nFile \"/usr/lib/python2.7/dist-packages/six.py\", line 617, in with_metaclass\n    return meta(\"NewBase\", bases, {})\n\nFile \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/benchmark.py\", line 107, in __new__\n    if not newclass.is_abstract():\n\n```\n", "@ss32 Did I read that right that your build failed?  What was the error?\n", "I never got an error when building, but that test failed, yes.  The eigenvalue test worked, though.  So, the full history:\n\nTried pip install, got the `if not newclass.is_abstract():` error, same as above.\nReinstalled via pip and got the `ImportError: cannot import name pywrap_tensorflow` error.\nReinstalled from source and got the `ImportError: cannot import name pywrap_tensorflow`  error.\n\nSource build passed the eigenvalue test, failed the test posted above.\n", "@ss32 Your traceback is missing the bottom part with the actual error.\n\nPossibly related -- `pip install` interacts with `bazel test`. In particular, if you do \"pip install\" to setup TensorFlow for development in _python_build, then `bazel test` will look inside _python_build for dependencies. You can recover the proper behavior by moving _python_build to _python_build.disabled\n", "Full output of \n\n`bazel test -c opt //tensorflow/python:graph_util_test`\n\n```\nWARNING: /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/protobuf/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/protobuf/WORKSPACE (@__main__) does not match the name given in the repository's definition (@protobuf); this will cause a build error in future versions.\nWARNING: /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/re2/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/re2/WORKSPACE (@__main__) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\nWARNING: /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/highwayhash/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/highwayhash/WORKSPACE (@__main__) does not match the name given in the repository's definition (@highwayhash); this will cause a build error in future versions.\nWARNING: /home/user/tensorflow/util/python/BUILD:11:16: in includes attribute of cc_library rule //util/python:python_headers: 'python_include' resolves to 'util/python/python_include' not in 'third_party'. This will be an error in the future.\nINFO: Found 1 test target...\nFAIL: //tensorflow/python:graph_util_test (see /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/testlogs/tensorflow/python/graph_util_test/test.log).\nTarget //tensorflow/python:graph_util_test up-to-date:\n  bazel-bin/tensorflow/python/graph_util_test\nINFO: Elapsed time: 12.257s, Critical Path: 4.60s\n//tensorflow/python:graph_util_test                                      FAILED in 0.6s\n  /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/testlogs/tensorflow/python/graph_util_test/test.log\n\n```\n\n`cat /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/testlogs/tensorflow/python/graph_util_test/test.log\n`\n\n```\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\n-----------------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/client/graph_util_test.py\", line 21, in <module>\n    import tensorflow as tf\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 97, in <module>\n    from tensorflow.python.platform import test\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/test.py\", line 62, in <module>\n    from tensorflow.python.framework import test_util\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 41, in <module>\n    from tensorflow.python.platform import googletest\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/googletest.py\", line 32, in <module>\n    from tensorflow.python.platform import benchmark  # pylint: disable=unused-import\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/benchmark.py\", line 112, in <module>\n    class Benchmark(six.with_metaclass(_BenchmarkRegistrar, object)):\n  File \"/usr/lib/python2.7/dist-packages/six.py\", line 617, in with_metaclass\n    return meta(\"NewBase\", bases, {})\n  File \"/home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/bin/tensorflow/python/graph_util_test.runfiles/org_tensorflow/tensorflow/python/platform/benchmark.py\", line 107, in __new__\n    if not newclass.is_abstract():\nAttributeError: type object 'NewBase' has no attribute 'is_abstract'\n```\n", "Sorry, the command should be\nbazel test -c opt//tensorflow/python:graph_util_test --test_output=streamed\n\nFor reference, I just did installation from head, and it worked, here's the\nfull sequence of commands I used\n\n# start new GPU TensorFlow build\n\nmkdir /Users/yaroslavvb/tfimmediate_macbook\ncd /Users/yaroslavvb/tfimmediate_macbook\ngit clone https://github.com/tensorflow/tensorflow.git\ncd tensorflow\n\n# Remove files that \"./configure\" touches from index\n\ngit update-index --skip-worktree\ntensorflow/core/common_runtime/gpu/gpu_device.cc\ngit update-index --skip-worktree tensorflow/stream_executor/dso_loader.cc\ngit update-index --skip-worktree\nthird_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\ngit update-index --skip-worktree third_party/gpus/cuda/platform.bzl\n\n./configure\nhost compiler: default\ncuda sdk version: 7.5\nlocation where tool is installed (/usr/local/cuda):\ncudnn version: 5\nwhere cudnn is installed:\ncompute capability: 3.0\n\nbazel build -c opt --config=cuda tensorflow/...\n\nOn Thu, Jun 9, 2016 at 10:39 AM, ss32 notifications@github.com wrote:\n\n> Full output of\n> \n> bazel test -c opt//tensorflow/python:graph_util_test`\n> \n> WARNING: /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/protobuf/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/protobuf/WORKSPACE (@__main__) does not match the name given in the repository's definition (@protobuf); this will cause a build error in future versions.\n> WARNING: /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/re2/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/re2/WORKSPACE (@__main__) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\n> WARNING: /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/highwayhash/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/external/highwayhash/WORKSPACE (@__main__) does not match the name given in the repository's definition (@highwayhash); this will cause a build error in future versions.\n> WARNING: /home/user/tensorflow/util/python/BUILD:11:16: in includes attribute of cc_library rule //util/python:python_headers: 'python_include' resolves to 'util/python/python_include' not in 'third_party'. This will be an error in the future.\n> INFO: Found 1 test target...\n> FAIL: //tensorflow/python:graph_util_test (see /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/testlogs/tensorflow/python/graph_util_test/test.log).\n> Target //tensorflow/python:graph_util_test up-to-date:\n>   bazel-bin/tensorflow/python/graph_util_test\n> INFO: Elapsed time: 12.257s, Critical Path: 4.60s\n> //tensorflow/python:graph_util_test                                      FAILED in 0.6s\n>   /home/user/.cache/bazel/_bazel_user/f1b63f8b8ef5ddbd718e9d3afcdbe12a/tensorflow/bazel-out/local-opt/testlogs/tensorflow/python/graph_util_test/test.log\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/2746#issuecomment-224970478,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABaHJgPOU2DB4KOP942x1v4yN2foV6Zks5qKE_OgaJpZM4Ixi2T\n> .\n", "@ss32 what version of Python are you using? `is_abstract` seems like something that Python should provide\n", "@yaroslavvb 2.7.3.  There is something broken in my installation for sure.  I spun up a virtual machine and installed tensorflow via pip and it worked on the first try.  I'll have to go through and try to clean up what I've done and see if I can start fresh on my machine.\n", "Solved with \n\n```\nsudo pip uninstall six\nsudo pip install six --upgrade --target=\"/usr/lib/python2.7/dist-packages\"\n```\n\nFrom: https://github.com/tensorflow/tensorflow/issues/2016#issuecomment-215675850\n"]}, {"number": 2745, "title": "running digits.py", "body": "GitHub issues are for bugs / installation problems / feature requests.  \nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\n\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\n### Environment info\n\nOperating System:MAC OSX El Captain\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n   tensorflow\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n   0.8.0\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n\n1.run run digits.py from examples in tensorflow/tensorflow/examples/skflow directory\n2.\n3.\n### What have you tried?\n1. BaseModel **init** does except argument - perhaps i need to update tensorflow but not sure how to using pip\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n", "comments": ["What error message are you seeing?\n", "This is error message:\nTypeError                                 Traceback (most recent call last)\n<ipython-input-66-aa3e49af45b1> in <module>()\n     49 \n     50 if **name** == '**main**':\n---> 51   tf.app.run()\n\n/Users/joe/anaconda/lib/python2.7/site-packages/tensorflow/python/platform/app.pyc in run(main)\n     28   f._parse_flags()\n     29   main = main or sys.modules['__main__'].main\n---> 30   sys.exit(main(sys.argv))\n\n<ipython-input-66-aa3e49af45b1> in main(unused_argv)\n     39 \n     40   # Fit\n---> 41   regressor.fit(x_train, y_train, steps=5000, batch_size=1)\n     42 \n     43   # Predict and score\n\nTypeError: fit() got an unexpected keyword argument 'steps'\n\nThanks.\n", "@jbohart Could you give me the unmangled traceback?  Somehow you've managed to strip away all the file information showing what code is involved.\n", "not sure best way to do this. i've attached the code i'm running to get the error.\nTried various combinations of: python -m trace --trace test.py and using import traceback with print_tb to no avail. \n[test.py.txt](https://github.com/tensorflow/tensorflow/files/308247/test.py.txt)\n", "@ispirmustafa: Is `regressor.fit` supposed to take a steps argument?\n", "@ispirmustafa friendly ping to take a look.\n", "Yes, fit supposed to take a steps. Default is None which means run infinitely or until input is exhausted.\n", "Seems fixed in the code, but I'm not a tf.learn person regardless.  @jbohart Can you confirm this is fixed?\n", "Automatically closing due to lack of recent activity. Please reopen when additional information becomes available.\n", "testing:\n#1:\nclone latest repo\ncd examples/skflow\npython digits.py\ngot error below\n#2: \nsudo pip install tensorflow --upgrade\npython digits.py\ngot same error below \n\nerror:\nTraceback (most recent call last):\n  File \"digits.py\", line 52, in <module>\n    val_monitor = monitors.ValidationMonitor(X_val, y_val, every_n_steps=50)\nTypeError: **init**() got an unexpected keyword argument 'every_n_steps'\n\nthx.\n", "The monitors interface has changes recently, this may or may not work for 0.8.0. @jbohart are you also running on 0.8.0?\n", "Yes, I'm running 0.8.0.\n", "@jbohart Could you try the latest version? It should be there now. [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/monitors.py#L606)\n"]}]