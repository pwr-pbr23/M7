[{"number": 41299, "title": "How to disable mkl_dnn when compile TensorFlow 1.15?", "body": "Compile TensorFlow 1.15 from source code will use more than 1.5 hours, and during compile I find mkl_cudnn is compiled by default.  What I need is TensorFlow 1.15 with CUDA support, how to reduce the compile time?", "comments": ["And could anyone tell me how to let bazel compile the changed code file, not all the code? The bazel is hard to use, and I only change one line of code, the bazel is compiling all the code, bazel is so bad.", "And if I logout ssh, and re-connect to the same workstation, any change to source code will lead to bazel compile the whole code,   how to avoid this? Is there any way to force bazel use the compile cache and only compile changed code?", "I don't know if this will help you, but I'm using Bazel's Remote Caching feature for fast builds.\r\n1. **[Ultra-fast build of Tensorflow with Bazel Remote Caching [Docker version]](https://qiita.com/PINTO/items/49ce77a6ee03b404c156)**\r\n2. **[Ultra-fast build of Tensorflow with Bazel Remote Caching [Google Cloud Storage version]](https://qiita.com/PINTO/items/eef2eccc21dc72227d0f)**\r\n![001](https://user-images.githubusercontent.com/33194443/87235951-7688e480-c41d-11ea-9339-5ac436d9bc28.gif)\r\n\r\n**[Bazel - Remote caching - official tutorial](https://docs.bazel.build/versions/master/remote-caching.html)**", "@PINTO0309  thank you, I will have a try.", "@Keepmoving-ZXY,\r\nAs mentioned in the [build from source](https://www.tensorflow.org/install/source#gpu_support) guide, please set `cuda=Y` for GPU/CUDA support.  Thanks!", "@amahendrakar I want to know when build tensorflow 1.15 with cuda support, how to disable mkl_dnn manually ?", "@Keepmoving-ZXY \r\nmkl_dnn is disable by default.\r\n\r\n`--config=mkl` will enable mkl_dnn.\r\n\r\nCould you share your build cmd if there is still enable mkl_dnn?\r\n\r\nNote, please clean the build env before rebuild it for disable mkl_dnn.", "@Keepmoving-ZXY \r\n\r\nIs there any feedback?", "@Keepmoving-ZXY \r\n\r\nIs it possible to close this issue?", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41299\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41299\">No</a>\n"]}, {"number": 41298, "title": "tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot add tensor to the batch: number of elements does not match. Shapes are: [tensor]: [3], [batch]: [5]", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below): 2.2 \r\n- Python version: 3.7.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: titan xp \r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n\r\n**Describe the current behavior**\r\n\r\n**Describe the expected behavior**\r\n\r\n**Standalone code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\n\r\n\r\n\r\ngetting error  \r\n\r\n`tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot add tensor to the batch: number of elements does not match. Shapes are: [tensor]: [3], [batch]: [5]`\r\n\r\n```\r\ndef train():\r\n    print('train')\r\n    print(tf.__version__)\r\n    batch_size= 2\r\n    images,boxes,labels,difficulties,new_boxes= PascalVOCDataset()\r\n    new_boxes = list(new_boxes)\r\n\r\n\r\n    boxes = tf.ragged.constant(boxes)\r\n    labels = tf.ragged.constant(labels)\r\n    new_boxes = tf.ragged.constant(new_boxes)\r\n\r\n    print('boxes->',boxes.shape)\r\n    print('labels->',labels.shape)\r\n    print('images->', np.array(images).shape)\r\n\r\n    dataset = tf.data.Dataset.from_tensor_slices((images,new_boxes,labels))\r\n    run_train(dataset.map(resize_image_bbox, num_parallel_calls=tf.data.experimental.AUTOTUNE).batch(batch_size).prefetch(tf.data.experimental.AUTOTUNE))\r\n\r\ndef main():\r\n    train()\r\nif __name__ =='__main__':\r\n    main()\r\nboxes-> (5717, None, None)\r\nlabels-> (5717, None)\r\nimages-> (5717,)\r\n===============================================resize_image_bbox\r\nnew_image-> (300, 300, 3)\r\nnew_boxes-> (None, None)\r\nlabels-> (None,)\r\nrun_train\r\ndataset-> <PrefetchDataset shapes: ((None, 300, 300, 3), (None, None, None), (None, None)), types: (tf.float32, tf.float32, tf.int32)>\r\n=========================================================\r\nimage_shape-> (2, 300, 300, 3)\r\nlabels_shape-> (2, 2)\r\nboxes_shape-> (2,)\r\n```\r\n\r\nwhen I change the batch_size 1-> any number it gives this error \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/jake/Gits/ssd_tensorflow/train.py\", line 64, in <module>\r\n    main()\r\n  File \"/home/jake/Gits/ssd_tensorflow/train.py\", line 62, in main\r\n    train()\r\n  File \"/home/jake/Gits/ssd_tensorflow/train.py\", line 59, in train\r\n    run_train(dataset.map(resize_image_bbox, num_parallel_calls=tf.data.experimental.AUTOTUNE).batch(batch_size).prefetch(tf.data.experimental.AUTOTUNE))\r\n  File \"/home/jake/Gits/ssd_tensorflow/train.py\", line 26, in run_train\r\n    for idx,(images,boxes,labels) in enumerate(dataset): # (batch_size (N), 300, 300, 3)\r\n  File \"/home/jake/venv/lib/python3.7/site-packages/tensorflow/python/data/ops/iterator_ops.py\", line 631, in __next__\r\n    return self.next()\r\n  File \"/home/jake/venv/lib/python3.7/site-packages/tensorflow/python/data/ops/iterator_ops.py\", line 670, in next\r\n    return self._next_internal()\r\n  File \"/home/jake/venv/lib/python3.7/site-packages/tensorflow/python/data/ops/iterator_ops.py\", line 661, in _next_internal\r\n    return structure.from_compatible_tensor_list(self._element_spec, ret)\r\n  File \"/usr/lib/python3.7/contextlib.py\", line 130, in __exit__\r\n    self.gen.throw(type, value, traceback)\r\n  File \"/home/jake/venv/lib/python3.7/site-packages/tensorflow/python/eager/context.py\", line 1989, in execution_mode\r\n    executor_new.wait()\r\n  File \"/home/jake/venv/lib/python3.7/site-packages/tensorflow/python/eager/executor.py\", line 67, in wait\r\n    pywrap_tfe.TFE_ExecutorWaitForAllPendingNodes(self._handle)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot add tensor to the batch: number of elements does not match. Shapes are: [tensor]: [3], [batch]: [5]\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\n", "comments": ["@SlowMonk \r\nPlease provide us with indented code such that we can replicate the issue faced, we face a different error for the code shared, please find the [gist here](https://colab.research.google.com/gist/Saduf2019/07c95841a809d3ef4da348962508fbde/untitled272.ipynb)\r\n\r\nWith respect to the error please refer to below issues and let us know if it helps:\r\n#34544 # [link](https://stackoverflow.com/questions/59006696/cannot-add-tensor-to-the-batch-number-of-elements-does-not-match-shapes-are) [link](https://github.com/tensorflow/tensorflow/issues/40919#issuecomment-656728535) ", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41298\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41298\">No</a>\n"]}, {"number": 41297, "title": "Summary op bm", "body": "@annarev @bmzhao  \r\nAdded benchmarking for SummaryScalar Op. Awaiting summary_op merge before adding build dependencies for this benchmark. ", "comments": []}, {"number": 41296, "title": "Let Attention layer accept a layer mask of list of length 3, namely [query_mask, value_mask, key_mask] #41294", "body": "#41294 \r\n\r\nFirst pull request feel free to let me know if I am doing anything wrong. Thanks\r\n\r\nfor tf.keras.layers.Attention currently the layer mask must be a list of length 2, namely [query_mask, value_mask]\r\nchange it to also accept a layer mask of list of length 3, namely [query_mask, value_mask, key_mask]\r\n\r\ncurrently def compute_mask() returns the query_mask and ignores the value_mask. If passed a key_mask it could also just be ignored\r\n", "comments": ["All (the pull request submitter and all commit authors) CLAs are signed, **but** one or more commits were authored or co-authored by someone other than the pull request submitter.\n\nWe need to confirm that all authors are ok with their commits being contributed to this project.  Please have them confirm that by leaving a comment that contains only `@googlebot I consent.` in this pull request.\n\n*Note to project maintainer:* There may be cases where the author cannot leave a comment, or the comment is not properly detected as consent.  In those cases, you can manually confirm consent of the commit author(s), and set the `cla` label to `yes` (if enabled on your project).\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F41296) for more info**.\n\n<!-- need_author_consent -->", "@bubblebooy Can you please sign CLA and resolve conflicts? \r\nCan you also use a relevant title for the PR and include a short description in the first message field?  Thank you!", "@googlebot I consent.", "Seems like this branch includes many TensorFlow commits rebased weirdly on master, I suspect it needs some cleanup.\r\n Looking at the \"commits\" tab you need to make sure it only have your own commits.", "CLAs look good, thanks!\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F41296) for more info**.\n\n<!-- ok -->"]}, {"number": 41295, "title": "Prefer Python 3 methods over compatibility aliases", "body": "This PR consolidates the implementation of magic methods like `__next__` and `__bool__` to under the Python 3 name and alias the Python 2 equivalent to be consistent accross the codebase.", "comments": ["@mihaimaruseac Thanks a lot for the fast review! Would you mind to also take a look at #41293?"]}, {"number": 41294, "title": "Let Attention layer accept a layer mask of list of length 3, namely [query_mask, value_mask, key_mask]", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (2.2.0):\r\n- Are you willing to contribute it (Yes):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nfor tf.keras.layers.Attention currently the layer mask must be a list of length 2, namely [query_mask, value_mask]\r\nchange it to also accept a layer mask of list of length 3, namely [query_mask, value_mask, key_mask]\r\n\r\ncurrently def compute_mask() returns the query_mask and ignores the value_mask. If passed a key_mask it could also just be ignored\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n", "comments": ["**Who will benefit with this feature?**\r\nExample:\r\n```Encoder example\r\ninput = tf.keras.layers.Input(shape=(None,))\r\nx = tf.keras.layers.Embedding(input_vocab_size, d_model, mask_zero=True)(input)\r\nquery = tf.keras.layers.Dense(d_model)(x)\r\nvalue =  tf.keras.layers.Dense(d_model)(x)\r\nkey    =  tf.keras.layers.Dense(d_model)(x)\r\nattention = tf.keras.layers.Attention()([query, value, key])\r\n...\r\n```\r\n```Error\r\nValueError: Attention layer mask must be a list of length 2, namely [query_mask, value_mask]. Given length: 3", "Marking this as closed as it is fixed with the above PR. "]}, {"number": 41293, "title": "Fix deprecated usage of collections ABC", "body": "Importing the ABCs from `collections` instead of from `collections.abc` is deprecated since Python 3.3, so TensorFlow provides a compatibility layer to prevent warning from being raised.\r\n\r\nThis PR removes the deprecated usage to make TensorFlow a bit less annoying to use with modern versions of Python.\r\n\r\nFixes #41193", "comments": []}, {"number": 41292, "title": "Can't compile the C code in smart_reply", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Archlinux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: irrelevant\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version:\r\n- Python version:\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): 3.0.0\r\n- GCC/Compiler version (if compiling from source): 10.1.0\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI am trying to compile the C code in smart_reply from source. I was able to compile and run the app with the pre-compiled binaries, but I want to modify the C code.\r\nI think I am missing BUILD file in the root folder (same as WORKSPACE) because if I add an empty BUILD file, I get a different error.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\n~/tflite/examples/lite/examples/smart_reply/android/app$ ./bazelisk-linux-amd64 build libs/cc:smartreply_runtime_aar\r\nERROR: /home/mini/workspace/tflite/examples/lite/examples/smart_reply/android/app/libs/cc/BUILD:159:1: no such package '': BUILD file not found in any of the following directories. Add a BUILD file to a directory to mark it as a package.    - /home/mini/workspace/tflite/examples/lite/examples/smart_reply/android/app and referenced by '//libs/cc:smartreply_runtime_aar'\r\nERROR: Analysis of target '//libs/cc:smartreply_runtime_aar' failed; build aborted: no such package '': BUILD file not found in any of the following directories. Add a BUILD file to a directory to mark it as a package.                       - /home/mini/workspace/tflite/examples/lite/examples/smart_reply/android/app\r\nINFO: Elapsed time: 0.170s\r\nINFO: 0 processes.                                                                                                                                                                                                                              FAILED: Build did NOT complete successfully (0 packages loaded, 0 targets configured)   \r\n\r\n\r\n~/tflite/examples/lite/examples/smart_reply/android/app$ touch BUILD\r\n~/tflite/examples/lite/examples/smart_reply/android/app$ ./bazelisk-linux-amd64 build libs/cc:smartreply_runtime_aar\r\nWARNING: The major revision of the Android NDK referenced by android_ndk_repository rule 'androidndk' is 21. The major revisions supported by Bazel are [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]. Bazel will attempt to treat the NDK as if it was r20. This may cause compilation and linkage problems. Please download a supported NDK version.\r\nWARNING: API level 30 specified by android_ndk_repository 'androidndk' is not available. Using latest known API level 28                                                                                                                        ERROR: /home/mini/workspace/tflite/examples/lite/examples/smart_reply/android/app/libs/cc/BUILD:159:1: no such target '//:LICENSE': target 'LICENSE' not declared in package '' defined by /home/mini/workspace/tflite/examples/lite/examples/smart_reply/android/app/BUILD and referenced by '//libs/cc:smartreply_runtime_aar'\r\nERROR: Analysis of target '//libs/cc:smartreply_runtime_aar' failed; build aborted: Analysis failed\r\nINFO: Elapsed time: 5.450s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (93 packages loaded, 10616 targets configured)   ", "comments": ["Found the issue. I will fix the issue, but in the meantime, you should be able to fix the build by adding the following two files in the `android/app` directory (where the `WORKSPACE` file is located).\r\n\r\n* `LICENSE` file (the content doesn't really matter. you could just `touch LICENSE`)\r\n* `BUILD` file with `exports_files([\"LICENSE\"])` as its content.\r\n\r\nPlease try this and see if it works. I'll keep this bug open until I fix it in the repository.", "Thanks for your quick response! It looks better now\r\nI started the compilation about 20 minutes ago, and it is still running.  I will update here when it is over or tomorrow if I fall asleep before that.", "It seems working! Thanks! FWIW the first compilation took 4423 seconds on my 24 core machine", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41292\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41292\">No</a>\n"]}, {"number": 41291, "title": "tf.keras.model.evaluate() not working as expected", "body": "\r\n**System information**\r\nCode is running locally on:\r\n\r\nMacBook Pro\r\n2.8 GHz Quad-Core Intel Core i7\r\nRadeon Pro 555 2 GB\r\nIntel HD Graphics 630 1536 MB\r\n\r\n**current behavior**\r\n\r\n\r\nIn Jupyter\r\n\r\n`\r\nimport tensorflow as tf\r\n\r\nmnist = tf.keras.datasets.fashion_mnist\r\n(training_images, training_labels), (test_images, test_labels) = mnist.load_data()\r\ntraining_images = training_images / 255.0\r\ntest_images = test_images / 255.0\r\nmodel = tf.keras.models.Sequential([\r\n    tf.keras.layers.Flatten(),\r\n    tf.keras.layers.Dense(128, activation=tf.nn.relu),\r\n    tf.keras.layers.Dense(10, activation=tf.nn.softmax)\r\n])\r\nmodel.compile(optimizer='adam', loss='sparse_categorical_crossentropy', metrics=['accuracy'])\r\nmodel.fit(training_images, training_labels, epochs=5)\r\n\r\ntest_loss = model.evaluate(test_images, test_labels)\r\n`\r\n\r\nThe output for the evaluate method  is currently \"10000/1\" followed by thousands of \"==\". I also believe the fraction should be \"10000/10000\"\r\n\r\n**expected behavior**\r\n\r\nsomething like: \"10000/10000 [==========]\"\r\n\r\n\r\n** code to reproduce**\r\n\r\npasted above, exactly as is in a jupyter notebook \r\n", "comments": ["some more details:\r\n\r\ntf.__version__\r\n\r\nprovides the following:\r\n\r\n2.0.0-rc1\r\n\r\n\r\nbut pip list shows:\r\n\r\ntensorflow             2.2.0", "fixed the issue - something to do with the jupyter notebook using the wrong kernel", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41291\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41291\">No</a>\n"]}, {"number": 41290, "title": "Model.fit(): class_weight leads to error with distributed Dataset ", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): effectively tf-nightly 20200710\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nWhen I call tf.keras.Model.fit() with a distributed dataset, one obtained from \r\n`strategy.experimental_distribute_dataset()`, in conjunction with class_weight, \r\nI get the following error:\r\n\r\n```\r\n    dataset = dataset.map(_make_class_weight_map_fn(class_weight))\r\nAttributeError: 'DistributedDataset' object has no attribute 'map'\r\n```\r\n\r\nThe model fit code looks like:\r\n\r\n```py\r\n    model.fit(\r\n      train_ds,\r\n      epochs=FLAGS.epochs,\r\n      steps_per_epoch=train_steps_per_epoch,\r\n      validation_data=val_ds,\r\n      validation_steps=val_steps_per_epoch,\r\n      class_weight={\r\n          0: 1.0,\r\n          1: 5.0,\r\n      },\r\n      callbacks=[\r\n          tf.keras.callbacks.TensorBoard(FLAGS.logdir, profile_batch=50)\r\n      ])\r\n```\r\n\r\nHowever, if I don't call `strategy.experimental_distribute_dataset()` on train_ds\r\nand val_ds, the fit() works correctly.\r\n\r\nThe `strategy` here is simpley a OneDeviceStrategy with my GPU.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe expected behavior is that class_weight should work regardless of \r\nwhether the Dataset is distributed or not.\r\n", "comments": ["@caisq \r\n\r\nRequest you to share colab link or complete code snippet to reproduce the issue in our environment.It helps us in localizing the issue faster.Thanks!", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41290\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41290\">No</a>\n", "Hi @caisq, looking [at the docs for](https://www.tensorflow.org/api_docs/python/tf/distribute/Strategy#experimental_distribute_dataset) `experimental_distribute_dataset` you'll see it says \"NOTE: Currently, the user cannot add any more transformations to a distributed dataset.\" I suspect this is what is causing the problem given the error message that there's `no attribute 'map'` for a `'DistributedDataset'`. Happy to help debug further if you can provide minimal reproducible code.", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41290\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41290\">No</a>\n"]}, {"number": 41289, "title": "Expecting float value for attr dropout, got int  in gen_cudnn_rnn_ops.py", "body": "I was trying to build a chatbot on Google Colab. The training model worked fine. However, when I tried to run the inference model, I got the following error. \r\n\r\n```\r\n_FallbackException                        Traceback (most recent call last)\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_cudnn_rnn_ops.py in cudnn_rnnv3(input, input_h, input_c, params, sequence_lengths, rnn_mode, input_mode, direction, dropout, seed, seed2, num_proj, is_training, time_major, name)\r\n   1895         \"num_proj\", num_proj, \"is_training\", is_training, \"time_major\",\r\n-> 1896         time_major)\r\n   1897       _result = _CudnnRNNV3Output._make(_result)\r\n\r\n_FallbackException: Expecting float value for attr dropout, got int\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nUnknownError                              Traceback (most recent call last)\r\n\r\n```\r\n\r\nHere's the google colab link\r\nhttps://drive.google.com/file/d/17qBe-pN68_HeGNAEyobDW-Ph34EEjsO1/view?usp=sharing\r\n\r\nIt follow the script that raised the Exception and it seems to me that the error was from inside the script. I tried to fix it by setting my LSTM layer dropout parameter but it still didn't work.", "comments": ["Was able to reproduce the issue with [TF v2.2](https://colab.research.google.com/gist/amahendrakar/6dab2daa22ec3dd90ed0696516d8b78b/41289.ipynb#scrollTo=Tlfnzc02e2Qg) and [TF v2.3.0rc1](https://colab.research.google.com/gist/amahendrakar/0d04b97f7e49484112b71abcd33609f3/41289-2-3.ipynb). Session crashes on running with TF-nightly. Please find the attached gist. Thanks!", "I think part of this issue is because of existing https://github.com/tensorflow/tensorflow/issues/33148. In short, the cudnn kernel will fail if the inputs contains fully masked inputs. Note that in your colab, the decoder input is initialized to zeros, and embedding layer also created with mask_zeros = True.\r\n\r\nYou could walk around the issue by turning off the mask_zeros in the decoder embedding layer, since you are doing one word pre step inference anyway. \r\n\r\nOn the other hand, I think there is some bug in eager runtime, that incorrectly create python var with wrong types. Note that the dropout passed to cudnn kernel is different from the one in LSTM layer. The code fallback to the eager runtime backoff path when it hit the error of fully masked input in cudnn kernel, and then raise the error with incompatible type.", "Thank you, that solved the error!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41289\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41289\">No</a>\n"]}, {"number": 41288, "title": "ValueError: Could not find matching function to call loaded from the SavedModel", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.2.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Standalone code to reproduce the issue**\r\n\r\nI am getting the error from the title when I try to predict from saved model/\r\n\r\nI am providing the code to reproduce the problem\r\n\r\n```\r\n##### IMPORT ANDR PREPARE DATA #######\r\n\r\n\r\nimport pandas as pd\r\nfrom sklearn.model_selection import train_test_split\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nimport numpy as np\r\n\r\nurl = 'https://raw.githubusercontent.com/MislavSag/trademl/master/trademl/modeling/random_forest/X_TEST.csv'\r\nX_TEST = pd.read_csv(url, sep=',')\r\nurl = 'https://raw.githubusercontent.com/MislavSag/trademl/master/trademl/modeling/random_forest/labeling_info_TEST.csv'\r\nlabeling_info_TEST = pd.read_csv(url, sep=',')\r\n\r\n\r\n# TRAIN TEST SPLIT\r\nX_train, X_test, y_train, y_test = train_test_split(\r\n    X_TEST.drop(columns=['close_orig']), labeling_info_TEST['bin'],\r\n    test_size=0.10, shuffle=False, stratify=None)\r\n\r\n\r\n### PREPARE LSTM\r\nx = X_train['close'].values.reshape(-1, 1)\r\ny = y_train.values.reshape(-1, 1)\r\nx_test = X_test['close'].values.reshape(-1, 1)\r\ny_test = y_test.values.reshape(-1, 1)\r\ntrain_val_index_split = 0.75\r\ntrain_generator = keras.preprocessing.sequence.TimeseriesGenerator(\r\n    data=x,\r\n    targets=y,\r\n    length=30,\r\n    sampling_rate=1,\r\n    stride=1,\r\n    start_index=0,\r\n    end_index=int(train_val_index_split*X_TEST.shape[0]),\r\n    shuffle=False,\r\n    reverse=False,\r\n    batch_size=128\r\n)\r\nvalidation_generator = keras.preprocessing.sequence.TimeseriesGenerator(\r\n    data=x,\r\n    targets=y,\r\n    length=30,\r\n    sampling_rate=1,\r\n    stride=1,\r\n    start_index=int((train_val_index_split*X_TEST.shape[0] + 1)),\r\n    end_index=None,  #int(train_test_index_split*X.shape[0])\r\n    shuffle=False,\r\n    reverse=False,\r\n    batch_size=128\r\n)\r\ntest_generator = keras.preprocessing.sequence.TimeseriesGenerator(\r\n    data=x_test,\r\n    targets=y_test,\r\n    length=30,\r\n    sampling_rate=1,\r\n    stride=1,\r\n    start_index=0,\r\n    end_index=None,\r\n    shuffle=False,\r\n    reverse=False,\r\n    batch_size=128\r\n)\r\n\r\n# convert generator to inmemory 3D series (if enough RAM)\r\ndef generator_to_obj(generator):\r\n    xlist = []\r\n    ylist = []\r\n    for i in range(len(generator)):\r\n        x, y = train_generator[i]\r\n        xlist.append(x)\r\n        ylist.append(y)\r\n    X_train = np.concatenate(xlist, axis=0)\r\n    y_train = np.concatenate(ylist, axis=0)\r\n    return X_train, y_train\r\n\r\nX_train_lstm, y_train_lstm = generator_to_obj(train_generator)\r\nX_val_lstm, y_val_lstm = generator_to_obj(validation_generator)\r\nX_test_lstm, y_test_lstm = generator_to_obj(test_generator)\r\n\r\n# test for shapes\r\nprint('X and y shape train: ', X_train_lstm.shape, y_train_lstm.shape)\r\nprint('X and y shape validate: ', X_val_lstm.shape, y_val_lstm.shape)\r\nprint('X and y shape test: ', X_test_lstm.shape, y_test_lstm.shape)\r\n\r\n\r\n##### TRAIN  MODEL #######\r\n\r\n\r\nmodel = keras.models.Sequential([\r\n        keras.layers.LSTM(258, return_sequences=True, input_shape=[None, x.shape[1]]),\r\n        \r\n        keras.layers.LSTM(124, return_sequences=True, dropout=0.2, recurrent_dropout=0.2),\r\n        keras.layers.LSTM(32, dropout=0.2, recurrent_dropout=0.2),\r\n        keras.layers.Dense(1, activation='sigmoid')\r\n        \r\n])\r\nmodel.compile(loss='binary_crossentropy', optimizer='adam',\r\n              metrics=['accuracy', \r\n                       keras.metrics.AUC(),\r\n                       keras.metrics.Precision(),\r\n                       keras.metrics.Recall()])\r\n# fit the model\r\nhistory = model.fit(X_train_lstm, y_train_lstm, epochs=5, batch_size=128,\r\n                    validation_data=(X_val_lstm, y_val_lstm))\r\n\r\n\r\n\r\n##### SAVE AND LOAD MODEL (WORKS) #######\r\n\r\nmodel.save('my_model_lstm.h5')\r\nmodel = keras.models.load_model('my_model_lstm.h5')\r\nmodel.predict(X_test_lstm)\r\n\r\n##### SAVE AND LOAD MODEL (DOESNT WORK) #######\r\n\r\n\r\nmodel_version = \"0001\"\r\nmodel_name = \"lstm_cloud\"\r\nmodel_path = os.path.join(model_name, model_version)\r\ntf.saved_model.save(model, model_path)\r\n\r\nsaved_model = tf.saved_model.load(model_path)\r\ny_pred = saved_model(X_test_lstm, training=False)\r\n```\r\n\r\n\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\nI am geeting this error:\r\n\r\n```\r\ny_pred = saved_model(X_test_lstm, training=False)\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nc:\\Users\\Mislav\\Documents\\GitHub\\trademl\\trademl\\modeling\\train_nn.py in \r\n----> 525 y_pred = saved_model(X_test_lstm, training=False)\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\saved_model\\load.py in _call_attribute(instance, *args, **kwargs)\r\n    484 \r\n    485 def _call_attribute(instance, *args, **kwargs):\r\n--> 486   return instance.__call__(*args, **kwargs)\r\n    487 \r\n    488 \r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\def_function.py in __call__(self, *args, **kwds)\r\n    578         xla_context.Exit()\r\n    579     else:\r\n--> 580       result = self._call(*args, **kwds)\r\n    581 \r\n    582     if tracing_count == self._get_tracing_count():\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\def_function.py in _call(self, *args, **kwds)\r\n    625       # This is the first call of __call__, so we have to initialize.\r\n    626       initializers = []\r\n--> 627       self._initialize(args, kwds, add_initializers_to=initializers)\r\n    628     finally:\r\n    629       # At this point we know that the initialization is complete (or less\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\def_function.py in _initialize(self, args, kwds, add_initializers_to)\r\n    504     self._concrete_stateful_fn = (\r\n    505         self._stateful_fn._get_concrete_function_internal_garbage_collected(  # pylint: disable=protected-access\r\n--> 506             *args, **kwds))\r\n    507 \r\n    508     def invalid_creator_scope(*unused_args, **unused_kwds):\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\function.py in _get_concrete_function_internal_garbage_collected(self, *args, **kwargs)\r\n   2444       args, kwargs = None, None\r\n   2445     with self._lock:\r\n-> 2446       graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n   2447     return graph_function\r\n   2448 \r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\function.py in _maybe_define_function(self, args, kwargs)\r\n   2775 \r\n   2776       self._function_cache.missed.add(call_context_key)\r\n-> 2777       graph_function = self._create_graph_function(args, kwargs)\r\n   2778       self._function_cache.primary[cache_key] = graph_function\r\n   2779       return graph_function, args, kwargs\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\function.py in _create_graph_function(self, args, kwargs, override_flat_arg_shapes)\r\n   2665             arg_names=arg_names,\r\n   2666             override_flat_arg_shapes=override_flat_arg_shapes,\r\n-> 2667             capture_by_value=self._capture_by_value),\r\n   2668         self._function_attributes,\r\n   2669         # Tell the ConcreteFunction to clean up its graph once it goes out of\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\func_graph.py in func_graph_from_py_func(name, python_func, args, kwargs, signature, func_graph, autograph, autograph_options, add_control_dependencies, arg_names, op_return_value, collections, capture_by_value, override_flat_arg_shapes)\r\n    979         _, original_func = tf_decorator.unwrap(python_func)\r\n    980 \r\n--> 981       func_outputs = python_func(*func_args, **func_kwargs)\r\n    982 \r\n    983       # invariant: `func_outputs` contains only Tensors, CompositeTensors,\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\eager\\def_function.py in wrapped_fn(*args, **kwds)\r\n    439         # __wrapped__ allows AutoGraph to swap in a converted function. We give\r\n    440         # the function a weak reference to itself to avoid a reference cycle.\r\n--> 441         return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n    442     weak_wrapped_fn = weakref.ref(wrapped_fn)\r\n    443 \r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\saved_model\\function_deserialization.py in restored_function_body(*args, **kwargs)\r\n    259         .format(_pretty_format_positional(args), kwargs,\r\n    260                 len(saved_function.concrete_functions),\r\n--> 261                 \"\\n\\n\".join(signature_descriptions)))\r\n    262 \r\n    263   concrete_function_objects = []\r\n\r\nValueError: Could not find matching function to call loaded from the SavedModel. Got:\r\n  Positional arguments (3 total):\r\n    * Tensor(\"inputs:0\", shape=(256, 30, 1), dtype=float64)\r\n    * False\r\n    * None\r\n  Keyword arguments: {}\r\n\r\nExpected these arguments to match one of the following 4 option(s):\r\n\r\nOption 1:\r\n  Positional arguments (3 total):\r\n    * TensorSpec(shape=(None, None, 1), dtype=tf.float32, name='inputs')\r\n    * False\r\n    * None\r\n  Keyword arguments: {}\r\n\r\nOption 2:\r\n  Positional arguments (3 total):\r\n    * TensorSpec(shape=(None, None, 1), dtype=tf.float32, name='inputs')\r\n    * True\r\n    * None\r\n  Keyword arguments: {}\r\n\r\nOption 3:\r\n  Positional arguments (3 total):\r\n    * TensorSpec(shape=(None, None, 1), dtype=tf.float32, name='lstm_6_input')\r\n    * True\r\n    * None\r\n  Keyword arguments: {}\r\n\r\nOption 4:\r\n  Positional arguments (3 total):\r\n    * TensorSpec(shape=(None, None, 1), dtype=tf.float32, name='lstm_6_input')\r\n    * False\r\n    * None\r\n  Keyword arguments: {}\r\n```", "comments": ["@MislavSag \r\nI ran the code shared and face a different error, please find the [gist here](https://colab.research.google.com/gist/Saduf2019/6fa02c7b141ebe7e20d05d2fea6cf951/untitled272.ipynb).", "@Saduf2019 , I have just ran the notebook and it returns the error I posted in thee question?", "I am able to replicate this issue, please find the [gist here](https://colab.research.google.com/gist/Saduf2019/2d65eb67f2747adc322971b740cc535a/untitled274.ipynb).", "Looks like duplicate of https://github.com/tensorflow/tensorflow/issues/37339. I was facing the same issue with version `2.1`. It's gone in `2.2`", "But if I execute `tf.__version__` in python I got '2.2.0'.", "> But if I execute `tf.__version__` in python I got '2.2.0'.\r\n\r\nOk, sorry - it did fix _my_ problem, but apparently yours is similar, but a different one. ", "@MislavSag \r\n\r\nShort answer: Two options to resolve this issue\r\n(1) you need to set \"#tf.keras.backend.set_floatx('float64')\" at the top after importing modules, or\r\n(2) convert input datatype to `tf.float32` with this command `X_test_lstm = tf.cast(X_test_lstm,tf.float32)`\r\n\r\nPlease check the [gist](https://colab.research.google.com/gist/jvishnuvardhan/0a9ea390339b87c2dfe123c32b062ef3/untitled274.ipynb) for your reference.\r\n\r\nThere are two ways to save and load model \r\n\r\n(1) `model.save` saves your model as a Keras model and hence you can use `model.fit`, `model.predict` etc. This approach is working well for you.\r\n\r\n(2) `tf.saved_model.save` saves your model as a TF model with a signature (shape and dtype). Most of the ops you have in the model such as LSTM uses `tf.float32` as default dtype but your data is of `tf.float64`. So there is a mismatch in the signature of the input data the model is expecting (which is `tf.float32`) whereas you are providing `tf.float64`).\r\n\r\nHope this helps. Thanks!\r\n\r\nPlease verify once and close the issue if this was resolved for you. Thanks!", "If I apply the first solution I get the error:\r\n```\r\nAssertionError                            Traceback (most recent call last)\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\api.py in converted_call(f, args, kwargs, caller_fn_scope, options)\r\n    537         options=options, autograph_module=tf_inspect.getmodule(converted_call))\r\n--> 538     converted_f = conversion.convert(target_entity, program_ctx)\r\n    539 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\conversion.py in convert(entity, program_ctx)\r\n    359   converted_entity_info = _convert_with_cache(entity, program_ctx,\r\n--> 360                                               free_nonglobal_var_names)\r\n    361 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\conversion.py in _convert_with_cache(entity, program_ctx, free_nonglobal_var_names)\r\n    274     nodes, converted_name, entity_info = convert_entity_to_ast(\r\n--> 275         entity, program_ctx)\r\n    276 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\conversion.py in convert_entity_to_ast(o, program_ctx)\r\n    510   elif tf_inspect.isfunction(o):\r\n--> 511     nodes, name, entity_info = convert_func_to_ast(o, program_ctx)\r\n    512   elif tf_inspect.ismethod(o):\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\conversion.py in convert_func_to_ast(f, program_ctx, do_rename)\r\n    711   context = converter.EntityContext(namer, entity_info, program_ctx, new_name)\r\n--> 712   node = node_to_graph(node, context)\r\n    713 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\conversion.py in node_to_graph(node, context)\r\n    745   node = converter.standard_analysis(node, context, is_initial=True)\r\n--> 746   node = converter.apply_(node, context, function_scopes)\r\n    747   node = converter.apply_(node, context, arg_defaults)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\core\\converter.py in apply_(node, context, converter_module)\r\n    398   node = standard_analysis(node, context)\r\n--> 399   node = converter_module.transform(node, context)\r\n    400   return node\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\converters\\function_scopes.py in transform(node, ctx)\r\n    131 def transform(node, ctx):\r\n--> 132   return FunctionBodyTransformer(ctx).visit(node)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\core\\converter.py in visit(self, node)\r\n    344     try:\r\n--> 345       return super(Base, self).visit(node)\r\n    346     finally:\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\pyct\\transformer.py in visit(self, node)\r\n    431 \r\n--> 432       result = super(Base, self).visit(node)\r\n    433 \r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\ast.py in visit(self, node)\r\n    270         visitor = getattr(self, method, self.generic_visit)\r\n--> 271         return visitor(node)\r\n    272 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\converters\\function_scopes.py in visit_FunctionDef(self, node)\r\n     98 \r\n---> 99     node = self.generic_visit(node)\r\n    100 \r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\ast.py in generic_visit(self, node)\r\n    325                     if isinstance(value, AST):\r\n--> 326                         value = self.visit(value)\r\n    327                         if value is None:\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\core\\converter.py in visit(self, node)\r\n    344     try:\r\n--> 345       return super(Base, self).visit(node)\r\n    346     finally:\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\pyct\\transformer.py in visit(self, node)\r\n    431 \r\n--> 432       result = super(Base, self).visit(node)\r\n    433 \r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\ast.py in visit(self, node)\r\n    270         visitor = getattr(self, method, self.generic_visit)\r\n--> 271         return visitor(node)\r\n    272 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\converters\\function_scopes.py in visit_Return(self, node)\r\n     43         function_context_name=self.state[_Function].context_name,\r\n---> 44         value=node.value)\r\n     45 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\pyct\\templates.py in replace(template, **replacements)\r\n    261   for k in replacements:\r\n--> 262     replacements[k] = _convert_to_ast(replacements[k])\r\n    263   template_str = parser.STANDARD_PREAMBLE + textwrap.dedent(template)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\pyct\\templates.py in _convert_to_ast(n)\r\n    223   if isinstance(n, str):\r\n--> 224     return gast.Name(id=n, ctx=None, annotation=None, type_comment=None)\r\n    225   if isinstance(n, qual_names.QN):\r\n\r\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\gast\\gast.py in create_node(self, *args, **kwargs)\r\n     11             \"Bad argument number for {}: {}, expecting {}\".\\\r\n---> 12             format(Name, nbparam, len(Fields))\r\n     13         self._fields = Fields\r\n\r\nAssertionError: Bad argument number for Name: 4, expecting 3\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nValueError                                Traceback (most recent call last)\r\nc:\\Users\\Mislav\\Documents\\GitHub\\trademl\\trademl\\modeling\\train_nn.py in \r\n    256 \r\n    257 history = model.fit(X_train_lstm, y_train_lstm, epochs=50, batch_size=128,\r\n--> 258                     validation_data=(X_val_lstm, y_val_lstm))\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\engine\\training.py in _method_wrapper(self, *args, **kwargs)\r\n     64   def _method_wrapper(self, *args, **kwargs):\r\n     65     if not self._in_multi_worker_mode():  # pylint: disable=protected-access\r\n---> 66       return method(self, *args, **kwargs)\r\n     67 \r\n     68     # Running inside `run_distribute_coordinator` already.\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\engine\\training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_batch_size, validation_freq, max_queue_size, workers, use_multiprocessing)\r\n    846                 batch_size=batch_size):\r\n    847               callbacks.on_train_batch_begin(step)\r\n--> 848               tmp_logs = train_function(iterator)\r\n    849               # Catch OutOfRangeError for Datasets of unknown size.\r\n    850               # This blocks until the batch has finished executing.\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\def_function.py in __call__(self, *args, **kwds)\r\n    578         xla_context.Exit()\r\n    579     else:\r\n--> 580       result = self._call(*args, **kwds)\r\n    581 \r\n    582     if tracing_count == self._get_tracing_count():\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\def_function.py in _call(self, *args, **kwds)\r\n    625       # This is the first call of __call__, so we have to initialize.\r\n    626       initializers = []\r\n--> 627       self._initialize(args, kwds, add_initializers_to=initializers)\r\n    628     finally:\r\n    629       # At this point we know that the initialization is complete (or less\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\def_function.py in _initialize(self, args, kwds, add_initializers_to)\r\n    504     self._concrete_stateful_fn = (\r\n    505         self._stateful_fn._get_concrete_function_internal_garbage_collected(  # pylint: disable=protected-access\r\n--> 506             *args, **kwds))\r\n    507 \r\n    508     def invalid_creator_scope(*unused_args, **unused_kwds):\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\function.py in _get_concrete_function_internal_garbage_collected(self, *args, **kwargs)\r\n   2444       args, kwargs = None, None\r\n   2445     with self._lock:\r\n-> 2446       graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n   2447     return graph_function\r\n   2448 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\function.py in _maybe_define_function(self, args, kwargs)\r\n   2775 \r\n   2776       self._function_cache.missed.add(call_context_key)\r\n-> 2777       graph_function = self._create_graph_function(args, kwargs)\r\n   2778       self._function_cache.primary[cache_key] = graph_function\r\n   2779       return graph_function, args, kwargs\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\function.py in _create_graph_function(self, args, kwargs, override_flat_arg_shapes)\r\n   2665             arg_names=arg_names,\r\n   2666             override_flat_arg_shapes=override_flat_arg_shapes,\r\n-> 2667             capture_by_value=self._capture_by_value),\r\n   2668         self._function_attributes,\r\n   2669         # Tell the ConcreteFunction to clean up its graph once it goes out of\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\framework\\func_graph.py in func_graph_from_py_func(name, python_func, args, kwargs, signature, func_graph, autograph, autograph_options, add_control_dependencies, arg_names, op_return_value, collections, capture_by_value, override_flat_arg_shapes)\r\n    979         _, original_func = tf_decorator.unwrap(python_func)\r\n    980 \r\n--> 981       func_outputs = python_func(*func_args, **func_kwargs)\r\n    982 \r\n    983       # invariant: `func_outputs` contains only Tensors, CompositeTensors,\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\eager\\def_function.py in wrapped_fn(*args, **kwds)\r\n    439         # __wrapped__ allows AutoGraph to swap in a converted function. We give\r\n    440         # the function a weak reference to itself to avoid a reference cycle.\r\n--> 441         return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n    442     weak_wrapped_fn = weakref.ref(wrapped_fn)\r\n    443 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\framework\\func_graph.py in wrapper(*args, **kwargs)\r\n    962                     recursive=True,\r\n    963                     optional_features=autograph_options,\r\n--> 964                     user_requested=True,\r\n    965                 ))\r\n    966           except Exception as e:  # pylint:disable=broad-except\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\api.py in converted_call(f, args, kwargs, caller_fn_scope, options)\r\n    578       logging.warn(warning_template, target_entity, file_bug_message, e)\r\n    579 \r\n--> 580     return _call_unconverted(f, args, kwargs, options)\r\n    581 \r\n    582   with StackTraceMapper(converted_f), tf_stack.CurrentModuleFilter():\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\api.py in _call_unconverted(f, args, kwargs, options, update_cache)\r\n    344 \r\n    345   if kwargs is not None:\r\n--> 346     return f(*args, **kwargs)\r\n    347   else:\r\n    348     return f(*args)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\engine\\training.py in train_function(iterator)\r\n    570       data = next(iterator)\r\n    571       outputs = self.distribute_strategy.run(\r\n--> 572           self.train_step, args=(data,))\r\n    573       outputs = reduce_per_replica(\r\n    574           outputs, self.distribute_strategy, reduction='first')\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\distribute\\distribute_lib.py in run(***failed resolving arguments***)\r\n    949       fn = autograph.tf_convert(\r\n    950           fn, autograph_ctx.control_status_ctx(), convert_by_default=False)\r\n--> 951       return self._extended.call_for_each_replica(fn, args=args, kwargs=kwargs)\r\n    952 \r\n    953   # TODO(b/151224785): Remove deprecated alias.\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\distribute\\distribute_lib.py in call_for_each_replica(self, fn, args, kwargs)\r\n   2288       kwargs = {}\r\n   2289     with self._container_strategy().scope():\r\n-> 2290       return self._call_for_each_replica(fn, args, kwargs)\r\n   2291 \r\n   2292   def _call_for_each_replica(self, fn, args, kwargs):\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\distribute\\distribute_lib.py in _call_for_each_replica(self, fn, args, kwargs)\r\n   2647         self._container_strategy(),\r\n   2648         replica_id_in_sync_group=constant_op.constant(0, dtypes.int32)):\r\n-> 2649       return fn(*args, **kwargs)\r\n   2650 \r\n   2651   def _reduce_to(self, reduce_op, value, destinations, experimental_hints):\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\api.py in wrapper(*args, **kwargs)\r\n    260       try:\r\n    261         with conversion_ctx:\r\n--> 262           return converted_call(f, args, kwargs, options=options)\r\n    263       except Exception as e:  # pylint:disable=broad-except\r\n    264         if hasattr(e, 'ag_error_metadata'):\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\api.py in converted_call(f, args, kwargs, caller_fn_scope, options)\r\n    416   if conversion.is_in_whitelist_cache(f, options):\r\n    417     logging.log(2, 'Whitelisted %s: from cache', f)\r\n--> 418     return _call_unconverted(f, args, kwargs, options, False)\r\n    419 \r\n    420   if ag_ctx.control_status_ctx().status == ag_ctx.Status.DISABLED:\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\autograph\\impl\\api.py in _call_unconverted(f, args, kwargs, options, update_cache)\r\n    344 \r\n    345   if kwargs is not None:\r\n--> 346     return f(*args, **kwargs)\r\n    347   else:\r\n    348     return f(*args)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\engine\\training.py in train_step(self, data)\r\n    541               self.trainable_variables)\r\n    542 \r\n--> 543     self.compiled_metrics.update_state(y, y_pred, sample_weight)\r\n    544     return {m.name: m.result() for m in self.metrics}\r\n    545 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\engine\\compile_utils.py in update_state(self, y_true, y_pred, sample_weight)\r\n    409         if metric_obj is None:\r\n    410           continue\r\n--> 411         metric_obj.update_state(y_t, y_p)\r\n    412 \r\n    413       for weighted_metric_obj in weighted_metric_objs:\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\utils\\metrics_utils.py in decorated(metric_obj, *args, **kwargs)\r\n     88 \r\n     89     with tf_utils.graph_context_for_symbolic_tensors(*args, **kwargs):\r\n---> 90       update_op = update_state_fn(*args, **kwargs)\r\n     91     if update_op is not None:  # update_op will be None in eager execution.\r\n     92       metric_obj.add_update(update_op)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\metrics.py in update_state(self, y_true, y_pred, sample_weight)\r\n   2081           sample_weight=sample_weight,\r\n   2082           multi_label=self.multi_label,\r\n-> 2083           label_weights=label_weights)\r\n   2084 \r\n   2085   def interpolate_pr_auc(self):\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\utils\\metrics_utils.py in update_confusion_matrix_variables(variables_to_update, y_true, y_pred, thresholds, top_k, class_id, sample_weight, multi_label, label_weights)\r\n    452       update_ops.append(\r\n    453           weighted_assign_add(label, pred, weights_tiled,\r\n--> 454                               variables_to_update[matrix_cond]))\r\n    455 \r\n    456   return control_flow_ops.group(update_ops)\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\keras\\utils\\metrics_utils.py in weighted_assign_add(label, pred, weights, var)\r\n    428     if weights is not None:\r\n    429       label_and_pred *= weights\r\n--> 430     return var.assign_add(math_ops.reduce_sum(label_and_pred, 1))\r\n    431 \r\n    432   loop_vars = {\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\ops\\resource_variable_ops.py in assign_add(self, delta, use_locking, name, read_value)\r\n    810     with _handle_graph(self.handle), self._assign_dependencies():\r\n    811       assign_add_op = gen_resource_variable_ops.assign_add_variable_op(\r\n--> 812           self.handle, ops.convert_to_tensor(delta, dtype=self.dtype),\r\n    813           name=name)\r\n    814     if read_value:\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\framework\\ops.py in convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, dtype_hint, ctx, accepted_result_types)\r\n   1315       raise ValueError(\r\n   1316           \"Tensor conversion requested dtype %s for Tensor with dtype %s: %r\" %\r\n-> 1317           (dtype.name, value.dtype.name, value))\r\n   1318     return value\r\n   1319 \r\n\r\nValueError: Tensor conversion requested dtype float64 for Tensor with dtype float32:\r\n```", "@MislavSag For \"(1) you need to set \"#tf.keras.backend.set_floatx('float64')\" at the top after importing modules\",  Please check the gist [Here](https://colab.research.google.com/gist/jvishnuvardhan/a923f5d0dfa6606e8d0d648487f34ed6/untitled274.ipynb) for your reference.  \r\n\r\nFor (2) please take a look at the gist [here](https://colab.research.google.com/gist/jvishnuvardhan/7a53ba4bc1d69e8d1490f11995d04655/untitled274.ipynb). Thanks!\r\n\r\nPlease try these gists and let me know if there are working for you. If not, please share a gist. Thanks!\r\n\r\n\r\n", "I am still getting the error I have posted above. Should it maybe be tf.keras.backend.set_floatx('float32')\", not float64?\r\n\r\n", "@MislavSag Sorry. I am confused.\r\n1) Did you try running my gists? \r\n2) do you see any error? Can you share the error if any?\r\n3) if both of my gists working for you, what is not working? Can you please share a standalone code to reproduce your exact error?\r\n\r\nPlease explain with little more details so that I can help. With limited info, it is very difficult to help. Thanks!", "Sorry for the late answer. I saw your gist, but when I copy-paste same code and execute locally, I get an error I posted above:\r\n\r\n`ValueError: Tensor conversion requested dtype float64 for Tensor with dtype float32:`", "@MislavSag Not sure what is the root-cause of the issue. Code is working perfectly without any error when I ran in my computer and Google colab. \r\n\r\n1) what is the TF version you have? Can you try on `tf-nightly`\r\n2) did you ran both the gist i shared above? \r\n3) are you getting same error from the two gists I shared?\r\n\r\nThanks!", "I have version 2.2.0. I will try on th-nightly and give youfeedback", "If I install tf-nightly, I get error on import:\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-5-927895df9eb7> in <module>\r\n      2 import pandas as pd\r\n      3 import matplotlib.pyplot as plt\r\n----> 4 import tensorflow as tf\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\__init__.py in <module>\r\n     39 import sys as _sys\r\n     40 \r\n---> 41 from tensorflow.python.tools import module_util as _module_util\r\n     42 from tensorflow.python.util.lazy_loader import LazyLoader as _LazyLoader\r\n     43 \r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\__init__.py in <module>\r\n     72 \r\n     73 # Ops\r\n---> 74 from tensorflow.python.ops.standard_ops import *\r\n     75 \r\n     76 # Namespaces\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\ops\\standard_ops.py in <module>\r\n     25 \r\n     26 from tensorflow.python import autograph\r\n---> 27 from tensorflow.python.training.experimental import loss_scaling_gradient_tape\r\n     28 \r\n     29 # pylint: disable=g-bad-import-order\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\training\\experimental\\loss_scaling_gradient_tape.py in <module>\r\n     19 from __future__ import print_function\r\n     20 \r\n---> 21 from tensorflow.python.distribute import distribution_strategy_context\r\n     22 from tensorflow.python.eager import backprop\r\n     23 from tensorflow.python.framework import ops\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\distribute\\__init__.py in <module>\r\n     26 from tensorflow.python.distribute import mirrored_strategy\r\n     27 from tensorflow.python.distribute import one_device_strategy\r\n---> 28 from tensorflow.python.distribute.experimental import collective_all_reduce_strategy\r\n     29 from tensorflow.python.distribute.experimental import parameter_server_strategy\r\n     30 # pylint: enable=unused-import\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\distribute\\experimental\\__init__.py in <module>\r\n     23 from tensorflow.python.distribute import collective_all_reduce_strategy\r\n     24 from tensorflow.python.distribute import parameter_server_strategy\r\n---> 25 from tensorflow.python.distribute import tpu_strategy\r\n     26 # pylint: enable=unused-import\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\python\\distribute\\tpu_strategy.py in <module>\r\n     26 import numpy as np\r\n     27 \r\n---> 28 from tensorflow.compiler.xla.experimental.xla_sharding import xla_sharding\r\n     29 from tensorflow.python.autograph.core import ag_ctx as autograph_ctx\r\n     30 from tensorflow.python.autograph.impl import api as autograph\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\compiler\\xla\\experimental\\xla_sharding\\xla_sharding.py in <module>\r\n     21 import numpy as _np  # Avoids becoming a part of public Tensorflow API.\r\n     22 \r\n---> 23 from tensorflow.compiler.tf2xla.python import xla as tf2xla\r\n     24 from tensorflow.compiler.xla import xla_data_pb2\r\n     25 from tensorflow.core.framework import attr_value_pb2\r\n\r\n~\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow\\compiler\\tf2xla\\python\\xla.py in <module>\r\n    105 \r\n    106 # Bessel\r\n--> 107 bessel_i0e = _unary_op(special_math_ops.bessel_i0e)\r\n    108 bessel_i1e = _unary_op(special_math_ops.bessel_i1e)\r\n    109 \r\n\r\nAttributeError: module 'tensorflow.python.ops.special_math_ops' has no attribute 'bessel_i0e'\r\n```\r\n", "@MislavSag I guess something went wrong in the installation. I tried your code on my Windows10 desktop and also colab, everything works as expected. Can you uninstall TF and related libraries, reinstall freshly and then test it. Thanks!", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41288\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41288\">No</a>\n", "I have a similar error that is not fixed by typecasting:\r\n\r\n```\r\nValueError: Could not find matching function to call loaded from the SavedModel. Got:\r\n  Positional arguments (1 total):\r\n    * Tensor(\"inputs:0\", shape=(28, 28), dtype=float32)\r\n  Keyword arguments: {}\r\n\r\nExpected these arguments to match one of the following 1 option(s):\r\n\r\nOption 1:\r\n  Positional arguments (1 total):\r\n    * [TensorSpec(shape=(28, 28), dtype=tf.float32, name='inputs/0')]\r\n  Keyword arguments: {}\r\n```\r\n\r\nThe function calls look very close but are not equal. Both clearly have the correct float32. The model trains correctly but fails to reload once saved.\r\n\r\nI am using Tensorflow 2.3.0 as installed by Conda.\r\nUbuntu 20.04 LTS\r\n\r\n```\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 460.32.03    Driver Version: 460.32.03    CUDA Version: 11.2     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|                               |                      |               MIG M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 1050    Off  | 00000000:01:00.0 Off |                  N/A |\r\n| N/A   48C    P0    N/A /  N/A |    624MiB /  2002MiB |      6%      Default |\r\n|                               |                      |                  N/A |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                                  |\r\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\r\n|        ID   ID                                                   Usage      |\r\n|=============================================================================|\r\n|    0   N/A  N/A      1033      G   /usr/lib/xorg/Xorg                336MiB |\r\n|    0   N/A  N/A      1576      G   /usr/bin/gnome-shell               85MiB |\r\n|    0   N/A  N/A      4662      G   ...AAAAAAAA== --shared-files       38MiB |\r\n|    0   N/A  N/A      4879      G   ...AAAAAAAA== --shared-files      162MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\n```", "@QuantumPlumber Can you please create a new issue with a simple standalone code to reproduce the issue? Thanks!"]}, {"number": 41287, "title": "Compile failure in TF 2.3 rc0 on python 3.5", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Ubuntu 16.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version: **2.3**\r\n- Python version: **3.5**\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): **3.1.0**\r\n- GCC/Compiler version (if compiling from source): **gcc version: 8.2.1**\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**I am trying to build Tensorflow 2.3 on python 3.5 and getting following compile errors:\r\nERROR: /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/external/com_google_protobuf/BUILD:795:1: C++ compilation of rule '@com_google_protobuf//:python/google/protobuf/internal/_api_implementation.so' failed (Exit 1)\r\nIn file included from bazel-out/k8-opt/bin/external/local_config_python/python_include/Python.h:8,\r\n                 from external/com_google_protobuf/python/google/protobuf/internal/api_implementation.cc:31:\r\nbazel-out/k8-opt/bin/external/local_config_python/python_include/pyconfig.h:3:12: fatal error: x86_64-linux-gnu/python3.5m/pyconfig.h: No such file or directory\r\n #  include <x86_64-linux-gnu/python3.5m/pyconfig.h>\r\n            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\n**\r\n\r\n**I ran with the following bazel options:\r\n'build' options: --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 --copt=-O3 --copt=-Wformat --copt=-Wformat-security --copt=-fstack-protector --copt=-fPIC --copt=-fpic --linkopt=-znoexecstack --linkopt=-zrelro --linkopt=-znow --linkopt=-fstack-protector --config=mkl --copt=-march=sandybridge\r\n**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n", "comments": ["This may not be TensorFlow specific but perhaps related to your installation of Python 3.5 on your machine. I think you need to add the location of `python3.5m/pyconfig.h` to your path, or symlink it to that location?\r\n\r\nhttps://github.com/okfn/piati/issues/65\r\nhttps://github.com/BVLC/caffe/issues/410\r\n\r\n^ Similar issues that were solved that way. Have you been able to build TF prior to in the same env?", "Thanks for your suggestion. Let me try that.\r\nTo answer your question, yes we were able to build TF 2.2 using the same scripts on python 3.5.\r\n\r\nFrom: Amit Patankar <notifications@github.com>\r\nSent: Friday, July 10, 2020 2:27 PM\r\nTo: tensorflow/tensorflow <tensorflow@noreply.github.com>\r\nCc: Ojha, Shweta <shweta.ojha@intel.com>; Author <author@noreply.github.com>\r\nSubject: Re: [tensorflow/tensorflow] Compile failure in TF 2.3 rc0 on python 3.5 (#41287)\r\n\r\n\r\nThis may not be TensorFlow specific but perhaps related to your installation of Python 3.5 on your machine. I think you need to add the location of python3.5m/pyconfig.h to your path, or symlink it to that location?\r\n\r\nokfn/piati#65<https://github.com/okfn/piati/issues/65>\r\nBVLC/caffe#410<https://github.com/BVLC/caffe/issues/410>\r\n\r\n^ Similar issues that were solved that way. Have you been able to build TF prior to in the same env?\r\n\r\n\u2014\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub<https://github.com/tensorflow/tensorflow/issues/41287#issuecomment-656819389>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AJKCVGJTYWY4XRHYSHMNUZTR25MPBANCNFSM4OWZSIJA>.\r\n", "@av8ramit Thanks for the pointers adding libxml2-dev libxslt-dev in the python 3.5 container fixed the issue. ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41287\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41287\">No</a>\n", "@shwetaoj no problem! Glad I could help!", "The issue is with gcc version. With gcc 5.x it works but with gcc 8.x it fails.\r\nSurprisingly this works fine with python versions 3.6, 3.7 and 3.8.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41287\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41287\">No</a>\n", "Installing python 3.5.9 from the source fixed the issue. Using the default python version 3.5.2 of the ubuntu 16.04 container was causing compile errors.\r\n"]}, {"number": 41286, "title": "model.fit(...) throws NotImplementedError under tf.distribute.MirroredStrategy", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: ---\r\n- TensorFlow installed from (source or binary): Pip\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.5\r\n- Bazel version (if compiling from source): ---\r\n- GCC/Compiler version (if compiling from source): ---\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: U-Net\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n\r\n**Describe the current behavior**\r\nI am trying to train my U-Net model using `tf.distribute.MirroredStrategy()` on my dataset but I get `NotImplementedError` without any details about the error from stack trace, and this error does not happen when the same code is executed without using the distributed strategy.\r\nThis problem happens whether using GPU or CPU and keeps as long as I use this strategy.\r\nFull stack trace is linked [here](https://gist.github.com/orwa-te/e0d92cc83d2ddd1d3a6be075a2161ef8)\r\n**Describe the expected behavior**\r\n\r\n**Standalone code to reproduce the issue**\r\nHere is my code [link](https://gist.github.com/orwa-te/4887067323fb32bc5c2e62e29d4afc81)\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["I tried the latest version of TensorFlow (2.2.0) with the same code and it worked without any problem", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41286\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41286\">No</a>\n"]}, {"number": 41285, "title": "[TFLite micro] Update EvalQuantizedInt8() method of Fully Connected kernel (CMSIS-NN)", "body": "* Add some checks on the dimensions of the input tensor.\r\n* Fix initialization of `input_dims`: the fully connected op takes in input a tensor having two dimensions and returns in output a tensor with two dimensions. However, when initializing the `input_dims` variable, the code tries to access to higher dimensions (that is `input_shape.Dims(2)` and `input_shape.Dims(3)` causing the assertion `TFLITE_DCHECK_LT(i, size_)` in the `Dims()` method to be false.\r\n\r\nTested on a STM32F4 board using the hello_world example (but it could be tested on any model that contains a FC layer).\r\n\r\nBest,\r\nBiagio.", "comments": ["@biagiom  Can you please check @felix-johnny's comments and keep us posted ? Thanks!", "@biagiom  Can you please resolve conflicts? Thanks!"]}, {"number": 41284, "title": "Attempting to use a delegate that only supports static-sized tensors with a graph that has dynamic-sized tensors.", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\nUbuntu 18.04\r\n- TensorFlow version (you are using): 2.3.0-r0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nAttempting to use a delegate that only supports static-sized tensors with a graph that has dynamic-sized tensors.\r\n\r\n**Will this change the current api? How?**No\r\n\r\n**Who will benefit with this feature?** networks with dynamic tensors.\r\n\r\n**Any Other info.**\r\n", "comments": ["@cam145 \r\nPlease provide with more details on the issue.", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 41283, "title": "Problem TensorFlow on Jupyter", "body": "Hi! I had the following error running MaskRCNN. I have macos Yosemite 10.10.5. I'm using conda virtual environment, Tensorflow version 2.0.1.\r\n\r\nERROR:root:Internal Python error in the inspect module.\r\nBelow is the traceback from this internal error.\r\n\r\nERROR:root:Internal Python error in the inspect module.\r\nBelow is the traceback from this internal error.\r\n\r\nERROR:root:Internal Python error in the inspect module.\r\nBelow is the traceback from this internal error.\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-ebe7095df7bb>\", line 15, in <module>\r\n    from mrcnn import utils\r\n  File \"/Users/Maria/Documents/GitHub/Mask_RCNN/mrcnn/utils.py\", line 16, in <module>\r\n    import tensorflow as tf\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1169, in get_records\r\n    return _fixed_getinnerframes(etb, number_of_lines_of_context, tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 316, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 350, in _fixed_getinnerframes\r\n    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 1490, in getinnerframes\r\n    frameinfo = (tb.tb_frame,) + getframeinfo(tb, context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 1448, in getframeinfo\r\n    filename = getsourcefile(frame) or getfile(frame)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 696, in getsourcefile\r\n    if getattr(getmodule(object, filename), '__loader__', None) is not None:\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 733, in getmodule\r\n    if ismodule(module) and hasattr(module, '__file__'):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 941, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 42, in <module>\r\n    from . _api.v2 import audio\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/_api/v2/audio/__init__.py\", line 10, in <module>\r\n    from tensorflow.python.ops.gen_audio_ops import decode_wav\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_audio_ops.py\", line 10, in <module>\r\n    from tensorflow.python import pywrap_tensorflow as _pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-ebe7095df7bb>\", line 15, in <module>\r\n    from mrcnn import utils\r\n  File \"/Users/Maria/Documents/GitHub/Mask_RCNN/mrcnn/utils.py\", line 16, in <module>\r\n    import tensorflow as tf\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-ebe7095df7bb>\", line 15, in <module>\r\n    from mrcnn import utils\r\n  File \"/Users/Maria/Documents/GitHub/Mask_RCNN/mrcnn/utils.py\", line 16, in <module>\r\n    import tensorflow as tf\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3263, in run_ast_nodes\r\n    if (await self.run_code(code, result,  async_=asy)):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3360, in run_code\r\n    self.showtraceback(running_compiled_code=True)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1436, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1336, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1193, in structured_traceback\r\n    tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1150, in format_exception_as_a_whole\r\n    last_unique, recursion_repeat = find_recursion(orig_etype, evalue, records)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 451, in find_recursion\r\n    return len(records), 0\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1169, in get_records\r\n    return _fixed_getinnerframes(etb, number_of_lines_of_context, tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 316, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 350, in _fixed_getinnerframes\r\n    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 1490, in getinnerframes\r\n    frameinfo = (tb.tb_frame,) + getframeinfo(tb, context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 1448, in getframeinfo\r\n    filename = getsourcefile(frame) or getfile(frame)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 696, in getsourcefile\r\n    if getattr(getmodule(object, filename), '__loader__', None) is not None:\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 733, in getmodule\r\n    if ismodule(module) and hasattr(module, '__file__'):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 941, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 42, in <module>\r\n    from . _api.v2 import audio\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/_api/v2/audio/__init__.py\", line 10, in <module>\r\n    from tensorflow.python.ops.gen_audio_ops import decode_wav\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_audio_ops.py\", line 10, in <module>\r\n    from tensorflow.python import pywrap_tensorflow as _pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-ebe7095df7bb>\", line 15, in <module>\r\n    from mrcnn import utils\r\n  File \"/Users/Maria/Documents/GitHub/Mask_RCNN/mrcnn/utils.py\", line 16, in <module>\r\n    import tensorflow as tf\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3263, in run_ast_nodes\r\n    if (await self.run_code(code, result,  async_=asy)):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3360, in run_code\r\n    self.showtraceback(running_compiled_code=True)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1436, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1336, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1193, in structured_traceback\r\n    tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1150, in format_exception_as_a_whole\r\n    last_unique, recursion_repeat = find_recursion(orig_etype, evalue, records)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 451, in find_recursion\r\n    return len(records), 0\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-ebe7095df7bb>\", line 15, in <module>\r\n    from mrcnn import utils\r\n  File \"/Users/Maria/Documents/GitHub/Mask_RCNN/mrcnn/utils.py\", line 16, in <module>\r\n    import tensorflow as tf\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3263, in run_ast_nodes\r\n    if (await self.run_code(code, result,  async_=asy)):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3360, in run_code\r\n    self.showtraceback(running_compiled_code=True)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1436, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1336, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1193, in structured_traceback\r\n    tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1150, in format_exception_as_a_whole\r\n    last_unique, recursion_repeat = find_recursion(orig_etype, evalue, records)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 451, in find_recursion\r\n    return len(records), 0\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2895, in _run_cell\r\n    return runner(coro)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/async_helpers.py\", line 68, in _pseudo_sync_runner\r\n    coro.send(None)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3072, in run_cell_async\r\n    interactivity=interactivity, compiler=compiler, result=result)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3282, in run_ast_nodes\r\n    self.showtraceback()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1436, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1336, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1211, in structured_traceback\r\n    chained_exceptions_tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1150, in format_exception_as_a_whole\r\n    last_unique, recursion_repeat = find_recursion(orig_etype, evalue, records)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 451, in find_recursion\r\n    return len(records), 0\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1169, in get_records\r\n    return _fixed_getinnerframes(etb, number_of_lines_of_context, tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 316, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 350, in _fixed_getinnerframes\r\n    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 1490, in getinnerframes\r\n    frameinfo = (tb.tb_frame,) + getframeinfo(tb, context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 1448, in getframeinfo\r\n    filename = getsourcefile(frame) or getfile(frame)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 696, in getsourcefile\r\n    if getattr(getmodule(object, filename), '__loader__', None) is not None:\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/inspect.py\", line 733, in getmodule\r\n    if ismodule(module) and hasattr(module, '__file__'):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 941, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 42, in <module>\r\n    from . _api.v2 import audio\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/_api/v2/audio/__init__.py\", line 10, in <module>\r\n    from tensorflow.python.ops.gen_audio_ops import decode_wav\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_audio_ops.py\", line 10, in <module>\r\n    from tensorflow.python import pywrap_tensorflow as _pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-1-ebe7095df7bb>\", line 15, in <module>\r\n    from mrcnn import utils\r\n  File \"/Users/Maria/Documents/GitHub/Mask_RCNN/mrcnn/utils.py\", line 16, in <module>\r\n    import tensorflow as tf\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'ImportError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3263, in run_ast_nodes\r\n    if (await self.run_code(code, result,  async_=asy)):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3360, in run_code\r\n    self.showtraceback(running_compiled_code=True)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1436, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1336, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1193, in structured_traceback\r\n    tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1150, in format_exception_as_a_whole\r\n    last_unique, recursion_repeat = find_recursion(orig_etype, evalue, records)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 451, in find_recursion\r\n    return len(records), 0\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2895, in _run_cell\r\n    return runner(coro)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/async_helpers.py\", line 68, in _pseudo_sync_runner\r\n    coro.send(None)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3072, in run_cell_async\r\n    interactivity=interactivity, compiler=compiler, result=result)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3282, in run_ast_nodes\r\n    self.showtraceback()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2047, in showtraceback\r\n    value, tb, tb_offset=tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1436, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1336, in structured_traceback\r\n    self, etype, value, tb, tb_offset, number_of_lines_of_context\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1211, in structured_traceback\r\n    chained_exceptions_tb_offset)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 1150, in format_exception_as_a_whole\r\n    last_unique, recursion_repeat = find_recursion(orig_etype, evalue, records)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/ultratb.py\", line 451, in find_recursion\r\n    return len(records), 0\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 2044, in showtraceback\r\n    stb = value._render_traceback_()\r\nAttributeError: 'TypeError' object has no attribute '_render_traceback_'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.", "comments": ["From the template it looks like you are installing **TensorFlow** (TF) prebuilt binaries:\n   * For TF-GPU - See point 1\n   * For TF-CPU - See point 2\n-----------------------------------------------------------------------------------------------\n**1. Installing **TensorFlow-GPU** (TF) prebuilt binaries**\n\nMake sure you are using compatible TF and CUDA versions. Please refer following TF version and CUDA version compatibility table.\n| TF  | CUDA |\n| :-------------: | :-------------: |\n| 2.1.0 - 2.2.0  | 10.1 |\n| 1.13.1 - 2.0  | 10.0  |\n| 1.5.0 - 1.12.0 | 9.0 |\n\n  * If you have above configuration and using _**Windows**_ platform -\n    * Try adding the CUDA, CUPTI, and cuDNN installation directories to the %PATH% environment variable.\n    * Refer [windows setup guide](https://www.tensorflow.org/install/gpu#windows_setup).\n  * If you have above configuration and using _**Ubuntu/Linux**_ platform -\n    * Try adding the CUDA, CUPTI, and cuDNN installation directories to the $LD_LIBRARY_PATH environment variable.\n    * Refer [linux setup guide](https://www.tensorflow.org/install/gpu#linux_setup).\n  * If error still persists then, apparently your CPU model does not support AVX instruction sets.\n    * Refer [hardware requirements](https://www.tensorflow.org/install/pip#hardware-requirements).\n\n-----------------------------------------------------------------------------------------------\n**2. Installing **TensorFlow** (TF) CPU prebuilt binaries**\n\n*TensorFlow release binaries version 1.6 and higher are prebuilt with AVX instruction sets.*\n\nTherefore on any CPU that does not have these instruction sets, either CPU or GPU version of TF will fail to load.\nApparently, your CPU model does not support AVX instruction sets. You can still use TensorFlow with the alternatives given below:\n\n   * Try Google Colab to use TensorFlow.\n      * The easiest way to use TF will be to switch to [google colab](https://colab.sandbox.google.com/notebooks/welcome.ipynb#recent=true). You get pre-installed latest stable TF version. Also you can use ```pip install```  to install any other preferred TF version.\n      * It has an added advantage since you can you easily switch to different hardware accelerators (cpu, gpu, tpu) as per the task.\n      * All you need is a good internet connection and you are all set.\n   * Try to build TF from sources by changing CPU optimization flags.\n\n*Please let us know if this helps.*\n", "@mariaunipi \r\n\r\nRequest you to fill [issue template](https://github.com/tensorflow/tensorflow/issues/new/choose)\r\nPlease provide details about what platform you are using (operating system, architecture). Also include your TensorFlow version.\r\nProvide the exact sequence of commands / steps that you executed before running into the problem.Thanks!", "@ravikyram \r\nI have macos Yosemite 10.10.5. \r\nI followed this tutorial https://github.com/markjay4k/Mask-RCNN-series/blob/master/Mask_RCNN%20Install%20Instructions.ipynb.\r\nI'm using conda virtual environment, Tensorflow version 2.0.1", "Can you run just\r\n```\r\nimport tensorflow as tf\r\nprint(tf.__version__)\r\n```", "@bhack \r\n\r\n>>> import tensorflow as tf\r\nTraceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 42, in <module>\r\n    from . _api.v2 import audio\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/_api/v2/audio/__init__.py\", line 10, in <module>\r\n    from tensorflow.python.ops.gen_audio_ops import decode_wav\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_audio_ops.py\", line 10, in <module>\r\n    from tensorflow.python import pywrap_tensorflow as _pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/anaconda3/envs/MaskRCNN/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /opt/anaconda3/envs/MaskRCNN/lib/python3.6/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.", "I think It Is a problem of that specific third party package installation.\nTensorflow doesn't maintain conda package.", "@mariaunipi I think that we can close this ticket. https://github.com/tensorflow/tensorflow/issues/23832#issuecomment-442173109.", "> I think It Is a problem of that specific third party package installation.\r\n> Tensorflow doesn't maintain conda package.\r\n\r\nSo I have to use an other virtual environment?", "> @mariaunipi I think that we can close this ticket. [#23832 (comment)](https://github.com/tensorflow/tensorflow/issues/23832#issuecomment-442173109).\r\n\r\nSorry but it's the first time I work with this\r\n", "@mariaunipi We support pip: https://www.tensorflow.org/install/pip \r\nIf you still want to use `conda` as in your mentioned MaskRCNN repo you need to move this ticket to that repo directly or to conda https://github.com/tensorflow/tensorflow/issues/35754#issuecomment-635683444\r\n/cc @gunan ", "@mariaunipi \r\n\r\nPlease file conda related issue through anaconda repo from [here.](https://github.com/ContinuumIO/anaconda-issues/issues).Thanks!\r\n", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", ">>> import tensorflow\r\nTraceback (most recent call last):\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so, 6): Symbol not found: _SecKeyCopyExternalRepresentation\r\n  Referenced from: /Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security\r\n in /Users/alexjunyuexuli/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow_core/python/../libtensorflow_framework.2.dylib\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n>>> \r\n\r\nhow to deal with problem ? thanks for help me anybody!", "Looks like you installed TF through anaconda. \r\nYou have to file an issue through the following repository for help with anaconda packages:\r\nhttps://github.com/ContinuumIO/anaconda-issues/issues", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41283\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41283\">No</a>\n", "Also, searching your error on google pouints to this:\r\nhttps://stackoverflow.com/questions/51765519/error-importing-tensorflow-in-anaconda-on-mac-osx"]}, {"number": 41282, "title": "Add path exist, is directory, stat", "body": "@mihaimaruseac \r\nAs I said, this PR can not mimic the current implementation because `google-cloud-cpp` is missing one feature. I am working on it https://github.com/googleapis/google-cloud-cpp/pull/4494. We will have to wait but it won't take too much time. After that PR is merged, I will do a refactor with the `gcs` code", "comments": ["@mihaimaruseac \r\nI just found a bug in the current `gcs filesystem`. It is not so common but it is one reason to reconsider the concept of directory. Here is my bucket on GCS server.\r\n<img width=\"1044\" alt=\"image\" src=\"https://user-images.githubusercontent.com/17511625/87250089-074ad900-c48d-11ea-9360-921cf06d6dac.png\">\r\n`windows` is a file and `windows/` is a directory ( it is allowed on cloud filesystem ). \r\n\r\nHere is my test with tensorflow `2.2.0`\r\n<img width=\"480\" alt=\"image\" src=\"https://user-images.githubusercontent.com/17511625/87250261-d7e89c00-c48d-11ea-9c36-64e98bb0f74c.png\">\r\n\r\nWhat do you think ?\r\n", "I think that is a bug in `tf.io.gfile.isdir` due to the change from `file_exists` to `path_exists`?", "I think no. I am testing with prebuilt tensorflow 2.2.0 so there is nothing releated to `path_exists` ?", "Oh, it's a preexisting bug. I would expect that `tf.io.gfile.isdir(x)` should always return the same boolean as `tf.io.gfile.stat(x).is_directory`, assuming no errors.", "So I would like to ask you which value do you expect in the returned result in this case ? I think it should be `false` even there is a directory because if it is `true`, we will lose the access to `windows` object.", "In general we should preserve the invariant from above as otherwise there would be subtle to debug issues, even security related ones.\r\n\r\nIn this particular case when we have both a file and a directory with the same name, we can given precedence to directory (as it usually contains more data) and not allowing creation of files/directories if the other one exists (from TF, outside TF user that creates both is responsible for the mess)"]}, {"number": 41281, "title": "device:GPU missing from the list not accepting XLA_GPU", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.2.0\r\n- Python version: 3.7.6\r\n- CUDA/cuDNN version: 10.1 update 2 / 7.5\r\n- GPU model and memory: RTX 2060, dedicated 6 GB and shared 8 GB\r\n\r\n\r\n**Describe the current behavior**\r\n>>> tf.test.is_gpu_available(cuda_only=False, min_cuda_compute_capability=None)                                                                                                                                    WARNING:tensorflow:From <stdin>:1: is_gpu_available (from tensorflow.python.framework.test_util) is deprecated and will be removed in a future version.                                                            Instructions for updating:                                                                                                                                                                                         Use `tf.config.list_physical_devices('GPU')` instead.                                                                                                                                                              2020-07-10 19:37:38.026206: I tensorflow/core/platform/cpu_feature_guard.cc:143] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2                                          2020-07-10 19:37:38.077466: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x2311a9eb5d0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:                    2020-07-10 19:37:38.085075: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version                                                                                   2020-07-10 19:37:38.099271: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library nvcuda.dll                                                                         2020-07-10 19:37:39.351124: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties:                                                                                               pciBusID: 0000:01:00.0 name: GeForce RTX 2060 computeCapability: 7.5                                                                                                                                               coreClock: 1.335GHz coreCount: 30 deviceMemorySize: 6.00GiB deviceMemoryBandwidth: 312.97GiB/s                                                                                                                     2020-07-10 19:37:39.369392: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cudart64_101.dll'; dlerror: cudart64_101.dll not found                                 2020-07-10 19:37:39.375813: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cublas64_10.dll'; dlerror: cublas64_10.dll not found                                   2020-07-10 19:37:39.381862: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cufft64_10.dll'; dlerror: cufft64_10.dll not found                                     2020-07-10 19:37:39.388101: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'curand64_10.dll'; dlerror: curand64_10.dll not found                                   2020-07-10 19:37:39.392995: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cusolver64_10.dll'; dlerror: cusolver64_10.dll not found                               2020-07-10 19:37:39.398977: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cusparse64_10.dll'; dlerror: cusparse64_10.dll not found                               2020-07-10 19:37:39.403336: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cudnn64_7.dll'; dlerror: cudnn64_7.dll not found                                       2020-07-10 19:37:39.408632: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1598] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.                                                                 Skipping registering GPU devices...                                                                                                                                                                                2020-07-10 19:37:39.596047: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102] Device interconnect StreamExecutor with strength 1 edge matrix:                                                               2020-07-10 19:37:39.599475: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1108]      0                                                                                                                        2020-07-10 19:37:39.601116: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] 0:   N                                                                                                                        2020-07-10 19:37:39.607957: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x23112e31a20 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:                    2020-07-10 19:37:39.611013: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce RTX 2060, Compute Capability 7.5                                                                False  \r\n\r\n\r\n>>> tf.config.list_physical_devices('GPU')                                                                                                                                                                         2020-07-10 19:40:03.191437: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties:                                                                                               pciBusID: 0000:01:00.0 name: GeForce RTX 2060 computeCapability: 7.5                                                                                                                                               coreClock: 1.335GHz coreCount: 30 deviceMemorySize: 6.00GiB deviceMemoryBandwidth: 312.97GiB/s                                                                                                                     2020-07-10 19:40:03.220558: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cudart64_101.dll'; dlerror: cudart64_101.dll not found                                 2020-07-10 19:40:03.234827: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cublas64_10.dll'; dlerror: cublas64_10.dll not found                                   2020-07-10 19:40:03.244975: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cufft64_10.dll'; dlerror: cufft64_10.dll not found                                     2020-07-10 19:40:03.254710: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'curand64_10.dll'; dlerror: curand64_10.dll not found                                   2020-07-10 19:40:03.263915: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cusolver64_10.dll'; dlerror: cusolver64_10.dll not found                               2020-07-10 19:40:03.274163: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cusparse64_10.dll'; dlerror: cusparse64_10.dll not found                               2020-07-10 19:40:03.283131: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cudnn64_7.dll'; dlerror: cudnn64_7.dll not found                                       2020-07-10 19:40:03.291143: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1598] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.                                                                 Skipping registering GPU devices...                                                                                                                                                                                [] \r\n\r\n>>> tf.config.list_physical_devices()                                                                                                                                                                              [PhysicalDevice(name='/physical_device:CPU:0', device_type='CPU'), PhysicalDevice(name='/physical_device:XLA_CPU:0', device_type='XLA_CPU'), PhysicalDevice(name='/physical_device:XLA_GPU:0', device_type='XLA_GPU')]  \r\n\r\n**Describe the expected behavior**\r\nCuda available and GPU also should be available \r\n**Standalone code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["Also,\r\n\r\n>>> tf.test.is_built_with_cuda()                                                                                                                                                                                   True   ", "![image](https://user-images.githubusercontent.com/31595943/87164740-c2853d80-c2e6-11ea-9cf4-9e3a1472a6e0.png)\r\nWhile using tensorboard i got this message\r\nBut I already got that file\r\n![image](https://user-images.githubusercontent.com/31595943/87164894-fa8c8080-c2e6-11ea-8cf2-35f7d14704e4.png)\r\nand also it has been added to the path\r\n![image](https://user-images.githubusercontent.com/31595943/87165100-4dfece80-c2e7-11ea-95cc-7a7da2d73ea7.png)\r\n\r\nI have tried to follow the guidelines provided by [https://towardsdatascience.com/installing-tensorflow-with-cuda-cudnn-and-gpu-support-on-windows-10-60693e46e781](url) for installation\r\n", "Is this a dup of https://github.com/tensorflow/tensorflow/issues/36111?", "its one of the problem, TensorFlow fails to acknowledge GPU is the main problem and I can use by GPU for training while using torch frame work", "> Is this a dup of #36111?\r\n\r\nalso, I saw that #36111 suggests updating cuda path that it is showing already", "@Vatsal-Malaviya,\r\nJust to make sure, did you check this comment from [#36111](https://github.com/tensorflow/tensorflow/issues/36111#issuecomment-614933000)? \r\n\r\nCould you please let us know if you have installed Python from the Microsoft Store or from python.org. Thanks!\r\n\r\n", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 41279, "title": "tf_doctest.py fails on import ", "body": "\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Ubuntu 20.04 LTS**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **N/A**\r\n- TensorFlow installed from (source or binary): **pip package**\r\n- TensorFlow version: **2.2.0**\r\n- Python version: **3.8.2**\r\n- Installed using virtualenv? pip? conda?: **pip**\r\n- Bazel version (if compiling from source): **N/A**\r\n- GCC/Compiler version (if compiling from source): **N/A**\r\n- CUDA/cuDNN version: **N/A**\r\n- GPU model and memory: **N/A**\r\n\r\n\r\nI was testing my changes to the documentation, specifically the doctests as specified in #40619, using the `tf_doctest.py` as described in [documentation](https://www.tensorflow.org/community/contribute/docs_ref).\r\n\r\nUnfortunately the command: `python tf_doctest.py --file=../../python/module/module.py` failed producing following error.\r\n```\r\nTraceback (most recent call last):\r\n  File \"tf_doctest.py\", line 30, in <module>\r\n    import tensorflow.compat.v2 as tf\r\n\r\nModuleNotFoundError: No module named 'tensorflow.compat'\r\n```\r\nI tried the same in container spun from devel image with similar results. In order to identify the issue I reinstalled tensorflow on my machine and for the good measure removed nightly packages. The result wasn't any better.\r\n\r\nPlease note that I only altered module.py file, as described in #40619", "comments": ["@jpodivin \r\n\r\nCan you refer  #26546 and see if it helps you.Thanks!", "> @jpodivin\r\n> \r\n> Can you refer #26546 and see if it helps you.Thanks!\r\n\r\n\r\nThat doesn't seem like to really work. I have the right version of tensorflow installed, both in venv and in the system itself. \r\nThe output of `python -c \"import tensorflow as tf; print(tf.__version__)\"` confirms it.\r\n\r\n", "@ravikyram \r\n\r\nI reinstalled the tensorflow yet again on both system and venv. The only result is that now I get:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"tf_doctest.py\", line 33, in <module>\r\n    from tensorflow.tools.docs import tf_doctest_lib\r\nImportError: cannot import name 'tf_doctest_lib' from 'tensorflow.tools.docs' (/home/jpodivin/.local/lib/python3.8/site-packages/tensorflow/tools/docs/__init__.py)\r\n\r\n```", "Yeah.. I'l fix this. \r\n\r\n@mihaimaruseac Do I need to add tf_doctest_lib to the pip package thing for it to get exported out?", "I think so.", "Hello, \r\nI came across this issue recently as well while trying to test the changes I made to the python documentation in math_ops #42619. @yashk2810 I'd love to contribute if I could get some guidance!", "@Harsh188 I've made some changes to math_ops as well. Any idea how you fixed this issue?", "Any workarounds ? So far I have tried to change import to local file but that doesn't work too.", "> @Harsh188 I've made some changes to math_ops as well. Any idea how you fixed this issue?\r\n\r\nCan you link your PR so I can take a look?", "Sure @Harsh188 here it is #43758 ", "@mihaimaruseac Could you help workout this issue? I took a peek at [`pip_package/BUILD`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/pip_package/BUILD) but I'm not sure how I'm supposed to make the appropriate change.", "Is this still an issue?\r\n\r\n@Harsh188 you probably need to add to `COMMON_PIP_DEPS` list.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41279\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41279\">No</a>\n"]}, {"number": 41278, "title": "[TFLite] Added GATHER operator for 16x8.", "body": "In this PR added reference kernel implementation of GATHER operator for 16x8 scheme (weights - int8, activations - int16), that was required by one of models.\r\nI added tests and versioning.", "comments": ["@jianlijianli Could you review the optimize changes? (Or reassign :-) )"]}, {"number": 41277, "title": "[TFLite] Quantization of PAD operator for 16x8 quantization scheme.", "body": "This PR enables quantization of PAD operator for 16x8 quantization scheme.\r\nThe reference kernel for 16-bit has been merged early.\r\nThis PR adds tests that need changes to the testing functions from this PR: https://github.com/tensorflow/tensorflow/pull/39543", "comments": ["Hi @jdduke Thanks, corrected.", "Hi @jdduke Could you please re-review this PR ?\r\ntensorflowbutler removed \"awaiting review\" tag for unknown reasons."]}, {"number": 41276, "title": "TypeError: Failed to convert object of type <class 'tensorflow.python.ops.ragged.ragged_tensor.RaggedTensor'> to Tensor.", "body": "### System information\r\n\r\n-   **Have I written custom code (as opposed to using a stock example script\r\n    provided in TensorFlow)**: Yes\r\n-   **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Colab\r\n-   **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue\r\n    happens on a mobile device**:\r\n-   **TensorFlow installed from (source or binary)**:\r\n-   **TensorFlow version (use command below)**: 2.4.0-dev20200709\r\n-   **Python version**:\r\n-   **Bazel version (if compiling from source)**:\r\n-   **GCC/Compiler version (if compiling from source)**:\r\n-   **CUDA/cuDNN version**:\r\n-   **GPU model and memory**:\r\n-   **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI am referring to [this official Keras example](https://colab.research.google.com/github/keras-team/keras-io/blob/master/examples/vision/ipynb/captcha_ocr.ipynb) that shows how to train an OCR model using the CTC loss. I am trying to extend it to the [**IAM dataset**](http://www.fki.inf.unibe.ch/DBs/iamDB/iLogin/index.php) which is rawer in terms of its quality and the images are of handwritten characters. \r\n\r\nI was able to construct the dataset in the way expected by the model used in the example. However, the labels, in this case, are of variable length. This is why they are getting converted to RaggedTensors. This is producing the following error - \r\n\r\n```\r\nTypeError: in user code:\r\n\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/training.py:806 train_function  *\r\n        return step_function(self, iterator)\r\n    <ipython-input-42-e0e4c73f8c9f>:10 call  *\r\n        batch_len = tf.cast(tf.shape(y_true)[0], dtype=\"int64\")\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/util/dispatch.py:201 wrapper  **\r\n        return target(*args, **kwargs)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/array_ops.py:617 shape_v2\r\n        return shape(input, name, out_type)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/util/dispatch.py:201 wrapper\r\n        return target(*args, **kwargs)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/array_ops.py:644 shape\r\n        return shape_internal(input, name, optimize=True, out_type=out_type)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/array_ops.py:668 shape_internal\r\n        input = ops.convert_to_tensor(input)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py:1525 convert_to_tensor\r\n        ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/constant_op.py:338 _constant_tensor_conversion_function\r\n        return constant(v, dtype=dtype, name=name)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/constant_op.py:264 constant\r\n        allow_broadcast=True)\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/constant_op.py:282 _constant_impl\r\n        allow_broadcast=allow_broadcast))\r\n    /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/tensor_util.py:553 make_tensor_proto\r\n        \"supported type.\" % (type(values), values))\r\n\r\n    TypeError: Failed to convert object of type <class 'tensorflow.python.ops.ragged.ragged_tensor.RaggedTensor'> to Tensor. Contents: tf.RaggedTensor(values=tf.RaggedTensor(values=Tensor(\"ocr_model_v1/Cast_1:0\", shape=(None,), dtype=float32), row_splits=Tensor(\"RaggedFromVariant/RaggedTensorFromVariant:1\", shape=(None,), dtype=int64)), row_splits=Tensor(\"RaggedFromVariant/RaggedTensorFromVariant:0\", shape=(None,), dtype=int64)). Consider casting elements to a supported type.\r\n```\r\n\r\nWhat I am looking for is a way to bypass this so that the ground truth labels and the predicted labels could be sent to the CTC loss. \r\n\r\n### Source code / logs\r\nHere's the [Colab Notebook](https://colab.research.google.com/gist/sayakpaul/529500ca05252277f1c1f390ef37e4d3/scratchpad.ipynb). \r\n\r\nThe commands that download the dataset are as follows:\r\n```\r\n$ wget http://www.fki.inf.unibe.ch/DBs/iamDB/data/words/words.tgz --user=**user** --password=**password**\r\n$ wget http://www.fki.inf.unibe.ch/DBs/iamDB/data/ascii/words.txt --user=**user** --password=**password**\r\n```\r\n\r\n**_Please register here first: http://www.fki.inf.unibe.ch/DBs/iamDB/iLogin/index.php and then replace the username and password accordingly. This is a requirement._** ", "comments": ["Was able to reproduce the issue with [TF v2.3](https://colab.research.google.com/gist/amahendrakar/71ce949e24f2ac3a4c8ad6ad71590a04/41276-2-3.ipynb) and [TF-nightly](https://colab.research.google.com/gist/amahendrakar/02ef24654712fad95814b72d8bf4b0ce/41276-tf-nightly.ipynb). Please find the attached gist. Thanks!", "Thanks for your issue. For quicker troubleshooting can you please help us with minimalistic code to reproduce the reported behavior?", "I think I already did that and you can also see that @amahendrakar was able to confirm it. Unfortunately, I don't have anything more minimalistic at the moment. ", "The problem is that `tf.shape` isn't defined for RaggedTensors, since it's not possible to encode the shape of a `RaggedTensor` in a vector.  If you know that `y_true` is ragged, then you can change this:\r\n\r\n```\r\nbatch_len = tf.cast(tf.shape(y_true)[0], dtype=\"int64\")\r\n```\r\n\r\nto this:\r\n\r\n```\r\nbatch_len = y_true.nrows(dtype=tf.int64)\r\n```\r\n\r\nIf you don't know whether it's ragged or not, then the best solution at the moment might be to do something like `batch_len = _nrows(y_true, 'int64')` where `_nrows` is defined as:\r\n\r\n```\r\ndef _nrows(tensor, out_type=dtypes.int32):\r\n  if isinstance(tensor, RaggedTensor):\r\n    return tensor.nrows(out_type=out_type)\r\n  else:\r\n    return array_ops.shape(tensor, out_type=out_type)[0]\r\n```\r\n\r\nWe have some general ideas about how `tf.shape` could be implemented for `RaggedTensor`, but it would need to return a different type (a `RaggedTensorShape`), which is currently only used internally; and that type would need to be updated with __getitem__ etc.  But I don't think that's likely to get implemented in the near-term future.", "I just took a quick look at the colab in question, and there are a few other things you're likely to need to tweak.  E.g., you may need to change:\r\n\r\n```\r\n        input_length = tf.cast(tf.shape(y_pred)[1], dtype=\"int64\")\r\n        label_length = tf.cast(tf.shape(y_true)[1], dtype=\"int64\")\r\n```\r\n\r\nto:\r\n\r\n```\r\n        input_length = y_pred.uniform_row_length\r\n        label_length = y_true. uniform_row_length\r\n```\r\n\r\nAlternatively, if `y_pred` and `y_true` have statically known shapes, you could possibly use:\r\n\r\n```\r\n        batch_len = tf.cast(y_true.shape[0], dtype=\"int64\")\r\n        input_length = tf.cast(y_pred.shape[1], dtype=\"int64\")\r\n        label_length = tf.cast(y_true.shape[1], dtype=\"int64\")\r\n```\r\n\r\nAnother option might be to convert `y_pred` and `y_true` to non-ragged (padded) tensors (with `y_pred.to_tensor()` and `y_true.to_tensor()`), though I'm not familiar enough with this code to know whether that would do the right thing.", "@edloper I changed\r\n\r\n```python\r\nbatch_len = tf.cast(y_true.shape[0], dtype=\"int64\")\r\ninput_length = tf.cast(y_pred.shape[1], dtype=\"int64\")\r\nlabel_length = tf.cast(y_true.shape[1], dtype=\"int64\")\r\n```\r\nto\r\n\r\n```python\r\nbatch_len = batch_len = nrows(y_true, 'int64')\r\ninput_length = y_pred.uniform_row_length\r\nlabel_length = y_true.uniform_row_length\r\n```\r\n\r\nwhere `nrows()` is defined as - \r\n\r\n```python\r\ndef nrows(tensor, out_type=tf.dtypes.int32):\r\n  if isinstance(tensor, tf.RaggedTensor):\r\n    return tensor.nrows(out_type=out_type)\r\n  else:\r\n    return tf.python.ops.array_ops.shape(tensor, out_type=out_type)[0]\r\n```\r\n\r\nNow, I am getting while building the model - \r\n\r\n```\r\nAttributeError: in user code:\r\n\r\n    <ipython-input-23-0940c7590da2>:10 call  *\r\n        input_length = y_pred.uniform_row_length\r\n\r\n    AttributeError: 'Tensor' object has no attribute 'uniform_row_length'\r\n```\r\n\r\nHere's the [Colab Gist](https://colab.research.google.com/gist/sayakpaul/fdb3591ea69ce7f4644f03253aae93a7/scratchpad.ipynb). Any pointers? ", "@sayakpaul It looks to me like the keras code would need some refactoring to be able to deal with variable-length labels -- right now, it's assuming a specific rank for its input.  I.e., you could fix your `call` code with something like the following:\r\n\r\n```\r\n    def call(self, y_true, y_pred):\r\n        # Compute the training-time loss value and add it\r\n        # to the layer using `self.add_loss()`.\r\n        if isinstance(y_true, tf.RaggedTensor):\r\n          batch_len = y_true.nrows(out_type='int64')\r\n          input_length = tf.cast(\r\n              tf.expand_dims(y_true.row_lengths(), 1), 'int64'),\r\n        else:\r\n          y_true_shape = tf.shape(y_true, out_type='int64')\r\n          batch_len = y_true_shape[0]\r\n          input_length = tf.fill([batch_len, 1], y_true_shape[1])\r\n\r\n        if isinstance(y_pred, tf.RaggedTensor):\r\n          label_length = tf.cast(\r\n              tf.expand_dims(y_pred.row_lengths(), 1), 'int64'),\r\n        else:\r\n          y_pred_shape = tf.shape(y_pred, out_type='int64')\r\n          label_length = tf.fill([batch_len, 1], y_pred_shape[1])\r\n\r\n        loss = self.loss_fn(y_true, y_pred, input_length, label_length)\r\n        self.add_loss(loss)\r\n\r\n        # At test time, just return the computed predictions\r\n        return y_pred\r\n```\r\n\r\nBut then things will still fail inside `ctc_batch_cost` in `keras/backend.py` (when it tries to call `ctc_label_dense_to_sparse`).  So I think `ctc_batch_cost` itself would need to be edited/modified to make this work.", "Ah. Thanks for sharing it. So, for now, I am gonna close this issue. If needed I will reopen. ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41276\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41276\">No</a>\n", "@alextp any ideas/pointers how to extend `ctc_batch_cost` from `keras/backend.py` to support variable-length labels labels? ", "Can you file a separate issue for that? nothing immediately comes to mind as better than other alternatives", "Okay let me do that. ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41276\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41276\">No</a>\n"]}, {"number": 41275, "title": "[TFLite] Error reporting message does not include name of the operator.", "body": "This is a small fix for the regression in the error reporting in the quantize model function:\r\nthe name of the operator was not included.", "comments": ["Hi @jdduke Could you please review this small fix for the regression ? Thanks!", "Hi @jdduke This is a regression introduced by me in that long PR for 16x8. It will be great if it could be cherry-picked into 2.3. Thanks", "Too late for a 2.3 cherrypick, unfortunately, but thanks for fixing."]}, {"number": 41274, "title": "Real-time prediction using Keras", "body": "THi! I would like to ask, does Keras Neural Networks do predictions in real time?\r\nI see, that one of your parameters in prediction is array of data. But when you need to predict future data, you don't have an array of data - you have only previous data and time interval for prediction and nothing more.\r\nAs I undestand, you simply checked the prediction because to predict future data I need to give to a function predict a time interval in future, not a previous data trainX as necessary in this function predict\r\n\r\nHere is my Neuro Network:\r\nlook_back = 3\r\nmodel = Sequential()\r\nmodel.add(LSTM(4, input_shape=(look_back, 1)))\r\nmodel.add(Dense(1))\r\nmodel.compile(loss='mean_squared_error', optimizer='adam')\r\nmodel.fit(trainX, trainY, epochs=20, batch_size=1, verbose=2)\r\ntrainPredict = model.predict(trainX)\r\n\r\nI would like to predict future values of EMA oscillator using previous values and a value in the current time moment\r\n\r\ndef create_dataset(dataset, look_back=1):\r\ndataX, dataY = [], []\r\nfor i in range(len(dataset)-look_back-1):\r\na = dataset[i:(i+look_back), 0]\r\ndataX.append(a)\r\ndataY.append(dataset[i + look_back, 0])\r\nreturn np.array(dataX), np.array(dataY)\r\n\r\nI would like to predict future values of EMA oscillator using previous values and a value in the current time moment\r\ndata2 = pandas.read_csv('ratevalues.csv')[::-1]\r\ndata2.columns = ['date','high','low','open','close','volume','quoteVolume','weightedAverage']\r\ndataset = pandas.DataFrame(data2.close.ewm(span=14).mean())\r\ntrain_size = int(len(dataset) * 0.67)\r\ntrain = dataset[0:train_size,:]\r\ntrainX, trainY = create_dataset(train, look_back)\r\n\r\nCan you show an example of predicting in real time?", "comments": ["@vasilevskykv \r\nPlease share indented stand alone code with all dependencies for us to replicate the issue or if possible share a colab gist for us to analyse the error.", "The question is not to find an error. I would like to know if it is possible to predict future data in real time and how to do it because I didn't see where to put a future time interval to the function **predict**.\r\n\r\nHere is the whole code:\r\n\r\n`import numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport pandas\r\nimport math\r\n#import DataFrame\r\nimport datetime as dt\r\nfrom datetime import datetime\r\nfrom getDataFromPoloniex import get_data_from_poloniex\r\nfrom keras.models import Sequential\r\nfrom keras.layers import Dense\r\nfrom keras.layers import LSTM\r\nfrom sklearn.preprocessing import MinMaxScaler\r\nfrom sklearn.metrics import mean_squared_error\r\nfrom pandas.plotting import register_matplotlib_converters\r\nregister_matplotlib_converters()\r\nimport os\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'\r\n\r\nnp.random.seed(7)\r\n\r\ndata2 = pandas.read_csv('ratevalues.csv')[::-1]\r\ndata2.columns = ['date','high','low','open','close','volume','quoteVolume','weightedAverage']\r\ndataset = pandas.DataFrame(data2.close.ewm(span=14).mean())\r\n\r\ndef create_dataset(dataset, look_back=1):\r\n\tdataX, dataY = [], []\r\n\tfor i in range(len(dataset)-look_back-1):\r\n\t\ta = dataset[i:(i+look_back), 0]\r\n\t\tdataX.append(a)\r\n\t\tdataY.append(dataset[i + look_back, 0])\r\n\treturn np.array(dataX), np.array(dataY)\r\n\r\nscaler = MinMaxScaler(feature_range=(0, 1))\r\ndataset = scaler.fit_transform(dataset)\r\n\r\nlook_back = 3\r\n\r\ntrain_size = int(len(dataset) * 0.67)\r\ntrain = dataset[0:train_size,:]\r\ntrainX, trainY = create_dataset(train, look_back)\r\n\r\ntrainX = np.reshape(trainX, (trainX.shape[0], trainX.shape[1], 1))\r\n\r\nmodel = Sequential()\r\nmodel.add(LSTM(4, input_shape=(look_back, 1)))\r\nmodel.add(Dense(1))\r\nmodel.compile(loss='mean_squared_error', optimizer='adam')\r\nmodel.fit(trainX, trainY, epochs=20, batch_size=1, verbose=2)\r\ntrainPredict = model.predict(trainX)\r\n\r\ntrainPredict = scaler.inverse_transform(trainPredict)\r\ntrainY = scaler.inverse_transform([trainY])\r\ntrainScore = math.sqrt(mean_squared_error(trainY[0], trainPredict[:,0]))\r\n`", "I've already read the documentation. Everywhere I saw **model.predict(testX)**. But when I predict in real-time mode I don't have testX because **testX will be in future**. What should I give to the function **predict** instead of testX to make real-time prediction?", "@vasilevskykv Please take a look at this [example](https://www.tensorflow.org/tutorials/structured_data/time_series) and let me know if it helps.", "@vasilevskykv The testX could be passed as a `tf.data.Dataset`, and, if the `tf.data.Dataset` is blocking then you should have a real-time prediction pipeline. One way of achieve that is to use KafkaIODataset in https://github.com/tensorflow/io Let me know if you have questions (you can also create an issue there for further discussion).", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "I tried to use your idea, but I had a problem:\r\n`Traceback (most recent call last):\r\n  File \"D:\\CryptoTrading\\Prediction\\BinanceNeuroPrediction\\TFPredict.py\", line 1, in <module>\r\n    import tensorflow as tf\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 41, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 40, in <module>\r\n    from tensorflow.python.eager import context\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\eager\\context.py\", line 35, in <module>\r\n    from tensorflow.python import pywrap_tfe\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tfe.py\", line 28, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 83, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 64, in <module>\r\n    from tensorflow.python._pywrap_tensorflow_internal import *\r\nImportError: DLL load failed: The specified module was not found.`", "I installed tensorflow-gpu and then I got the following:\r\n`2020-08-17 10:10:24.670105: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll\r\nTraceback (most recent call last):\r\n  File \"D:\\CryptoTrading\\Prediction\\BinanceNeuroPrediction\\TFPredict.py\", line 2, in <module>\r\n    import tensorflow_io as tfio\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow_io\\__init__.py\", line 17, in <module>\r\n    from tensorflow_io.core.python.api.v0 import *  # pylint: disable=wildcard-import\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow_io\\core\\python\\api\\v0\\__init__.py\", line 18, in <module>\r\n    from tensorflow_io.core.python.ops.io_dataset import IODataset\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow_io\\core\\python\\ops\\__init__.py\", line 71, in <module>\r\n    core_ops = _load_library(\"libtensorflow_io.so\")\r\n  File \"I:\\Python\\Python36\\lib\\site-packages\\tensorflow_io\\core\\python\\ops\\__init__.py\", line 67, in _load_library\r\n    + \"{}, from paths: {}\\ncaused by: {}\".format(filename, filenames, errs)\r\nNotImplementedError: unable to open file: libtensorflow_io.so, from paths: ['I:\\\\Python\\\\Python36\\\\lib\\\\site-packages\\\\tensorflow_io\\\\core\\\\python\\\\ops\\\\libtensorflow_io.so']\r\ncaused by: ['I:\\\\Python\\\\Python36\\\\lib\\\\site-packages\\\\tensorflow_io\\\\core\\\\python\\\\ops\\\\libtensorflow_io.so not found']`\r\nI'm working in Windows 10, not in Linux", "@vasilevskykv Can you open an issue in [tensorflow/io](https://github.com/tensorflow/io)? Please also includes additional information such as how python was installed and how tensorflow and tensorflow-io were installed (e.g., through pip or custom build).", "I wrote this question to\r\nhttps://github.com/tensorflow/io/issues/1091"]}, {"number": 41273, "title": "Fix FileIO tests for Python < 3.6", "body": "Fixes https://github.com/tensorflow/tensorflow/pull/41173#issuecomment-656572833\r\n\r\n/cc @byronyi ", "comments": ["Hello, @lgeiger this still fails on nightly builds\r\n\r\n```\r\n...\r\ntestWalkInOrderpathlike(<function <lambda> at 0x7fc1aadaf1e0>)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/tmpfs/bazel_output/_bazel_kbuilder/f2d52ca1f092ccbe254cc98c3dc90790/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/python/file_io_test.runfiles/absl_py/absl/testing/parameterized.py\", line 265, in bound_param_test\r\n    test_method(self, *testcase_params)\r\n  File \"/tmpfs/bazel_output/_bazel_kbuilder/f2d52ca1f092ccbe254cc98c3dc90790/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/python/file_io_test.runfiles/org_tensorflow/tensorflow/python/lib/io/file_io_test.py\", line 322, in testWalkInOrder\r\n    self._setupWalkDirectories(dir_path)\r\n  File \"/tmpfs/bazel_output/_bazel_kbuilder/f2d52ca1f092ccbe254cc98c3dc90790/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/python/file_io_test.runfiles/org_tensorflow/tensorflow/python/lib/io/file_io_test.py\", line 309, in _setupWalkDirectories\r\n    os.path.join(dir_path, \"file1.txt\"), mode=\"w\").write(\"testing\")\r\n  File \"/usr/local/lib/python3.5/posixpath.py\", line 89, in join\r\n    genericpath._check_arg_types('join', a, *p)\r\n  File \"/usr/local/lib/python3.5/genericpath.py\", line 143, in _check_arg_types\r\n    (funcname, s.__class__.__name__)) from None\r\nTypeError: join() argument must be str or bytes, not 'PathLike'\r\n\r\n----------------------------------------------------------------------\r\nRan 65 tests in 0.541s\r\n\r\nFAILED (errors=5)\r\n```\r\n\r\nCould it be we need a few more fixes?", "@mihaimaruseac sorry about that, I don't have an easy way to run the tests locally on Python 3.5 and since CI doesn't check it is easy to miss some things. However, #41390 should fix the failure you posted."]}, {"number": 41271, "title": "TFLite micro: Is the flatbuffer allowed to be placed in flash in all cases?", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n\r\n- TensorFlow installed from (source or binary):\r\n\r\nSource.\r\n\r\n- Tensorflow version (commit SHA if source):\r\n\r\nb2f092894012e9c2612cb46c332140f28d91ced2\r\n\r\n- Target platform (e.g. Arm Mbed OS, Arduino Nano 33 etc.):\r\n\r\nArduino Nano 33 BLE Sense\r\n\r\n**Describe the problem**\r\n\r\nWe received a bug report from a user that is experiencing a hard fault when initializing their TFLite model when also adding the ArduinoBLE library on the Arduino Nano 33 BLE Sense. So far we have always placed the flatbuffer model in flash, and this has not been a problem - but when digging into this bug report I traced the error back to the first call to the `InitializeTfLiteTensorFromFlatbuffer`. Is it possible that the flatbuffer is manipulated here? When moving the flatbuffer byte array into RAM the problem disappears. It's hard to debug on my end as I haven't figured out how to connect my J-Link to this board and build with debug symbols enabled, and because the way the serial communications are handled I can't see the error log either.\r\n\r\n**Please provide the exact sequence of commands/steps when you ran into the problem**\r\n\r\nI've reproduced the problem with:\r\n\r\n* Arduino Nano 33 BLE Sense\r\n* Arduino Core for nRF528x (Mbed OS) 1.1.4\r\n* Arduino BLE 1.1.3\r\n* The attached library (add via **Sketch > Include library > From ZIP file**)\r\n\r\nAnd the following sketch:\r\n\r\n```cpp\r\n#include <ArduinoBLE.h>\r\n#include <continuous_gestures_inference.h>\r\n\r\nBLEService soundsService(\"180C\");  // User defined service\r\n\r\nstatic const float features[] = {\r\n19.9700, 8.7300, 17.5700, 19.9700, 8.7300, 17.5700, 19.9700, 9.8200, 14.0300, 15.9400, 10.0700, 14.1400, 5.1400, 10.3500, 14.0700, -3.6600, 8.7700, 13.4100, -14.0000, 4.9900, 8.9200, -19.9800, -1.5200, 5.5700, -19.9800, -1.5200, 5.5700, -19.9800, -8.7800, -7.7400, -19.9800, -8.9900, -19.5300, -19.9800, -4.7900, -6.8400, -19.9800, 1.8400, 9.2000, -15.4000, 9.3800, 15.2200, -7.5900, 9.4600, 19.9500, -7.5900, 9.4600, 19.9500, 0.3900, 14.4600, 19.9800, 16.8500, 19.5300, 19.9800, 19.9700, 18.9900, 19.9800, 19.9700, 19.8700, 19.9500, 19.9700, 19.9700, 18.2000, 19.9700, 19.9700, 16.2600, 19.9700, 19.9700, 16.2600, 19.9700, 16.1000, 17.7500, 19.9700, 8.9900, 17.6500, 15.7300, 3.6000, 15.1800, 11.4500, -0.7100, 17.0700, 7.3700, -3.4600, 19.4300, 7.3700, -3.4600, 19.9800, 1.4400, -4.7400, 19.9800, -5.8700, -4.6500, 18.4300, -17.6300, -2.4500, 13.9000, -19.9800, -2.8000, 12.0600, -19.9800, 0.3900, 6.8400, -19.9800, 5.3700, -12.8800, -19.9800, 5.3700, -12.8800, -19.9800, 6.8900, -19.8900, -19.9800, 3.8400, -13.2000, -19.9800, 0.6700, -8.7200, -19.9800, 0.3600, -8.4200, -19.9800, 0.1200, -4.4400, -19.9800, 0.1300, 5.5800, -19.9800, 0.1300, 5.5800, -14.2500, -7.5100, 19.4800, -4.9700, -7.8700, 19.9800, 7.2300, -5.0500, 19.9800, 19.8600, 5.9300, 19.9800, 19.9700, 10.6000, 19.9800, 19.9700, 7.5400, 19.9800, 19.9700, 7.5400, 19.9800, 19.9700, 10.1600, 19.9800, 19.9700, 10.1500, 19.7000, 19.9700, 6.8200, 16.7800, 19.8700, 3.9500, 15.8000, 12.7500, 0.4500, 5.5200, 6.5800, -1.7100, 12.2200, 6.5800, -1.7100, 12.2200, -0.4100, -3.4200, 11.1400, -10.6100, -0.6800, 4.3500, -19.1800, -0.6900, 1.0500, -19.9800, -2.2000, -2.9700, -19.9800, -3.8700, -12.7700, -19.9800, -3.8700, -12.7700, -19.9800, -2.6600, -15.4700, -19.9800, 0.3700, -5.8800, -19.9800, 5.4000, 3.2500, -18.2600, 9.8800, 11.9400, -11.9500, 9.2100, 19.5900, -5.1000, 11.2400, 19.9800, -5.1000, 11.2400, 19.9800, 8.0700, 15.0100, 19.9800, 18.6900, 16.8800, 19.9800, 19.9700, 15.9200, 19.9800, 19.9700, 15.8600, 19.9800, 19.9700, 16.9700, 19.9800, 19.9700, 16.3800, 19.9800, 19.9700, 16.3800, 19.9800, 19.9700, 14.5000, 19.9800, 19.9700, 11.1800, 19.9800, 17.8900, 5.6400, 19.9800, 10.8300, 1.3800, 19.4300, 4.3300, 2.1100, 19.6200, -4.2300, 4.2900, 17.2100, -4.2300, 4.2900, 17.2100, -13.5500, 5.6800, 16.4400, -19.9800, 3.3700, 10.1400, -19.9800, 3.0800, 0.5100, -19.9800, 4.1200, -17.0600, -19.9800, 8.4400, -19.9700, -19.9800, 10.6300, -19.6100, -19.9800, 10.6300, -19.6100, -19.9800, 5.5000, -9.4300, -19.9800, 1.9500, -3.7400, -19.9800, -1.8000, 4.2200, -19.9800, -4.5600, 13.1500, -19.1300, -4.0500, 19.9800, -19.1300, -4.0500, 19.9800, -5.3800, -3.8200, 19.9800, 15.9100, -7.5500, 19.9800, 19.9700, -12.1300, 19.9800, 19.9700, -10.4600, 19.9800, 19.9700, -9.2700, 19.9800, 19.9700, -6.1800, 19.9800, 19.9700, -6.1800, 19.9800, 19.9700, -4.6800, 19.5600, 15.6500, -3.6800, 12.9200, 8.4000, -5.7900, 9.6900, 3.8200, -5.5500, 10.9100, -3.9100, -4.0800, 6.0200, -12.0400, -2.9300, 1.6000, -12.0400, -2.9300, 1.6000, -17.2900, -0.8900, -3.1300, -19.9800, 0.7700, -7.0300, -19.9800, 1.9800, -11.8500, -19.9800, 0.8300, -18.0000, -19.9800, -1.3800, -11.1400, -19.9800, 2.2700, -1.8800, -19.9800, 2.2700, -1.8800, -19.9800, 5.4800, 9.4500, -15.5700, 8.2800, 17.1300, -8.2900, 9.7100, 19.9700, -4.7900, 9.4900, 19.9800, 1.6000, 10.4000, 19.9800, 1.6000, 10.4000, 19.9800, 16.2600, 6.8500, 19.9800\r\n};\r\n\r\nint raw_feature_get_data(size_t offset, size_t length, float *out_ptr) {\r\n    memcpy(out_ptr, features + offset, length * sizeof(float));\r\n    return 0;\r\n}\r\n\r\nvoid setup()\r\n{\r\n    // put your setup code here, to run once:\r\n    Serial.begin(115200);\r\n\r\n    Serial.println(\"Edge Impulse Inferencing Demo\");\r\n}\r\n\r\nvoid loop()\r\n{\r\n    ei_printf(\"Edge Impulse standalone inferencing (Arduino)\\n\");\r\n\r\n    if (sizeof(features) / sizeof(float) != EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE) {\r\n        ei_printf(\"The size of your 'features' array is not correct. Expected %lu items, but had %lu\\n\",\r\n            EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE, sizeof(features) / sizeof(float));\r\n        delay(1000);\r\n        return;\r\n    }\r\n\r\n    ei_impulse_result_t result = { 0 };\r\n\r\n    // the features are stored into flash, and we don't want to load everything into RAM\r\n    signal_t features_signal;\r\n    features_signal.total_length = sizeof(features) / sizeof(features[0]);\r\n    features_signal.get_data = &raw_feature_get_data;\r\n\r\n    // invoke the impulse\r\n    EI_IMPULSE_ERROR res = run_classifier(&features_signal, &result, false /* debug */);\r\n    ei_printf(\"run_classifier returned: %d\\n\", res);\r\n\r\n    if (res != 0) return;\r\n\r\n    ei_printf(\"Predictions (DSP: %d ms., Classification: %d ms., Anomaly: %d ms.): \\n\",\r\n        result.timing.dsp, result.timing.classification, result.timing.anomaly);\r\n\r\n    // print the predictions\r\n    ei_printf(\"[\");\r\n    for (size_t ix = 0; ix < EI_CLASSIFIER_LABEL_COUNT; ix++) {\r\n        ei_printf(\"%.5f\", result.classification[ix].value);\r\n#if EI_CLASSIFIER_HAS_ANOMALY == 1\r\n        ei_printf(\", \");\r\n#else\r\n        if (ix != EI_CLASSIFIER_LABEL_COUNT - 1) {\r\n            ei_printf(\", \");\r\n        }\r\n#endif\r\n    }\r\n#if EI_CLASSIFIER_HAS_ANOMALY == 1\r\n    ei_printf(\"%.3f\", result.anomaly);\r\n#endif\r\n    ei_printf(\"]\\n\");\r\n\r\n    delay(1000);\r\n}\r\n\r\nvoid ei_printf(const char *format, ...) {\r\n    static char print_buf[1024] = { 0 };\r\n\r\n    va_list args;\r\n    va_start(args, format);\r\n    int r = vsnprintf(print_buf, sizeof(print_buf), format, args);\r\n    va_end(args);\r\n\r\n    if (r > 0) {\r\n        Serial.write(print_buf);\r\n    }\r\n}\r\n```\r\n\r\nWhen you run this the board will hardfault. If you open the library (in `~/Documents/Arduino/library`) and edit the `tflite-trained.h` file and remove the `const` declaration on `trained_tflite` this will run fine.\r\n\r\nWe're using a very simple network (just four operations: ['DEQUANTIZE', 'FULLY_CONNECTED', 'SOFTMAX', 'QUANTIZE']). I've attached the quantized tflite model and the TF SavedModel in the library ZIP file.\r\n\r\n## Attached\r\n\r\n* [Arduino library, tflite file and TensorFlow SavedModel file](https://github.com/tensorflow/tensorflow/files/4902006/ei-continuous-gestures-arduino-1.0.23.zip)", "comments": ["Using a flatbuffer stored in flash should be fine, since we never write back to the model itself. I've ordered a Nano 33 to try to reproduce the issue you're seeing, but in the meantime, can you try the following:\r\n-Do other (const) models (for example hello world, person detection) work on the Nano 33?\r\n-Can you run your model on a linux machine or other MCU to see if it's something board-specific related to your model?", "@njeffrie, no, this typically does not happen. We run our models on a wide variety of targets, and we have only seen this on the Arduino target. Also, the random thing here is that this only starts happening when including the ArduinoBLE library, I'm not sure if different compiler flags are set in this case.", "Interesting... I'll take a look into this issue this week. I'm wondering if for some reason the flatbuffer in flash is being corrupted by something related to the BLE library. One offhand thought is that the BLE library may implicitly reserve certain addresses for BLE registers and DMA, and these could potentially conflict with the addresses used to access flash. In this case, updating the memory map could help. I highly doubt a compiler flag would cause reading from flash to fail, but I'm not very familiar with this specific setup. I'll update when I take a closer look using my Nano 33.", "@njeffrie Did you ever manage to dive into this? Let me know if you need any help on our side.", "Apologies for the delay. I have not gotten a chance to reproduce this issue yet. We will look into how we configure the magic wand BLE demo and compare with your code sample, since it seems like getting debug info off the board will be challenging with the hard fault.", "This is a micro related issue,Please post this in [micro repository](https://github.com/tensorflow/tflite-micro/issues/new) and move this issue to closed status .Thanks!", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41271\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41271\">No</a>\n"]}, {"number": 41270, "title": "GPU delegate library is libtensorflowlite_gpu_delegate.so, not libtensorflowlite_gpu_gl.so.", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/MyMethod\r\n\r\n\r\nhttps://www.tensorflow.org/lite/performance/gpu_advanced\r\n\r\n\r\n## Description of issue (what needs changing):\r\n\r\n    bazel build -c opt --config android_arm64 tensorflow/lite/delegates/gpu:gl_delegate                  # for static library\r\n    bazel build -c opt --config android_arm64 tensorflow/lite/delegates/gpu:libtensorflowlite_gpu_gl.so  # for dynamic library\r\n\r\nshould be changed to,\r\n\r\n    bazel build -c opt --config android_arm64 tensorflow/lite/delegates/gpu:delegate                  # for static library\r\n    bazel build -c opt --config android_arm64 tensorflow/lite/delegates/gpu:libtensorflowlite_gpu_delegate.so  # for dynamic library\r\n\r\nbecause gl_delegate is not GPU delegate runtime library, it is for OpenGL delegate, right?\r\n\r\n\r\n### Clear description\r\n\r\nFor example, why should someone use this method? How is it useful?\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n\r\n### Parameters defined\r\n\r\nAre all parameters defined and formatted correctly?\r\n\r\n### Returns defined\r\n\r\nAre return values defined?\r\n\r\n### Raises listed and defined\r\n\r\nAre the errors defined? For example,\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/feature_column/categorical_column_with_vocabulary_file#raises\r\n\r\n### Usage example\r\n\r\nIs there a usage example?\r\n\r\nSee the API guide: https://www.tensorflow.org/community/contribute/docs_ref\r\non how to write testable usage examples.\r\n\r\n### Request visuals, if applicable\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs,\r\ndocs API guide: https://www.tensorflow.org/community/contribute/docs_ref and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n", "comments": ["Thanks for letting us know. I'll update the doc.\r\nBTW, you can also update the doc directory https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/g3doc/performance/gpu_advanced.md"]}, {"number": 41269, "title": "AttributeError: module 'tensorflow' has no attribute 'gfile'", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n\r\n**Describe the current behavior**\r\n\r\n**Describe the expected behavior**\r\n\r\n**Standalone code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["@bavabala \r\n\r\nPlease, fill [issue template](https://github.com/tensorflow/tensorflow/issues/new/choose).\r\nPlease provide details about what platform you are using (operating system, architecture). Also include your TensorFlow version.\r\nMake sure you also include the code snippet to reproduce the issue\r\nIn 2.x  tf.gfile.* is replaced by tf.io.gfile.*..Can you please check.Thanks!", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Issue template not filled, closing as invalid.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41269\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/41269\">No</a>\n"]}, {"number": 41268, "title": "ValueError: Error when checking model target: the list of Numpy arrays that you are passing to your model is not the size the model expected. Expected to see 2 array(s), but instead got the following list of 1 arrays: [<tf.Tensor 'cond_8/Identity_1:0' shape=(?, 25) dtype=float32>]...", "body": "I have a tf.keras model with one encoder and two decoders. I'm attempting to train the model with tf dataset generated from \r\n\r\ntf.data.Dataset.from_generator\r\n\r\nModel -\r\n`\r\n# encoder\r\ninp = tf.keras.Input(shape=(None, 25))\r\nx = tf.keras.layers.Dense(64)(inp)\r\nenc = tf.keras.layers.Dense(64)(x)\r\n\r\n# decoder1\r\nlatentInputs1 = tf.keras.Input(shape=(64,))\r\n x1 = tf.keras.layers.Dense(64)(latentInputs1)\r\n x1 = tf.keras.layers.Dense(64)(x1)\r\ndec1 = tf.keras.layers.Dense(25, activation='softmax', name='dec1')(x1)\r\n\r\n# decoder2\r\nlatentInputs2 = tf.keras.Input(shape=(64,))\r\nx1 = tf.keras.layers.Dense(64)(x1)\r\nx1 = tf.keras.layers.Dense(64)(x1)\r\ndec2 = tf.keras.layers.Dense(5, activation='softmax', name='dec2')(x1)\r\n\r\n#model\r\nencoder = tf.keras.Model(inputs = inp, outputs = enc)\r\ndecode1 = tf.keras.Model(inputs = latentInputs, outputs = dec, name='dec1')\r\ndecode2 = tf.keras.Model(inputs = latentInputs1, outputs = classif_dec, name='dec2')\r\n\r\nmodel = tf.keras.Model( inputs = inp, outputs = [decode1(encoder(inp)), decode2(encoder(inp))] )\r\n\r\n#dataset definition\r\ntrain_data = tf.data.Dataset.from_generator(\r\n       lambda: generator_fn(file_path),\r\n       output_types=(tf.float32, tf.float32, f.float32}),\r\n       output_shapes=(tf.TensorShape([None]), tf.TensorShape([None]), tf.TensorShape([None])})\r\n       )\r\n\r\n#compile\r\nlosses = {\r\n                    \"dec1\": \"mean_absolute_error\",\r\n                    \"dec2\": \"mean_absolute_error\",\r\n                }\r\n\r\nmodel.compile(optimizer=keras.optimizers.Adam(learning_rate=experiment_params['learning_rate'])\r\n                          loss=losses,\r\n                          metrics=[keras.metrics.MeanSquaredError()]\r\n                          )\r\n\r\nmodel.fit(train_data, epochs=data_params.epochs,\r\n                        steps_per_epoch=train_steps,\r\n                        callbacks=callbacks,)\r\n`\r\n\r\nshould I make changes in the dataset shape ? what's the course of action ?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "comments": ["@Dabuk,\r\nOn running the given code, I am facing an error stating `NameError: name 'latentInputs' is not defined`. Please find the gist of it [here](https://colab.research.google.com/gist/amahendrakar/aa9bf620bb9f2104d56b8764728a063d/41268.ipynb).\r\n\r\nIn order to reproduce the issue reported here, could you please provide the complete code, the dataset and the TensorFlow version you are using. Thanks!", "Also, please take a look at [this comment](https://stackoverflow.com/a/56806002) from a similar StackOverflow issue and let us know if it helps. Thanks!", "Will add the code update,\r\n\r\nBut can I know if the dataset shape can be maitained somehow when I use a map ?\r\n\r\nFor example:\r\n\r\ngeneraor_fn(file_path):\r\n     datain, dataout1, dataout2 = load(file_path)\r\n     yield datain, [dataout1, dataout2]\r\n\r\ntrain_data = tf.data.Dataset.from_generator(\r\nlambda: generator_fn(file_path),\r\noutput_types=(tf.float32, tf.float32, f.float32}),\r\noutput_shapes=(tf.TensorShape([None]), tf.TensorShape([None]), tf.TensorShape([None])})\r\n)\r\n\r\ndoes this work ?\r\ntrain_data = train_data.map( lambda inp1, inp2: inp1, [ map_fn(inp2[0]), map_fn(inp2[1]) ] )\r\n\r\n\r\n\r\n\r\n", "> Will add the code update,\r\n\r\n@Dabuk,\r\nAny updates regarding the complete reproducible code? Thanks!", "Hello, sorry for the delay. I solved the error with the links and some lucky random guesses\r\nHad to modify outputs of the data generator\r\n\r\ntf.data.Dataset.from_generator(\r\n                    lambda: generator_fn(file_path, dataset_params, labelout),\r\n                    output_types=(tf.float32, {\"dec1\":tf.float32, \"dec2\":tf.float32}),\r\n                    )\r\n\r\n\r\n", "@Dabuk,\r\nThank you for the update. Marking this issue as close, as it is resolved. Thanks!"]}]