[{"number": 54518, "title": "Unit tests broken by commit of quantization passes", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: git HEAD\r\n- Python version: 3.8.10\r\n- Installed using virtualenv? pip? conda?: no\r\n- Bazel version (if compiling from source): 5.0.0\r\n- GCC/Compiler version (if compiling from source): 10.3.0\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nAttempting to run unit tests results in build failure\r\n\r\n# Execution platform: @local_execution_config_platform//:platform\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc: In function 'bool mlir::quant::{anonymous}::IsExported(mlir::FuncOp&)':\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:66:71: error: no matching function for call to 'mlir::Operation::getAttrOfType<mlir::ArrayAttr>(const absl::lts_20211102::string_view&)'\r\n   66 |   auto exported_names = op->getAttrOfType<ArrayAttr>(kExportedNameAttr);\r\n      |                                                                       ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/OpDefinition.h:23,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/Arithmetic/IR/Arithmetic.h:12,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/ControlFlow/IR/ControlFlow.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/StandardOps/IR/Ops.h:17,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:21:\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:326:13: note: candidate: 'AttrClass mlir::Operation::getAttrOfType(mlir::StringAttr) [with AttrClass = mlir::ArrayAttr]'\r\n  326 |   AttrClass getAttrOfType(StringAttr name) {\r\n      |             ^~~~~~~~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:326:38: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'mlir::StringAttr'\r\n  326 |   AttrClass getAttrOfType(StringAttr name) {\r\n      |                           ~~~~~~~~~~~^~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:330:13: note: candidate: 'AttrClass mlir::Operation::getAttrOfType(llvm::StringRef) [with AttrClass = mlir::ArrayAttr]'\r\n  330 |   AttrClass getAttrOfType(StringRef name) {\r\n      |             ^~~~~~~~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:330:37: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'llvm::StringRef'\r\n  330 |   AttrClass getAttrOfType(StringRef name) {\r\n      |                           ~~~~~~~~~~^~~~\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc: In function 'bool mlir::quant::{anonymous}::IsEntryFunction(mlir::FuncOp&)':\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:71:73: error: no matching function for call to 'mlir::Operation::hasAttr(const absl::lts_20211102::string_view&)'\r\n   71 | bool IsEntryFunction(FuncOp& op) { return op->hasAttr(kEntryFunctionAttr); }\r\n      |                                                                         ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/OpDefinition.h:23,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/Arithmetic/IR/Arithmetic.h:12,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/ControlFlow/IR/ControlFlow.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/StandardOps/IR/Ops.h:17,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:21:\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:336:8: note: candidate: 'bool mlir::Operation::hasAttr(mlir::StringAttr)'\r\n  336 |   bool hasAttr(StringAttr name) { return attrs.contains(name); }\r\n      |        ^~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:336:27: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'mlir::StringAttr'\r\n  336 |   bool hasAttr(StringAttr name) { return attrs.contains(name); }\r\n      |                ~~~~~~~~~~~^~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:337:8: note: candidate: 'bool mlir::Operation::hasAttr(llvm::StringRef)'\r\n  337 |   bool hasAttr(StringRef name) { return attrs.contains(name); }\r\n      |        ^~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:337:26: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'llvm::StringRef'\r\n  337 |   bool hasAttr(StringRef name) { return attrs.contains(name); }\r\n      |                ~~~~~~~~~~^~~~\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc: In function 'bool mlir::quant::{anonymous}::CreateMainFunction(mlir::ModuleOp&)':\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:127:71: error: no matching function for call to 'mlir::Operation::getAttrOfType<mlir::DictionaryAttr>(const absl::lts_20211102::string_view&)'\r\n  127 |             function->getAttrOfType<DictionaryAttr>(kEntryFunctionAttr)) {\r\n      |                                                                       ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/OpDefinition.h:23,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/Arithmetic/IR/Arithmetic.h:12,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/ControlFlow/IR/ControlFlow.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/StandardOps/IR/Ops.h:17,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:21:\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:326:13: note: candidate: 'AttrClass mlir::Operation::getAttrOfType(mlir::StringAttr) [with AttrClass = mlir::DictionaryAttr]'\r\n  326 |   AttrClass getAttrOfType(StringAttr name) {\r\n      |             ^~~~~~~~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:326:38: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'mlir::StringAttr'\r\n  326 |   AttrClass getAttrOfType(StringAttr name) {\r\n      |                           ~~~~~~~~~~~^~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:330:13: note: candidate: 'AttrClass mlir::Operation::getAttrOfType(llvm::StringRef) [with AttrClass = mlir::DictionaryAttr]'\r\n  330 |   AttrClass getAttrOfType(StringRef name) {\r\n      |             ^~~~~~~~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:330:37: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'llvm::StringRef'\r\n  330 |   AttrClass getAttrOfType(StringRef name) {\r\n      |                           ~~~~~~~~~~^~~~\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:130:40: error: expected primary-expression before '>' token\r\n  130 |             inputs_attr.cast<StringAttr>().getValue().str();\r\n      |                                        ^\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:130:42: error: expected primary-expression before ')' token\r\n  130 |             inputs_attr.cast<StringAttr>().getValue().str();\r\n      |                                          ^\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:138:41: error: expected primary-expression before '>' token\r\n  138 |             outputs_attr.cast<StringAttr>().getValue().str();\r\n      |                                         ^\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:138:43: error: expected primary-expression before ')' token\r\n  138 |             outputs_attr.cast<StringAttr>().getValue().str();\r\n      |                                           ^\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:160:65: error: no matching function for call to 'mlir::StringAttr::get(mlir::MLIRContext*&, const absl::lts_20211102::string_view&)'\r\n  160 |   main_func->setAttr(StringAttr::get(context, kEntryFunctionAttr), dictAttr);\r\n      |                                                                 ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/BuiltinAttributes.h:744,\r\n                 from external/llvm-project/mlir/include/mlir/IR/OperationSupport.h:18,\r\n                 from external/llvm-project/mlir/include/mlir/IR/Dialect.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/Arithmetic/IR/Arithmetic.h:11,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/ControlFlow/IR/ControlFlow.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/StandardOps/IR/Ops.h:17,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:21:\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen/mlir/IR/BuiltinAttributes.h.inc:572:21: note: candidate: 'static mlir::StringAttr mlir::StringAttr::get(const llvm::Twine&, mlir::Type)'\r\n  572 |   static StringAttr get(const Twine &bytes, Type type);\r\n      |                     ^~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen/mlir/IR/BuiltinAttributes.h.inc:572:38: note:   no known conversion for argument 1 from 'mlir::MLIRContext*' to 'const llvm::Twine&'\r\n  572 |   static StringAttr get(const Twine &bytes, Type type);\r\n      |                         ~~~~~~~~~~~~~^~~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen/mlir/IR/BuiltinAttributes.h.inc:573:21: note: candidate: 'static mlir::StringAttr mlir::StringAttr::get(mlir::MLIRContext*, const llvm::Twine&)'\r\n  573 |   static StringAttr get(::mlir::MLIRContext *context, const Twine &bytes);\r\n      |                     ^~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen/mlir/IR/BuiltinAttributes.h.inc:573:68: note:   no known conversion for argument 2 from 'const absl::lts_20211102::string_view' to 'const llvm::Twine&'\r\n  573 |   static StringAttr get(::mlir::MLIRContext *context, const Twine &bytes);\r\n      |                                                       ~~~~~~~~~~~~~^~~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen/mlir/IR/BuiltinAttributes.h.inc:574:21: note: candidate: 'static mlir::StringAttr mlir::StringAttr::get(mlir::MLIRContext*)'\r\n  574 |   static StringAttr get(::mlir::MLIRContext *context);\r\n      |                     ^~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen/mlir/IR/BuiltinAttributes.h.inc:574:21: note:   candidate expects 1 argument, 2 provided\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:161:74: error: no matching function for call to 'mlir::Operation::setAttr(const absl::lts_20211102::string_view&, mlir::ArrayAttr)'\r\n  161 |   main_func->setAttr(kExportedNameAttr, builder.getStrArrayAttr({\"main\"}));\r\n      |                                                                          ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/OpDefinition.h:23,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/Arithmetic/IR/Arithmetic.h:12,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/ControlFlow/IR/ControlFlow.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Dialect/StandardOps/IR/Ops.h:17,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:21:\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:346:8: note: candidate: 'void mlir::Operation::setAttr(mlir::StringAttr, mlir::Attribute)'\r\n  346 |   void setAttr(StringAttr name, Attribute value) {\r\n      |        ^~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:346:27: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'mlir::StringAttr'\r\n  346 |   void setAttr(StringAttr name, Attribute value) {\r\n      |                ~~~~~~~~~~~^~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:351:8: note: candidate: 'void mlir::Operation::setAttr(llvm::StringRef, mlir::Attribute)'\r\n  351 |   void setAttr(StringRef name, Attribute value) {\r\n      |        ^~~~~~~\r\nexternal/llvm-project/mlir/include/mlir/IR/Operation.h:351:26: note:   no known conversion for argument 1 from 'const absl::lts_20211102::string_view' to 'llvm::StringRef'\r\n  351 |   void setAttr(StringRef name, Attribute value) {\r\n      |                ~~~~~~~~~~^~~~\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:175:79: error: no matching function for call to 'mlir::FuncOp::setArgAttr(int&, const absl::lts_20211102::string_view&, mlir::ArrayAttr)'\r\n  175 |                              {mlir::StringAttr::get(context, input_names[i])}));\r\n      |                                                                               ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/FunctionInterfaces.h:294,\r\n                 from external/llvm-project/mlir/include/mlir/IR/BuiltinOps.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Pass/Pass.h:12,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:24:\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:844:10: note: candidate: 'void mlir::detail::FunctionOpInterfaceTrait<ConcreteOp>::setArgAttr(unsigned int, mlir::StringAttr, mlir::Attribute) [with ConcreteOp = mlir::FuncOp]'\r\n  844 |     void setArgAttr(unsigned index, StringAttr name, Attribute value) {\r\n      |          ^~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:844:48: note:   no known conversion for argument 2 from 'const absl::lts_20211102::string_view' to 'mlir::StringAttr'\r\n  844 |     void setArgAttr(unsigned index, StringAttr name, Attribute value) {\r\n      |                                     ~~~~~~~~~~~^~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:847:10: note: candidate: 'void mlir::detail::FunctionOpInterfaceTrait<ConcreteOp>::setArgAttr(unsigned int, llvm::StringRef, mlir::Attribute) [with ConcreteOp = mlir::FuncOp]'\r\n  847 |     void setArgAttr(unsigned index, StringRef name, Attribute value) {\r\n      |          ^~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:847:47: note:   no known conversion for argument 2 from 'const absl::lts_20211102::string_view' to 'llvm::StringRef'\r\n  847 |     void setArgAttr(unsigned index, StringRef name, Attribute value) {\r\n      |                                     ~~~~~~~~~~^~~~\r\ntensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:183:72: error: no matching function for call to 'mlir::FuncOp::setResultAttr(int&, const absl::lts_20211102::string_view&, mlir::ArrayAttr)'\r\n  183 |             context, {mlir::StringAttr::get(context, output_names[i])}));\r\n      |                                                                        ^\r\nIn file included from external/llvm-project/mlir/include/mlir/IR/FunctionInterfaces.h:294,\r\n                 from external/llvm-project/mlir/include/mlir/IR/BuiltinOps.h:16,\r\n                 from external/llvm-project/mlir/include/mlir/Pass/Pass.h:12,\r\n                 from tensorflow/compiler/mlir/quantization/tensorflow/passes/insert_main_function.cc:24:\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:937:10: note: candidate: 'void mlir::detail::FunctionOpInterfaceTrait<ConcreteOp>::setResultAttr(unsigned int, mlir::StringAttr, mlir::Attribute) [with ConcreteOp = mlir::FuncOp]'\r\n  937 |     void setResultAttr(unsigned index, StringAttr name, Attribute value) {\r\n      |          ^~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:937:51: note:   no known conversion for argument 2 from 'const absl::lts_20211102::string_view' to 'mlir::StringAttr'\r\n  937 |     void setResultAttr(unsigned index, StringAttr name, Attribute value) {\r\n      |                                        ~~~~~~~~~~~^~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:940:10: note: candidate: 'void mlir::detail::FunctionOpInterfaceTrait<ConcreteOp>::setResultAttr(unsigned int, llvm::StringRef, mlir::Attribute) [with ConcreteOp = mlir::FuncOp]'\r\n  940 |     void setResultAttr(unsigned index, StringRef name, Attribute value) {\r\n      |          ^~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/FunctionInterfacesIncGen/mlir/IR/FunctionOpInterfaces.h.inc:940:50: note:   no known conversion for argument 2 from 'const absl::lts_20211102::string_view' to 'llvm::StringRef'\r\n  940 |     void setResultAttr(unsigned index, StringRef name, Attribute value) {\r\n      |                                        ~~~~~~~~~~^~~~\r\nINFO: Elapsed time: 3462.723s, Critical Path: 583.59s\r\nINFO: 8852 processes: 2320 internal, 6532 local.\r\nFAILED: Build did NOT complete successfully\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nbazel test --test_timeout=300,500,-1,-1 --flaky_test_attempts=3 --test_output=all --cache_test_results=no --config=nonccl --verbose_failures --build_tag_filters=-no_oss,-oss_serial,-gpu,-tpu,-benchmark-test,-v1only,-no_aarch64,-requires-gpu --test_tag_filters=-no_oss,-oss_serial,-gpu,-tpu,-benchmark-test,-v1only,-no_aarch64,-requires-gpu -- //tensorflow/compiler/mlir/... -//tensorflow/compiler/mlir/lite/tests:const-fold.mlir.test -//tensorflow/compiler/mlir/lite/tests:prepare-tf.mlir.test\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nStarted with commit https://github.com/tensorflow/tensorflow/commit/f7f5f451ddac92076a54978ce861a74529fb2e86\r\n", "comments": ["@cfRod @nSircombe ", "This seems to have been resolved by https://github.com/tensorflow/tensorflow/commit/8776e5ea931e2f48a36fd3a3d88a547d604af84e", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54518\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54518\">No</a>\n"]}, {"number": 54516, "title": "failed: (Exit 2): cl.exe failed: error executing command\uff0cBazel=5.0.0, tf=2.8.0,MSVC2019", "body": "Target //tensorflow/tools/pip_package:build_pip_package failed to build\r\nERROR: F:/tensorflow/tensorflow/core/framework/BUILD:1400:31 Middleman _middlemen/_S_Stensorflow_Score_Sframework_Cattr_Uvalue_Uproto_Utext-BazelCppSemantics_build_arch_x64_windows-opt failed: (Exit 2): cl.exe failed: error executing command\r\n  cd /d C:/users/manyuan/_bazel_manyuan/2qttxlm7/execroot/org_tensorflow\r\n  SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\include;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\cppwinrt\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX64\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\TeamFoundation\\Team Explorer;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\MSBuild\\Current\\bin\\Roslyn;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\Tools\\devinit;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.16299.0\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\\\MSBuild\\Current\\Bin;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\Tools\\;;C:\\Windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=D:/JetBrain/python/python.exe\r\n    SET PYTHON_LIB_PATH=D:/JetBrain/python/lib/site-packages\r\n    SET RUNFILES_MANIFEST_ONLY=1\r\n    SET TEMP=C:\\Users\\manyuan\\AppData\\Local\\Temp\r\n    SET TF2_BEHAVIOR=1\r\n    SET TMP=C:\\Users\\manyuan\\AppData\\Local\\Temp\r\n  C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX64\\x64\\cl.exe @bazel-out/x64_windows-opt/bin/tensorflow/core/platform/windows/_objs/platform_port/port.obj.params\r\n# Configuration: 93a4c43a10f53f2edc71827668aaf369d1f071b1a7a163cf0701c8d4b7b35e12\r\n# Execution platform: @local_execution_config_platform//:platform\r\nINFO: Elapsed time: 17.366s, Critical Path: 8.04s\r\nINFO: 65 processes: 26 internal, 39 local.\r\nFAILED: Build did NOT complete successfully", "comments": ["I've tried change the version of bazel , but it not works.", "My python version is 3.10 , and the blow is all my configure.\r\n\r\n\r\nF:\\tensorflow>python ./configure.py\r\nYou have bazel 5.0.0 installed.\r\nPlease specify the location of python. [Default is D:\\JetBrain\\python\\python.exe]:\r\n\r\n\r\nFound possible Python library paths:\r\n  D:\\JetBrain\\python\\lib\\site-packages\r\nPlease input the desired Python library path to use.  Default is [D:\\JetBrain\\python\\lib\\site-packages]\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: n\r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: n\r\nNo CUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is /arch:AVX]:\r\n\r\n\r\nWould you like to override eigen strong inline for some C++ compilation to reduce the compilation time? [Y/n]: y\r\nEigen strong inline overridden.\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=mkl_aarch64    # Build with oneDNN and Compute Library for the Arm Architecture (ACL).\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\n        --config=numa           # Build with NUMA support.\r\n        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.\r\n        --config=v1             # Build with TensorFlow 1 API instead of TF 2 API.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n        --config=nogcp          # Disable GCP support.\r\n        --config=nonccl         # Disable NVIDIA NCCL support.\r\n\r\nF:\\tensorflow>bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nExtracting Bazel installation...\r\nStarting local Bazel server and connecting to it...", "After the configuration, I execute the command `bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package`", "@Leemy9612 \r\nIn order to expedite the trouble-shooting process here,Could you please fill the issue [template](https://github.com/tensorflow/tensorflow/issues/new/choose),\r\nThanks!", "I already finish the template ....#54578", "@Leemy9612 Thank you for the update! \r\nWe can see that you have raised another ticket as per the above [comment](https://github.com/tensorflow/tensorflow/issues/54516#issuecomment-1050750670) .So,closing this issue as we will track the other ticket.Thanks!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54516\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54516\">No</a>\n"]}, {"number": 54515, "title": "Fix broken link in `image_retraining /README.md`", "body": "Added the correct link in image_retraining /README.md", "comments": []}, {"number": 54514, "title": "ImportError: cannot import name 'LayerNormalization' from 'tensorflow.python.keras.layers.normalization'", "body": "How to fix the error below? Thanks.\r\n\r\n`ImportError: cannot import name 'LayerNormalization' from 'tensorflow.python.keras.layers.normalization' (/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/layers/normalization/__init__.py)\r\n`\r\n", "comments": ["@Mather10 ,\r\nCan you please take a look at this link [1](https://github.com/kingoflolz/mesh-transformer-jax/issues/97) [2](https://github.com/tensorflow/tensorflow/issues/54401) and SO link [1](https://stackoverflow.com/questions/68080345/importerror-cannot-import-name-layernormalization-from-tensorflow-python-ker) [2](https://stackoverflow.com/questions/67549661/importerror-cannot-import-name-layernormalization-from-tensorflow-python-ker) with the similar error.It helps.Thanks!", "@tilakrayal    \r\n\r\nThank you for your reply, but as I tried that, the error still occurs. So how to fix it? \r\n\r\nThanks.", "@Mather10 ,\r\nI was able to import.Can you please try as suggested in the [gist](https://colab.research.google.com/gist/tilakrayal/5d91dd701d6e0986be43263b3ec70f69/untitled241.ipynb).It helps.Thanks!", "@tilakrayal  \r\n\r\nThank you for your reply, but as I tried to run \"import tensorflow as tf\", the error \"ImportError: cannot import name 'LayerNormalization' from 'tensorflow.python.keras.layers.normalization'\" occurs. So how to fix it?\r\n\r\nThanks.", "@Mather10 - You may want to use \r\n```\r\nfrom tensorflow.keras.layers import LayerNormalization\r\n```\r\n\r\nSeems to be duplicate of #54637 ", "@Mather10 ,\r\nCan you please find the attached [gist](https://colab.research.google.com/gist/tilakrayal/5d91dd701d6e0986be43263b3ec70f69/untitled241.ipynb) and try the code as requested.It helps.Thanks", "> @Mather10 - You may want to use\r\n> \r\n> ```\r\n> from tensorflow.keras.layers import LayerNormalization\r\n> ```\r\n> \r\n> Seems to be duplicate of #54637\r\n\r\nThat works", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54514\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54514\">No</a>\n"]}, {"number": 54513, "title": "Links to some of the guides are broken", "body": "Links to [guide/basics](https://www.tensorflow.org/guide/basics), [guide/autodiff](https://www.tensorflow.org/guide/autodiff), [guide/basic_training_loops](https://www.tensorflow.org/guide/basic_training_loops), [guide/keras/functional](https://www.tensorflow.org/guide/keras/functional), [guide/keras/train_and_evaluate](https://www.tensorflow.org/guide/keras/train_and_evaluate), [guide/keras/rnn](https://www.tensorflow.org/guide/keras/rnn), [guide/keras/transfer_learning](https://www.tensorflow.org/guide/keras/transfer_learning), [guide/advanced_autodiff](https://www.tensorflow.org/guide/advanced_autodiff), [guide/tf_numpy](https://www.tensorflow.org/guide/tf_numpy), [guide/data](https://www.tensorflow.org/guide/data), [guide/data_performance](https://www.tensorflow.org/guide/data_performance) and [guide/saved_model](https://www.tensorflow.org/guide/saved_model) are broken. They are responding with .ipynb files.\r\n\r\nPlease look into it.", "comments": ["Hi @ganesh-vgp ! There is a ongoing maintenance on the website.Team has been already informed about it.  Thank you!", "@ganesh-vgp ! Can you please try the above links again?", "Now the links are working fine. Thanks!", "Ok @ganesh-vgp ! Closing this issue as it has been resolved now. Thanks!"]}, {"number": 54512, "title": "SavedModel guide shows raw Jupyter code instead of HTML", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/guide/saved_model\r\n\r\n## Description of issue (what needs changing):\r\n\r\n### Clear description\r\n\r\nThe above URL shows raw Jupyter notebook code, instead of HTML (as in other pages in the documentation)\r\n\r\n### Correct links\r\n\r\n-\r\n\r\n### Parameters defined\r\n\r\n-\r\n\r\n### Returns defined\r\n\r\n-\r\n\r\n### Raises listed and defined\r\n\r\n-\r\n\r\n### Usage example\r\n\r\n-\r\n\r\n### Request visuals, if applicable\r\n\r\n-\r\n\r\n### Submit a pull request?\r\n\r\n-", "comments": ["@nss-ysasaki This should be fixed now.Could you please check ,and confirm the same ?Thanks!\r\n\r\n![5hwkKZaXrcySvZA](https://user-images.githubusercontent.com/84765720/155476991-43acca82-2b00-4396-a83f-b0961f3c7442.png)\r\n", "Looks good now!", "@nss-ysasaki Thank you for raising this issue.\r\nGlad it is working fine now.Thanks!", "Are you satisfied with the resolution of your issue?\r\n[Yes](https://goo.gl/forms/Oe0tEvODFRoI2gJF3)\r\n[No](https://goo.gl/forms/fUjzOfrtkFbrOT8d2)\r\n"]}, {"number": 54511, "title": "\"std::string is no longer a scalar type, use tensorflow::tstring\"", "body": "I use python 3.9 and have successfully built tensorflow 2.7 on Windows, But when I build my own code with tensorflow, I get the error as below, please help, thanks!\r\n![image](https://user-images.githubusercontent.com/49086407/155453100-f6558009-306d-4aa7-a0b6-e2f6644717f9.png)\r\n", "comments": ["@Thomnt2306 ,\r\nCan you please take a look at this [link](https://github.com/tensorflow/tensorflow/issues/43150) with the similar error.It helps.Thanks!", "> @Thomnt2306 , Can you please take a look at this [link](https://github.com/tensorflow/tensorflow/issues/43150) with the similar error.It helps.Thanks!\r\n\r\nhi, I followed your instructions and it didn't solve the error, do you have any other solution?", "@Thomnt2306 ,\r\nIn order to expedite the trouble-shooting process, could you please provide the complete code and dataset to reproduce the issue reported here.", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54511\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54511\">No</a>\n"]}, {"number": 54509, "title": "AttributeError: module 'tensorflow.python.pywrap_tensorflow' has no attribute 'EqualGraphDefWrapper'", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): The code is from a conda module which is not continually developed.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): WSL Ubuntu 20.04.3 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from: conda package \r\n- TensorFlow version (use command below): 2.4.1\r\n- TensorFlow-GPU: 2.4.1\r\n- Python version: 3.7.11\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 7.6.5\r\n- GPU model and memory: NVIDIA-SMI 510.00 (4GB)\r\n\r\n** Description:\r\nThis code is developed in Python 3.6 and TF1. Now I want to upgrade it to run in Python 3.7 and TF2. I followed the instructions to migrate TF1 to TF2 (https://www.tensorflow.org/guide/migrate/migrate_tf2) and fix almost all errors except this AttributeError. I am wondering how to fix it or do we have similar functions to compare graphs in TF2. Thank you. \r\n\r\n**Code:\r\n@pytest.mark.parametrize('conv_patch', (2, 5, 10), ids=lambda x: 'c=%s' % x)\r\n@pytest.mark.parametrize('pool_patch', (2, 3), ids=lambda x: 'p=%s' % x)\r\ndef test_convolve3D(conv_patch, pool_patch):\r\n    from tfbio.net import hidden_conv3D, convolve3D\r\n\r\n    out_chnls = [8, 16]\r\n\r\n    g1 = tf.Graph()\r\n    with g1.as_default():\r\n        x = tf.compat.v1.placeholder(tf.float32, shape=(None, 21, 21, 21, 19))\r\n        h11 = hidden_conv3D(x, out_chnls[0], conv_patch=conv_patch,\r\n                            pool_patch=pool_patch, name='conv0')\r\n        h12 = hidden_conv3D(h11, out_chnls[1], conv_patch=conv_patch,\r\n                            pool_patch=pool_patch, name='conv1')\r\n    def1 = g1.as_graph_def().SerializeToString()\r\n\r\n    g2 = tf.Graph()\r\n    with g2.as_default():\r\n        x = tf.compat.v1.placeholder(tf.float32, shape=(None, 21, 21, 21, 19))\r\n        h2 = convolve3D(x, out_chnls, conv_patch=conv_patch,\r\n                        pool_patch=pool_patch)\r\n    def2 = g2.as_graph_def().SerializeToString()\r\n\r\n    # graphs should be identical\r\n    assert not pywrap_tensorflow.EqualGraphDefWrapper(def1, def2)\r\n\r\n\r\n**Describe the current behavior**\r\nFAILED net_test.py::test_convolve3D[p=2-c=2] - AttributeError: module 'tensorflow.python.pywrap_tensorflow' has no attribute 'EqualGraphDefWrapper'\r\n\r\n**Describe the expected behavior**\r\nPass the pytest\r\n\r\n", "comments": ["@Christinele14,\r\n Equivalent  of `EqualGraphDefWrapper` in Tensorflow 2.x is \r\n\r\n```\r\nfrom tensorflow.python.client import pywrap_tf_session\r\n diff = pywrap_tf_session.EqualGraphDefWrapper(actual.SerializeToString(),\r\n                                                expected.SerializeToString())\r\n```", "> @Christinele14, Equivalent of `EqualGraphDefWrapper` in Tensorflow 2.x is\r\n> \r\n> ```\r\n> from tensorflow.python.client import pywrap_tf_session\r\n>  diff = pywrap_tf_session.EqualGraphDefWrapper(actual.SerializeToString(),\r\n>                                                 expected.SerializeToString())\r\n> ```\r\n\r\nThank you so much! It solved my problem. I will close my issue here. ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54509\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54509\">No</a>\n"]}, {"number": 54508, "title": "[TF-TRT] Converter Summary Improved with number of IO nodes", "body": "Minor changer to `TRTConverterV2.summary()` to include the number of input and output nodes.", "comments": ["Detail of the output:\r\n```bash\r\nTRTEngineOP Name                            # Nodes           # Inputs          # Outputs         Input DTypes              Output Dtypes             Input Shapes              Output Shapes            \r\n==============================================================================================================================================================================================================\r\nTRTEngineOp_0_0                             2901              8                 2160              ['float32', 'float32' ... ['float32', 'float32' ... [[-1, -1, -1], [-1, - ... [[-1, 4], [-1, 4], [- ...\r\n\r\n\t- Const: 5x\r\n\t- Minimum: 720x\r\n\t- Reshape: 728x\r\n\t- Shape: 720x\r\n\t- StridedSlice: 720x\r\n\t- Unpack: 8x\r\n\r\n```", "@bixia1 I pushed a minor addition sorting the summary by node name (much more readable)\r\n\r\nDiff of the new changes, I just squashed my commits:\r\n![image](https://user-images.githubusercontent.com/10923599/155631340-9ed50e9c-5daa-45b9-a644-b70f8ad423fd.png)\r\n\r\nIf you can re-approve ? Thanks", "@bixia1 : sorry you're gonna need to re-approve. PyLint was failing I had to fix a few indentations"]}, {"number": 54507, "title": "keras GRU RNN tflite conversion wrong model ", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):  \r\n- TensorFlow version (use command below): tensorflow v2.8.0 lite converter \r\n- Python version: python v3.8\r\n- Bazel version (if compiling from source): no\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: not sure\r\n- GPU model and memory:\r\n\r\nFind its' readme there is a guideline to recreate model \r\n(https://github.com/ARM-software/ML-zoo/blob/master/models/noise_suppression/RNNoise/tflite_int8/recreate_model/README.md)\r\n\r\n**Describe the current behavior**\r\n\r\nTFLite converter convert model within GRU model , an example can found here:\r\nhttps://github.com/ARM-software/ML-zoo/blob/master/models/noise_suppression/RNNoise/tflite_int8/rnnoise_INT8.tflite\r\n\r\nI found that GRU kernel process r\\*wr+i\\*wi+bias convert to tflite is wrong, it's convert to\r\ntwo fc ops and ADD (r\\*wr+bias) + (i\\*wi+bias) and each biases are the same, so the result bias will be duplicated.\r\nBTW I found LSTM has no such problem, it only convert without bias, and add one bias later.\r\n![image](https://user-images.githubusercontent.com/25763259/155436120-e4838408-0642-4530-a220-621594f82aab.png)\r\n\r\n**Describe the expected behavior**\r\nsingle FC bias only \r\n\r\n**[Contributing](https://www.tensorflow.org/community/contribute)**\r\n\r\n- Do you want to contribute a PR? (yes/no): no\r\n- Briefly describe your candidate solution(if contributing):\r\n\r\n\r\n**Standalone code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["@jimch3n,\r\n\r\nIn order to expedite the trouble-shooting process, Could you please provide a simple standalone code to reproduce the issue reported here instead of source code. Thanks!\t", "I found that probably my misunderstanding, I am able to match the keras model.predict, with tflite interpreter output in python, but some how unable to match gru written in c ,  sorry to interrupt. Please close the issue. Thanks.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54507\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54507\">No</a>\n"]}, {"number": 54506, "title": "tf.argmax() function and documentation inconsistent with numpy.argmax() implementation", "body": "--Issue. \r\n`tensorflow` documentation and implementation of `argmax()`  threw me off.  \r\n`tensorflow` starts with the same definition as `numpy` when it comes to the  'axis' parameter.\r\n\r\n#src: https://numpy.org/doc/stable/reference/generated/numpy.argmax.html\r\nnumpy.argmax(a, **axis=None**, out=None, *, keepdims=<no value>)\r\n\r\n#src: https://www.tensorflow.org/api_docs/python/tf/math/argmax\r\ntf.math.argmax( input, **axis=None**, output_type=tf.dtypes.int64, name=None)\r\nHowever, the documentation down the page shows that `axis` really defaults to 0.\r\n<html>\r\n<body>\r\n<!--StartFragment-->\r\n\r\naxis | An integer, the axis to reduce across. Default to 0.\r\n-- | --\r\n\r\n\r\n\r\n<!--EndFragment-->\r\n</body>\r\n</html>\r\n\r\nThe code results differ between `numpy` and `tensorflow`.\r\n\r\n\r\n--Proposition\r\nIf this is a feature and not a bug in `tensorflow`, let's have a consistent documentation.  If it should behave like `numpy`, let's correct the code and by default return a scalar.  (or let me know if this has been already addressed in a later version). \r\n\r\n\r\n\r\n--Reproducible code samples:\r\n\r\na) with `numpy`\r\nA = np.array([[2, 20, 30, 3, 6], \r\n                 [3, 11, 16, 1, 8], \r\n                 [14, 45, 23, 5, 27]])\r\nprint(np.argmax(A, 0))\r\nprint(np.argmax(A, 1))\r\nprint(np.argmax(A, None))\r\n\r\nReturns:\r\n[2 2 0 2 2]\r\n[2 2 1]\r\n11\r\n\r\nb) with `tensorflow`\r\nB = tf.constant([[2, 20, 30, 3, 6], \r\n                 [3, 11, 16, 1, 8], \r\n                 [14, 45, 23, 5, 27]])\r\nprint(tf.math.argmax(B, 0))\r\nprint(tf.math.argmax(B, 1))\r\nprint(tf.math.argmax(B, None))\r\n\r\nReturns:\r\ntf.Tensor([2 2 0 2 2], shape=(5,), dtype=int64)\r\ntf.Tensor([2 2 1], shape=(3,), dtype=int64)\r\ntf.Tensor([2 2 0 2 2], shape=(5,), dtype=int64)", "comments": ["@anyaconda I believe the case when axis is None is missing, will fix this", "@anyaconda \r\nIn order to expedite the trouble-shooting process here,Could you please fill the issue [template](https://github.com/tensorflow/tensorflow/issues/new/choose),\r\nThanks!", "@anyaconda I think this is intended behavior. \r\n\r\nIn case of numpy, it clearly mentions that if `axis` arg is not provided, then by default, it will be flattened and find `argmax`.\r\n\r\n```\r\naxis : int, optional\r\n    By default, the index is into the flattened array, otherwise\r\nalong the specified axis.\r\n```\r\n\r\nIn case of TF, if `axis` parameter is not provided, then by default, it sets axis=0\r\n\r\n` axis: An integer, the axis to reduce across. Default to 0.`\r\n\r\nPlease let me know if I miss anything. Thanks!", "@anyaconda Could you please update as per the above [comment](https://github.com/tensorflow/tensorflow/issues/54506#issuecomment-1055121497https://github.com/tensorflow/tensorflow/issues/54506#issuecomment-1055121497)? Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "@[jvishnuvardhan](https://github.com/jvishnuvardhan)\r\nthank you for the explanation.  i will try to remember that the behavior is intended to be different between `numpy` and `tensorflow`.  i wish it was consistent - imho `numpy` is a standard for many developers and data scientists.  ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54506\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54506\">No</a>\n", "Does tf.experimental.numpy.argmax work?", "@rohan100jain tf.experimental.numpy.argmax works"]}, {"number": 54505, "title": "[TF-TRT] TF_TRT_MAX_ALLOWED_ENGINES env var added to limit the number of TRT Engines", "body": "This PR introduces the environment variable: `TF_TRT_MAX_ALLOWED_ENGINES=20 (default)` to add an upper bound mechanism to the number of generated TRT Engines.\r\n\r\nExtra verbosity can be enabled at VLOG(1) level.\r\n\r\nWe chose the default value to be 20 because it's not overly restrictive and should only impact poorly performing models.\r\nTo be fair any value between 15-25 is probably fine. We can fine tune this default value in the future if we identify unforeseen side effects.", "comments": ["Remove this from PR description to here\r\n@bixia1 : for review\r\n@tfeher @Nyrio: CC\r\n\r\n", "@bixia1 : we agree to proceed with this PR. Can you approve ?"]}, {"number": 54504, "title": "[ROCm] Syncing contents of the rocm configuration files with the ROCm fork", "body": "This commit syncs the contents of the rocm configuration files (in the `third_party/gpus/` directory) from the ROCm TF fork.\r\n\r\nThe changes mostly involves updates asssociated with the newer ROCm reelases (4.5, 5.0), like\r\n* addition of new libs (hipBlas, hipSolver)\r\n* new location for rocm version information, + new routine to provide access to it\r\n* explicitly adding `-lstdc++` linker flag as the last option to the linker command\r\n  * see this PR for more details - https://github.com/ROCmSoftwarePlatform/tensorflow-upstream/pull/1311\r\n\r\n-------------------------\r\n\r\n/cc @cheshire @chsigg ", "comments": []}, {"number": 54503, "title": "Add appropriate encoding check for `tf.compat.as_bytes`/`as_text`", "body": "This PR tries to address the issue raised in #54413 where\r\nthere were no encoding check for tf.compat.as_bytes/as_text.\r\nAs a result, invalid encoding input will silently\r\nreturn incorrect result, e.g.:\r\n```\r\nbytes_or_text = \"hello\"\r\nt1 = tf.compat.as_text(bytes_or_text, encoding=\"valid\")\r\nprint(t1) # hello\r\n```\r\n\r\nThis PR looks up python encoding to make sure it is valid.\r\n\r\nThis PR fixes #54413.\r\n\r\nSigned-off-by: Yong Tang <yong.tang.github@outlook.com>", "comments": ["Thanks @mihaimaruseac  for the review. The PR has been updated with tests added."]}, {"number": 54502, "title": "Cannot build in macOS M1 arq", "body": "\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 12.0.1 (21A559)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): None\r\n- TensorFlow version: [1814bd1](https://github.com/tensorflow/tensorflow/commit/1814bd1192336064343361b23b4bb60af738a844)\r\n- Python version: Python 3.8.12\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source):5.0.0\r\n- GCC/Compiler version (if compiling from source): Apple clang version 13.0.0\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the problem**\r\n```\r\n\r\n\u279c  tensorflow git:(master) \u2717 bazel build --jobs=10 --compilation_mode=opt --copt=-march=native tensorflow --cpu=darwin_arm64 --host_cpu=darwin_arm64\r\nWARNING: Option 'java_toolchain' is deprecated\r\nWARNING: Option 'host_java_toolchain' is deprecated\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=1 --terminal_columns=123\r\nINFO: Reading rc options for 'build' from /Users/juan.crescente/Documents/lib/tensorflow/.bazelrc:\r\n  Inherited 'common' options: --experimental_repo_remote_exec\r\nINFO: Reading rc options for 'build' from /Users/juan.crescente/Documents/lib/tensorflow/.bazelrc:\r\n  'build' options: --define framework_shared_object=true --java_toolchain=//tensorflow/tools/toolchains/java:tf_java_toolchain --host_java_toolchain=//tensorflow/tools/toolchains/java:tf_java_toolchain --define=use_fast_cpp_protos=true --define=allow_oversize_protos=true --spawn_strategy=standalone -c opt --announce_rc --define=grpc_no_ares=true --noincompatible_remove_legacy_whole_archive --enable_platform_specific_config --define=with_xla_support=true --config=short_logs --config=v2 --define=no_aws_support=true --define=no_hdfs_support=true --experimental_cc_shared_library\r\nINFO: Reading rc options for 'build' from /Users/juan.crescente/Documents/lib/tensorflow/.tf_configure.bazelrc:\r\n  'build' options: --action_env PYTHON_BIN_PATH=/Users/juan.crescente/mambaforge/envs/mlp/bin/python3 --action_env PYTHON_LIB_PATH=/Users/juan.crescente/mambaforge/envs/mlp/lib/python3.8/site-packages --python_path=/Users/juan.crescente/mambaforge/envs/mlp/bin/python3\r\nINFO: Reading rc options for 'build' from /Users/juan.crescente/Documents/lib/tensorflow/.bazelrc:\r\n  'build' options: --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compiler/mlir/tfrt/benchmarks,tensorflow/compiler/mlir/tfrt/jit/python_binding,tensorflow/compiler/mlir/tfrt/jit/transforms,tensorflow/compiler/mlir/tfrt/python_tests,tensorflow/compiler/mlir/tfrt/tests,tensorflow/compiler/mlir/tfrt/tests/analysis,tensorflow/compiler/mlir/tfrt/tests/jit,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_tfrt,tensorflow/compiler/mlir/tfrt/tests/tf_to_corert,tensorflow/compiler/mlir/tfrt/tests/tf_to_tfrt_data,tensorflow/compiler/mlir/tfrt/tests/saved_model,tensorflow/compiler/mlir/tfrt/transforms/lhlo_gpu_to_tfrt_gpu,tensorflow/core/runtime_fallback,tensorflow/core/runtime_fallback/conversion,tensorflow/core/runtime_fallback/kernel,tensorflow/core/runtime_fallback/opdefs,tensorflow/core/runtime_fallback/runtime,tensorflow/core/runtime_fallback/util,tensorflow/core/tfrt/common,tensorflow/core/tfrt/eager,tensorflow/core/tfrt/eager/backends/cpu,tensorflow/core/tfrt/eager/backends/gpu,tensorflow/core/tfrt/eager/core_runtime,tensorflow/core/tfrt/eager/cpp_tests/core_runtime,tensorflow/core/tfrt/gpu,tensorflow/core/tfrt/run_handler_thread_pool,tensorflow/core/tfrt/runtime,tensorflow/core/tfrt/saved_model,tensorflow/core/tfrt/graph_executor,tensorflow/core/tfrt/saved_model/tests,tensorflow/core/tfrt/tpu,tensorflow/core/tfrt/utils\r\nINFO: Found applicable config definition build:short_logs in file /Users/juan.crescente/Documents/lib/tensorflow/.bazelrc: --output_filter=DONT_MATCH_ANYTHING\r\nINFO: Found applicable config definition build:v2 in file /Users/juan.crescente/Documents/lib/tensorflow/.bazelrc: --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\r\nINFO: Found applicable config definition build:macos in file /Users/juan.crescente/Documents/lib/tensorflow/.bazelrc: --apple_platform_type=macos --copt=-DGRPC_BAZEL_BUILD --copt=-w --define=PREFIX=/usr --define=LIBDIR=$(PREFIX)/lib --define=INCLUDEDIR=$(PREFIX)/include --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include --cxxopt=-std=c++14 --host_cxxopt=-std=c++14\r\nINFO: Build option --cpu has changed, discarding analysis cache.\r\nERROR: /private/var/tmp/_bazel_juan.crescente/7d4fd1924864d2d6fce922e4404d7479/external/local_config_cc/BUILD:48:19: in cc_toolchain_suite rule @local_config_cc//:toolchain: cc_toolchain_suite '@local_config_cc//:toolchain' does not contain a toolchain for cpu 'darwin_arm64'\r\nERROR: /private/var/tmp/_bazel_juan.crescente/7d4fd1924864d2d6fce922e4404d7479/external/local_config_cc/BUILD:48:19: Analysis of target '@local_config_cc//:toolchain' failed\r\nERROR: Analysis of target '//tensorflow:tensorflow' failed; build aborted: \r\nINFO: Elapsed time: 0.694s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (126 packages loaded, 488 targets configured)\r\n    currently loading: tensorflow/compiler/mlir/tensorflow ... (2 packages)\r\n    Fetching @com_google_absl; fetching\r\n    Fetching @nsync; fetching\r\n    Fetching @llvm-project; fetching\r\n    Fetching @eigen_archive; fetching\r\n    Fetching ...e_absl; Extracting /private/var/tmp/_bazel_juan.crescente/7d4fd1924864d2d6fce922e4404d7479/external/com_g\\\r\noogle_absl/temp9202958781266814507/215105818dfde3174fe799600bb0f3cae233d0bf.tar.gz\r\n    Fetching .../nsync; Extracting /private/var/tmp/_bazel_juan.crescente/7d4fd1924864d2d6fce922e4404d7479/external/nsync\\\r\n/temp14220370431948591900/1.22.0.tar.gz\r\n    Fetching ...rchive; Extracting /private/var/tmp/_bazel_juan.crescente/7d4fd1924864d2d6fce922e4404d7479/external/eigen\\\r\n_archive/temp7238515792960443584/eigen-7db0ac977acf276fb0817cfb89e490cdbae0ab56.tar.gz\r\n\r\n```\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n`bazel build --jobs=10 --compilation_mode=opt --copt=-march=native tensorflow`", "comments": ["@juancrescente ,\r\nCan you please take a look at this link [1](https://github.com/tensorflow/tensorflow/issues/49905) and [2](https://github.com/tensorflow/tensorflow/issues/52160) with the similar error.It helps.Thanks!", "Not working for me, I tried both:\r\n\r\n\r\n```\r\nbazel version                                                                            \r\nBuild label: 4.2.2- (@non-git)\r\nBuild target: bazel-out/darwin_arm64-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Dec 15 10:52:42 2021 (1639565562)\r\nBuild timestamp: 1639565562\r\nBuild timestamp as int: 1639565562\r\n\r\nbazel build --config opt --cpu=darwin_arm64  //tensorflow/tools/lib_package:libtensorflow\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=1 --terminal_columns=176\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.bazelrc:\r\n  Inherited 'common' options: --experimental_repo_remote_exec\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.bazelrc:\r\n  'build' options: --define framework_shared_object=true --java_toolchain=//tensorflow/tools/toolchains/java:tf_java_toolchain --host_java_toolchain=//tensorflow/tools/toolchains/java:tf_java_toolchain --define=use_fast_cpp_protos=true --define=allow_oversize_protos=true --spawn_strategy=standalone -c opt --announce_rc --define=grpc_no_ares=true --noincompatible_remove_legacy_whole_archive --enable_platform_specific_config --define=with_xla_support=true --config=short_logs --config=v2 --define=no_aws_support=true --define=no_hdfs_support=true --experimental_cc_shared_library\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.tf_configure.bazelrc:\r\n  'build' options: --action_env PYTHON_BIN_PATH=/Users/myuser/mambaforge/envs/mlp/bin/python3 --action_env PYTHON_LIB_PATH=/Users/myuser/mambaforge/envs/mlp/lib/python3.8/site-packages --python_path=/Users/myuser/mambaforge/envs/mlp/bin/python3\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.bazelrc:\r\n  'build' options: --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compiler/mlir/tfrt/benchmarks,tensorflow/compiler/mlir/tfrt/jit/python_binding,tensorflow/compiler/mlir/tfrt/jit/transforms,tensorflow/compiler/mlir/tfrt/python_tests,tensorflow/compiler/mlir/tfrt/tests,tensorflow/compiler/mlir/tfrt/tests/analysis,tensorflow/compiler/mlir/tfrt/tests/jit,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_tfrt,tensorflow/compiler/mlir/tfrt/tests/tf_to_corert,tensorflow/compiler/mlir/tfrt/tests/tf_to_tfrt_data,tensorflow/compiler/mlir/tfrt/tests/saved_model,tensorflow/compiler/mlir/tfrt/transforms/lhlo_gpu_to_tfrt_gpu,tensorflow/core/runtime_fallback,tensorflow/core/runtime_fallback/conversion,tensorflow/core/runtime_fallback/kernel,tensorflow/core/runtime_fallback/opdefs,tensorflow/core/runtime_fallback/runtime,tensorflow/core/runtime_fallback/util,tensorflow/core/tfrt/common,tensorflow/core/tfrt/eager,tensorflow/core/tfrt/eager/backends/cpu,tensorflow/core/tfrt/eager/backends/gpu,tensorflow/core/tfrt/eager/core_runtime,tensorflow/core/tfrt/eager/cpp_tests/core_runtime,tensorflow/core/tfrt/gpu,tensorflow/core/tfrt/run_handler_thread_pool,tensorflow/core/tfrt/runtime,tensorflow/core/tfrt/saved_model,tensorflow/core/tfrt/graph_executor,tensorflow/core/tfrt/saved_model/tests,tensorflow/core/tfrt/tpu,tensorflow/core/tfrt/utils\r\nINFO: Found applicable config definition build:short_logs in file /Users/myuser/Documents/lib/tensorflow/.bazelrc: --output_filter=DONT_MATCH_ANYTHING\r\nINFO: Found applicable config definition build:v2 in file /Users/myuser/Documents/lib/tensorflow/.bazelrc: --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\r\nINFO: Found applicable config definition build:opt in file /Users/myuser/Documents/lib/tensorflow/.tf_configure.bazelrc: --copt=-Wno-sign-compare --host_copt=-Wno-sign-compare\r\nINFO: Found applicable config definition build:macos in file /Users/myuser/Documents/lib/tensorflow/.bazelrc: --apple_platform_type=macos --copt=-DGRPC_BAZEL_BUILD --copt=-w --define=PREFIX=/usr --define=LIBDIR=$(PREFIX)/lib --define=INCLUDEDIR=$(PREFIX)/include --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include --cxxopt=-std=c++14 --host_cxxopt=-std=c++14\r\nWARNING: Download from https://storage.googleapis.com/mirror.tensorflow.org/github.com/tensorflow/runtime/archive/0066ca2ff4fed6fe843ad54b57617d6c1bc482f1.tar.gz failed: class com.google.devtools.build.lib.bazel.repository.downloader.UnrecoverableHttpException GET returned 404 Not Found\r\nWARNING: Download from https://mirror.bazel.build/github.com/bazelbuild/rules_cc/archive/081771d4a0e9d7d3aa0eed2ef389fa4700dfb23e.tar.gz failed: class com.google.devtools.build.lib.bazel.repository.downloader.UnrecoverableHttpException GET returned 404 Not Found\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:457:13: 'lambda' not supported, declare a function instead\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:457:13: syntax error at 'lambda': expected expression\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:468:13: 'lambda' not supported, declare a function instead\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:468:13: syntax error at 'lambda': expected expression\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:520:17: 'lambda' not supported, declare a function instead\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:457:13: name 'lambda' is not defined\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:457:35: name 'proto_cc_info' is not defined (did you mean 'ProtoInfo'?)\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:468:13: name 'lambda' is not defined\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:468:35: name 'proto_cc_info' is not defined (did you mean 'ProtoInfo'?)\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:520:17: name 'lambda' is not defined\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:520:39: name 'proto_cc_info' is not defined (did you mean 'ProtoInfo'?)\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:530:25: name 'lambda' is not defined\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_protoc_gen_aspect.bzl:530:47: name 'proto_cc_info' is not defined (did you mean 'ProtoInfo'?)\r\nINFO: Repository go_sdk instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:23:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace0.bzl:137:20: in workspace\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/com_github_grpc_grpc/bazel/grpc_extra_deps.bzl:36:27: in grpc_extra_deps\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/io_bazel_rules_go/go/toolchain/toolchains.bzl:379:28: in go_register_toolchains\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/io_bazel_rules_go/go/private/sdk.bzl:65:21: in go_download_sdk\r\nRepository rule _go_download_sdk defined at:\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/io_bazel_rules_go/go/private/sdk.bzl:53:35: in <toplevel>\r\nINFO: Repository png instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:289:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository nsync instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:459:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository eigen_archive instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:871:28: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:64:11: in _initialize_third_party\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/eigen3/workspace.bzl:14:20: in repo\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository gemmlowp instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:871:28: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:67:13: in _initialize_third_party\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/gemmlowp/workspace.bzl:14:20: in repo\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository gif instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:308:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository com_googlesource_code_re2 instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:243:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository double_conversion instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:697:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nERROR: /Users/myuser/Documents/lib/tensorflow/tensorflow/tools/lib_package/BUILD:137:8: error loading package '@com_github_grpc_grpc//': in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/com_github_grpc_grpc/bazel/grpc_build_system.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_apple/apple/ios.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_apple/apple/internal/ios_rules.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/swift.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_proto_library.bzl: Extension 'swift/internal/swift_protoc_gen_aspect.bzl' has errors and referenced by '//tensorflow/tools/lib_package:clicenses_generate'\r\nERROR: Analysis of target '//tensorflow/tools/lib_package:libtensorflow' failed; build aborted: Analysis failed\r\nINFO: Elapsed time: 114.252s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (26 packages loaded, 59 targets configured)\r\n    Fetching @io_bazel_rules_docker; Cloning 9bfcd7dbf0294ed9d11a99da6363fc28df904502 of https://github.com/bazelbuild/rules_docker.git\r\n\r\n```", "Trying modifications to toolchain:\r\n```\r\n(mlp) \u279c  tensorflow git:(master) \r\n\u2717 bazel build -c opt //tensorflow/tools/lib_package:libtensorflow\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=1 --terminal_columns=176\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.bazelrc:\r\n  Inherited 'common' options: --experimental_repo_remote_exec\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.bazelrc:\r\n  'build' options: --define framework_shared_object=true --java_toolchain=//tensorflow/tools/toolchains/java:tf_java_toolchain --host_java_toolchain=//tensorflow/tools/toolchains/java:tf_java_toolchain --define=use_fast_cpp_protos=true --define=allow_oversize_protos=true --spawn_strategy=standalone -c opt --announce_rc --define=grpc_no_ares=true --noincompatible_remove_legacy_whole_archive --enable_platform_specific_config --define=with_xla_support=true --config=short_logs --config=v2 --define=no_aws_support=true --define=no_hdfs_support=true --experimental_cc_shared_library\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.tf_configure.bazelrc:\r\n  'build' options: --action_env PYTHON_BIN_PATH=/Users/myuser/mambaforge/envs/mlp/bin/python3 --action_env PYTHON_LIB_PATH=/Users/myuser/mambaforge/envs/mlp/lib/python3.8/site-packages --python_path=/Users/myuser/mambaforge/envs/mlp/bin/python3\r\nINFO: Reading rc options for 'build' from /Users/myuser/Documents/lib/tensorflow/.bazelrc:\r\n  'build' options: --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compiler/mlir/tfrt/benchmarks,tensorflow/compiler/mlir/tfrt/jit/python_binding,tensorflow/compiler/mlir/tfrt/jit/transforms,tensorflow/compiler/mlir/tfrt/python_tests,tensorflow/compiler/mlir/tfrt/tests,tensorflow/compiler/mlir/tfrt/tests/analysis,tensorflow/compiler/mlir/tfrt/tests/jit,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_tfrt,tensorflow/compiler/mlir/tfrt/tests/tf_to_corert,tensorflow/compiler/mlir/tfrt/tests/tf_to_tfrt_data,tensorflow/compiler/mlir/tfrt/tests/saved_model,tensorflow/compiler/mlir/tfrt/transforms/lhlo_gpu_to_tfrt_gpu,tensorflow/core/runtime_fallback,tensorflow/core/runtime_fallback/conversion,tensorflow/core/runtime_fallback/kernel,tensorflow/core/runtime_fallback/opdefs,tensorflow/core/runtime_fallback/runtime,tensorflow/core/runtime_fallback/util,tensorflow/core/tfrt/common,tensorflow/core/tfrt/eager,tensorflow/core/tfrt/eager/backends/cpu,tensorflow/core/tfrt/eager/backends/gpu,tensorflow/core/tfrt/eager/core_runtime,tensorflow/core/tfrt/eager/cpp_tests/core_runtime,tensorflow/core/tfrt/gpu,tensorflow/core/tfrt/run_handler_thread_pool,tensorflow/core/tfrt/runtime,tensorflow/core/tfrt/saved_model,tensorflow/core/tfrt/graph_executor,tensorflow/core/tfrt/saved_model/tests,tensorflow/core/tfrt/tpu,tensorflow/core/tfrt/utils\r\nINFO: Found applicable config definition build:short_logs in file /Users/myuser/Documents/lib/tensorflow/.bazelrc: --output_filter=DONT_MATCH_ANYTHING\r\nINFO: Found applicable config definition build:v2 in file /Users/myuser/Documents/lib/tensorflow/.bazelrc: --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\r\nINFO: Found applicable config definition build:macos in file /Users/myuser/Documents/lib/tensorflow/.bazelrc: --apple_platform_type=macos --copt=-DGRPC_BAZEL_BUILD --copt=-w --define=PREFIX=/usr --define=LIBDIR=$(PREFIX)/lib --define=INCLUDEDIR=$(PREFIX)/include --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include --cxxopt=-std=c++14 --host_cxxopt=-std=c++14\r\nWARNING: Download from https://storage.googleapis.com/mirror.tensorflow.org/github.com/tensorflow/runtime/archive/0066ca2ff4fed6fe843ad54b57617d6c1bc482f1.tar.gz failed: class com.google.devtools.build.lib.bazel.repository.downloader.UnrecoverableHttpException GET returned 404 Not Found\r\nWARNING: Download from https://mirror.bazel.build/github.com/bazelbuild/rules_cc/archive/081771d4a0e9d7d3aa0eed2ef389fa4700dfb23e.tar.gz failed: class com.google.devtools.build.lib.bazel.repository.downloader.UnrecoverableHttpException GET returned 404 Not Found\r\nINFO: Repository go_sdk instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:23:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace0.bzl:137:20: in workspace\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/com_github_grpc_grpc/bazel/grpc_extra_deps.bzl:36:27: in grpc_extra_deps\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/io_bazel_rules_go/go/toolchain/toolchains.bzl:379:28: in go_register_toolchains\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/io_bazel_rules_go/go/private/sdk.bzl:65:21: in go_download_sdk\r\nRepository rule _go_download_sdk defined at:\r\n  /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/io_bazel_rules_go/go/private/sdk.bzl:53:35: in <toplevel>\r\nINFO: Repository gif instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:308:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository double_conversion instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:697:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository eigen_archive instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:871:28: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:64:11: in _initialize_third_party\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/eigen3/workspace.bzl:14:20: in repo\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository gemmlowp instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:871:28: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:67:13: in _initialize_third_party\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/gemmlowp/workspace.bzl:14:20: in repo\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository nsync instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:459:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository com_googlesource_code_re2 instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:243:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nINFO: Repository png instantiated at:\r\n  /Users/myuser/Documents/lib/tensorflow/WORKSPACE:15:14: in <toplevel>\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:878:21: in workspace\r\n  /Users/myuser/Documents/lib/tensorflow/tensorflow/workspace2.bzl:289:20: in _tf_repositories\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:128:21: in tf_http_archive\r\nRepository rule _tf_http_archive defined at:\r\n  /Users/myuser/Documents/lib/tensorflow/third_party/repo.bzl:81:35: in <toplevel>\r\nERROR: /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/internal/swift_clang_module_aspect.bzl:262:5: nested functions are not allowed. Move the function to the top level.\r\nERROR: /Users/myuser/Documents/lib/tensorflow/tensorflow/tools/lib_package/BUILD:137:8: error loading package '@com_github_grpc_grpc//': in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/com_github_grpc_grpc/bazel/grpc_build_system.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_apple/apple/ios.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_apple/apple/internal/ios_rules.bzl: in /Users/myuser/mambaforge/envs/mlp/share/bazel/7d4fd1924864d2d6fce922e4404d7479/external/build_bazel_rules_swift/swift/swift.bzl: Extension 'swift/internal/swift_clang_module_aspect.bzl' has errors and referenced by '//tensorflow/tools/lib_package:clicenses_generate'\r\nERROR: Analysis of target '//tensorflow/tools/lib_package:libtensorflow' failed; build aborted: Analysis failed\r\nINFO: Elapsed time: 3.391s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (2 packages loaded, 0 targets configured)\r\n    Fetching @io_bazel_rules_docker; Cloning 9bfcd7dbf0294ed9d11a99da6363fc28df904502 of https://github.com/bazelbuild/rules_docker.git\r\n\r\n```", "@juancrescente ,\r\nCan you please take a look at this [issue](https://github.com/tensorflow/tensorflow/issues/53640).Also we don't have access to M1 devices to build and test.for installation please take a look at this [link](https://github.com/apple/tensorflow_macos) ", "@tilakrayal I've seen [this](https://github.com/apple/tensorflow_macos) but since I have macOS 12, it won't work (only 11).\r\n[This](https://github.com/tensorflow/tensorflow/issues/53640) isn't working for me either. \r\n\r\n", "@tilakrayal \r\nJust to add more information, I'm trying to run a golang app that uses tensorflow. I was able to install it using conda but it's not working for go via that approach. I'm also not able to run TF even in docker (see [this](https://stackoverflow.com/questions/68105073/tensorflow-error-when-used-as-docker-baseimage) and [this](https://github.com/docker/for-mac/issues/5342)), so I'm a little bit lost.", "@juancrescente - You could try this on your Mac M1.  I tried on my home Mac M1 and worked for me.  Can you check these instructions and see if that resolves the issue?  If you don't have brew, you may have to install it.\r\n```\r\nbrew install hdf5\r\nexport HDF5_DIR=/opt/homebrew/opt/hdf5\r\npip3 install h5py\r\npip3 install tensorflow-macos\r\npip3 install tensorflow-metal\r\n```", "@sampathweb I'm able to do this inside conda, but then it [looks like](https://tensorflow-diy.readthedocs.io/en/latest/tensorflow/go/README.html) I need to install tf from source in order to make golang tf work", "@juancrescente - Did you follow the instructions for Golang from tensorflow.org/install -> Go (https://github.com/tensorflow/build/tree/master/golang_install_guide) ?", "@juancrescente ,\r\nAs suggested, can you please try to install from the [link](https://github.com/tensorflow/build/tree/master/golang_install_guide) provided.It helps.Thanks", "@tilakrayal @sampathweb I did, I was able to build after installing xcode from the app store and using this command:\r\n\r\n\r\n```\r\nbazel build --config opt  //tensorflow/tools/lib_package:libtensorflow -c opt --macos_sdk_version=12.1 --config=opt //tensorflow:libtensorflow.so\r\nsudo cp bazel-bin-tensorflow/libtensorflow* /usr/local/lib/.\r\n\r\n```", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54502\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54502\">No</a>\n", "@sampathweb I did install tensorflow (i.e. tensorflow-macos and tensorflow-metal) as you suggested but it is not possible for me to install other libraries which have tensorflow as a dependency. Is this that a bug?"]}, {"number": 54500, "title": "Libtensorflowlite.so build failed for aarch64 with Flex Delegate included in dependencies", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux 0be7898f8b6f 5.4.144+ from Google Colab**\r\n- Mobile device: **Raspberry Pi Aarch64 target architecture**\r\n- TensorFlow installed from (source or binary): **Source**\r\n- TensorFlow version (use command below): **2.7.0**\r\n- Python version: **3.7.12**\r\n- Bazel version (if compiling from source): **3.7.2**\r\n\r\n**Describe the current behavior**\r\nI'm trying to build a shared library for tensorflow-lite including the Flex Delegate by Modifying the BUILD to add following dependency:\r\n```\r\n\"//tensorflow/lite/delegates/flex:delegate\",\r\n```\r\nSince I'm targeting a Linux system running on my aarch64 board, the command I ran is the below: \r\n```\r\nbazel build --config=monolithic --config=elinux_aarch64 --define=with_select_tf_ops=true -c opt //tensorflow/lite:libtensorflowlite.so\r\n```\r\n**Describe the expected behavior**\r\nThe expected behavior is a build completing successfully. \r\n\r\n**Standalone code to reproduce the issue**\r\nI provide a gist from google Colab to make you able to reproduce the issue. \r\n\r\n**Other info / logs**\r\n```\r\nERROR: /root/.cache/bazel/_bazel_root/889612a75a81b3d8b4ed860522ba4e34/external/com_github_grpc_grpc/BUILD:1897:16: C++ compilation of rule '@com_github_grpc_grpc//:grpc_transport_chttp2_server_secure' failed (Exit 1): aarch64-linux-gnu-gcc failed: error executing command /root/.cache/bazel/_bazel_root/889612a75a81b3d8b4ed860522ba4e34/external/aarch64_linux_toolchain/bin/aarch64-linux-gnu-gcc -fstack-protector -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections ... (remaining 67 argument(s) skipped)\r\nIn file included from /usr/include/openssl/evp.h:16,\r\n                 from /usr/include/openssl/x509.h:18,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/bio.h:690:1: error: expected constructor, destructor, or type conversion before 'DEPRECATEDIN_1_1_0'\r\n DEPRECATEDIN_1_1_0(int BIO_get_port(const char *str, unsigned short *port_ptr))\r\n ^~~~~~~~~~~~~~~~~~\r\nIn file included from /usr/include/openssl/asn1.h:23,\r\n                 from /usr/include/openssl/objects.h:15,\r\n                 from /usr/include/openssl/evp.h:28,\r\n                 from /usr/include/openssl/x509.h:18,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/bn.h:183:43: error: 'BN_ULONG' does not name a type; did you mean 'SHA_LONG'?\r\n int BN_abs_is_word(const BIGNUM *a, const BN_ULONG w);\r\n                                           ^~~~~~~~\r\n                                           SHA_LONG\r\n/usr/include/openssl/bn.h:186:39: error: 'BN_ULONG' does not name a type; did you mean 'SHA_LONG'?\r\n int BN_is_word(const BIGNUM *a, const BN_ULONG w);\r\n                                       ^~~~~~~~\r\n                                       SHA_LONG\r\n/usr/include/openssl/bn.h:214:22: error: 'BN_ULONG' was not declared in this scope\r\n int BN_num_bits_word(BN_ULONG l);\r\n                      ^~~~~~~~\r\n/usr/include/openssl/bn.h:214:22: note: suggested alternative: 'SHA_LONG'\r\n int BN_num_bits_word(BN_ULONG l);\r\n                      ^~~~~~~~\r\n                      SHA_LONG\r\n/usr/include/openssl/bn.h:266:1: error: 'BN_ULONG' does not name a type; did you mean 'SHA_LONG'?\r\n BN_ULONG BN_mod_word(const BIGNUM *a, BN_ULONG w);\r\n ^~~~~~~~\r\n SHA_LONG\r\n/usr/include/openssl/bn.h:267:1: error: 'BN_ULONG' does not name a type; did you mean 'SHA_LONG'?\r\n BN_ULONG BN_div_word(BIGNUM *a, BN_ULONG w);\r\n ^~~~~~~~\r\n SHA_LONG\r\n/usr/include/openssl/bn.h:268:28: error: 'BN_ULONG' has not been declared\r\n int BN_mul_word(BIGNUM *a, BN_ULONG w);\r\n                            ^~~~~~~~\r\n/usr/include/openssl/bn.h:269:28: error: 'BN_ULONG' has not been declared\r\n int BN_add_word(BIGNUM *a, BN_ULONG w);\r\n                            ^~~~~~~~\r\n/usr/include/openssl/bn.h:270:28: error: 'BN_ULONG' has not been declared\r\n int BN_sub_word(BIGNUM *a, BN_ULONG w);\r\n                            ^~~~~~~~\r\n/usr/include/openssl/bn.h:271:28: error: 'BN_ULONG' has not been declared\r\n int BN_set_word(BIGNUM *a, BN_ULONG w);\r\n                            ^~~~~~~~\r\n/usr/include/openssl/bn.h:272:1: error: 'BN_ULONG' does not name a type; did you mean 'SHA_LONG'?\r\n BN_ULONG BN_get_word(const BIGNUM *a);\r\n ^~~~~~~~\r\n SHA_LONG\r\n/usr/include/openssl/bn.h:288:37: error: 'BN_ULONG' has not been declared\r\n int BN_mod_exp_mont_word(BIGNUM *r, BN_ULONG a, const BIGNUM *p,\r\n                                     ^~~~~~~~\r\n/usr/include/openssl/bn.h:323:24: error: variable or field 'BN_consttime_swap' declared void\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                        ^~~~~~~~\r\n/usr/include/openssl/bn.h:323:24: error: 'BN_ULONG' was not declared in this scope\r\n/usr/include/openssl/bn.h:323:24: note: suggested alternative: 'SHA_LONG'\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                        ^~~~~~~~\r\n                        SHA_LONG\r\n/usr/include/openssl/bn.h:323:46: error: expected primary-expression before '*' token\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                                              ^\r\n/usr/include/openssl/bn.h:323:47: error: 'a' was not declared in this scope\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                                               ^\r\n/usr/include/openssl/bn.h:323:57: error: expected primary-expression before '*' token\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                                                         ^\r\n/usr/include/openssl/bn.h:323:58: error: 'b' was not declared in this scope\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                                                          ^\r\n/usr/include/openssl/bn.h:323:61: error: expected primary-expression before 'int'\r\n void BN_consttime_swap(BN_ULONG swap, BIGNUM *a, BIGNUM *b, int nwords);\r\n                                                             ^~~\r\n/usr/include/openssl/bn.h:332:1: error: expected constructor, destructor, or type conversion before 'DEPRECATEDIN_0_9_8'\r\n DEPRECATEDIN_0_9_8(int\r\n ^~~~~~~~~~~~~~~~~~\r\n/usr/include/openssl/bn.h:403:1: error: expected constructor, destructor, or type conversion before 'DEPRECATEDIN_0_9_8'\r\n DEPRECATEDIN_0_9_8(int BN_get_params(int which)) /* 0, mul, 1 high, 2 low, 3\r\n ^~~~~~~~~~~~~~~~~~\r\nIn file included from /usr/include/openssl/objects.h:15,\r\n                 from /usr/include/openssl/evp.h:28,\r\n                 from /usr/include/openssl/x509.h:18,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/asn1.h:555:7: error: expected constructor, destructor, or type conversion before 'unsigned'\r\n const unsigned char *ASN1_STRING_get0_data(const ASN1_STRING *x);\r\n       ^~~~~~~~\r\nIn file included from /usr/include/openssl/x509.h:22,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/ec.h:274:1: error: expected constructor, destructor, or type conversion before 'DEPRECATEDIN_1_2_0'\r\n DEPRECATEDIN_1_2_0(int EC_GROUP_get_curve_GFp(const EC_GROUP *group, BIGNUM *p,\r\n ^~~~~~~~~~~~~~~~~~\r\n/usr/include/openssl/ec.h:543:1: error: expected constructor, destructor, or type conversion before 'DEPRECATEDIN_1_2_0'\r\n DEPRECATEDIN_1_2_0(int EC_POINT_get_affine_coordinates_GFp(const EC_GROUP *group,\r\n ^~~~~~~~~~~~~~~~~~\r\n/usr/include/openssl/ec.h:631:1: error: expected constructor, destructor, or type conversion before 'size_t'\r\n size_t EC_POINT_point2oct(const EC_GROUP *group, const EC_POINT *p,\r\n ^~~~~~\r\nIn file included from /usr/include/openssl/x509.h:25,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/rsa.h:239:1: error: expected constructor, destructor, or type conversion before 'int'\r\n int RSA_generate_key_ex(RSA *rsa, int bits, BIGNUM *e, BN_GENCB *cb);\r\n ^~~\r\nIn file included from /usr/include/openssl/dsa.h:25,\r\n                 from /usr/include/openssl/x509.h:26,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/dh.h:142:1: error: expected constructor, destructor, or type conversion before 'int'\r\n int DH_generate_parameters_ex(DH *dh, int prime_len, int generator,\r\n ^~~\r\nIn file included from /usr/include/openssl/x509.h:26,\r\n                 from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/dsa.h:103:1: error: expected constructor, destructor, or type conversion before 'int'\r\n int DSA_sign(int type, const unsigned char *dgst, int dlen,\r\n ^~~\r\n/usr/include/openssl/dsa.h:127:1: error: expected constructor, destructor, or type conversion before 'int'\r\n int DSA_generate_parameters_ex(DSA *dsa, int bits,\r\n ^~~\r\nIn file included from external/com_github_grpc_grpc/src/core/tsi/ssl_transport_security.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/security_connector/security_connector.h:33,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/credentials/credentials.h:35,\r\n                 from external/com_github_grpc_grpc/src/core/lib/security/context/security_context.h:28,\r\n                 from external/com_github_grpc_grpc/src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc:35:\r\n/usr/include/openssl/x509.h:728:1: error: expected constructor, destructor, or type conversion before 'DEPRECATEDIN_1_1_0'\r\n DEPRECATEDIN_1_1_0(ASN1_TIME *X509_CRL_get_nextUpdate(X509_CRL *crl))\r\n ^~~~~~~~~~~~~~~~~~\r\nTarget //tensorflow/lite:libtensorflowlite.so failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 916.628s, Critical Path: 16.49s\r\nINFO: 2033 processes: 1075 internal, 958 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\nThank you in advance for your support.", "comments": ["@sushreebarsa [Here](https://colab.research.google.com/drive/13y9MfwvjqZYW71Lb4Lu2Rm_S3TVfp2yp?usp=sharing) is a link to the Google Colab Notebook to reproduce the build issue. ", "It seems to be a clone of this issue https://github.com/tensorflow/tensorflow/issues/52018\r\nHence, I'm closing it, sorry for the convenience.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54500\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54500\">No</a>\n"]}, {"number": 54499, "title": "How to remove TensorFlow CUDA messages? TensorFlow was installed for CPU only", "body": "I installed TensorFlow 2.8.0 in my Windows 10 PC with CPU only. No Nvidia/CUDA hardware/software installed at all. I run a simple Python image processing project with CNN and I got bunch of no sense messages:\r\n\r\n2022-02-23 07:31:55.511878: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'cudart64_110.dll'; dlerror: cudart64_110.dll not found \r\n2022-02-23 07:31:55.512119: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine. \r\n2022-02-23 07:32:16.820716: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'nvcuda.dll'; dlerror: nvcuda.dll not found \r\n2022-02-23 07:32:16.820934: W tensorflow/stream_executor/cuda/cuda_driver.cc:269] failed call to cuInit: UNKNOWN ERROR (303) 2022-02-23 07:32:16.823066: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:169] retrieving CUDA diagnostic information for host: DESKTOP-7OCT2M4 \r\n2022-02-23 07:32:16.823285: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:176] hostname: DESKTOP-7OCT2M4 \r\n2022-02-23 07:32:16.823612: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations: AVX AVX2 To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n\r\nWhy I'm getting these CUDA messages? I never installed anything for CUDA. I did try the following like everyone recommended in Google:\r\n\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '3' \r\n\r\nAnd still getting these messages. WHY? I really don't want to see any CUDA message because I did not install nothing for it. This is very bad for the TensorFlow deployment team. Why no one test this before in Windows?\r\n\r\nI'm waiting for any suggestion to fix this TensorFlow installation issues.\r\n", "comments": ["@ebonat,\r\n\r\nFor TensorFlow 2.x, CPU and GPU packages are same. There was no issue with Tensorflow installation and you can ignore all those warnings if you are not using GPU cards.\r\n\r\nThey are just the information message as they are prefixed with `I`, if it is the error message they would be prefixed with `E` or `W` for warnings.\r\n\r\nTo turn off the Tensorflow warnings use below code snippet\r\n\r\n```\r\nimport logging, os\r\nlogging.disable(logging.WARNING)\r\nos.environ[\"TF_CPP_MIN_LOG_LEVEL\"] = \"3\"\r\nimport tensorflow as tf\r\n```\r\nTo turn of full log use below below code snippet\r\n\r\n```\r\nimport logging\r\nlogging.getLogger('tensorflow').disabled = True\r\nimport tensorflow as tf\r\n```\r\n\r\nFor more information please refer [here](https://www.tensorflow.org/install/pip). Thanks!", "@ebonat - `pip install tensorflow` will install a version thats compatible with GPU and CPU.  So it gives you that warning messages.  If you don't want to see warning messages and want to install CPU only version, you could - `pip install tensorflow-cpu` that's a smaller wheel file for CPU only version", "@sampathweb - thank you for letting me know. In this case the TensorFlow site did not mention that at all.\r\n\r\nwhat is the best way to uninstall this version now? ", "_To turn off the Tensorflow warnings use below code snippet_\r\n```\r\nimport logging, os\r\nlogging.disable(logging.WARNING)\r\nos.environ[\"TF_CPP_MIN_LOG_LEVEL\"] = \"3\"\r\nimport tensorflow as tf\r\n```\r\n\r\nThis code did not do anything at all. The CUDA messages remained the same - just to let you know.\r\n\r\nThanks for your help.\r\n", "@ebonat - You can - \r\n```\r\npip uninstall tensorflow\r\npip install tensorflow-cpu\r\n```\r\nto install a CPU only version.", "All fixed.  Thank you @sampathweb for your help!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54499\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54499\">No</a>\n"]}, {"number": 54498, "title": "Build failing from tensorflow r2.7", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **centos 7**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): **source** \r\n- TensorFlow version: **r2.7**\r\n- Python version: **3.6.13**\r\n- Installed using virtualenv? pip? conda?: **conda**\r\n- Bazel version (if compiling from source): **3.7.2**\r\n- GCC/Compiler version (if compiling from source): **8.3.0**\r\n- CUDA/cuDNN version: **CUDA 10.1.243, cuDNN 7.6.4**\r\n- GPU model and memory: **RTX 2080 * 4, 67 GB (not sure)**\r\n\r\n\r\n\r\n**Describe the problem**\r\nBuild keep failing with branch r2.7.\r\nThe build emits ` error: incomplete type is not allowed` message, yet I have not faced this issue before, nor from issues to best of my knowledge.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI have done configuration with `./configure`, selecting the options described above.\r\nAfter that, I used the following instrcution to build TensorFlow.\r\n``` bash\r\nbazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nThe build ended with the following error, and I found that there was no similar issue with this error.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n``` text\r\nWARNING: Output base '/home/jueonpark/.cache/bazel/_bazel_jueonpark/39636ca59c1e25526db6a6ad2e035e5e' is on NFS. This may lead to surprising failures and undetermined behavior.\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=1 --terminal_columns=209\r\nINFO: Reading rc options for 'build' from /home/jueonpark/tensorflow/.bazelrc:\r\n  Inherited 'common' options: --experimental_repo_remote_exec\r\nINFO: Reading rc options for 'build' from /home/jueonpark/tensorflow/.bazelrc:\r\n  'build' options: --define framework_shared_object=true --java_toolchain=@tf_toolchains//toolchains/java:tf_java_toolchain --host_java_toolchain=@tf_toolchains//toolchains/java:tf_java_toolchain --define=use_fast_cpp_protos=true --define=allow_oversize_protos=true --spawn_strategy=standalone -c opt --announce_rc --define=grpc_no_ares=true --noincompatible_remove_legacy_whole_archive --enable_platform_specific_config --define=with_xla_support=true --config=short_logs --config=v2 --define=no_aws_support=true --define=no_hdfs_support=true\r\nINFO: Reading rc options for 'build' from /home/jueonpark/tensorflow/.tf_configure.bazelrc:\r\n  'build' options: --action_env PYTHON_BIN_PATH=/home/jueonpark/anaconda3/envs/timeloop/bin/python3 --action_env PYTHON_LIB_PATH=/home/jueonpark/anaconda3/envs/timeloop/lib/python3.6/site-packages --python_path=/home/jueonpark/anaconda3/envs/timeloop/bin/python3 --action_env TF_CUDA_PATHS=/home/jueonpark/cuda --action_env CUDA_TOOLKIT_PATH=/home/jueonpark/cuda-10.1 --action_env CUDNN_INSTALL_PATH=/home/jueonpark/cuda --action_env TF_CUDA_COMPUTE_CAPABILITIES=3.5,7.0 --action_env LD_LIBRARY_PATH=/home/jueonpark/cuda/extras/CUPTI/lib64:/home/jueonpark/cuda/lib64:/opt/ohpc/pub/compiler/gcc/8.3.0/lib64:/home/jueonpark/cuda/extras/CUPTI/lib64:/home/jueonpark/cuda/lib64 --action_env GCC_HOST_COMPILER_PATH=/opt/ohpc/pub/compiler/gcc/8.3.0/bin/gcc --config=cuda\r\nINFO: Reading rc options for 'build' from /home/jueonpark/tensorflow/.bazelrc:\r\n  'build' options: --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compiler/mlir/tfrt/benchmarks,tensorflow/compiler/mlir/tfrt/jit/python_binding,tensorflow/compiler/mlir/tfrt/jit/transforms,tensorflow/compiler/mlir/tfrt/python_tests,tensorflow/compiler/mlir/tfrt/tests,tensorflow/compiler/mlir/tfrt/tests/saved_model,tensorflow/compiler/mlir/tfrt/transforms/lhlo_gpu_to_tfrt_gpu,tensorflow/core/runtime_fallback,tensorflow/core/runtime_fallback/conversion,tensorflow/core/runtime_fallback/kernel,tensorflow/core/runtime_fallback/opdefs,tensorflow/core/runtime_fallback/runtime,tensorflow/core/runtime_fallback/util,tensorflow/core/tfrt/common,tensorflow/core/tfrt/eager,tensorflow/core/tfrt/eager/backends/cpu,tensorflow/core/tfrt/eager/backends/gpu,tensorflow/core/tfrt/eager/core_runtime,tensorflow/core/tfrt/eager/cpp_tests/core_runtime,tensorflow/core/tfrt/fallback,tensorflow/core/tfrt/gpu,tensorflow/core/tfrt/run_handler_thread_pool,tensorflow/core/tfrt/runtime,tensorflow/core/tfrt/saved_model,tensorflow/core/tfrt/saved_model/tests,tensorflow/core/tfrt/tpu,tensorflow/core/tfrt/utils\r\nINFO: Found applicable config definition build:short_logs in file /home/jueonpark/tensorflow/.bazelrc: --output_filter=DONT_MATCH_ANYTHING\r\nINFO: Found applicable config definition build:v2 in file /home/jueonpark/tensorflow/.bazelrc: --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\r\nINFO: Found applicable config definition build:cuda in file /home/jueonpark/tensorflow/.bazelrc: --repo_env TF_NEED_CUDA=1 --crosstool_top=@local_config_cuda//crosstool:toolchain --@local_config_cuda//:enable_cuda\r\nINFO: Found applicable config definition build:opt in file /home/jueonpark/tensorflow/.tf_configure.bazelrc: --copt=-Wno-sign-compare --host_copt=-Wno-sign-compare\r\nINFO: Found applicable config definition build:linux in file /home/jueonpark/tensorflow/.bazelrc: --copt=-w --host_copt=-w --define=PREFIX=/usr --define=LIBDIR=$(PREFIX)/lib --define=INCLUDEDIR=$(PREFIX)/include --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include --cxxopt=-std=c++14 --host_cxxopt=-std=c++14 --config=dynamic_kernels --distinct_host_configuration=false --experimental_guard_against_concurrent_changes\r\nINFO: Found applicable config definition build:dynamic_kernels in file /home/jueonpark/tensorflow/.bazelrc: --define=dynamic_loaded_kernels=true --copt=-DAUTOLOAD_DYNAMIC_KERNELS\r\nINFO: Analyzed target //tensorflow/tools/pip_package:build_pip_package (0 packages loaded, 0 targets configured).\r\nINFO: Found 1 target...\r\nERROR: /home/jueonpark/tensorflow/tensorflow/core/kernels/image/BUILD:308:18: C++ compilation of rule '//tensorflow/core/kernels/image:resize_nearest_neighbor_op_gpu' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF ... (remaining 216 argument(s) skipped)\r\nexternal/com_google_absl/absl/types/internal/span.h(38): error: incomplete type is not allowed\r\n          detected during instantiation of \"absl::lts_20210324::span_internal::GetDataImpl\" based on template argument <tensorflow::TensorShapeProto>\r\n./tensorflow/core/framework/tensor_shape.h(376): here\r\n\r\n1 error detected in the compilation of \"/tmp/tmpxft_0000b538_00000000-7_resize_nearest_neighbor_op_gpu.cu.compute_70.cpp1.ii\".\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: /home/jueonpark/tensorflow/tensorflow/lite/toco/python/BUILD:92:10 C++ compilation of rule '//tensorflow/core/kernels/image:resize_nearest_neighbor_op_gpu' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF ... (remaining 216 argument(s) skipped)\r\nINFO: Elapsed time: 37.049s, Critical Path: 22.44s\r\nINFO: 123 processes: 64 internal, 59 local.\r\nFAILED: Build did NOT complete successfully\r\n```", "comments": ["Hi @JueonPark ! Can you try again with[ tested configurations](https://www.tensorflow.org/install/source#gpu) (GCC 7.3.1 ,CUDA 11.2 and CuDNN 8.1) after following one of these commands `\"bazel clean --expunge\" or \"bazel clean --expunge_async\"`?    Attached relevant thread for reference.    \r\n                                                                                                                                           R [1](https://github.com/bazelbuild/bazel/issues/2042#issuecomment-300168064), [2](https://stackoverflow.com/questions/40144776/tensorflow-installation-error-directory-not-empty). Thank you!", "Also, please note that TF 2.7 only supports Python 3.7-3.9.  So if you are using Python 3.6, I would suggest you use TF 2.6 or upgrade your python env.  Python 3.6 EOL was Dec'2021", "@sampathweb I tried with Python 3.9.7, yet it fails with the same error.\r\n@mohantym I'll try with the tested configuration and let you know.", "@JueonPark - If you are going to use the suggested configuration, would `pip install tensorflow` not serve your needs?", "CUDA version. needs to be 11.2+, from your config it looks like its 10.1.  So, please see if you can upgrade your local CUDA version to 11.x.  11.2 builds should be compatible with anything 11.x", "The problem was CUDA's version. TF was successfully installed with CUDA version 11.2. Thank you for the help, @mohantym and @sampathweb !!!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54498\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54498\">No</a>\n"]}, {"number": 54497, "title": "How to Edit the c++ files in TensorFlow\uff1f", "body": "I need to change the c++ files in tensorflow, but if I got it by using pip, there has no c++ file in the directory. So how can I edit these files? Or can I just pull tensorflow from github? I tried the command `pip install git+https://github.com/tensorflow/tensorflow.git` , it failed.", "comments": ["@Leemy9612 \r\nIn order to expedite the trouble-shooting process here,Could you please fill the issue [template](https://github.com/tensorflow/tensorflow/issues/new/choose),\r\nThanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "@Leemy9612 Please update as per the [comment](https://github.com/tensorflow/tensorflow/issues/54497#issuecomment-1049689546) above and refer to the [link](https://www.tensorflow.org/install) .Please let us know if it helps?Thanks!", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54497\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54497\">No</a>\n"]}, {"number": 54493, "title": "[mhlo] declare the minimum version 3.15.0 of cmake", "body": "When use cmake build_tools build the llvm-project, we give multiple targets\r\nbut this feature start with cmake 3.15.0", "comments": ["> LGTM\r\n\r\nThanks."]}, {"number": 54492, "title": "keras layer GRU tflite conversion wrong model", "body": "\r\n### System information\r\n\r\n\r\n-   **TensorFlow version (use command below)**:v2.8.0\r\n-   **Python version**: python 3.8\r\n\r\n\r\n### Describe the problem\r\nTo conversion lite model with in GRU model you can found here for example\r\nhttps://github.com/ARM-software/ML-zoo/blob/master/models/noise_suppression/RNNoise/tflite_int8/rnnoise_INT8.tflite\r\n\r\nI found that GRU kernel process r\\*wr+i\\*wi+bias convert to  tflite is wrong, it's convert to \r\ntwo fc ops and ADD  (r\\*wr+bias) + (i\\*wi+bias) and each biases are the same, so the result bias will be double added.\r\nLSTM has no such problem, it only convert without bias, and add single bias later.\r\n\r\n### Source code / logs\r\nN/A\r\n", "comments": ["@jimch3n \r\nIn order to expedite the trouble-shooting process here,Could you please fill the issue [template](https://github.com/tensorflow/tensorflow/issues/new/choose),\r\nThanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54492\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54492\">No</a>\n"]}, {"number": 54491, "title": "Fix mhlo.concatenate pattern when operand has unknown rank", "body": null, "comments": ["Hi @joker-eph, The `AMD ROCm CI` complained about \r\n```\r\nERROR: The project you're trying to build requires Bazel 5.1.0 (specified in /workspace/.bazelversion), but it wasn't found in /usr/local/lib/bazel/bin.\r\n```\r\nI don't think it is related to my fix. Could you help take a look at it?", "I don't think this will be a blocker."]}, {"number": 54490, "title": "Fix typo in examples for tf.linalg.pinv", "body": "tf.linalg..pinv should be written tf.linalg.pinv", "comments": []}, {"number": 54489, "title": "Can't find tensorflow version on python 3.10.2", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nmacOS Monerey Version 12.1\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\nBinary\r\n- TensorFlow version:\r\n2.8\r\n- Python version:\r\n3.10.2\r\n- Installed using virtualenv? pip? conda?:\r\npip version 22.0.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nI changed from python 3.8 to 3.10 as I saw from the official website that tensorflow 2.8 was supported by python 3.10 however it couldn't find a version that satisfied requirements.\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n![imageedit_3_9779348486](https://user-images.githubusercontent.com/52308419/155244353-63d4c411-f866-4ef4-addc-baaab14b4420.jpg)\r\nI tried:\r\n\"python3 -m pip install tensorflow\" and when that didn't work \"python3 -m pip install tensorflow==2.8\" but that didn't work either.\r\n\r\n\r\n\r\n", "comments": ["Can you clarify if you are on Mac M1 or Mac Intel machine?  You can get this information from Apple -> About this Mac and check the \"Processor\" listed there.", "Oh I am on Mac M1. Guess I didn't look at the hardware requirements. ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54489\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54489\">No</a>\n", "How did you solve this? I am stuck at the same issue", "Same, ", "Same"]}, {"number": 54487, "title": "ConnectionError when downloading deep_weeds dataset", "body": "I'm unable to use the [deep_weeds dataset](https://www.tensorflow.org/datasets/catalog/deep_weeds) from TensorFlow Datasets. Seems like this has happened in the past [#44053](https://github.com/tensorflow/tensorflow/issues/44053)\r\n\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow_datasets as tfds\r\n\r\ndata, info = tfds.load(name='deep_weeds')\r\n```\r\n\r\nResults in `ConnectionError`\r\n\r\n[See gist here](https://colab.research.google.com/gist/nikitamaia/fdd8654acd6d6d889585f60895f158f5/untitled4.ipynb)", "comments": ["@jvishnuvardhan I was able to replicate the issue on colab using TF v2.8.0 and tf-nightly ,please find the gist [here](https://colab.research.google.com/gist/sushreebarsa/5e6b7b164edad2158a86cbe1e7a1a0de/untitled4.ipynb#scrollTo=6oW7j3XvIXTG) for reference.Thanks!", "@Conchylicultor Can you please take a look at this issue? Thanks!", "I think we can close this now. It has been fixed in tfds-nightly, [see gist.](https://colab.research.google.com/gist/nikitamaia/f4ec07d2606d76f4f7bfd0104a2e0cb5/untitled5.ipynb)", "Thanks @nikitamaia ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54487\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54487\">No</a>\n"]}, {"number": 54486, "title": "Updated Random_ops tests", "body": "Removed the non existing files and replaced with the common test file random_ops_test.cc\r\nFixes https://github.com/tensorflow/tensorflow/issues/54418", "comments": []}, {"number": 54483, "title": "Shall we put this into a templated function and use it for the few cases?", "body": "Shall we put this into a templated function and use it for the few cases?\r\n\r\n_Originally posted by @bixia1 in https://github.com/tensorflow/tensorflow/pull/54452#discussion_r811363136_", "comments": ["Hi @MobaXyna ! Could you please update the [issue template ](https://github.com/tensorflow/tensorflow/issues/new/choose)too? It will help us expedite the issue. Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 54482, "title": "[oneDNN] Optimize CNMS implementation", "body": "Eliminate unnecessary data copying in per class NMS computation, this reduces memory usage and improves performance.", "comments": ["CNMS benchmark test result (run on  Xeon 28 cores/socket, 2 sockets sever)\r\n- Comparison of real time in ns between baseline vs with this PR change.\r\n<html xmlns:v=\"urn:schemas-microsoft-com:vml\"\r\nxmlns:o=\"urn:schemas-microsoft-com:office:office\"\r\nxmlns:x=\"urn:schemas-microsoft-com:office:excel\"\r\nxmlns=\"http://www.w3.org/TR/REC-html40\">\r\n\r\n<head>\r\n\r\n<meta name=ProgId content=Excel.Sheet>\r\n<meta name=Generator content=\"Microsoft Excel 15\">\r\n<link id=Main-File rel=Main-File\r\nhref=\"file:///C:/Users/yimeisun/AppData/Local/Temp/msohtmlclip1/01/clip.htm\">\r\n<link rel=File-List\r\nhref=\"file:///C:/Users/yimeisun/AppData/Local/Temp/msohtmlclip1/01/clip_filelist.xml\">\r\n</head>\r\n\r\n<body link=\"#0563C1\" vlink=\"#954F72\">\r\n\r\n\r\n\r\nname | Before real_time | After real_time | Ratio\r\n-- | -- | -- | --\r\nBM_CombinedNMS_cpu_1_500_25_1 | 334189 | 322264 | 1.037004\r\nBM_CombinedNMS_cpu_28_500_25_1 | 4.41E+06 | 4.10E+06 | 1.0754\r\nBM_CombinedNMS_cpu_32_500_25_1 | 4.48E+06 | 4.31E+06 | 1.039714\r\nBM_CombinedNMS_cpu_64_500_25_1 | 7.60E+06 | 7.22E+06 | 1.052113\r\nBM_CombinedNMS_cpu_1_1000_25_1 | 349802 | 332937 | 1.050655\r\nBM_CombinedNMS_cpu_28_1000_25_1 | 4.43E+06 | 4.30E+06 | 1.028769\r\nBM_CombinedNMS_cpu_32_1000_25_1 | 4.81E+06 | 4.53E+06 | 1.059926\r\nBM_CombinedNMS_cpu_64_1000_25_1 | 8.59E+06 | 7.66E+06 | 1.121244\r\nBM_CombinedNMS_cpu_1_1917_25_1 | 387730 | 350081 | 1.107544\r\nBM_CombinedNMS_cpu_28_1917_25_1 | 5.22E+06 | 4.50E+06 | 1.159611\r\nBM_CombinedNMS_cpu_32_1917_25_1 | 5.50E+06 | 5.04E+06 | 1.092065\r\nBM_CombinedNMS_cpu_64_1917_25_1 | 1.01E+07 | 8.52E+06 | 1.188657\r\nBM_CombinedNMS_cpu_1_2500_25_1 | 400145 | 360238 | 1.11078\r\nBM_CombinedNMS_cpu_28_2500_25_1 | 5.68E+06 | 4.87E+06 | 1.166302\r\nBM_CombinedNMS_cpu_32_2500_25_1 | 5.95E+06 | 5.47E+06 | 1.086979\r\nBM_CombinedNMS_cpu_64_2500_25_1 | 1.10E+07 | 9.38E+06 | 1.168934\r\nBM_CombinedNMS_cpu_1_500_25_25 | 338261 | 321794 | 1.051172\r\nBM_CombinedNMS_cpu_28_500_25_25 | 4.33E+06 | 3.97E+06 | 1.090368\r\nBM_CombinedNMS_cpu_32_500_25_25 | 4.50E+06 | 4.19E+06 | 1.071899\r\nBM_CombinedNMS_cpu_64_500_25_25 | 7.92E+06 | 7.24E+06 | 1.093034\r\nBM_CombinedNMS_cpu_1_1000_25_25 | 351871 | 334681 | 1.051362\r\nBM_CombinedNMS_cpu_28_1000_25_25 | 4.80E+06 | 4.41E+06 | 1.087341\r\nBM_CombinedNMS_cpu_32_1000_25_25 | 4.80E+06 | 4.66E+06 | 1.029737\r\nBM_CombinedNMS_cpu_64_1000_25_25 | 9.16E+06 | 8.25E+06 | 1.110321\r\nBM_CombinedNMS_cpu_1_1917_25_25 | 395715 | 356851 | 1.108908\r\nBM_CombinedNMS_cpu_28_1917_25_25 | 5.45E+06 | 4.89E+06 | 1.114186\r\nBM_CombinedNMS_cpu_32_1917_25_25 | 5.87E+06 | 5.25E+06 | 1.117478\r\nBM_CombinedNMS_cpu_64_1917_25_25 | 1.11E+07 | 9.67E+06 | 1.14452\r\nBM_CombinedNMS_cpu_1_2500_25_25 | 413935 | 361808 | 1.144074\r\nBM_CombinedNMS_cpu_28_2500_25_25 | 6.32E+06 | 5.14E+06 | 1.229518\r\nBM_CombinedNMS_cpu_32_2500_25_25 | 6.68E+06 | 5.65E+06 | 1.182296\r\nBM_CombinedNMS_cpu_64_2500_25_25 | 1.28E+07 | 1.06E+07 | 1.210632\r\nBM_CombinedNMS_cpu_1_500_90_1 | 1.07E+06 | 1.00E+06 | 1.072312\r\nBM_CombinedNMS_cpu_28_500_90_1 | 1.58E+07 | 1.40E+07 | 1.124338\r\nBM_CombinedNMS_cpu_32_500_90_1 | 1.58E+07 | 1.49E+07 | 1.062751\r\nBM_CombinedNMS_cpu_64_500_90_1 | 2.78E+07 | 2.58E+07 | 1.079076\r\nBM_CombinedNMS_cpu_1_1000_90_1 | 1.12E+06 | 1.04E+06 | 1.080739\r\nBM_CombinedNMS_cpu_28_1000_90_1 | 1.70E+07 | 1.58E+07 | 1.079352\r\nBM_CombinedNMS_cpu_32_1000_90_1 | 1.76E+07 | 1.63E+07 | 1.074538\r\nBM_CombinedNMS_cpu_64_1000_90_1 | 3.10E+07 | 2.89E+07 | 1.069872\r\nBM_CombinedNMS_cpu_1_1917_90_1 | 1.20E+06 | 1.08E+06 | 1.107895\r\nBM_CombinedNMS_cpu_28_1917_90_1 | 1.95E+07 | 1.77E+07 | 1.10383\r\nBM_CombinedNMS_cpu_32_1917_90_1 | 2.04E+07 | 1.90E+07 | 1.074876\r\nBM_CombinedNMS_cpu_64_1917_90_1 | 3.78E+07 | 3.36E+07 | 1.12239\r\nBM_CombinedNMS_cpu_1_2500_90_1 | 1.27E+06 | 1.15E+06 | 1.109065\r\nBM_CombinedNMS_cpu_28_2500_90_1 | 2.16E+07 | 1.88E+07 | 1.145242\r\nBM_CombinedNMS_cpu_32_2500_90_1 | 2.30E+07 | 2.02E+07 | 1.138123\r\nBM_CombinedNMS_cpu_64_2500_90_1 | 4.28E+07 | 3.67E+07 | 1.165077\r\nBM_CombinedNMS_cpu_1_500_90_90 | 1.07E+06 | 1.02E+06 | 1.055089\r\nBM_CombinedNMS_cpu_28_500_90_90 | 1.52E+07 | 1.51E+07 | 1.00377\r\nBM_CombinedNMS_cpu_32_500_90_90 | 1.63E+07 | 1.61E+07 | 1.016836\r\nBM_CombinedNMS_cpu_64_500_90_90 | 2.84E+07 | 2.72E+07 | 1.04343\r\nBM_CombinedNMS_cpu_1_1000_90_90 | 1.13E+06 | 1.06E+06 | 1.064577\r\nBM_CombinedNMS_cpu_28_1000_90_90 | 1.66E+07 | 1.58E+07 | 1.054762\r\nBM_CombinedNMS_cpu_32_1000_90_90 | 1.79E+07 | 1.76E+07 | 1.019121\r\nBM_CombinedNMS_cpu_64_1000_90_90 | 3.20E+07 | 3.02E+07 | 1.058378\r\nBM_CombinedNMS_cpu_1_1917_90_90 | 1.23E+06 | 1.13E+06 | 1.088672\r\nBM_CombinedNMS_cpu_28_1917_90_90 | 1.98E+07 | 1.91E+07 | 1.036563\r\nBM_CombinedNMS_cpu_32_1917_90_90 | 2.17E+07 | 2.08E+07 | 1.047132\r\nBM_CombinedNMS_cpu_64_1917_90_90 | 3.83E+07 | 3.67E+07 | 1.042737\r\nBM_CombinedNMS_cpu_1_2500_90_90 | 1.29E+06 | 1.17E+06 | 1.099015\r\nBM_CombinedNMS_cpu_28_2500_90_90 | 2.14E+07 | 2.04E+07 | 1.047537\r\nBM_CombinedNMS_cpu_32_2500_90_90 | 2.44E+07 | 2.27E+07 | 1.074722\r\nBM_CombinedNMS_cpu_64_2500_90_90 | 4.29E+07 | 3.94E+07 | 1.088768\r\nBM_CombinedNMS_cpu_1_500_200_1 | 2.40E+06 | 2.33E+06 | 1.029554\r\nBM_CombinedNMS_cpu_28_500_200_1 | 2.65E+07 | 2.52E+07 | 1.052669\r\nBM_CombinedNMS_cpu_32_500_200_1 | 2.86E+07 | 2.70E+07 | 1.059056\r\nBM_CombinedNMS_cpu_64_500_200_1 | 5.28E+07 | 4.87E+07 | 1.083045\r\nBM_CombinedNMS_cpu_1_1000_200_1 | 2.51E+06 | 2.41E+06 | 1.041351\r\nBM_CombinedNMS_cpu_28_1000_200_1 | 2.92E+07 | 2.63E+07 | 1.110325\r\nBM_CombinedNMS_cpu_32_1000_200_1 | 3.28E+07 | 2.87E+07 | 1.145261\r\nBM_CombinedNMS_cpu_64_1000_200_1 | 5.99E+07 | 5.26E+07 | 1.13853\r\nBM_CombinedNMS_cpu_1_1917_200_1 | 2.71E+06 | 2.54E+06 | 1.067206\r\nBM_CombinedNMS_cpu_28_1917_200_1 | 3.53E+07 | 3.05E+07 | 1.159143\r\nBM_CombinedNMS_cpu_32_1917_200_1 | 3.99E+07 | 3.29E+07 | 1.212441\r\nBM_CombinedNMS_cpu_64_1917_200_1 | 7.44E+07 | 6.23E+07 | 1.194299\r\nBM_CombinedNMS_cpu_1_2500_200_1 | 2.78E+06 | 2.58E+06 | 1.078483\r\nBM_CombinedNMS_cpu_28_2500_200_1 | 3.95E+07 | 3.35E+07 | 1.178008\r\nBM_CombinedNMS_cpu_32_2500_200_1 | 4.29E+07 | 3.64E+07 | 1.178887\r\nBM_CombinedNMS_cpu_64_2500_200_1 | 8.34E+07 | 6.93E+07 | 1.203188\r\nBM_CombinedNMS_cpu_1_500_200_200 | 2.40E+06 | 2.37E+06 | 1.015784\r\nBM_CombinedNMS_cpu_28_500_200_200 | 2.64E+07 | 2.56E+07 | 1.031587\r\nBM_CombinedNMS_cpu_32_500_200_200 | 2.92E+07 | 2.82E+07 | 1.034441\r\nBM_CombinedNMS_cpu_64_500_200_200 | 5.31E+07 | 5.26E+07 | 1.009757\r\nBM_CombinedNMS_cpu_1_1000_200_200 | 2.51E+06 | 2.49E+06 | 1.008234\r\nBM_CombinedNMS_cpu_28_1000_200_200 | 3.02E+07 | 2.92E+07 | 1.033287\r\nBM_CombinedNMS_cpu_32_1000_200_200 | 3.31E+07 | 3.27E+07 | 1.013632\r\nBM_CombinedNMS_cpu_64_1000_200_200 | 6.11E+07 | 5.85E+07 | 1.043018\r\nBM_CombinedNMS_cpu_1_1917_200_200 | 2.72E+06 | 2.62E+06 | 1.037425\r\nBM_CombinedNMS_cpu_28_1917_200_200 | 3.74E+07 | 3.35E+07 | 1.117488\r\nBM_CombinedNMS_cpu_32_1917_200_200 | 4.07E+07 | 3.69E+07 | 1.102791\r\nBM_CombinedNMS_cpu_64_1917_200_200 | 7.71E+07 | 6.92E+07 | 1.113246\r\nBM_CombinedNMS_cpu_1_2500_200_200 | 2.85E+06 | 2.70E+06 | 1.056102\r\nBM_CombinedNMS_cpu_28_2500_200_200 | 4.13E+07 | 3.71E+07 | 1.114582\r\nBM_CombinedNMS_cpu_32_2500_200_200 | 4.57E+07 | 4.00E+07 | 1.1443\r\nBM_CombinedNMS_cpu_64_2500_200_200 | 8.58E+07 | 7.55E+07 | 1.137008\r\n\r\n\r\n\r\n</body>\r\n\r\n</html>\r\n\r\nWhen tested end-to-end inference performance using SSD-MobileNet frozen graphs with CNMS, int8 has about 12% gain, and float32 has about 7% gain. ", "@rohan100jain - please let me know when you may be able to review this PR. Thanks", "I checked the logs for \"Ubuntu CPU - Internal CI build failed\" and \"Intel\u00ae oneDNN -- Community CI Build\", they have the same two test case failures and the failures are not related to this PR change.", "Yes, probably broken by c6531b8bcb83d1314acc96360156b549afecb377 LLVM/MLIR", "If this PR is approved, can it be merged now? Thanks"]}, {"number": 54480, "title": "cant open pages", "body": "the website downloads  pages instead of opening them ", "comments": ["I'm having the exact same issue on different browsers and machines.", "We can reproduce the issue. We will resolve it soon. Thanks @reemaljaber @mpettinger ", "Yes. We are looking into this. Will fix ASAP.", "This should be fixed now.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54480\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54480\">No</a>\n", "it works thank you", "Excellent work!\n\n\nOn Tue, Feb 22, 2022, 12:28 Reem Aljaber ***@***.***> wrote:\n\n> it works thank you\n>\n> \u2014\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/54480#issuecomment-1048089437>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ATPQIUQO6S42IP4TTS76X4LU4PIVFANCNFSM5PBYFMVQ>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n> You are receiving this because you were mentioned.Message ID:\n> ***@***.***>\n>\n"]}, {"number": 54478, "title": "Web Page problem", "body": "When trying to access some pages of tensorflow it downloads an xml instead of showing the webpage\r\n![image](https://user-images.githubusercontent.com/19721178/155134500-416d0005-29e5-404f-bc8b-0bfb6358a2ab.png)\r\n", "comments": ["Many pages especially keras related pages all have this issue. Changing browsers does not work.", "@FedePeralta  @aliencaocao We are able to reproduce the issue . We will resolve this soon.Thank you!", "@FedePeralta This should be fixed now.Could you please confirm the same?Thanks!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54478\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/54478\">No</a>\n"]}]