[{"number": 19385, "title": "Memory leak in Eager execution", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Xubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 'v1.8.0-1451-g6ba9573' 1.8.0\r\n- **Python version**: 3.6.5\r\n- **Bazel version (if compiling from source)**: 0.11.1\r\n- **GCC/Compiler version (if compiling from source)**: 5.4.0 20160609\r\n- **CUDA/cuDNN version**: 9.1 / 7.1\r\n- **GPU model and memory**: GeForce GTX 960M - 2GB\r\n- **Exact command to reproduce**: Just run the following code:\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\nclass Net(tf.keras.Model):\r\n    def __init__(self):\r\n        super(Net, self).__init__()\r\n        self.conv1 = tf.keras.layers.Conv2D(32, 3)\r\n\r\n    def call(self, x):\r\n        y = self.conv1(x)\r\n        return y\r\n\r\ninputs = tf.zeros([1, 10, 10, 3], tf.float32)\r\nnet = Net()\r\nfor _ in range(1000000):\r\n    net(inputs)\r\n```\r\n\r\n### Describe the problem\r\nI am observing a memory leak when I run the code above at my machine. The RAM usage increase indefinitely over time (but GPU memory remains constant). Profiling the code with memory_profiler produces the following plot:\r\n![memory_plot_conv2d](https://user-images.githubusercontent.com/24420973/40237678-828c29ec-5a87-11e8-9a96-a15d7b1b3ca6.png)\r\n\r\n### Source code / logs\r\n\r\nThis problem might be related to the usage of tensors of rank higher than two. For example, if I use a rank 2 tensor as input to a dense layer, then there is no leak:\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\nclass Net(tf.keras.Model):\r\n    def __init__(self):\r\n        super(Net, self).__init__()\r\n        self.fc1 = tf.keras.layers.Dense(32)\r\n\r\n    def call(self, x):\r\n        y = self.fc1(x)\r\n        return y\r\n\r\ninputs = tf.zeros([1, 100], tf.float32)\r\nnet = Net()\r\nfor _ in range(1000000):\r\n    net(inputs)\r\n```\r\n![memory_plot_fc](https://user-images.githubusercontent.com/24420973/40238436-951a3570-5a89-11e8-8d80-b75a423e2f3f.png)\r\n\r\nHowever, if I input a rank 3 tensor to the same net, there is a leak again:\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\nclass Net(tf.keras.Model):\r\n    def __init__(self):\r\n        super(Net, self).__init__()\r\n        self.fc1 = tf.keras.layers.Dense(32)\r\n\r\n    def call(self, x):\r\n        y = self.fc1(x)\r\n        return y\r\n\r\ninputs = tf.zeros([1, 10, 10], tf.float32)\r\nnet = Net()\r\nfor _ in range(1000000):\r\n    net(inputs)\r\n```\r\n![memory_plot_fc_rank3](https://user-images.githubusercontent.com/24420973/40238473-a8f22ea4-5a89-11e8-9ab7-0b9fc6eab18b.png)\r\n\r\nPlease let me know if there is anything else I can do to help.", "comments": ["Thank you for the report!\r\n\r\nNarrowed down slightly to eager op execution's interactions with numpy inputs:\r\n\r\n```\r\nimport numpy\r\n\r\nfrom tensorflow.python.eager import context\r\nfrom tensorflow.python.framework import dtypes\r\nfrom tensorflow.python.ops import gen_nn_ops\r\nfrom tensorflow.python.ops import array_ops\r\n\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\ninp = array_ops.zeros([1, 10, 10, 3], dtypes.float32)\r\nfilt = array_ops.zeros([3, 3, 3, 32], dtypes.float32)\r\nstrides = list(numpy.array([1] * 4))\r\n\r\nfor _ in range(10000000):\r\n  #strides = [int(_i) for _i in strides]\r\n  gen_nn_ops.conv2d(input=inp, filter=filt, strides=strides, padding='VALID')\r\n```\r\n\r\nAnd running with `--vmodule=pywrap_tfe_src=3`:\r\n\r\n> I0521 16:53:57.182346  110126 pywrap_tfe_src.cc:2212] Falling back to slow path for Op \"Conv2D\" since we are unable to set the value for attr \"strides\" due to: Expecting int64_t value for attr strides, got numpy.int64\r\n\r\nSo it looks like (1) we should be using the fast path, and (2) the slow path shouldn't leak. @akshaym has expressed interest in fixing :)", "Thanks for the report @henriquem87, and for helping track it down @allenlavoie!\r\n\r\nI have a fix which should get committed in the next couple days.", "Thank you for the fix @akshaym and @allenlavoie ! It did solve that problem. However, now I am observing another leak when I use tfe.GradientTape(). The code to reproduce the problem, and the memory plot are below:\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\ntfe = tf.contrib.eager\r\n\r\nclass Net(tf.keras.Model):\r\n    def __init__(self):\r\n        super(Net, self).__init__()\r\n        self.fc1 = tf.keras.layers.Dense(5)\r\n\r\n    def call(self, x):\r\n        y = self.fc1(x)\r\n        return y\r\n\r\ninputs = tf.zeros([32, 100], tf.float32)\r\nnet = Net()\r\nfor i in range(1000000):\r\n    with tfe.GradientTape() as tape:\r\n        net(inputs)\r\n```\r\n![tape](https://user-images.githubusercontent.com/24420973/40581921-16b78f98-613c-11e8-887b-47a3ea3d3061.png)\r\n\r\nShould I open a new issue for this?", "@alextp want to take a look (at the GradientTape issue; the original leak has been plugged)?\r\n\r\nFWIW it doesn't look like a PyObject leak (or at least the test decorators don't see one), and I can reproduce it without a Model (nightly builds, Python 2.7 and 3.6 rather than just 3 this time):\r\n\r\n```\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\n\r\nlayer = tf.keras.layers.Dense(5)\r\ninputs = tf.zeros([32, 100], tf.float32)\r\n\r\nfor i in range(1000000):\r\n  with tf.GradientTape() as tape:\r\n    layer(inputs)\r\n```\r\n", "https://github.com/tensorflow/tensorflow/commit/bf6644f9d274f549707d3f2a80c77e5eda163ebb was for the original issue; re-opening to keep tracking the GradientTape issue."]}, {"number": 19384, "title": "App crashes when building with gradle", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nmacOS Sierra 10.12.6\r\n- **TensorFlow installed from (source or binary)**:\r\nsource\r\n\r\n\r\n- **Python version**: \r\npython 3.6\r\n- **Bazel version (if compiling from source)**:\r\nbazel 0.13.0\r\n- **GCC/Compiler version (if compiling from source)**:\r\nGCC 4.2.1\r\n\r\nI managed to implement the object detection api in my app with my trained model. Despite that the app works fine I always get an error the the tensorflow_demo.so was not find so the tracking is unavailable which affected the bounding boxes in comparison with the tensorflow object detection demo (when you build it with bazel)\r\n\r\nI downloaded the missing .so file and add it to my project by adding this to my gradle :\r\n \r\n     lintOptions {\r\n        abortOnError false\r\n    }\r\n\r\n    sourceSets.main {\r\n        jniLibs.srcDirs =  ['libs']\r\n    }\r\n\r\nand then dropping the files into the created directory (JniLibs)\r\n\r\nwhen I unpack my .apk file I can see clearly that the .so are packed in the .apk : \r\n\r\n     20336344  Defl:N  5832450  71% 00-00-1980 00:00 33cca329  lib/arm64-       v8a/libtensorflow_inference.so\r\n      412440  Defl:N   210820  49% 00-00-1980 00:00 f305dd00  lib/armeabi- v7a/libtensorflow_demo.so\r\n      1.3987972  Defl:N  4856867  65% 00-00-1980 00:00 be7adc48  lib/armeabi-v7a/libtensorflow_inference.so\r\n       21178780  Defl:N  6353576  70% 00-00-1980 00:00 addfcb9d  lib/x86/libtensorflow_inference.so\r\n       21811248  Defl:N  6681692  69% 00-00-1980 00:00 4cac1c73  lib/x86_64/libtensorflow_inference.so\r\n\r\nthe problem now is when I launch the app it crashes with the following error : \r\n\r\n         No implementation found for void package_name_tracking.ObjectTracker.initNative(int, int, boolean) (tried Java_package_name_tracking_ObjectTracker_initNative and Java_package_name_tracking_ObjectTracker_initNative__IIZ)\r\n\r\nI want to avoid the use of bazel or cmake, is it possible or there is a solution for the error I'm getting !!\r\n\r\nAny information would be helpful\r\n", "comments": ["having the same problem.. me too, any updates ?", "As suggested downloading and including the `.so` file to your own project was not enough. Since we're including a pre-compiled version of the library the native methods (in the `.cpp` files) have the package name of the tensorflow demo on their names. That's why this error occur since our own projects packages named differently.  \r\n\r\n - To solve this problem you need to rename your package to `org.tensorflow.demo` and make sure that `ObjectTracker.java` is under `org.tensorflow.demo.tracking` \r\n\r\n- Second solution would be  changing the naming of the native methods in the `.cpp` files according to your package name and then rebuild the `.so` file with bazel (faced many problems there if anyone manage to do it please mention how).\r\n\r\n - I hope the tensorflow team will mention this information when suggesting to download and drop the pre-buit version so the not so experienced developers won't waste unnecessary time on this issue.", "@petewarden can you take a look at this?", "I haven't had a chance to look at this. Passing to @achowdhery to take a look, since she's been working on this code recently.", "@achraf-boussaada Please consider following the instructions in this Tutorial with bazel build. Please suggest if you are still stuck after trying those.\r\nhttps://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193", "@achraf-boussaada Are you able to build the app with the latest code release?", "Hi, I have the same problem. I managed to implement object detection with my own model but I get the error tensorflow_demo.so is not found and so the tracking support cannot be enabled. I've download the package and replace it to jniLibs folder of my app and I haven't change the default app name. Still the error exists. Could you please help me?\r\nHow can I build my own tensorflow_demo.so?", "@achowdhery sorry for the late response ! unfortunately i didn't get to test it with the new build since i'm no longer working on the project..  i will keep the issue updated if i did come back to working on it.\r\n\r\n@MohammadMoradi did you make sure you supported all CPU architectures? that may be your problem. it should be looking like this : \r\n\r\n> --jniLibs\r\n> ----arm64-v8\r\n> --------tensorflow_demo.so\r\n> ----armeabi-v7a\r\n> --------tensorflow_demo.so\r\n> ----x86\r\n> --------tensorflow_demo.so\r\n> ----x86_64\r\n> --------tensorflow_demo.so\r\n", "@achraf-boussaada Thanks for your response. My CPU architecture is armeabi-v7a and I only made the armeabi-v7a directory. But maybe I should build all of them. Not sure!", "Hello again @achowdhery :)\r\nAs you probably remember from [here](https://github.com/tensorflow/models/issues/5020) I am still not able to build .tflite file, so I decided to user Tensorflow Mobile with frozen graph instead of ml-kit, as it was in the [article](https://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193)\r\nSo, I successfully built the demo project with Android Studio as it was described in this [tutorial](https://www.tensorflow.org/mobile/android_build) and TF Classify works great, but I need TF Detect. And with enabling TF Detect demo I faced the same problem that guys above T____T\r\nI really hope there is some solution for at least on of these issues...", "@kate-kate you are building with Android Studio and cant get the app to build? What is the error message? You already get the TF Lite file correctly?", "@kate-kate I am happy to help you. Please answer the following questions\r\n1. Platform where you are install tensorflow. How did you install Tensorflow? What version?\r\n2. Are you able to download a mobilenet_v1_ssd coco checkpoint and convert it to frozen graph?\r\n3. Are you able to convert a frozen graph to tflite file?\r\n4. Are you able to get the some version of Android Studio SDK and NDK? What is the version?\r\n5. Are you able to build the app? Note for step 5, you dont need to try 1-3, there is a pre-built coco tflite model already in the app folder if you are trying to build it. What steps did you follow to build app? Is this device on a 32 bit architecture or 64 bit architecture?\r\n6. Did you try to deploy the app on your Android Device?\r\nIn the steps above, please provide detailed instructions where something failed to help us reproduce. Also, it would be useful for you to try this with bazel build if Android Studio is not working (the key challenge is to get all the SDK and NDK versions correct in Android Studio). ", "@achowdhery Deeply appreciate your help.\r\n1. I install Tensorflow 1.10 on mac os from source\r\n2. Yes\r\n3. I have an issue with \"Converting unsupported operation: TFLite_Detection_PostProcess\" but after converting the file appears\r\n4. NDK version 16, SDK - 8.0\r\n5. I've succesfully built the app (with an Android Studio) and even used TF Classify action, it worked\r\n6. No, I used only emulator", "@kate-kate I believe your TFlite file conversion is successful. \"Converting unsupported operation: TFLite_Detection_PostProcess\" message is showing up simply because this custom op is only in Tensorflow Lite and not in Tensorflow.\r\nNow the main question that needs debugging is why the Android app does not work. Are you able to print out the logcat messages and copy/paste them here?", "@achowdhery Sure\r\nLogcat messages when I use TFlite file and android demo with ml-kit and my custom tflite model converted with TOCO:\r\n```\r\n08-21 11:22:14.971 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err: com.google.firebase.ml.common.FirebaseMLException: The load task failed\r\n08-21 11:22:14.973 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgy.zzf(Unknown Source:75)\r\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:8)\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\r\n08-21 11:22:14.974 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\r\n08-21 11:22:14.978 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.handleCallback(Handler.java:789)\r\n08-21 11:22:14.980 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:98)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.os.HandlerThread.run(HandlerThread.java:65)\r\n    Caused by: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\r\n    \t... 5 more\r\n    Caused by: java.lang.IllegalArgumentException: Cannot create interpreter: Didn't find custom op for name 'TFLite_Detection_PostProcess'\r\n    Registration failed.\r\n08-21 11:22:14.981 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:63)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:51)\r\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:90)\r\n        at com.google.android.gms.internal.firebase_ml.zzhn.zzey(Unknown Source:103)\r\n        at com.google.android.gms.internal.firebase_ml.zzha.zzfb(Unknown Source:75)\r\n        at com.google.android.gms.internal.firebase_ml.zzha.call(Unknown Source:0)\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\r\n    \t... 5 more\r\n```\r\n\r\nWhen I use Tensorflow Mobile android demo, TF Detect, without changing anything in models\r\n```\r\n08-21 11:27:01.833 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)\r\n08-21 11:27:03.391 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1190ms, TensorFlow version: 1.10.0\r\n08-21 11:27:03.392 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'\r\n08-21 11:27:03.394 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Camera orientation relative to screen canvas: 90\r\n08-21 11:27:03.395 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 640x480\r\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: libtensorflow_demo.so not found, tracking unavailable\r\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480\r\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: Native object tracking support not found. See tensorflow/examples/android/README.md for details.\r\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo E/tensorflow: MultiBoxTracker: Object tracking support not found. See tensorflow/examples/android/README.md for details.\r\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.\r\n```\r\nBTW - today the magic happened. I still had the error above while running TF Detect, but it worked! For the first time. For other who faced this problem - this time Android Studio warned be that its going to reinstall APK. After reinstallation it worked\r\n\r\nBut the error with ml-kit remains :(", "@kate-kate Thanks for the update. We pushed some updates to gradle build yesterday.\r\nWe will look in to the ML-kit errors next.\r\n", "@kate-kate ML-Kit has not yet updated to Tensorflow 1.10.\r\nCan you modify your ML Kit to point to Tensorflow Lite 1.10? Here is the link:\r\nhttps://firebase.google.com/docs/ml-kit/android/use-custom-tflite", "@achowdhery I've tried to follow your advice about ml kit but build didn't complete successfully because of ```ERROR: /private/var/tmp/_bazel_kate/8be913d8cdea6dd8174f0dac0a48c277/external/flatbuffers/BUILD.bazel:24:1: C++ compilation of rule '@flatbuffers//:flatbuffers' failed (Exit 1)```", "Also Tensorflow Mobile android demo that worked after APK update 27 days ago stopped working again. It always fails with error:\r\n```\r\n09/17 12:19:50: Launching tensorflow-mobile\r\n$ adb install-multiple -r -t /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/instant-run-apk/debug/tensorflow-mobile-debug.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_2.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_7.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_2.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_9.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_4.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_7.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/dep/dependencies.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_0.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_9.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_3.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_5.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_8.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_3.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_1.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_8.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_6.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_5.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/dep/dependencies.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_0.apk /Users/kate/htdocs/tensorflow/tensorflow/examples/android/gradleBuild/intermediates/split-apk/debug/slices/slice_1.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_6.apk /Users/kate/htdocs/tensorflow-mobile/gradleBuild/intermediates/split-apk/debug/slices/slice_4.apk \r\n$ adb shell pm uninstall org.tensorflow.demo\r\nDELETE_FAILED_INTERNAL_ERROR\r\nError while Installing APKs\r\n```\r\nI've tried even older release verions but always getting this error", "@achraf-boussaada @tensorflowbutler @umutboz @angersson @petewarden @achowdhery \r\nI get this error:\r\n\r\n```\r\n09-20 18:48:31.364 9726-9726/org.tensorflow.mypackage E/art: No implementation found for long org.tensorflow.contrib.android.RunStats.allocate() (tried Java_org_tensorflow_contrib_android_RunStats_allocate and Java_org_tensorflow_contrib_android_RunStats_allocate__)\r\n09-20 18:48:32.154 9726-9726/org.tensorflow.mypackageE/art: No implementation found for void org.tensorflow.mypackage.tracking.ObjectTracker.initNative(int, int, boolean) (tried Java_org_tensorflow_mypackage_tracking_ObjectTracker_initNative and Java_org_tensorflow_mypackage_tracking_ObjectTracker_initNative__IIZ)\r\n09-20 18:48:32.154 9726-9726/org.tensorflow.mypackageE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: org.tensorflow.mypackage, PID: 9726\r\n    java.lang.UnsatisfiedLinkError: No implementation found for void org.tensorflow.mypackage.tracking.ObjectTracker.initNative(int, int, boolean) (tried Java_org_tensorflow_mypackage_tracking_ObjectTracker_initNative and Java_org_tensorflow_mypackage_tracking_ObjectTracker_initNative__IIZ)\r\n        at org.tensorflow.mypackage.tracking.ObjectTracker.initNative(Native Method)\r\n        at org.tensorflow.mypackage.tracking.ObjectTracker.init(ObjectTracker.java:257)\r\n        at org.tensorflow.mypackage.tracking.ObjectTracker.getInstance(ObjectTracker.java:220)\r\n        at org.tensorflow.mypackage.tracking.MultiBoxTracker.onFrame(MultiBoxTracker.java:211)\r\n        at org.tensorflow.mypackage.DetectorActivity.processImage(DetectorActivity.java:254)\r\n        at org.tensorflow.mypackage.CameraActivity.onPreviewFrame(CameraActivity.java:150)\r\n        at android.hardware.Camera$EventHandler.handleMessage(Camera.java:1183)\r\n        at android.os.Handler.dispatchMessage(Handler.java:102)\r\n        at android.os.Looper.loop(Looper.java:158)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7231)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1230)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1120)\r\n\r\n```\r\n\r\nSince I have renamed the project org.tensorflow.demo into org.tensorflow.mypackage because I wanted to have more applications running with different models.\r\nThe application starts but it crashes because of this error.\r\nI am building with cmake because I am working on windows os.", "did you @achraf-boussaada && @MohammadMoradi  try to right-click on app from Android-Studio -> link Cpp module, choose cmake then point it to tensorflow/examples/android/jni/CMakeLists.txt ?", "i follow  @idrissbellil 's advice, and then i run the TFL Detect,  i get the error below:\r\nD/tensorflow: CameraActivity: onCreate org.tensorflow.demo.DetectorActivity@1511614\r\nI/tensorflow: CameraActivity: Camera API lv2?: true\r\nD/tensorflow: CameraActivity: onStart org.tensorflow.demo.DetectorActivity@1511614\r\n    CameraActivity: onResume org.tensorflow.demo.DetectorActivity@1511614\r\nI/tensorflow: CameraConnectionFragment: Desired size: 640x480, min size: 480x480\r\n    CameraConnectionFragment: Valid preview sizes: [4160x3120, 4000x3000, 3840x2160, 3264x2448, 3200x2400, 2976x2976, 2592x1944, 2688x1512, 2048x1536, 1920x1080, 1600x1200, 1440x1080, 1280x960, 1280x768, 1280x720, 1024x768, 800x600, 864x480, 800x480, 720x480, 640x480, 480x640]\r\n    CameraConnectionFragment: Rejected preview sizes: [640x360, 480x360, 480x320, 352x288, 320x240, 240x320, 176x144, 160x120, 144x176]\r\n    CameraConnectionFragment: Exact size match found.\r\nW/tensorflow: TFLiteObjectDetectionAPIModel: ???\r\n    TFLiteObjectDetectionAPIModel: Abyssinian\r\n    TFLiteObjectDetectionAPIModel: american_bulldog\r\n    TFLiteObjectDetectionAPIModel: american_pit_bull_terrier\r\n    TFLiteObjectDetectionAPIModel: basset_hound\r\n    TFLiteObjectDetectionAPIModel: beagle\r\n    TFLiteObjectDetectionAPIModel: Bengal\r\n    TFLiteObjectDetectionAPIModel: Birman\r\n    TFLiteObjectDetectionAPIModel: Bombay\r\n    TFLiteObjectDetectionAPIModel: boxer\r\n    TFLiteObjectDetectionAPIModel: British_Shorthair\r\n    TFLiteObjectDetectionAPIModel: chihuahua\r\n    TFLiteObjectDetectionAPIModel: Egyptian_Mau\r\n    TFLiteObjectDetectionAPIModel: english_cocker_spaniel\r\n    TFLiteObjectDetectionAPIModel: english_setter\r\n    TFLiteObjectDetectionAPIModel: german_shorthaired\r\n    TFLiteObjectDetectionAPIModel: great_pyrenees\r\n    TFLiteObjectDetectionAPIModel: havanese\r\n    TFLiteObjectDetectionAPIModel: japanese_chin\r\n    TFLiteObjectDetectionAPIModel: keeshond\r\n    TFLiteObjectDetectionAPIModel: leonberger\r\n    TFLiteObjectDetectionAPIModel: Maine_Coon\r\n    TFLiteObjectDetectionAPIModel: miniature_pinscher\r\n    TFLiteObjectDetectionAPIModel: newfoundland\r\n    TFLiteObjectDetectionAPIModel: Persian\r\n    TFLiteObjectDetectionAPIModel: pomeranian\r\n    TFLiteObjectDetectionAPIModel: pug\r\n    TFLiteObjectDetectionAPIModel: Ragdoll\r\n    TFLiteObjectDetectionAPIModel: Russian_Blue\r\n    TFLiteObjectDetectionAPIModel: saint_bernard\r\n    TFLiteObjectDetectionAPIModel: samoyed\r\n    TFLiteObjectDetectionAPIModel: scottish_terrier\r\n    TFLiteObjectDetectionAPIModel: shiba_inu\r\n    TFLiteObjectDetectionAPIModel: Siamese\r\n    TFLiteObjectDetectionAPIModel: Sphynx\r\n    TFLiteObjectDetectionAPIModel: staffordshire_bull_terrier\r\n    TFLiteObjectDetectionAPIModel: wheaten_terrier\r\n    TFLiteObjectDetectionAPIModel: yorkshire_terrier\r\nI/tensorflow: DetectorActivity: Camera orientation relative to screen canvas: 0\r\n    DetectorActivity: Initializing at size 640x480\r\nI/tensorflow: CameraConnectionFragment: Opening camera preview: 640x480\r\nD/tensorflow: CameraActivity: Initializing buffer 0 at size 307200\r\nD/tensorflow: CameraActivity: Initializing buffer 1 at size 153599\r\nD/tensorflow: CameraActivity: Initializing buffer 2 at size 153599\r\nI/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480\r\nI/native: Initializing object tracker. 320x240 @0x7f6fdf77f4\r\nI/native: Initialized!\r\nI/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.\r\nI/tensorflow: DetectorActivity: Running detection on image 1\r\nE/AndroidRuntime: FATAL EXCEPTION: inference  \r\n    Process: org.tensorflow.lite.demo, PID: 4358\r\n    java.lang.ArrayIndexOutOfBoundsException: length=38; index=70\r\n        at java.util.Vector.arrayIndexOutOfBoundsException(Vector.java:907)\r\n        at java.util.Vector.elementAt(Vector.java:328)\r\n        at java.util.Vector.get(Vector.java:442)\r\n        at org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:214)\r\n        at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:248)\r\n        at android.os.Handler.handleCallback(Handler.java:739)\r\n        at android.os.Handler.dispatchMessage(Handler.java:95)\r\n        at android.os.Looper.loop(Looper.java:148)\r\n        at android.os.HandlerThread.run(HandlerThread.java:61)\r\nD/tensorflow: CameraActivity: onPause org.tensorflow.demo.DetectorActivity@1511614\r\nI/Process: Sending signal. PID: 4358 SIG: 9\r\nApplication terminated.", "how to solve this FATAL EXCEPTION? does anyone run into this?", "@NorwayLobster follow this [comment](https://github.com/tensorflow/tensorflow/issues/22106#issuecomment-428409506) to solve it,", "\r\n\r\n\r\n> As suggested downloading and including the `.so` file to your own project was not enough. Since we're including a pre-compiled version of the library the native methods (in the `.cpp` files) have the package name of the tensorflow demo on their names. That's why this error occur since our own projects packages named differently.\r\n> \r\n> * To solve this problem you need to rename your package to `org.tensorflow.demo` and make sure that `ObjectTracker.java` is under `org.tensorflow.demo.tracking`\r\n> * Second solution would be  changing the naming of the native methods in the `.cpp` files according to your package name and then rebuild the `.so` file with bazel (faced many problems there if anyone manage to do it please mention how).\r\n\r\nI think I've managed to do that thanks to you. Here are the details:\r\n1. Changed build to 'cmake' \r\n2. c files: changed all package #defines to match my custom structure (about 100 cases, use \"replace in path\")\r\nFROM\r\n#include \"tensorflow/examples/android/jni/object_tracking/geom.h\"\r\nTO \r\n#include \"geom.h\"\r\n\r\nNow the loading of the ObjectTracker succeeds but running methods are causing exceptions. \r\n1. Either create and move  ObjectTracker to 'org.tensorflow.demo.tracking' package \r\n1. Or change the following package under the 'object_tracker_jni.cc' \r\nFROM\r\nJava_org_tensorflow_demo_tracking_ObjectTracker_##METHOD_NAME  // NOLINT\r\nTO\r\nJava_your_package_ObjectTracker_##METHOD_NAME  // NOLINT\r\n\r\n@achraf-boussaada thanks for leading me to the right path ! \r\n", "\r\n\r\n\r\n> > As suggested downloading and including the `.so` file to your own project was not enough. Since we're including a pre-compiled version of the library the native methods (in the `.cpp` files) have the package name of the tensorflow demo on their names. That's why this error occur since our own projects packages named differently.\r\n> > \r\n> > * To solve this problem you need to rename your package to `org.tensorflow.demo` and make sure that `ObjectTracker.java` is under `org.tensorflow.demo.tracking`\r\n> > * Second solution would be  changing the naming of the native methods in the `.cpp` files according to your package name and then rebuild the `.so` file with bazel (faced many problems there if anyone manage to do it please mention how).\r\n> \r\n> I think I've managed to do that thanks to you. Here are the details:\r\n> \r\n> 1. Changed build to 'cmake'\r\n> 2. c files: changed all package #defines to match my custom structure (about 100 cases, use \"replace in path\")\r\n>    FROM\r\n>    #include \"tensorflow/examples/android/jni/object_tracking/geom.h\"\r\n>    TO\r\n>    #include \"geom.h\"\r\n> \r\n> Now the loading of the ObjectTracker succeeds but running methods are causing exceptions.\r\n> \r\n> 1. Either create and move  ObjectTracker to 'org.tensorflow.demo.tracking' package\r\n> 2. Or change the following package under the 'object_tracker_jni.cc'\r\n>    FROM\r\n>    Java_org_tensorflow_demo_tracking_ObjectTracker_##METHOD_NAME  // NOLINT\r\n>    TO\r\n>    Java_your_package_ObjectTracker_##METHOD_NAME  // NOLINT\r\n> \r\n> @achraf-boussaada thanks for leading me to the right path !\r\n\r\n@SerjSmor Did you move the JNI folder to the custom application folder ?\r\n\r\nOr did you just made changes to existing files without changing any locations ?\r\n\r\nI am trying to do the same but still confused.\r\n\r\n", "A guide to build libtensorflow_demo.so for custom projects i.e projects would be really helpful for beginners like me\r\n", "Any updates for 2019 for Tensorflow-lite? The Nightly Build links are now dead. ", "The nightly build for Tensorflow lite is working appropriately. Please advise what link are you trying.", "> Nightly Build links are now dead.\r\n\r\nWhich links in particular? I strongly encourage users to switch to using TensorFlow Lite. The detection sample for that can be found @ https://github.com/tensorflow/examples/blob/master/lite/examples/object_detection/android/README.md. \r\n", "@achowdhery and @jdduke sorry for the carelessly worded statement, I'm trying to build the Android Demo from source [using this link](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/examples/android/app#building-from-source-with-bazel) and [this supplement](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android#bazel) with the hopes of getting Object Tracking in Tensorflow-Lite to work. I'll go through with this process and open a ticket if I encounter any Build Issues.\r\n\r\nAs a follow-up question, is Object Tracking available for TF-Lite? If so, how do we go about building TF/TF-Lite to enable support for Object Tracking?", "> > Nightly Build links are now dead.\r\n> \r\n> Which links in particular? I strongly encourage users to switch to using TensorFlow Lite. The detection sample for that can be found @ https://github.com/tensorflow/examples/blob/master/lite/examples/object_detection/android/README.md.\r\n\r\nWhen I use the above repo I am getting the same error\r\n\r\n> 12142-12142/org.tensorflow.lite.examples.detection I/tensorflow: DetectorActivity: Camera orientation relative to screen canvas: 90\r\n2019-03-27 19:51:02.065 12142-12142/org.tensorflow.lite.examples.detection I/tensorflow: DetectorActivity: Initializing at size 640x480\r\n2019-03-27 19:51:02.072 12142-12142/org.tensorflow.lite.examples.detection E/tensorflow: ObjectTracker: libtensorflow_demo.so not found, tracking unavailable\r\n2019-03-27 19:51:02.073 12142-12142/org.tensorflow.lite.examples.detection I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480\r\n2019-03-27 19:51:02.073 12142-12142/org.tensorflow.lite.examples.detection E/tensorflow: ObjectTracker: Native object tracking support not found. See tensorflow/examples/android/README.md for details.\r\n2019-03-27 19:51:02.091 12142-12142/org.tensorflow.lite.examples.detection E/tensorflow: MultiBoxTracker: Object tracking support not found. See tensorflow/examples/android/README.md for details.\r\n2019-03-27 19:51:02.092 12142-12142/org.tensorflow.lite.examples.detection I/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.\r\n2019-03-27 19:51:02.208 12142-12172/org.tensorflow.lite.examples.detection I/tensorflow: DetectorActivity: Running detection on image 1\r\n\r\nAnd I am not able to find the JNI folder or the libtensorflow_demo.so in any of the folders. If libtensorflow_demo.so is availble can you point me the path? Or is there any procedudre I have to follow to build it?", "@achowdhery and @jdduke, I opened a [new ticket here](https://github.com/tensorflow/tensorflow/issues/27199)", "Marking issue as resolved. Feel free to re-open this if it's unresolved or file a [new issue](https://github.com/tensorflow/tensorflow/issues/new/choose)", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/19384\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/19384\">No</a>\n"]}, {"number": 19383, "title": "Speech demo crash [Bug]", "body": "I installed the demo APK on my android phone to test it out. during my playthrough of the speech app, the APP crashed but I had the phone connected to my PC so I found in the logs the following error(couldn't reproduce crash).\r\n\r\n`org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: Thread-6\r\n    Process: org.tensorflow.demo, PID: 29587\r\n    java.lang.RuntimeException: You must feed results in increasing time order, but received a timestamp of 1526649298145 that was earlier than the previous one of 1526649298240\r\n        at org.tensorflow.demo.RecognizeCommands.processLatestResults(RecognizeCommands.java:114)\r\n        at org.tensorflow.demo.SpeechActivity.recognize(SpeechActivity.java:319)\r\n        at org.tensorflow.demo.SpeechActivity.access$100(SpeechActivity.java:61)\r\n        at org.tensorflow.demo.SpeechActivity$3.run(SpeechActivity.java:265)\r\n        at java.lang.Thread.run(Thread.java:762)`\r\n\r\n### FORM\r\n\r\nAPK link: https://ci.tensorflow.org/view/Nightly/job/nightly-android/lastSuccessfulBuild/artifact/out/tensorflow_demo.apk\r\n\r\nHave I written custom code: No Used the already build Demo APK\r\nOS Platform and Distribution: Android API 24 - Samsung\r\nTensorFlow installed from N/A\r\nTensorFlow version: N/A\r\nBazel version: N/A\r\nCUDA/cuDNN version: N/A\r\nGPU model and memory: Mali-T830 (Single core GPU)\r\nExact command to reproduce: Opened Voice Apk then said the second word(Couldn't reproduce)", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nOS Platform and Distribution\nTensorFlow installed from\nTensorFlow version\nBazel version\nCUDA/cuDNN version\nGPU model and memory\nExact command to reproduce", "It has been 15 days with no activity and the `awaiting response` label was assigned. Is this still an issue?"]}, {"number": 19382, "title": "Tensor Forest generates TWO sets of files while training", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOS\r\n- **TensorFlow installed from (source or binary)**: Tensorflow CPU installed with pip\r\n- **TensorFlow version (use command below)**: 1.8.0\r\n- **Python version**:  3.6.4\r\n\r\n### Describe the problem\r\nI am building a simple classification model using pre-made Tensor Forest Estimator. While training, my classifier generates one graph and one file with checkpoints but TWO sets of model data, here are the files generated after model fitting the training data:\r\n\r\n```\r\ncheckpoint                      \r\nevents.out.tfevents.1526645293.Iulias-MacBook-Air.local \r\ngraph.pbtxt \r\nmodel.ckpt-1.data-00000-of-00002\r\nmodel.ckpt-1.data-00001-of-00002\r\nmodel.ckpt-1.index\r\nmodel.ckpt-1.meta\r\nmodel.ckpt-299.data-00000-of-00002                  \r\nmodel.ckpt-299.data-00001-of-00002          \r\nmodel.ckpt-299.index            \r\nmodel.ckpt-299.meta\r\n```\r\nWhile training I'm also getting multiple warnings from TF about errors during serializing, like:\r\n\r\nWARNING:tensorflow:Error encountered when serializing resources. Type is unsupported, or the types of the items don't match field type in CollectionDef. '_Resource' object has no attribute 'name'\r\n\r\nCould it be the reason?\r\n\r\nMy code is below:\r\n\r\n```\r\nimport pickle\r\nimport numpy as np\r\nimport pandas as pd\r\nfrom sklearn.model_selection import train_test_split\r\nfrom sklearn.metrics import f1_score\r\nimport tensorflow as tf\r\nfrom sklearn.metrics import f1_score\r\nfrom sklearn.metrics import confusion_matrix\r\nimport matplotlib.pyplot as plt\r\nfrom tensorflow.contrib.tensor_forest.client import eval_metrics\r\nimport itertools\r\nresale_postback_df = pd.read_pickle('./stats')\r\n\r\nfeatures_list = ['feature_1', 'feature_2','feature_3','feature_4','feature_6', 'feature_7', 'feature_8']\r\nlabels_list = ['tf_labels']\r\n\r\nprint(labels_test.values)\r\n\r\nfeatures_train, features_test, labels_train, labels_test = train_test_split(resale_postback_df[features_list], \r\n                                                                            resale_postback_df.tf_labels,\r\n                                                                           test_size=0.3,random_state = 42, shuffle = True)\r\n#defining custom input function for Tensor Forest\r\ndef generate_tf_input_fn(x_input,y_input,num_epochs=None):\r\n    #this is the function we are generating\r\n    def _input_fn_():\r\n        # generate a standard input function\r\n        train_input_fn = tf.estimator.inputs.pandas_input_fn(\r\n            x= x_input,  \r\n            y= y_input,\r\n            num_epochs=num_epochs,\r\n            shuffle=True\r\n        )\r\n        #execute the standard input function \r\n        x, y = train_input_fn()\r\n        # expand the shape of the results (necessary for Tensor Forest)\r\n        for name in x:\r\n            x[name] = tf.expand_dims(x[name], 1, name= name) \r\n        return x, y\r\n\r\n    return _input_fn_\r\n\r\ntrain_input_fn = generate_tf_input_fn(features_train,labels_train,num_epochs=None)\r\ntest_input_fn = generate_tf_input_fn(features_test, labels_test, num_epochs=None)\r\n\r\ntf.logging.set_verbosity(0)\r\nhparams = tf.contrib.tensor_forest.python.tensor_forest.ForestHParams(num_classes=len(resale_postback_df.tf_labels.unique()),\r\n                                          regression= False,\r\n                                          num_features=len(features_list),\r\n                                          num_trees=50,\r\n                                          min_split_samples=2,\r\n                                          verbose = 0).fill()\r\n\r\nSAVE_PATH = './save'\r\n\r\nclassifier = tf.contrib.tensor_forest.client.random_forest.TensorForestEstimator(hparams,model_dir = SAVE_PATH)\r\nclassifier.fit(input_fn = train_input_fn)\r\n```\r\nCan somebody explain to me hpw to solve this problem ?\r\n", "comments": ["Hi. Could you please share some experience to solve this problem. I met it also. Thanks a lot.", "Hi. Could you please share some experience to solve this problem. I met it also. Thanks a lot."]}, {"number": 19381, "title": "comment typo", "body": "comment typo", "comments": []}, {"number": 19380, "title": "Tensorflow Lite AllocateTensors() fails with custom model", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n- **TensorFlow version (use command below)**:\r\n- **Python version**: \r\n('v1.8.0-0-g93bc2e2072', '1.8.0')\r\n- **Bazel version (if compiling from source)**:\r\n```\r\nBuild label: 0.13.0\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Mon Oct 18 21:33:40 +50297 (1525078013620)\r\nBuild timestamp: 1525078013620\r\nBuild timestamp as int: 1525078013620\r\n\r\n```\r\n- **GCC/Compiler version (if compiling from source)**:\r\ngcc version 5.5.0 20171010 (Ubuntu 5.5.0-12ubuntu1~16.04) \r\n- **CUDA/cuDNN version**:\r\nNone\r\n- **GPU model and memory**:\r\nNone\r\n- **Exact command to reproduce**:\r\n\r\n### Python-Code:\r\n```\r\nfrom keras import Input, Model\r\nfrom keras.layers import Conv2D\r\nimport keras.backend as K\r\nimport tensorflow as tf\r\nfrom tensorflow.python.framework import graph_util\r\n# manually put back imported modules\r\nimport tempfile\r\nimport subprocess\r\n\r\ntf.contrib.lite.tempfile = tempfile\r\ntf.contrib.lite.subprocess = subprocess\r\n\r\nK.set_learning_phase(0)\r\ninput = Input((416, 416, 3),name='Placeholder')\r\nconv1 = Conv2D(16, kernel_size=(3, 3), strides=(1, 1), padding='same', use_bias=False)(input)\r\nmodel = Model(input, conv1)\r\nnetin = [K.placeholder(name=\"Input\", dtype=tf.float32, shape=(416,416,3))]\r\nnetout = [K.identity(model.outputs[0],\"Prediction\")]\r\nsess = K.get_session()\r\n\r\nconstant_graph = graph_util.convert_variables_to_constants(sess, sess.graph_def, [\"Prediction\"])\r\n\r\ntflite_model = tf.contrib.lite.toco_convert(constant_graph, netin, netout)\r\nopen('model' + '.tflite', \"wb\").write(tflite_model)\r\n\r\n```\r\n\r\n### C-Code:\r\n\r\n```\r\n//based on tensorflow/contrib/lite/examples/minimal/minimal.cc\r\n\r\n#include \"tensorflow/contrib/lite/model.h\"\r\n#include \"tensorflow/contrib/lite/interpreter.h\"\r\n#include \"tensorflow/contrib/lite/kernels/register.h\"\r\n#include \"tensorflow/contrib/lite/kernels/kernel_util.h\"\r\n#include <cstdio>\r\n#include <iostream>\r\n#include \"exp.h\"\r\n#include \"opencv2/highgui.hpp\"\r\n#include \"opencv2/core.hpp\"\r\n// Usage: minimal <tflite model>\r\n\r\nusing namespace tflite;\r\n\r\n#define TFLITE_MINIMAL_CHECK(x) \\\r\n  if(!(x)) {                                                    \\\r\n    fprintf(stderr, \"Error at %s:%d\\n\",  __FILE__, __LINE__); \\\r\n    exit(1); \\\r\n  }\r\n\r\n\r\nint main(int argc, char *argv[]) {\r\n  if(argc != 3) {\r\n    fprintf(stderr, \"Usage: <model> <image>\\n\");\r\n    return 1;\r\n  }else{\r\n      std::cout << \"Reading model from: \" << argv[1] << std::endl;\r\n      std::cout << \"Reading image from: \" << argv[2] << std::endl;\r\n  }\r\n  const char* filename = argv[1];\r\n    const char* imagefile = argv[2];\r\n\r\n  // Load model\r\n  std::unique_ptr<tflite::FlatBufferModel> model\r\n      = tflite::FlatBufferModel::BuildFromFile(filename);\r\n  TFLITE_MINIMAL_CHECK(model != nullptr);\r\n\r\n\r\n\r\n  // Build the interpreter\r\n  tflite::ops::builtin::BuiltinOpResolver resolver;\r\n  resolver.AddCustom(\"Exp\", Register_EXP());\r\n\r\n  InterpreterBuilder builder(*model.get(), resolver);\r\n  std::unique_ptr<Interpreter> interpreter;\r\n  builder(&interpreter);\r\n  TFLITE_MINIMAL_CHECK(interpreter != nullptr);\r\n    cv::Mat cvimg = cv::imread(imagefile);\r\n    cv::imshow(\"Input\",cvimg);\r\n    cv::waitKey(1);\r\n\r\n  // Allocate tensor buffers.\r\n    TFLITE_MINIMAL_CHECK(interpreter->AllocateTensors() == kTfLiteOk);\r\n    // Fill input buffers\r\n\r\n    int input = interpreter->inputs()[0];\r\n    memcpy(interpreter->typed_input_tensor<float>(input), cvimg.data, cvimg.total() * cvimg.elemSize());\r\n\r\n  // Run inference\r\n    TFLITE_MINIMAL_CHECK(interpreter->Invoke() == kTfLiteOk);\r\n\r\n  // Read output buffers\r\n  // TODO(user): Insert getting data out code.\r\n    //int output = interpreter->outputs()[0];\r\n    std::cout << interpreter->typed_output_tensor<float>(0) << std::endl;\r\n  return 0;\r\n}\r\n```\r\n### Describe the problem\r\n\r\nI convert a keras model (very simplified to reproduce error) to tflite. I verified the graph using tensorboard and it seems fine. However, when I want to run it in C++ the following error occurs during the call of interpreter->AllocateTensors():\r\n\r\n```\r\ntensorflow/contrib/lite/kernels/conv.cc:189 input->dims->size != 4 (0 != 4)\r\n```\r\nThis does not happen when loading a model from [here](https://www.tensorflow.org/mobile/tflite/demo_android). Is this a bug in the graph conversion in the model loader or am I doing sth wrong?\r\n", "comments": ["Short update. This seems to be a keras -> tensorflow problem. When I define the graph in tensorflow directly using tf.layers. .. there is no such problem", "Nagging Assignee @robieta: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Nagging Assignee @robieta: It has been 29 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Nagging Assignee @robieta: It has been 44 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "The exp op is now supported , please try it  with nightly.  Please let us know once this works.", "Nagging Assignee @robieta: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Automatically closing due to lack of recent activity. Please update the issue when new information becomes available, and we will reopen the issue. Thanks!\r\n", "Has anyone solved this problem? I have the same error with a custom model converted from keras to tflite (.hdf5 to .tflite format). I tested my model in different ways and it seems to work, but when I try to load it in Android It doesn't.\r\nPlease @tofulawrence reopen this issue.  Thank you!", "I have the same problem when converting from .hd5 to .tflite", "Same problem, pre-trained mobilenet architecture on Keras gives this error on Android. ", "My Model is not keras but pure tensorflow and still gives this error on android.\r\nBut only for the quantized version.", "I think it should be:\r\n`interpreter->typed_input_tensor<float>(0)`\r\ninstead of\r\n`interpreter->typed_input_tensor<float>(input)`"]}, {"number": 19379, "title": "comment typo error", "body": "as title", "comments": ["\nThanks for your pull request. It looks like this may be your first contribution to a Google open source project (if not, look below for help). Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit <https://cla.developers.google.com/> to sign.**\n\nOnce you've signed (or fixed any issues), please reply here (e.g. `I signed it!`) and we'll verify it.\n\n----\n\n#### What to do if you already signed the CLA\n\n##### Individual signers\n\n*   It's possible we don't have your GitHub username or you're using a different email address on your commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n\n##### Corporate signers\n\n*   Your company has a Point of Contact who decides which employees are authorized to participate. Ask your POC to be added to the group of authorized contributors. If you don't know who your Point of Contact is, direct the Google project maintainer to [go/cla#troubleshoot](go/cla#troubleshoot) ([Public version](https://opensource.google.com/docs/cla/#troubleshoot)).\n*   The email used to register you as an authorized contributor must be the email used for the Git commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n*   The email used to register you as an authorized contributor must also be [attached to your GitHub account](https://github.com/settings/emails).\n\t\t\n\n<!-- need_sender_cla -->", "I signed it!", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for all the commit author(s) or Co-authors.  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\nIn order to pass this check, please resolve this problem and have the pull request author add another comment and the bot will run again. If the bot doesn't comment, it means it doesn't think anything has changed.\n\n<!-- need_author_cla -->"]}, {"number": 19378, "title": "tf.gfile.Glob returns wrong values on Windows systems", "body": "### System information\r\nEnvironment:\r\n- **Python 3.6.2**\r\n- **Tensorflow 'v1.8.0-0-g93bc2e2072' 1.8.0**\r\n- **OS : Windows 7**\r\n\r\n- **Exact command to reproduce**:\r\n\r\n```\r\n > ls -R\r\n.:\r\nexample/\r\n\r\n./example:\r\nsubdir/\r\n\r\n./example/subdir:\r\nfile1  file2\r\n\r\n\r\n> python\r\nPython 3.6.2 (v3.6.2:5fd33b5, Jul  8 2017, 04:57:36) [MSC v.1900 64 bit (AMD64)] on win32\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow as tf\r\n>>> tf.gfile.Glob(\"example/*\")\r\n['example\\\\subdir', 'example\\\\subdir\\\\file1', 'example\\\\subdir\\\\file2']\r\n\r\n```\r\n\r\n### Describe the problem\r\nBehaviour of _tf.gfile.Glob_ is different on Windows and Linux-based (POSIX) systems.\r\nOn Windows, the result includes all files and sub-directories of the matching pattern (=> recursive)\r\nOn Linux, the result includes only files and directories matched by the pattern (=> not recursive)\r\n\r\nAs an example, given the directory structure above, I have the following result:\r\n\r\n* Windows\r\n```python\r\n>>> tf.gfile.Glob(\"example/*\")\r\n['example\\\\subdir', 'example\\\\subdir\\\\file1', 'example\\\\subdir\\\\file2']\r\n```\r\n\r\n* Linux-based systems\r\n```python\r\n>>> tf.gfile.Glob(\"example/*\")\r\n['example/subdir']\r\n```\r\n\r\nThe result returned on Windows platform is clearly wrong.\r\n\r\nThis has an impact on my application because I do something like `[my_list]=tf.gfile.Glob(pattern)` and it doesn't work on Windows whereas it works on Linux.\r\nError on Windows is `ValueError: too many values to unpack `\r\n\r\n\r\n### Source code\r\nI tracked down the issue in TF code and it is related to how _GetMatchingPaths_ works. See difference between [Windows implementation](https://github.com/tensorflow/tensorflow/blob/e7f158858479400f17a1b6351e9827e3aa83e7ff/tensorflow/core/platform/windows/windows_file_system.cc) and [POSIX implementation](https://github.com/tensorflow/tensorflow/blob/e7f158858479400f17a1b6351e9827e3aa83e7ff/tensorflow/core/platform/posix/posix_file_system.cc).\r\nBoth of them refer to [internal::GetMatchingPaths](https://github.com/tensorflow/tensorflow/blob/6ba9573a702ea9e1290517cce4e5f73a14552ad9/tensorflow/core/platform/file_system_helper.cc) which seems to be the root cause of the issue.\r\n\r\n\r\n", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nOS Platform and Distribution\nTensorFlow installed from\nTensorFlow version\nBazel version\nCUDA/cuDNN version\nGPU model and memory", "Sure. Please find below the details.\r\n\r\nHave I written custom code : No\r\nOS Platform and Distribution : Windows 7\r\nTensorFlow installed from : pip \r\nTensorFlow version: Tensorflow 'v1.8.0-0-g93bc2e2072' 1.8.0\r\nBazel version : N/A\r\nCUDA/cuDNN version : N/A\r\nGPU model and memory : N/A", "@rohan100jain - do you have any experience with gfile.Glob on Windows?", "I checked the code and maybe found the reason.\r\n\r\nThis is because Env::MatchPath (What the tf.gfile.Glob will last use) has different behavior on Windows and Linux.\r\nThere is a related issue which was already closed \r\n[#15501](https://github.com/tensorflow/tensorflow/issues/15501)\r\n\r\nMaybe @snnn and @jart will have some suggestions?", "Can we use FreeBSD code in Tensorflow? Is there any legal concern?", "It's been two years since the last update. Do `contributions welcome`-issues return to the backlog at some point?", "Sorry I couldn't continue working on this. TF's source tree has changed a lot in the past 2 years, I'm not familiar with the latest. ", "Can you try with the 2.4 release please?", "Should be fixed by the 2.4 release. If it isn't, please reopen."]}, {"number": 19377, "title": "Make CMake on TensorFlow Incrementally Compile on Windows (#14194)", "body": "", "comments": ["\nThanks for your pull request. It looks like this may be your first contribution to a Google open source project (if not, look below for help). Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit <https://cla.developers.google.com/> to sign.**\n\nOnce you've signed (or fixed any issues), please reply here (e.g. `I signed it!`) and we'll verify it.\n\n----\n\n#### What to do if you already signed the CLA\n\n##### Individual signers\n\n*   It's possible we don't have your GitHub username or you're using a different email address on your commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n\n##### Corporate signers\n\n*   Your company has a Point of Contact who decides which employees are authorized to participate. Ask your POC to be added to the group of authorized contributors. If you don't know who your Point of Contact is, direct the Google project maintainer to [go/cla#troubleshoot](go/cla#troubleshoot) ([Public version](https://opensource.google.com/docs/cla/#troubleshoot)).\n*   The email used to register you as an authorized contributor must be the email used for the Git commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n*   The email used to register you as an authorized contributor must also be [attached to your GitHub account](https://github.com/settings/emails).\n\t\t\n\n<!-- need_sender_cla -->", "I signed it!", "So there's good news and bad news.\n\n:thumbsup: The good news is that everyone that needs to sign a CLA (the pull request submitter and all commit authors) have done so.  Everything is all good there.\n\n:confused: The bad news is that it appears that one or more commits were authored or co-authored by someone other than the pull request submitter.  We need to confirm that all authors are ok with their commits being contributed to this project.  Please have them confirm that here in the pull request.\n\n*Note to project maintainer: This is a terminal state, meaning the `cla/google` commit status will not change from this state. It's up to you to confirm consent of the commit author(s) and merge this pull request when appropriate.*\n\n<!-- need_author_consent -->", "@headupinclouds I would like to use your commit on my pull request. Is that ok to you?", "@brunomorishita, @headupinclouds is this PR still WIP?", "@brunomorishita  wondering if you still need this PR , if yes can you please resolve conflicts", "> @brunomorishita wondering if you still need this PR , if yes can you please resolve conflicts\r\n\r\nHi @yifeif,\r\nI don't need this PR anymore"]}, {"number": 19375, "title": "python3: Relink issue", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 78.04\r\n- **TensorFlow installed from (source or binary)**: Binary\r\n- **TensorFlow version (use command below)**: 1.8.0\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: n/a\r\n- **GCC/Compiler version (if compiling from source)**: n/a\r\n- **CUDA/cuDNN version**: 9.2\r\n- **GPU model and memory**:  GeForce GTX 980 Ti - 6GB\r\n- **Exact command to reproduce**:\r\npython3 \r\nimport tensorflow as tf\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\n== cat /etc/issue ===============================================\r\nLinux blue 4.15.0-20-generic #21-Ubuntu SMP Tue Apr 24 06:16:15 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"18.04 LTS (Bionic Beaver)\"\r\nVERSION_ID=\"18.04\"\r\nVERSION_CODENAME=bionic\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0\r\nCopyright (C) 2017 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux blue 4.15.0-20-generic #21-Ubuntu SMP Tue Apr 24 06:16:15 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.14.3)\r\nprotobuf (3.5.2.post1)\r\ntensorflow-gpu (1.8.0)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\nImportError: libcufft.so.9.0: cannot open shared object file: No such file or directory\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/install_sources#common_installation_problems\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nFri May 18 09:03:01 2018       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 396.26                 Driver Version: 396.26                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 980 Ti  Off  | 00000000:05:00.0 Off |                  N/A |\r\n| 22%   60C    P0    71W / 250W |      0MiB /  6080MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   1  GeForce GTX 980 Ti  Off  | 00000000:06:00.0 Off |                  N/A |\r\n| 22%   57C    P0    67W / 250W |      0MiB /  6083MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   2  GeForce GTX 980 Ti  Off  | 00000000:09:00.0 Off |                  N/A |\r\n|  0%   50C    P0    59W / 250W |      0MiB /  6083MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-9.2/doc/man/man7/libcudart.7\r\n/usr/local/cuda-9.2/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudart.so.9.2.88\r\n/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudart_static.a\r\n\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\n\r\nCan't run tensorflow because of this error:\r\n\r\npython3: Relink `/lib/x86_64-linux-gnu/libudev.so.1' with `/lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol `clock_gettime'\r\nSegmentation fault (core dumped)\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n", "comments": ["Having the same issue.\r\n", "I have the same problem when I tried to preprocess pictures before training, maybe it's nothing wrong with tensorflow.\r\nI'm using:\r\n+ Windows Subsystem for Linux (Ubuntu 18.04)\r\n+ python 3.6.5\r\n+ opencv-python 3.4.1.15\r\n\r\n```\r\nPython 3.6.5 (default, Apr  1 2018, 05:46:30)\r\n[GCC 7.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import cv2\r\npython3: Relink `/lib/x86_64-linux-gnu/libudev.so.1' with `/lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol `clock_gettime'\r\nSegmentation fault (core dumped)\r\n```\r\nI'm confused now. I'm not sure whether it's the problem of WSL or opencv-python. My codes work fine on Ubuntu16.04 .", "Now I find the solution from [here](https://unix.stackexchange.com/questions/444697/cannot-run-python-file-asks-to-relink-libraries). Just need to install opencv-python correctly.", "My problem was that the Nvidia drivers weren't installed properly. Now it's fine.\r\n", "My solution seems installing np_utils. Will test some more tomorrow and it this issue seems solved I'll close this Issue.\r\n\r\nSeems solved by installing np_utils (pip install np_utils). Now works for python2 and python3(.6)", "I fixed it by following:\r\n```bash\r\nexport PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}\r\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\r\n```", "I have the same issue; none of the above worked for me. I'm running IntelliJ with a Python 3.6 interpreter that is inside a Tensorflow virtualenv. I am using:\r\n\r\n- Ubuntu 18.04 (Cosmic Cuttlefish)\r\n- cuDNN  7.1.2\r\n- nvidia-cuda-toolkit 9.1.85\r\n\r\n`/home/wiebe/virtual/tensorflow/bin/python3.6: Relink '/lib/x86_64-linux-gnu/libudev.so.1' with '/lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol 'clock_gettime'`\r\n\r\nAs I am seeing individual solutions from so many different directions, I am pretty much at a loss as to where this is orginating from.", "@wieberinsma try to use CUDA 9.0.\r\nThe official site says that it needs CUDA 9.0.", "Which official site do you mean? I'm pretty sure the pre-installed nvidia packages (nvida-cuda-dev, etc.) should be in sync with the toolkit, which is all v9.1.85. Toolkit 9.2 is apparently not yet supported for Ubuntu 18.10.", "Tensorflow's website.\r\nDo not use apt get nvidia-cuda-toolkit.\r\nTry to install CUDA 9.0 by deb.\r\nYou can download it from Nvidia (just search CUDA 9.0 on Google) and copy cudnn files into /.../cuda\r\nThen set environment path.\r\nI think it would work.\r\n\r\nSorry for bad English :( ", "I think your problem is caused by cudnn.\r\nDownload this.\r\nhttps://imgur.com/a/Zlp30No", "I will try, but I am a bit confused. cuDNN is not the same as the CUDA toolkit. Also, if you are referring to this CUDA toolkit https://developer.nvidia.com/cuda-90-download-archive, that one is not compatible with Ubuntu 18.04 (I have tried).", "You can install cuda-9-0 via aptitude command, it will fix something automatically.\r\nIn a word,  I install Tensorflow by following: \r\n\r\n**step 1: nvidia driver**\r\n**step 2: install cuda**\r\n```bash\r\nsudo dpkg -i cuda-local.....deb\r\nsudo apt-key add <..>  # it will be printed after step 1. \r\n                       # If u don't see this be printed, it might be some wrong while step 1.\r\nsudo aptitude install cuda\r\n# In this step, it might show somethings, just enter yes.\r\n```\r\n**step 3: install cudnn**\r\n\r\njust copy files into the /..../cuda-9-0/ \r\n\r\n**step 4: set environment**\r\nthis step is so important, I tried just type  `export LD_LIBRARY_PATH=..` in command line, but it would be remove after reboot.\r\nso add the following lines into the file ~/.bashrc or ~/.zshrc\r\n```bash\r\nexport PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}\r\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\r\n\r\n```\r\n\r\nor edit /etc/environment\r\n```bash\r\nPATH=/usr/local/cuda-9.0/bin:.... # place before the old. Don't forget \":\"\r\nLD_LIBRARY_PATH=/usr/local/cuda/lib64\r\n```\r\nthen reboot.\r\nBy doing those, I think it could work.", "You could also do something like:\r\n\r\nwget https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda_9.0.176_384.81_linux-run\r\nchmod 755 cuda_9.0.176_384.81_linux-run\r\n./cuda_9.0.176_384.81_linux-run --override\r\n\r\necho /usr/local/cuda-9.0/lib64 >   /etc/ld.so.conf.d/cuda-9-0.conf", "Thanks for the suggestions guys, will try to see if this fixes it soon.", "Have the same issue when importing tensorflow (only fails with tensorflow-gpu):\r\n\r\n```\r\ntf_gpu) [---@---:/home/...]% python3\r\nPython 3.6.5 (default, Apr  1 2018, 05:46:30) \r\n[GCC 7.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow\r\npython3: Relink `/lib/x86_64-linux-gnu/libudev.so.1' with `/lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol `clock_gettime'\r\nzsh: segmentation fault (core dumped)  python3\r\n\r\n```\r\n\r\nSome info about my setup:\r\n1. CUDA toolkit 9.0\r\n2. set the PATH and LD_LIBRARY_PATH environment variables as suggested\r\n3. Installed nvidia drivers using ```ubuntu-drivers autoinstall```\r\n4. Installed ```opencv-python``` and ```np_utils``` as suggested", "I have also tried every solution listed here, and the same issue persists\r\n\r\n- cuda 9.0 using \"local install\"\r\n- set PATH and LD_LIBRARY_PATH\r\n- library path in ld.so.conf.d and ran ldconfig\r\n- nvidia driver 390.87\r\n- installed opencv-python and np_utils", "I tried all ways mentioned above but none worked, this is very upsetting", "For me what worked on linux mint 19 tara:\r\n- I have a 6GB GTX 1060 card\r\n- install 390 driver just with `apt install nvidia-driver-390`\r\n- install cuda-9.0 from the nvidia website + all these 4 patches on top\r\n- .... here i got this error....\r\n- So fix was to really sign up for the nvidia developer program, and download cudnn 7.3.1 for linux for cuda 9.0\r\n\r\nNow \"import tensorflow\" works in my python3. \ud83d\udc4d \r\nCheerio!", "Here's how I fixed this issue for me:\r\n**Things that didn't fix the issue**\r\n1. Installed all the dependencies for the thing I was working on (hypergan in this case). \r\n2. Installed latest linux nvidia drivers (390 in my case)\r\n3. Download and install Cuda 9.0\r\n\r\n**Thing that worked**\r\nInstalling Cudnn (both, the runtime and the development cudnn) from Nvidia using the .deb pacakge.(The package was meant for ubuntu 16.04 but it worked fine for me on 18.04)", "I am on a Titan Volta with Ubuntu 18.04, cuda10, nvidia driver 410. Installing cudnn (7.4) fixed it for me.", "March 2019 update. \r\n\r\n`tensorflow-gpu` is built against `cuda-10.0`. Ubunty 18.04 has `cuda-10.1` and that is incompatible with `tensorflow-gpu`.\r\n\r\nOne has to go to NVidia developer website to install CUDA from [CUDA Toolkit 10.0 Archive](https://developer.nvidia.com/cuda-10.0-download-archive) **_along_** with the corresponding [cuDNN for CUDA 10.0](https://developer.nvidia.com/rdp/cudnn-download) because the latter is not packaged with `cuda` meta-package for no good reason.\r\n\r\nIf you don't install `cuDNN` you get that `python: Relink /lib/x86_64-linux-gnu/libudev.so.1 with /lib/x86_64-linux-gnu/librt.so.1 for IFUNC symbol clock_gettime` error, despite the fact that `libudev` links `librt` all right.\r\n\r\nNo need to set `LD_LIBRARY_PATH` (that is a wrong solution in 99% of cases, see [LD_LIBRARY_PATH considered harmful](https://gms.tf/ld_library_path-considered-harmful.html)).\r\n\r\n`tensorflow-gpu` should work in Ubuntu 18.04 out of the box.", "@betachat Adding to my paths like you mentioned fixed my problem! Thank you!", "I got the same problem.  \r\npython3: Relink /lib/x86_64-linux-gnu/libudev.so.1' with /lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol `clock_gettime'\r\nSegmentation fault (core dumped)\r\neven after correct CUDA and CUDNN installation.  \r\nFinally **installing opencv  (apt install python3-opencv) worked!** \r\nStrange...?", "Solved my problem with replacing cudnn-9.1 by cudnn-9.0 .\r\ncheck [this](https://medium.com/@lookfwd/install-tensorflow-1-12-gpu-on-g3-aws-ubuntu-18-04-instances-4cd884f06ec2) out  for a perfect installation guide.", "I had the same issue and it was resolved by \"installing\" cuDNN", "> I have the same problem when I tried to preprocess pictures before training, maybe it's nothing wrong with tensorflow.\r\n> I'm using:\r\n> \r\n> * Windows Subsystem for Linux (Ubuntu 18.04)\r\n> * python 3.6.5\r\n> * opencv-python 3.4.1.15\r\n> \r\n> ```\r\n> Python 3.6.5 (default, Apr  1 2018, 05:46:30)\r\n> [GCC 7.3.0] on linux\r\n> Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n> >>> import cv2\r\n> python3: Relink `/lib/x86_64-linux-gnu/libudev.so.1' with `/lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol `clock_gettime'\r\n> Segmentation fault (core dumped)\r\n> ```\r\n> \r\n> I'm confused now. I'm not sure whether it's the problem of WSL or opencv-python. My codes work fine on Ubuntu16.04 .\r\n\r\nDoes your problem solved??\r\n", "Does your CPU support AVX ?", "Thanks for your reply it worked... But the problem I am facing is the\nproblem that our cloud instance doesn't connect it with the webcam... Aws\ncloud with hardware connection problem I am facing now\n\nOn Wed, Jul 3, 2019, 10:48 Ray1422 <notifications@github.com> wrote:\n\n> Does your CPU support AVX ?\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/19375?email_source=notifications&email_token=AJ7R3N4Y6FVUICZ6XKLF5GDP5QZCZA5CNFSM4FARQ4XKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODZDI5PI#issuecomment-507940541>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AJ7R3NZXNCIPKXLQNYKSMNDP5QZCZANCNFSM4FARQ4XA>\n> .\n>\n", "> Now I find the solution from [here](https://unix.stackexchange.com/questions/444697/cannot-run-python-file-asks-to-relink-libraries). Just need to install opencv-python correctly.\r\n\r\nThis worked for me. Thanks", "So far nothing of the above-mentioned steps resolved my problem.\r\n\r\nAs for my issue:\r\n\r\n```\r\nuser:~/$ jupyter qtconsole\r\n/home/linuxbrew/.linuxbrew/opt/python@3.8/bin/python3.8:\r\nRelink `/usr/lib/x86_64-linux-gnu/libQtCore.so.4' with `/lib/x86_64-linux-gnu/librt.so.1' for IFUNC symbol `clock_gettime'\r\nSegmentation fault (core dumped)\r\n```", "No suggested fixes in this thread worked for me, but i tried importing cv2 alone based on the comments and it threw and error. Googling that error turned up this: https://stackoverflow.com/questions/55313610/importerror-libgl-so-1-cannot-open-shared-object-file-no-such-file-or-directo\r\n\r\nWhich did in fact fix the issue for me.", "I still use Ubuntu 18.04. Things have got better.\r\n\r\nThe working solution as of the time of this post is:\r\n\r\n1. Uninstall all NVidia packages which were installed from Ubuntu repos. \r\n2. Follow https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation instructions to install NVidia repo.\r\n3. Install the required version of CUDA library (the repo provides multiple versions), along with NVidia kernel and Xorg driver, using a tool of your choice. I used Muon Package Manager.\r\n\r\nThat solved it for me.\r\n", "I fix this issue by activate virutal environment in this topic https://stackoverflow.com/questions/53070868/how-to-install-python3-7-and-create-a-virtualenv-with-pip-on-ubuntu-18-04\r\n"]}, {"number": 19374, "title": "TensorFlow import issue with Deepfix.", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 1.0.1\r\n- **Python version**:  python -V\r\nPython 2.7.14 :: Anaconda, Inc.\r\n\r\n- **Bazel version (if compiling from source)**:\r\n.........................................................................\r\nBuild label: 0.11.1\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Tue May 14 07:48:23 +50148 (1520362424903)\r\nBuild timestamp: 1520362424903\r\nBuild timestamp as int: 1520362424903\r\n\r\n- **GCC/Compiler version (if compiling from source)**:\r\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nThe output of above script is as follows\r\n\r\n`ujjval@ujjval-VPCEH18FG:~/Downloads/tensorflow-master/tools$ ./tf_env_collect.shCollecting system information...\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nWrote environment to tf_env.txt. You can review the contents of that file.\r\nand use it to populate the fields in the github issue template.\r\n\r\ncat tf_env.txt`\r\n\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n('v1.0.0-65-g4763edf-dirty', '1.0.1')\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\nI have some problems in importing the Tensorflow in Python. I am using Ubuntu 16.04. I am trying to perform Deepfix experiments. \r\nAs given on the Deepfix website [https://bitbucket.org/iiscseal/deepfix](url) I have tried running the script\r\nsource init.sh\r\nbut it gives me the error. Here is my output to the command\r\n\r\n`~/iiscseal-deepfix-7a4f0b6122d4$ source init.sh\r\nSetting up a new virtual environment...\r\n\r\n\r\nCondaValueError: prefix already exists: /home/ujjval/miniconda2/envs/deepfix\r\n\r\ndone!\r\nRequirement already satisfied: subprocess32 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (3.5.0)\r\nRequirement already satisfied: tensorflow-gpu==1.0.1 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (1.0.1)\r\nRequirement already satisfied: regex in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (2018.2.21)\r\nRequirement already satisfied: mock>=2.0.0 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from tensorflow-gpu==1.0.1) (2.0.0)\r\nRequirement already satisfied: six>=1.10.0 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from tensorflow-gpu==1.0.1) (1.11.0)\r\nRequirement already satisfied: numpy>=1.11.0 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from tensorflow-gpu==1.0.1) (1.14.3)\r\nRequirement already satisfied: protobuf>=3.1.0 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from tensorflow-gpu==1.0.1) (3.5.2.post1)\r\nRequirement already satisfied: wheel in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from tensorflow-gpu==1.0.1) (0.31.0)\r\nRequirement already satisfied: funcsigs>=1; python_version < \"3.3\" in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from mock>=2.0.0->tensorflow-gpu==1.0.1) (1.0.2)\r\nRequirement already satisfied: pbr>=0.11 in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from mock>=2.0.0->tensorflow-gpu==1.0.1) (4.0.2)\r\nRequirement already satisfied: setuptools in /home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages (from protobuf>=3.1.0->tensorflow-gpu==1.0.1) (39.1.0)\r\nmkdir: cannot create directory \u2018temp\u2019: File exists\r\nmkdir: cannot create directory \u2018logs\u2019: File exists\r\nmkdir: cannot create directory \u2018data/results\u2019: File exists\r\n\r\nDownloading DeepFix dataset...\r\nPreprocessing DeepFix dataset...\r\nMake sure that your tensorflow is version 1.0.1 before proceeding, checking your tensorflow version now!\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import *\r\n  File \"/home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages/tensorflow/python/__init__.py\", line 72, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages/tensorflow/python/__init__.py\", line 61, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\r\n    _pywrap_tensorflow = swig_import_helper()\r\n  File \"/home/ujjval/miniconda2/envs/deepfix/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\r\nImportError: libcudart.so.8.0: cannot open shared object file: No such file or directory\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/get_started/os_setup.md#import_error\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n`\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n", "comments": ["It looks like there's something wrong with your cuda environment... maybe @reedwm can comment more.", "Also cc @tfboyd ", "Do you have CUDA installed? Try running the deviceQuery CUDA program, located at `$CUDA_DIR/extras/demo_suite/deviceQuery`", "CUDA is either missing or not in your path.  You will also need cuDNN.  I suggest the following:\r\n\r\nInstall the most recent version of TensorFlow for GPU with `pip install tensorflow-gpu`  or following one of the other methods on this page.  The page also has instructions for installing CUDA.  \r\nhttps://www.tensorflow.org/install/install_linux.  Note that recent versions of TensorFlow use CUDA 9.0 and CUDA 1.0.1 used CUDA 8.0", "Okey!! so the problem is CUDA. Well I have followed some instruction for both CUDA and Cudnn. I have CUDA toolkit 9.4 and Cudnn version as bellow. I want to use Tensorflow-gpu version 1.0.1 because it has more functionalities and also the Deepfix program tells me to install version 1.0.1 only.!! \r\n\r\nAlso, Do I need to first uninstall current versions of CUDA and then install the next versions or I can just install them directly.?\r\n\r\n`~$ nvcc --version\r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2015 NVIDIA Corporation\r\nBuilt on Tue_Aug_11_14:27:32_CDT_2015\r\nCuda compilation tools, release 7.5, V7.5.17\r\n`\r\n\r\nAlso I have problem in ubuntu that I cant install all the CUDA requirements, if I do so it cretes a login loop..!!\r\n\r\nSee this link and the 3rd answer is what creates login loop\r\n[https://askubuntu.com/questions/223501/ubuntu-gets-stuck-in-a-login-loop](url)", "Nagging Assignee @skye: It has been 89 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Unfortunately we cannot help you with your CUDA environment here, as we use github for Tensorflow bugs and feature requests. I suggest posting on StackOverflow if this is still an issue."]}, {"number": 19373, "title": " No gradient defined for operation 'SparseSlice'", "body": "i am working on solve a indeterminate equation optimization with sparse_slice functions and met this error.\r\nit's strange all sparse functions have gradient except this one. any suggestion how can i avoid this problem?\r\n\r\n### Source code / logs\r\nimport tensorflow as tf\r\nsparse_values = tf.identity(tf.Variable(tf.constant([1., 2., 3.])))\r\nsparse_indices = tf.constant([[0, 0], [1, 1], [2, 2]], dtype=tf.int64)\r\nsparse_matrix = tf.SparseTensor(sparse_indices, sparse_values, [3, 3])\r\nsparse_slice = tf.sparse_slice(sparse_matrix,[0,0], [2,2])\r\nmultiplied = tf.sparse_tensor_dense_matmul(sparse_slice, tf.eye(2))\r\nloss = tf.reduce_sum(multiplied)\r\ngradients = tf.gradients(loss, [sparse_values])\r\nwith tf.Session() as session:\r\n    tf.global_variables_initializer().run()\r\n    print(session.run(gradients))\r\n\r\n", "comments": ["I'm also running into this issue with a different use case. No workaround I'm afraid but if possible to solve I'd much appreciate it!", "/CC @ebrevdo any plans for a sparse slice gradient? Mark as contributions welcome if not.", "Hi, I write a gradient op for SparseSlice in #19663. Could you take a look?", "Nagging Assignee @ebrevdo: It has been 15 days with no activity and this issue has an assignee. Please update the label and/or status accordingly."]}, {"number": 19372, "title": "Can not allocate memory for the interpreter in Tensorflow_lite. When i initialize the Interpreter Object in android.", "body": "\r\n------------------------\r\n\r\n### System information\r\nTensorFlow version :1.8.0\r\n\r\n### Describe the problem\r\nPurpose:Convert a custom model to a quantize tensorflow lite model.\r\n\r\n[This is the model structure](https://drive.google.com/file/d/1XV1FZa0ChoJGuR8n-gxK4Ry67CVn5aVm/view?usp=sharing)\r\nThe model structure is similar to mobilenet_v1\r\n\r\n_Step\uff1a_\r\n1. Quantize Training (add tf.contrib.quantize.create_training_graph() in my code\uff09\r\n\r\n2. Generate .pb (add tf.contrib.quantize.create_eval_graph() in my code)\r\n\r\n3. Use the toco to convert my pb file to tflite. The command:\r\nbazel-bin/tensorflow/contrib/lite/toco/toco \\\r\n--input_file=/home/admin_pc/model_test/output_224_qg.pb \\\r\n--output_file=/home/admin_pc/model_test/mobilenet_qg.tflite \\\r\n--input_fromat=TENSORFLOW_GRAPHDEF \\\r\n--output_format=TFLITE \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--input_array=image \\\r\n--output_array=Openpose/concat_stage7 \\\r\n--input_shape=1,224,224,3 \\\r\n--std_value=128 --mean_value=128 \r\n\r\n    It was succeed. But some warning occured,just like this:\r\n    tensorflow/contrib/lite/toco/graph_transformations/hardcode_min_max.cc:120] Tweaking the MinMax of the output array of {Concatenation operator with output Openpose/MConv_Stage2_concat}, because we want all inputs and outputs of a Concatenation operator to have the same MinMax so that it can be implemented as a pure byte-copy, no arithmetic.\r\n    tensorflow/contrib/lite/toco/graph_transformations/hardcode_min_max.cc:105] Tweaking the MinMax of array Conv2d_3_pool, which is an input to {Concatenation operator with output feat_concat}, because we want all inputs and outputs of a Concatenation operator to have the same MinMax so that it can be implemented as a pure byte-copy, no arithmetic.\r\n\r\n4. I add the quantize tflite to my android project. And run,some error occured when i init the Interpreter.\r\njava.lang.NullPointerException: Can not allocate memory for the interpreter\r\n\r\nI don't know it's a bug or my fault.\r\n", "comments": ["I have the same problem :( ", "Could you show your java code you are using to invoke?\r\nAlso the full stack trace of the java would be great.\r\n", "@aselle this issue is the same as #19607 ,maybe.", "Nagging Assignee @aselle: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", " I was also getting the same error, But then I found that  i have not called tf.global_variables_initializer() in my model. Check if your model do not have any error.", "Please provide a reproducible test case. Also, there was recently some memory arena bugs fixed, so please try the latest version of TensorFlow lite (build from source rather than using the AAR).", "It has been 14 days with no activity and the `awaiting response` label was assigned. Is this still an issue?", "yes . everything is ok when i use the latest version of tensorflow lite(build from source)). thanks"]}, {"number": 19371, "title": "Failed to compile r1.8 ", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: N\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: r1.8\r\n- **Python version**:  2.7\r\n- **Bazel version (if compiling from source)**: 0.13.0\r\n- **GCC/Compiler version (if compiling from source)**: 5.4.0\r\n- **CUDA/cuDNN version**: CUDA 9.2.88+patch 1, cuDNN 7.1.3\r\n- **GPU model and memory**: gtx 1050 ti 4G, gtx 1050 ti 4G\r\n- **Exact command to reproduce**:\r\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures\r\n\r\n### Describe the problem\r\nI tried to upgrade from r1.3 to r1.8 from source and learned my CUDA version is a bit old. Then I got the latest version from nvidia's website, which is CUDA 9.2.88+patch 1, cuDNN 7.1.3, and the driver 396.26. Running the above bazel build command, I got a failure as the provided logs in the below. It seems \r\nCUDA 9.2 libraries are not in defined references. \r\n\r\n### Source code / logs\r\nERROR: /home/alan/tensorflow/tensorflow/contrib/tensor_forest/hybrid/BUILD:49:1: Linking of rule '//tensorflow/contrib/tensor_forest/hybrid:gen_training_ops_py_wrappers_cc' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command \r\n  (cd /home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PWD=/proc/self/cwd \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/contrib/tensor_forest/hybrid/gen_training_ops_py_wrappers_cc '-Wl,-rpath,$ORIGIN/../../../../_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow' '-Wl,-rpath,$ORIGIN/../../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' -Lbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow -Lbazel-out/host/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..,-rpath,$ORIGIN/../..,-rpath,$ORIGIN/../../..' -Wl,-z,notext -Wl,-z,notext -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,-S -Wl,@bazel-out/host/bin/tensorflow/contrib/tensor_forest/hybrid/gen_training_ops_py_wrappers_cc-2.params)\r\n/usr/bin/ld: warning: libcublas.so.9.2, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n/usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n/usr/bin/ld: warning: libcufft.so.9.2, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n/usr/bin/ld: warning: libcurand.so.9.2, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftMakePlanMany@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtrsm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIzamax_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhpr2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreate@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreatePoolingDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDzasum_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandDestroyGenerator@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateConvolutionDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnConvolutionBiasActivationForward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIsamax_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyConvolutionDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSgemm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZherk_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSspr_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsymm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIdamax_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyFilterDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftPlan3d@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSetStream_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasGemmEx@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhpmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCsyrk_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIsamin_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCscal_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftExecD2Z@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSrotg_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnLRNCrossChannelForward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsyrk_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateRNNDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyRNNDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnConvolutionBackwardData@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftSetWorkArea@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateFilterDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZher2k_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDrotm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCsyr2k_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnLRNCrossChannelBackward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftMakePlan2d@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDgbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsyr2k_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStpsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStrmm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyLRNDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroy@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDznrm2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtrsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZgemmBatched@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZdscal_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDdot_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDropoutGetStatesSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionForwardWorkspaceSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSgemv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetActivationDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetPoolingNdDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetRNNWorkspaceSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasChbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStpmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCgemv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionForwardAlgorithm@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtrsm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnConvolutionBackwardBias@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftMakePlan1d@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCsymm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtrmm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSgemmBatched@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSgbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDasum_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasScopy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDrotmg_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetTensorNdDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZgemv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCaxpy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasChpr2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnAddTensor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZgemm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtrmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyActivationDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDrotg_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZgerc_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhemv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsyrk_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetConvolutionNdDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSrotmg_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDgemmBatched@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnPoolingBackward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDspmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnRNNBackwardData@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetFilterNdDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCrotg_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCher_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftExecR2C@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSdot_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZrotg_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCsscal_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetProperty@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionBackwardFilterWorkspaceSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasChemm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtpmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDscal_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDger_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStrsm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetRNNTrainingReserveSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsyr_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsyr2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandSetStream@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasChemv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDrot_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSaxpy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandGenerateUniformDouble@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandSetPseudoRandomGeneratorSeed@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandGenerateUniform@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetLRNDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnBatchNormalizationForwardTraining@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDnrm2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtrsm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyTensorDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyDropoutDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsymv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtpsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSspmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateTensorDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCgeru_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSrot_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetStream@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtrmm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtpsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIdamin_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIcamin_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsymv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSrotm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhpr_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCherk_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasChpmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnBatchNormalizationForwardInference@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCdotu_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateDropoutDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtpmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZsyr2k_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCgerc_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZscal_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtpmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandGenerateNormal@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsyr_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftDestroy@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhemm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftCreate@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZgbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSetMathMode@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtrmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnDestroyPoolingDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtbsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateActivationDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSspr2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSger_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSasum_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSsymm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDcopy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftPlanMany@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDspr_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDswap_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnRNNForwardInference@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStrmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandGenerateNormalDouble@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCreate_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIzamin_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftPlan1d@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftSetStream@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftExecZ2Z@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionBackwardDataAlgorithm@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnActivationForward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetRNNLinLayerMatrixParams@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetRNNDescriptor_v6@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionBackwardDataWorkspaceSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasChpr_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandSetGeneratorOffset@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnBatchNormalizationBackward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStbsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSetPointerMode_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetDropoutDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZgeru_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStrsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCswap_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDgemv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDspr2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCher2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCdotc_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDestroy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftSetAutoAllocation@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsyr2k_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCcopy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnConvolutionForward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnConvolutionBackwardFilter@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCgemm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCgbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZher2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionBackwardFilterAlgorithm@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZswap_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetRNNLinLayerBiasParams@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtrmm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetFilterNdDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetRNNMatrixMathType@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSscal_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZsyrk_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetRNNParamsSize@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasScnrm2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZsymm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZher_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasIcamax_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnGetConvolutionNdForwardOutputDim@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftMakePlan3d@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSnrm2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasScasum_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCher2k_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSgemmEx@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetTensor4dDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtpsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasSswap_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnRNNBackwardWeights@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtrsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZtbsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtbsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZdotc_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasStbmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZdrot_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftExecC2R@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnRNNForwardTraining@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDgemm_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnTransformTensor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCtrmv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftExecC2C@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCsrot_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZdotu_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDtrsv_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnSetConvolutionMathType@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnPoolingForward@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDaxpy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftPlan2d@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cufftExecZ2D@libcufft.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `curandCreateGenerator@libcurand.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZaxpy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateLRNDescriptor@libcudnn.so.7'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasGetMathMode@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsyr2_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZcopy_v2@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasCgemmBatched@libcublas.so.9.2'\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Stensor_Uforest_Shybrid_Cgen_Utraining_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasGetPointerMode_v2@libcublas.so.9.2'\r\ncollect2: error: ld returned 1 exit status\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 12.553s, Critical Path: 2.90s\r\nINFO: 48 processes, local.\r\nFAILED: Build did NOT complete successfully\r\n", "comments": ["It seems CUDA 9.2.88+patch 1 doesn't add its conf file to /etc/ld.so.conf.d. Another interesting finding is the cuDNN SDK which I downloaded from nvidia website yesterday. Its version is 7.1.3. I suppose this is a wrong one. I couldn't find it on the download website any more. It's replaced by 7.1.4. \r\nI have downloaded 7.1.4 and manually fix the ldconfig issue. The following build command could compile much more files, but still end up with another build failure.\r\n\r\n**Exact command to reproduce**:\r\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures\r\n\r\n**Error logs**:\r\nERROR: /home/alan/tensorflow/tensorflow/tools/api/generator/BUILD:27:1: Executing genrule //tensorflow/tools/api/generator:python_api_gen failed (Exit 1): bash failed: error executing command \r\n  (cd /home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cuda-9.2 \\\r\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\r\n    LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 \\\r\n    PATH=/home/alan/bin:/home/alan/.local/bin:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin \\\r\n    PYTHON_BIN_PATH=/usr/bin/python2.7 \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1,6.1 \\\r\n    TF_CUDA_VERSION=9.2 \\\r\n    TF_CUDNN_VERSION=7 \\\r\n    TF_NCCL_VERSION=1 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/app/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/bitwise/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/compat/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/stat_summarizer/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/data/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/bijectors/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/errors/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/export/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/inputs/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/feature_column/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/gfile/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/graph_util/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/image/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/initializers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/activations/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/densenet/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_resnet_v2/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_v3/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/mobilenet/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/nasnet/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/resnet50/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg16/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg19/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/xception/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/backend/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/callbacks/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/constraints/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/boston_housing/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar10/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar100/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/fashion_mnist/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/imdb/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/mnist/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/reuters/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/initializers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/layers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/losses/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/metrics/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/models/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/optimizers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/image/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/sequence/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/text/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/regularizers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/utils/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/scikit_learn/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/layers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/linalg/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/logging/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/losses/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/manip/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/math/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/metrics/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/rnn_cell/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/profiler/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/python_io/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/resource_loader/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/builder/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/constants/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/loader/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/main_op/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_constants/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_def_utils/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/tag_constants/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/utils/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sets/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/spectral/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/summary/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sysconfig/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/test/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/queue_runner/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/user_ops/__init__.py')\r\nTraceback (most recent call last):\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/tools/api/generator/create_python_api.py\", line 26, in <module>\r\n    from tensorflow.python.util import tf_decorator\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 63, in <module>\r\n    from tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 104, in <module>\r\n    from tensorflow.python.framework.importer import import_graph_def\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 32, in <module>\r\n    from tensorflow.python.framework import function\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 37, in <module>\r\n    from tensorflow.python.ops import variable_scope as vs\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/ops/variable_scope.py\", line 24, in <module>\r\n    import enum  # pylint: disable=g-bad-import-order\r\nImportError: No module named enum\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 1.005s, Critical Path: 0.29s\r\nINFO: 1 process, local.\r\nFAILED: Build did NOT complete successfully", "The following command fixes the ImportError, and makes a successful build.\r\npip install enum34\r\nIt seems working now."]}, {"number": 19370, "title": "Error with version of protocol buf", "body": "Helo ,  the error is shwon as\r\n [libprotobuf FATAL google/protobuf/stubs/common.cc:61] This program requires version 3.5.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.  Please update your library.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in \"bazel-out/arm-opt/genfiles/tensorflow/contrib/tpu/proto/tpu_embedding_config.pb.cc\".)\r\nterminate called after throwing an instance of 'google::protobuf::FatalException'\r\n  what():  This program requires version 3.5.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.  Please update your library.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in \"bazel-out/arm-opt/genfiles/tensorflow/contrib/tpu/proto/tpu_embedding_config.pb.cc\".)\r\nAborted (core dumped)\r\n\r\nwhy 2.6.1?\r\nnvidia@tegra-ubuntu:~$ protoc --version\r\nlibprotoc 3.5.1\r\n\r\nnvidia@tegra-ubuntu:~$ pip list\r\nprotobuf (3.5.2.post1)\r\n\r\nWhAT happend? Thank u!\r\n\r\n\r\n", "comments": ["Hi, I am having the same issue with the exact same lib versions as you. I found very similar problems in:\r\nhttps://github.com/CMU-Perceptual-Computing-Lab/openpose/issues/512\r\nhttps://github.com/BVLC/caffe/issues/5711t\r\nBut the proposed solutions there didn't work for me. ", "Nagging Assignee @shivaniag: It has been 23 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Nagging Assignee @shivaniag: It has been 38 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "I have the same problem with you!\r\nI have been stuck for almost a week.", "Any solution for this issue, please. I am too stuck with the same error", "I got the same issue. If it is solved, please @ me...", "Same problem.", "Any updates on this? having same problem :(", "To work around this issue, one can surround the `tensorflow` import with:\r\n```python3\r\nimport os\r\nimport sys\r\n\r\nold_dlopen_flags = sys.getdlopenflags()\r\nsys.setdlopenflags(os.RTLD_DEEPBIND|os.RTLD_NOW)\r\nimport tensorflow\r\nsys.setdlopenflags(old_dlopen_flags)\r\n```"]}, {"number": 19369, "title": "Error with  'std::bad_alloc'", "body": "Helo ,\r\nI want to run the demo with \r\nhttps://github.com/anishathalye/neural-style\r\n\r\nThisi is basic information:\r\ntensorflow 1.8 GPU\r\nPYTHON_BIN_PATH=/usr/bin/python\r\nGCC_HOST_COMPILER_PATH=/usr/bin/gcc\r\nCUDA_TOOLKIT_PATH=/usr/local/cuda-9.0\r\nTF_CUDA_VERSION=9.0\r\nTF_CUDA_COMPUTE_CAPABILITIES=5.3,6.2\r\nCUDNN_INSTALL_PATH=/usr/local/include/tf/bazel-genfiles/external/local_config_cuda/cuda/cuda/lib\r\nTF_CUDNN_VERSION=7.0.5\r\n\r\nfree -h\r\n              total        used        free      shared  buff/cache   available\r\nMem:           7.7G        2.8G        2.9G         48M        1.9G        4.7G\r\nSwap:            0B          0B          0B\r\n\r\nAs  I  run with :: \r\nnvidia@tegra-ubuntu:~/neural-style$ python neural_style.py --content ./examples/123.jpg --styles ./examples/2-style2.jpg  --output zcq.jpg --iterations 500\r\n\r\nThe error shows:\r\nnvidia@tegra-ubuntu:~/neural-style$ python neural_style.py --content ./examples/123.jpg --styles ./examples/2-style2.jpg  --output zcq.jpg --iterations 500\r\n/usr/lib/python2.7/dist-packages/scipy/misc/pilutil.py:479: FutureWarning: Conversion of the second argument of issubdtype from `int` to `np.signedinteger` is deprecated. In future, it will be treated as `np.int64 == np.dtype(int).type`.\r\n  if issubdtype(ts, int):\r\n/usr/lib/python2.7/dist-packages/scipy/misc/pilutil.py:482: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  elif issubdtype(type(size), float):\r\n2018-05-18 02:28:34.668653: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:865] ARM64 does not support NUMA - returning NUMA node zero\r\n2018-05-18 02:28:34.668832: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: \r\nname: NVIDIA Tegra X2 major: 6 minor: 2 memoryClockRate(GHz): 1.3005\r\npciBusID: 0000:00:00.0\r\ntotalMemory: 7.66GiB freeMemory: 2.39GiB\r\n2018-05-18 02:28:34.668886: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0\r\n2018-05-18 02:28:35.548358: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-05-18 02:28:35.548468: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0 \r\n2018-05-18 02:28:35.548501: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N \r\n2018-05-18 02:28:35.548709: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1950 MB memory) -> physical GPU (device: 0, name: NVIDIA Tegra X2, pci bus id: 0000:00:00.0, compute capability: 6.2)\r\n2018-05-18 02:28:38.167544: W tensorflow/core/framework/allocator.cc:101] Allocation of 314572800 exceeds 10% of system memory.\r\n2018-05-18 02:28:38.625368: W tensorflow/core/framework/allocator.cc:101] Allocation of 314572800 exceeds 10% of system memory.\r\nterminate called after throwing an instance of 'std::bad_alloc'\r\n  what():  std::bad_alloc\r\nAborted (core dumped)\r\n\r\nHow to fix this problem??  Thank u!", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nOS Platform and Distribution\nTensorFlow installed from\nTensorFlow version\nBazel version\nCUDA/cuDNN version\nGPU model and memory\nExact command to reproduce", "It has been 14 days with no activity and the `awaiting response` label was assigned. Is this still an issue?", "It has been 31 days with no activity and the `awaiting response` label was assigned. Is this still an issue?"]}, {"number": 19368, "title": "tf.control_dependencies fails to update the dependent op.", "body": "------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Redhat 7.3\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: r1.8\r\n- **Python version**: 2.7.5\r\n- **Bazel version (if compiling from source)**: 0.12\r\n- **GCC/Compiler version (if compiling from source)**: \r\n- **CUDA/cuDNN version**: 9.1/7.0.5\r\n- **GPU model and memory**: P5000/16G\r\n- **Exact command to reproduce**: N/A\r\n\r\n\r\n### Describe the problem\r\n\r\nDuring the test of tf.metrics, two pieces of code snippets are believed to be equivalent outputting totally different results.\r\n\r\n### Source code / logs\r\nCode snippet 1:\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\na = tf.constant([1.], tf.float32)\r\nmean_a, mean_a_uop = tf.metrics.mean(a)\r\n\r\nsess = tf.InteractiveSession()\r\ntf.global_variables_initializer().run()\r\ntf.local_variables_initializer().run()\r\n\r\nfor _ in range(10):\r\n  sess.run(mean_a_uop)\r\n  print(sess.run(mean_a))\r\n\r\n```\r\noutputs:\r\n```\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n\r\n```\r\n\r\nCode snippet 2:\r\n```\r\nimport tensorflow as tf\r\n\r\na = tf.constant([1.], tf.float32)\r\nmean_a, mean_a_uop = tf.metrics.mean(a)\r\n\r\nwith tf.control_dependencies([mean_a_uop]):\r\n  mean_a = tf.identity(mean_a)\r\n\r\nsess = tf.InteractiveSession()\r\ntf.global_variables_initializer().run()\r\ntf.local_variables_initializer().run()\r\n\r\nfor _ in range(10):\r\n  print(sess.run(mean_a))\r\n\r\n```\r\n\r\noutputs:\r\n\r\n```\r\n0.0\r\n2.0\r\n1.5\r\n1.3333334\r\n1.25\r\n1.2\r\n1.1666666\r\n1.1428572\r\n1.125\r\n1.1111112\r\n\r\n```\r\n", "comments": ["Fun fact: With a non-interactive session this seems to work.\r\n``` python\r\nimport tensorflow as tf\r\n\r\na = tf.constant([1.], tf.float32)\r\nmean_a, mean_a_uop = tf.metrics.mean(a)\r\n\r\nwith tf.control_dependencies([mean_a_uop]):\r\n  mean_a = tf.identity(mean_a)\r\n\r\nwith tf.Session() as sess:\r\n  sess.run(tf.global_variables_initializer())\r\n  sess.run(tf.local_variables_initializer())\r\n\r\n  for _ in range(10):\r\n    print(sess.run(foo))\r\n```\r\nOutputs:\r\n```\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n1.0\r\n```", "Looks like I've experienced similar issue with the following peace of code:\r\n```\r\nimport tensorflow as tf\r\nfor _ in range(1, 20):\r\n    with tf.Session() as sess:\r\n        labels = tf.constant([0, 1, 1])\r\n        predictions = tf.constant([0, 1, 1], tf.int64)\r\n        a = tf.metrics.mean_iou(labels, predictions, num_classes=2)\r\n\r\n        sess.run(tf.global_variables_initializer())\r\n        sess.run(tf.local_variables_initializer())\r\n        result = sess.run(a)\r\n        print(\"Result is %s\" % (str(result), ))\r\n```\r\nProduces:\r\n```\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (1.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\nResult is (0.0, array([[1., 0.],\r\n       [0., 2.]]))\r\n```\r\n\r\nI'm just started learning tensorflow and I don't really understand why such simple code misbehaves. There is also [a comment](https://stackoverflow.com/questions/50426367/the-mean-iou-of-tensorflow-doesnt-work-correctly#comment87925197_50426367) on StackOverflow stating you mustn't pass result of `tf.metrics.mean_iou` into single `run`, but I'd like to understand why is that?", "@mingyr This is a stale issue. Please note that TF1.x is not supported anymore.\r\n\r\nCan you please check with recent TF2.x versions and share a simple standalone code to reproduce the issue. Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 19367, "title": "Abnormal feature function", "body": "#### Expected behavior\r\nSupposedly, When I click \"Save Feature\" the image should be saved. instead of connecting to the \"Sharing Features\" that are not working and do not contain any data / images.\r\n\r\n#### Actual behavior\r\nWhen I click \"Save Feature\", the App takes me to the \"Sharing Feature\" which is not working and does not contain any data / images.\r\n\r\n#### How to reproduce\r\n1. Instal App [here](https://play.google.com/store/apps/details?id=com.deerslab.stylized1)\r\n2. Run the app\r\n3. Choose the effect you like\r\n4. Click \"SAVE feature\", you will be taken to \"Share Feature\" which does not contain data and can not be shared.\r\n\r\n***\r\n***\r\n\r\n* Browser : Redmi Note 5A\r\n* System Operating : 7.1.0 Nougat\r\n* App Version : 1.02\r\n\r\n#### Recording Of The Bug\r\nhttps://youtu.be/MXN-WgNp17Q\r\n\r\n#### Proof Of Work Done\r\nhttp://www.github.com/rezamusic881", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nOS Platform and Distribution\nTensorFlow installed from\nTensorFlow version\nBazel version\nCUDA/cuDNN version\nGPU model and memory\nExact command to reproduce", "It has been 14 days with no activity and the `awaiting response` label was assigned. Is this still an issue?", "It has been 30 days with no activity and the `awaiting response` label was assigned. Is this still an issue?", "We are closing this issue for now due to lack of activity. Please comment if this is still an issue for you. Thanks!"]}, {"number": 19366, "title": "Use np.frombuffer instead of np.fromstring to avoid DeprecationWarning. r1.5", "body": "Resolves #17020\r\n\r\nPiperOrigin-RevId: 185927310", "comments": ["Buildifier issue will be fixed here: https://github.com/tensorflow/tensorflow/pull/19306"]}, {"number": 19365, "title": "Use np.frombuffer instead of np.fromstring to avoid DeprecationWarning. r1.6", "body": "Resolves #17020\r\n\r\nPiperOrigin-RevId: 185927310", "comments": []}, {"number": 19364, "title": "[INTEL MKL] Upgrading to MKL DNN v.14", "body": "It also includes fixes to handle empty input tensors in MKLAvgPooling.  MKL DNN v0.14 does more sanity checks on empty input tensors and throws \"invalid parameter\" exceptions.", "comments": ["@tensorflow-jenkins test this please", "@penpornk Thanks. The failure in MacOS python2 and CC seems unrelated to this PR. Several of the other PRs  - #19423 and #19429 are failing the same tests.", "@tatianashp can you check the test results? It looks like MacOS Contrib and Ubuntu Contrib are both passing (in the details  link), but are showing up as failures here. Also Ubuntu Sanity is failing in pylint in an unrelated python file."]}, {"number": 19363, "title": "Offer TensorFlow Docker Images Based on 18.04", "body": "Nvidia is now shipping docker images based on ubuntu 18.04 ([see](https://github.com/NVIDIA/nvidia-docker/issues/666#issuecomment-390039509)), it would be great if TensorFlow started offering builds against these.\r\n\r\nUbuntu 18.04 has added Python 3.6.\r\n```\r\nHave I written custom code N/A\r\nOS Platform and Distribution Docker\r\nTensorFlow installed from Docker\r\nTensorFlow version N/A\r\nBazel version N/A\r\nCUDA/cuDNN version N/A\r\nGPU model and memory N/A\r\nExact command to reproduce N/A\r\n```", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nOS Platform and Distribution\nTensorFlow installed from\nTensorFlow version\nBazel version\nCUDA/cuDNN version\nGPU model and memory\nExact command to reproduce", "@gunan Thoughts on this?\r\n\r\n@cancan101 Please feel free to submit a PR for this. ", "For CPU, I do not see a reason why we cannot.\r\nFor GPU, we are strictly required to build on top of nvidia cuda docker images.\r\nSo If nvidia/cuda has ubuntu 18.04, it is certainly possible for us, too.", "Will TensorFlow work with CUDA 9.2? \r\nMy hunch is this change may involve changing [the base image](https://github.com/tensorflow/tensorflow/blob/294fdb0c5452715ec46d0555245e3b130308ebb4/tensorflow/tools/docker/Dockerfile.devel-gpu#L1) and the [cuda packages installed](https://github.com/tensorflow/tensorflow/blob/294fdb0c5452715ec46d0555245e3b130308ebb4/tensorflow/tools/docker/Dockerfile.devel-gpu#L7-L17) as well as perhaps the paths to cuda.\r\nWhat is the best way to test this change? Does CI build these Docker files?", "I started: https://github.com/tensorflow/tensorflow/pull/19474", "Please remove the assignee, as this issue is inviting external contributions. Otherwise, remove the `contributions welcome` label. Thank you.", "Please remove the assignee, as this issue is inviting external contributions. Otherwise, remove the `contributions welcome` label. Thank you.", "I've recently proposed a change to TensorFlow that obsoletes parameterized_docker_build.sh, which may help alleviate this issue. If anyone following this thread is interested in making TensorFlow's Dockerfile story better for everyone, [please take a look at the RFC](https://github.com/tensorflow/community/pull/8).", "looks like current images are based on ubuntu 18.04:\r\n\r\n    $ docker run --rm -it \r\n    docker.apple.com/tensorflow/tensorflow:2.1.0-gpu-py3 bash\r\n\r\n    root@7468b22afb64:/# cat /etc/issue\r\n    Ubuntu 18.04.3 LTS \\n \\l\r\n\r\nseems like this issue can be closed...", "Close this issue as it has been solved.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/19363\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/19363\">No</a>\n"]}, {"number": 19362, "title": "ImportError: libnvidia-fatbinaryloader.so.384.111: cannot open shared object file: No such file or directory", "body": "### System information\r\n- **Have I written custom code (as opposed to off a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 LTS**:\r\n- **TensorFlow installed from (source or binary) from official wesite:\r\n- **TensorFlow version (use command below)**: \r\n- **Python version : 2.7**: \r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version: 9.0**:\r\n- **GPU model and memory: GEFORCE GTX 1050(with GPU.While installation, it didnt**:\r\n4 GB)**:\r\n- **Exact command to reproduce: I installed tensor flow with pip(with GPU).While installation, it didnt recieve any errors but running I am getting following errors**:\r\n\r\n\r\n\r\n### Describe the problem\r\n\r\nwhen I tried importing Tensor flow I got the following errors:\r\n \r\n>>> import tensorflow as tf\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/deepak/.local/lib/python2.7/site-packages/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n  File \"/home/deepak/.local/lib/python2.7/site-packages/tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/home/deepak/.local/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/home/deepak/.local/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/home/deepak/.local/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/home/deepak/.local/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\nImportError: libnvidia-fatbinaryloader.so.384.111: cannot open shared object file: No such file or directory\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\n\r\nDoes Anyone have experienced it?\r\nplease do help me!!!\r\n\r\n\r\n", "comments": ["What worked for me was adding the path to my nvidia installation to `LD_LIBRARY_PATH` variable : \r\n\r\n```\r\nexport LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}:/usr/lib/nvidia-396/\r\n```\r\n\r\nOf course instead of `nvidia-396` use your driver's version.\r\n", "Nagging Assignee @cy89: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "@codeteo Thanks a lot!!\r\nIt worked for me :)", "Thanks how I could find my driver version as this is a cluster?", "I get stuck by the same issue and cannot be solved with @codeteo's solution. Any other reasons causing this issue and solutions to tackle it?\r\n\r\nI am certain that I make the directory of nvidia and version of cuda and nvidia all right. "]}, {"number": 19361, "title": "Feature request: forwards autodifferentiation for gradient computation", "body": "Does TensorFlow use forwards instead of reverse (i.e. backprop) autodiff where appropriate? \r\n\r\nFor graphs with fewer inputs (layer input values plus model parameters) than outputs (as  occurs in convolutional upsampling architectures now popular in GANs and auto-encoders), I believe forwards auto-differentiation will be a faster way to compute gradients. The Jacobian matrices get progressively wider as you go from right to left (up the chain of functions), so if you start multiplying from the right (forwards), rather than from the left (backprop) you reduce the number of operations.\r\n\r\nBut maybe I'm missing something.", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nOS Platform and Distribution\nTensorFlow installed from\nTensorFlow version\nBazel version\nCUDA/cuDNN version\nGPU model and memory\nExact command to reproduce", "```\r\nHave I written custom code    No\r\nOS Platform and Distribution  N/A\r\nTensorFlow installed from     N/A\r\nTensorFlow version            N/A\r\nBazel version                 N/A\r\nCUDA/cuDNN version            N/A\r\nGPU model and memory          N/A\r\nExact command to reproduce    N/A\r\n```", "Here are two ways to get forward-mode autodiff in TensorFlow:\r\n\r\n1. You can use [the tensorflow-forward-ad package](https://github.com/renmengye/tensorflow-forward-ad),\r\n2. You can use [this trick for building a graph that implements efficient forward-mode autodiff by calling `tf.gradients` twice](https://github.com/renmengye/tensorflow-forward-ad/issues/2).\r\n\r\nThe latter is simpler and doesn't require any new dependencies, but there might be some corner cases it doesn't handle (as discussed in that thread). There's a wrapper that deals with a few of those corner-cases in the [K-FAC utils.py module](https://github.com/tensorflow/kfac/blob/master/kfac/python/ops/utils.py) (look for `fwd_gradients`), though it's essentially the same code. As far as I know, there's no official version of this trick included TensorFlow, though I know several researchers who've used it.\r\n\r\nFor more detail on how that trick works, see [this blog post](https://j-towns.github.io/2017/06/12/A-new-trick.html) by @j-towns (a recent Brain intern!).", "Great. Thanks!"]}, {"number": 19360, "title": "tf.split's -1 support doesn't handle zero dimensions", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Colab\r\n- **TensorFlow installed from (source or binary)**: Colab\r\n- **TensorFlow version (use command below)**: ('unknown', '1.7.0') and 1.8.0\r\n- **Python version**: 3.6.3\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: `tf.split(tf.zeros([0]), [0, -1], axis=-1)`\r\n\r\n### Describe the problem\r\nThe variable size version of `tf.split` (`SplitV` in C++) allows one of the sizes to be -1.  The corresponding output will expand as necessary so that the total output size matches the input.\r\n\r\nUnfortunately, the -1 support currently assumes the -1 dimension corresponds to **positive** size.  It should handle zero as well.  E.g., this should work, but it doesn't:\r\n\r\n```\r\n>>> tf.split(tf.zeros([0]), [0, -1], axis=-1)\r\nTraceback (most recent call last):\r\n  File \"/Users/irving/anaconda/envs/openai/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1592, in _create_c_op\r\n    c_op = c_api.TF_FinishOperation(op_desc)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Sum of output sizes must match the size of the original Tensor along the split dimension or the sum of the positive sizes must be less if it contains a -1 for 'split_3' (op: 'SplitV') with input shapes: [0], [2], [] and with computed input tensors: input[1] = <0 -1>, input[2] = <-1>.\r\n```\r\n\r\nBy comparison, the positive case works fine:\r\n\r\n```\r\n>>> tf.split(tf.zeros([1]), [0, -1], axis=-1)\r\n[<tf.Tensor 'split_4:0' shape=(0,) dtype=float32>, <tf.Tensor 'split_4:1' shape=(?,) dtype=float32>]\r\n```", "comments": ["Here's a colab exhibiting the problem, though since the repro is a single line it's not really necessary:\r\n\r\nhttps://drive.google.com/file/d/1AyZLBPYkiB3HgUZYL9cWZx3IFu2OzcTI/view?usp=sharing", "@benoitsteiner: Did you introduce this restriction?  Can't tell if https://github.com/tensorflow/tensorflow/commit/53f68459f18fd9c707183511e1e58d03e2f367db is yours.", "@ekelsen might have more insight into that particular commit?", "Nagging Assignee @karmel: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Bump for @ekelsen - do you have any insight here, or is someone else a better bet?", "Nagging Assignee @karmel: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Nagging Assignee @karmel: It has been 29 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Nagging Assignee @karmel: It has been 44 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "Bumping @ekelsen again, who may be back?", "Nagging Assignee @girving: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.", "I sent a PR fixing this two weeks ago, so nagged me is unnecessary.  Hopefully the PR will be reviewed at some point."]}, {"number": 19359, "title": "Getting wrong predictions on a model loaded in java vs python using the tensorflow \u201csaved model\u201d api", "body": "### System information\r\n- **custom code**:\r\n- **OS Platform and Distribution**: MacOS High Sierra v10.13.3\r\n- **TensorFlow installed from binary**: pip3 install\r\n- **TensorFlow version **: v1.8.0-0-g93bc2e2072 1.8.0\r\n- **Python version**: 3.6.1\r\n- Have I written custom code: Yes\r\n - Bazel version: n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n- Exact command to reproduce: In the 'Code' section of this post\r\n\r\n### Problem\r\nI'm trying to load a model in Java that was trained in python and saved using the saved model api (`from tensorflow.python.saved_model`).\r\n\r\nI'm able to load it in a separate Python script and from Java but the predictions are wrong in the Java version.\r\n\r\nI wrote a quick example project with a simple model that demonstrates the \"bug\" (I'm hoping my misunderstanding).\r\n\r\n**Python: OrTraining.py**\r\n\r\nSave model after training using Saved Model Api.\r\n\r\n    builders = saved_model_builder.SavedModelBuilder(export_path)\r\n    builders.add_meta_graph_and_variables(sess, [\"or\"], signature_def_map={\r\n        \"predict\": tf.saved_model.signature_def_utils.predict_signature_def(\r\n            inputs= {\"images\": x_placeholder},\r\n            outputs= {\"scores\": hypothesis_function})\r\n        })\r\n    builders.save()\r\n\r\nhttps://github.com/JsFlo/DebuggingSavedModelJava/blob/master/OrTraining.py\r\n\r\n**Python: OrLoadSavedModel.py**\r\n\r\nLoad model in a separate script using the Saved Model Api.\r\n\r\n    with tf.Session(graph=tf.Graph()) as sess:\r\n    tf.saved_model.loader.load(sess, [\"or\"], \"orTrainingModels\")\r\n    graph = tf.get_default_graph()\r\n    print(graph.get_operations())\r\n    x_placeholder = graph.get_tensor_by_name(\"or_inputs:0\")\r\n    hypothesis_function = graph.get_tensor_by_name(\"hypothesis_output:0\")\r\n    # sess.run(\"init\")\r\n    print(sess.run(hypothesis_function, feed_dict={x_placeholder: np.array([\r\n        np.array([1, 0]),\r\n        np.array([0, 1]),\r\n        np.array([0, 0]),\r\n        np.array([1, 1]),\r\n    ])}))\r\n\r\nhttps://github.com/JsFlo/DebuggingSavedModelJava/blob/master/OrLoadSavedModel.py\r\n\r\n**Java: OrLoadSavedModel.java**\r\n\r\nLoad\r\n\r\n     SavedModelBundle savedModelBundle = SavedModelBundle.load(\"./orTrainingModels\", \"or\");\r\n     Session session = savedModelBundle.session();\r\n\r\nRun\r\n\r\n    Tensor result = session.runner()\r\n                .feed(\"or_inputs\", tensorInput)\r\n                .fetch(\"hypothesis_output\")\r\n                .run().get(0);\r\n\r\nhttps://github.com/JsFlo/DebuggingSavedModelJava/blob/master/src/main/java/OrLoadSavedModel.java\r\n\r\nBoth the java version and the python version load and run the graphs without a problem but the java version doens't output the correct predictions.\r\n\r\nAt first I thought it was because the weights/bias weren't being loaded but I'm able to \"run\" the weights/bias operation in the java version and see that it has the correct weights that I see in the python script after training.\r\n\r\nCheck weights in java (https://github.com/JsFlo/DebuggingSavedModelJava)\r\n\r\n    Tensor result = session.runner()\r\n                .fetch(\"da_weights\")\r\n                .run().get(0);\r\n\r\n### Code\r\nhttps://github.com/JsFlo/DebuggingSavedModelJava\r\n\r\nI run **python3 OrTraining.py** which will \"train\" (really small model) on my cpu and output a folder called `orTrainingModels` which has the output of the training SavedModel API. (You don't have to run this since the folder is already in the repo but if you did want to then remove the folder first)\r\n\r\n    .\r\n    \u251c\u2500\u2500 saved_model.pb\r\n    \u2514\u2500\u2500 variables\r\n        \u251c\u2500\u2500 variables.data-00000-of-00001\r\n        \u2514\u2500\u2500 variables.index\r\n\r\nI then run **python3 OrLoadingSaveModel.py** which will output the results of a small (4) validation/test set . I see the correct results in this. \r\n\r\nI run the java version **(OrLoadSavedModel.java)** by opening up the project in Intellij IDEA and clicking play or running **./gradlew clean build :run**\r\n\r\nThe Java version seems to load the correct weights and bias but the outputs are wrong. Running the java version should output some debugging logs (weights/bias/operations/output).", "comments": ["Thank you for your post. We noticed you have not filled out the following field in the issue template. Could you update them if they are relevant in your case, or leave them as N/A? Thanks.\nHave I written custom code\nBazel version\nCUDA/cuDNN version\nGPU model and memory\nExact command to reproduce", "This turned out an to be an issue with the way I was feeding the data in. Tensorflow doesn't like to create Tensors of `Boxed Types` (Integer vs int/ Float vs float) and there are checks to see if you're trying to pass in boxed types but it seems like the checks aren't that comprehensive.\r\n\r\n*Test from https://github.com/tensorflow/tensorflow/blob/master/tensorflow/java/src/test/java/org/tensorflow/TensorTest.java *\r\n\r\n    @Test\r\n    public void testCreateFromArrayOfBoxed() {\r\n        Integer[] vector = new Integer[] {1, 2, 3, 4};\r\n        try (Tensor<Integer> t = Tensor.create(vector, Integer.class)) {\r\n            fail(\"Tensor.create() should fail because it was given an array of boxed values\"); \r\n        } catch (IllegalArgumentException e) {\r\n         // The expected exception\r\n       }\r\n    }\r\n \r\nHere's an example of my issue:\r\n\r\n        Float[] input = new Float[]{0f, 1f};\r\n        Tensor tensorOutput = Tensor.create(input);\r\n        float[] floatOutput= new float[2];\r\n        tensorOutput.copyTo(floatOutput);\r\n        println(Arrays.toString(floatOutput)); // -7.377E30, -7.377E30\r\n\r\n\r\n        float[] input = new float[]{0f, 1f};\r\n        Tensor tensorOutput = Tensor.create(input);\r\n\r\n        float[] floatOutput= new float[2];\r\n        tensorOutput.copyTo(floatOutput);\r\n        println(Arrays.toString(floatOutput)); // 0, 1"]}, {"number": 19358, "title": "Fix cmake library path for libpng16.a #18950", "body": "### System information\r\n\r\n- OS: Linux Fedora 26\r\n- Tensorflow: installed from source (master branch)\r\n- GCC 7.3.1\r\n- CMake 3.11\r\n- No GPU\r\n\r\n### Problem\r\nThe CMake build fails on Fedora in normal build. libpng16 is using \r\n\r\n> CMAKE_INSTALL_LIBDIR\r\n\r\n as the library destination for non-WIN32 systems. In some linux distribution like fedora this path corresponds to **_lib64_**\r\n\r\n### Steps to reproduce\r\n```\r\n$ git clone https://github.com/tensorflow/tensorflow\r\n$ cd tensorflow/tensorflow/contrib/cmake\r\n$ mkdir build && cd build\r\n$ cmake  ..\r\n$ make\r\n```\r\n\r\n### Logs\r\n```\r\n[...]\r\nmake[3]: *** No rule to make target 'png/install/lib/libpng16.a', needed by 'proto_text'.\r\nStop.\r\nmake[2]: *** [CMakeFiles/Makefile2:8959: CMakeFiles/proto_text.dir/all] Error 2\r\nmake[1]: *** [CMakeFiles/Makefile2:5441: CMakeFiles/tf_core_framework.dir/rule] Error 2\r\nmake: *** [Makefile:1919: tf_core_framework] Error 2\r\n```", "comments": ["\nThanks for your pull request. It looks like this may be your first contribution to a Google open source project (if not, look below for help). Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit <https://cla.developers.google.com/> to sign.**\n\nOnce you've signed (or fixed any issues), please reply here (e.g. `I signed it!`) and we'll verify it.\n\n----\n\n#### What to do if you already signed the CLA\n\n##### Individual signers\n\n*   It's possible we don't have your GitHub username or you're using a different email address on your commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n\n##### Corporate signers\n\n*   Your company has a Point of Contact who decides which employees are authorized to participate. Ask your POC to be added to the group of authorized contributors. If you don't know who your Point of Contact is, direct the Google project maintainer to [go/cla#troubleshoot](go/cla#troubleshoot) ([Public version](https://opensource.google.com/docs/cla/#troubleshoot)).\n*   The email used to register you as an authorized contributor must be the email used for the Git commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n*   The email used to register you as an authorized contributor must also be [attached to your GitHub account](https://github.com/settings/emails).\n\t\t\n\n<!-- need_sender_cla -->", "I signed it!", "I signed it!", "CLAs look good, thanks!\n\n<!-- ok -->", "LGTM. Nice catch!", "Nagging Assignee @ebrevdo: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly."]}, {"number": 19357, "title": "Fix the naming of _any_variable_initialized", "body": "This might be a very small issue, though the naming `_any_variable_initalized` seems to be a typo (`initalized` -> `initialized`).\r\n\r\nAs this is an interanl function so renaming should be safe. This fix\r\nchange the naming to `_any_variable_initialized`\r\n\r\nSigned-off-by: Yong Tang <yong.tang.github@outlook.com>", "comments": []}, {"number": 19356, "title": "check grpc_testlib_server before start subprocess", "body": "When `grpc_testlib_server` is missing (or set wrong `TEST_SRCDIR`, `TEST_WORKSPACE`), `grpc_session_test` will hang without any response or hint (subprocess is defunct). So, in such case, better to  check `grpc_testlib_server` exists before start subprocess.", "comments": []}, {"number": 19355, "title": "Include <algorithm> in .pb_text.cc generated files", "body": "The generated code depends on this header for `std::stable_sort()`. Until now we've been lucky that this header is included indirectly on the platforms for which we build. Fixes #19323.", "comments": []}]