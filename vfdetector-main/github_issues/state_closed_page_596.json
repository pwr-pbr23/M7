[{"number": 35793, "title": "add usage example to reduce_min", "body": "I'm participating in GCI '19 (handle: jimmy_page). Task: [Advanced] Add a usage example to TensorFlow 2.0 API documentation.\r\n\r\nI have added a usage example to tf.math.reduce_min.", "comments": ["@mrinalTheCoder thank you, it is failing doctest can you please check here for [logs](https://source.cloud.google.com/results/invocations/f9a41ff4-e8d7-46da-b08f-29989b01aee4/targets/%2F%2Ftensorflow%2Ftools%2Fdocs:tf_doctest/tests).\r\n\r\nPlease run the doctest locally as mentioned here in the [contributor guidelines](https://www.tensorflow.org/community/contribute/docs_ref).", "I fixed the failing doctest in the latest commit. It was because my machine was running tf 2.0 whereas the doctest was done on tf 2.1\r\nI have fixed the output of the doctest in the file, please review."]}, {"number": 35792, "title": "tf.tuple usage exaple ", "body": "Its will reviewed  google code in mentors", "comments": ["@CREVIOS thank you, it is failing doctest can you please check here for [logs](https://source.cloud.google.com/results/invocations/339219ac-fcf9-421b-bdc9-ae203c2c72c1/targets/%2F%2Ftensorflow%2Ftools%2Fdocs:tf_doctest/tests).\r\n\r\nPlease run the doctest locally as mentioned here in the [contributor guidelines](https://www.tensorflow.org/community/contribute/docs_ref).", "@CREVIOS Any update on this PR, please. Thanks!", "It has been 15 days with no activity and the `awaiting response` label was assigned. Is this PR still valid? Assigning the `stalled` label. Please comment to reassure me that this is still being worked on.", "I'm going to go ahead and close this PR, because it seems to have stalled. If you're still interested in pursing this (and responding to my comments), please feel free to reopen!"]}, {"number": 35791, "title": "Errors from `cuda_dnn.cc(1802): 'cudnnRNNForwardTraining...` or `cuda/cuda_dnn.cc(1959): 'cudnnRNNBackwardWeights...`", "body": "**System information**\r\n- Have I written custom code: no\r\n- OS Platform: Windows 10\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: v2.1.0-rc2-17-ge5bf8de410 2.1.0\r\n- Python 3.6.8\r\n- CUDA/cuDNN version: cuda_10.2.89_441.22_win10/cudnn-10.2-windows10-x64-v7.6.5.32\r\n- GPU model and memory: Asus GeForxe GTX 980 Strix 4GB, Compute Capability 5.2\r\n- nVidia driver: 441.87\r\n\r\n![image](https://user-images.githubusercontent.com/3266706/72216802-14aaf900-3526-11ea-9cbd-a78f74b9e0d5.png)\r\n\r\n**Describe the current behavior**\r\n\r\nI'm just learning to use tensorflow. I've adapted some code from tutorials but during training getting any of 2 following errors in random epoch. Rarely it finishes without error...\r\n\r\n**Other info / logs**\r\n1. Either:\r\n\r\n```\r\n2020-01-11 22:24:39.258245: E tensorflow/stream_executor/dnn.cc:596] CUDNN_STATUS_INTERNAL_ERROR\r\nin tensorflow/stream_executor/cuda/cuda_dnn.cc(1959): 'cudnnRNNBackwardWeights\r\n( cudnn.handle(), rnn_desc.handle(), model_dims.max_seq_length, input_desc.handles(), input_data.opaque(), input_h_desc.handle(), input_h_data.opaque(), output_desc.handles(), output_data.opaque(), workspace.opaque(), workspace.size(), rnn_desc.params_handle(), params_backprop_data->opaque(), reserve_space_data->opaque(), reserve_space_data->size())'\r\n2020-01-11 22:24:39.259004: W tensorflow/core/framework/op_kernel.cc:1655] OP_REQUIRES failed at cudnn_rnn_ops.cc:1922 : Internal: Failed to call ThenRnnBackward with model config: [rnn_mode, rnn_input_mode, rnn_direction_mode]: 2, 0, 0 , [num_layers, input_size, num_units, dir_count, max_seq_length, batch_size, cell_num_units]: [1, 256, 256, 1, 256, 32, 256] \r\n2020-01-11 22:24:39.259641: W tensorflow/core/common_runtime/base_collective_executor.cc:217] BaseCollectiveExecutor::StartAbort Internal: Failed to call ThenRnnBackward with model config: [rnn_mode, rnn_input_mode, rnn_direction_mode]: 2, 0, 0 , [num_layers, input_size, num_units, dir_count, max_seq_length, batch_size, cell_num_units]: [1, 256, 256, 1, 256, 32, 256] \r\n\t [[{{node gradients/CudnnRNN_grad/CudnnRNNBackprop}}]]\r\n2020-01-11 22:24:39.260191: W tensorflow/core/common_runtime/base_collective_executor.cc:217] BaseCollectiveExecutor::StartAbort Internal: {{function_node __inference___backward_cudnn_lstm_with_fallback_6848_7024_specialized_for_StatefulPartitionedCall_1_at___inference_distributed_function_9522}} {{function_node __inference___backward_cudnn_lstm_with_fallback_6848_7024_specialized_for_StatefulPartitionedCall_1_at___inference_distributed_function_9522}} Failed to call ThenRnnBackward with model config: [rnn_mode, rnn_input_mode, rnn_direction_mode]: 2, 0, 0 , [num_layers, input_size, num_units, dir_count, max_seq_length, batch_size, cell_num_units]: [1, 256, 256, 1, 256, 32, 256] \r\n\t [[{{node gradients/CudnnRNN_grad/CudnnRNNBackprop}}]]\r\n\t [[StatefulPartitionedCall_1]]\r\n2020-01-11 22:24:39.261943: I tensorflow/stream_executor/stream.cc:1990] [stream=000001EB81C23220,impl=000001EBF7EBD920] did not wait for [stream=000001EB81C231A0,impl=000001EBF7EBE3A0]\r\n2020-01-11 22:24:39.262108: I tensorflow/stream_executor/stream.cc:4938] [stream=000001EB81C23220,impl=000001EBF7EBD920] did not memcpy host-to-device; source: 000001EB834B4180\r\n2020-01-11 22:24:39.262270: E tensorflow/stream_executor/stream.cc:332] Error recording event in stream: Error recording CUDA event: CUDA_ERROR_LAUNCH_FAILED: unspecified launch failure; not marking stream as bad, as the Event object may be at fault. Monitor for further errors.\r\n2020-01-11 22:24:39.263052: E tensorflow/stream_executor/cuda/cuda_event.cc:29] Error polling for event status: failed to query event: CUDA_ERROR_LAUNCH_FAILED: unspecified launch failure\r\n2020-01-11 22:24:39.263276: F tensorflow/core/common_runtime/gpu/gpu_event_mgr.cc:273] Unexpected Event status: 1\r\n```\r\n\r\n2. Or:\r\n\r\n```\r\n2020-01-12 08:21:48.672516: E tensorflow/stream_executor/dnn.cc:596] CUDNN_STATUS_INTERNAL_ERROR\r\nin tensorflow/stream_executor/cuda/cuda_dnn.cc(1802): 'cudnnRNNForwardTraining( cudnn.handle(), rnn_desc.handle(), model_dims.max_seq_length, input_desc.handles(), input_data.opaque(), input_h_desc.handle(), input_h_data.opaque(), input_c_desc.handle(), input_c_data.opaque(), rnn_desc.params_handle(), params.opaque(), output_desc.handles(), output_data->opaque(), output_h_desc.handle(), output_h_data->opaque(), output_c_desc.handle(), output_c_data->opaque(), workspace.opaque(), workspace.size(), reserve_space.opaque(), reserve_space.size())'\r\n2020-01-12 08:21:48.674257: E tensorflow/stream_executor/cuda/cuda_event.cc:29] Error polling for event status: failed to query event: CUDA_ERROR_LAUNCH_FAILED: unspecified launch failure\r\n2020-01-12 08:21:48.674423: F tensorflow/core/common_runtime/gpu/gpu_event_mgr.cc:273] Unexpected Event status: 1\r\n2020-01-12 08:\r\nProcess finished with exit code -1073740791 (0xC0000409)\r\n```\r\n\r\n**Already tried**\r\n- updating nvidia drivers, reinstalling cuda SDK, python, tensorflow\r\n- downgrading to tensorflow 1.7 + cuda_10.0.130_411.31_win10 + cudnn-10.0-windows10-x64-v7.4.1.5\r\n- burning GPU for a while to check stability\r\n\r\n**Similar errors for**\r\ncudnn-10.1-windows10-x64-v7.6.5.32 / cuda_10.1.243_426.00_win10\r\n```\r\n2020-01-12 15:56:23.613001: E tensorflow/stream_executor/cuda/cuda_event.cc:29] Error polling for event status: failed to query event: CUDA_ERROR_LAUNCH_FAILED: unspecified launch failure\r\n2020-01-12 15:56:23.613167: F tensorflow/core/common_runtime/gpu/gpu_event_mgr.cc:273] Unexpected Event status: 1\r\n2020\r\nProcess finished with exit code -1073740791 (0xC0000409)\r\n```\r\n\r\n**Describe the expected behavior**\r\ntensorflow finishes training\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport datetime\r\nimport os\r\n\r\nimport pandas as pd\r\nfrom numpy import reshape\r\n\r\nimport tensorflow as tf\r\n\r\nEPOCHS = 500\r\nBATCH_SIZE = 1000\r\nTEST_SET_RATIO = 0.2\r\n\r\nLEARNING_RATE = 0.001\r\nDECAY = 5e-5\r\nLOSS_FUNC = 'categorical_crossentropy'\r\nDROPOUT = 0.2\r\n\r\nL_AMOUNT = 2  # number of labels\r\nRNN_SEQ_AMOUNT = 128  # number of RNN/LSTM sequence features\r\nDNN_F_AMOUNT = 4  # number of DNN branch features\r\n\r\nMIN_ACC_TO_SAVE_MODEL = 0.6\r\n\r\n\r\ndef create_model():\r\n    # RNN\r\n    rnn_input = tf.keras.layers.Input(shape=(RNN_SEQ_AMOUNT, 1))\r\n\r\n    rnn = tf.keras.layers.LSTM(RNN_SEQ_AMOUNT, return_sequences=True)(rnn_input)\r\n    rnn = tf.keras.layers.Dropout(DROPOUT)(rnn)\r\n    rnn = tf.keras.layers.BatchNormalization()(rnn)\r\n\r\n    rnn = tf.keras.layers.LSTM(RNN_SEQ_AMOUNT, return_sequences=True)(rnn)\r\n    rnn = tf.keras.layers.Dropout(DROPOUT / 2)(rnn)\r\n    rnn = tf.keras.layers.BatchNormalization()(rnn)\r\n\r\n    rnn = tf.keras.layers.LSTM(RNN_SEQ_AMOUNT)(rnn)\r\n    rnn = tf.keras.layers.Dropout(DROPOUT)(rnn)\r\n    rnn = tf.keras.layers.BatchNormalization()(rnn)\r\n\r\n    rnn_output = tf.keras.layers.Flatten()(rnn)\r\n\r\n    # DNN\r\n    dnn_input = tf.keras.layers.Input(shape=(DNN_F_AMOUNT,))\r\n\r\n    dnn = tf.keras.layers.Dense(16, activation=tf.keras.activations.relu)(dnn_input)\r\n    dnn = tf.keras.layers.Dense(8, activation=tf.keras.activations.relu)(dnn)\r\n\r\n    dnn_output = tf.keras.layers.Dense(2, activation=tf.keras.activations.softmax)(dnn)\r\n\r\n    # Concatenate above outputs\r\n    combined_input = tf.keras.layers.Concatenate()([rnn_output, dnn_output])\r\n\r\n    combined_nn = tf.keras.layers.Dense(128, activation=tf.keras.activations.relu)(combined_input)\r\n    combined_nn = tf.keras.layers.Dense(64, activation=tf.keras.activations.relu)(combined_nn)\r\n\r\n    combined_output = tf.keras.layers.Dense(units=L_AMOUNT, activation=tf.keras.activations.softmax)(combined_nn)\r\n\r\n    # Model setup\r\n    new_model = tf.keras.Model(inputs=[rnn_input, dnn_input], outputs=[combined_output])\r\n    opt = tf.keras.optimizers.Adam(LEARNING_RATE,\r\n                                   decay=DECAY)\r\n    new_model.compile(optimizer=opt,\r\n                      loss=LOSS_FUNC,\r\n                      metrics=['accuracy'])\r\n\r\n    print(new_model.summary())\r\n    return new_model\r\n\r\n\r\nclass CustomModelCheckpoint(tf.keras.callbacks.ModelCheckpoint):\r\n    def __init__(self, fp, monitor='val_loss', verbose=0, save_best_only=False, save_weights_only=False, mode='auto', save_freq='epoch', **kwargs):\r\n        super().__init__(fp, monitor, verbose, save_best_only, save_weights_only, mode, save_freq, **kwargs)\r\n\r\n    def on_epoch_end(self, epoch, logs=None):\r\n        print(\"\\n-------------------------------------------------------------------------------------------------------\")\r\n        print(f\"epoch: {epoch}, training_acc: {round(float(logs['accuracy']), 4)}, validation_acc: {round(float(logs['val_accuracy']), 4)}\")\r\n        print(\"-------------------------------------------------------------------------------------------------------\\n\")\r\n\r\n        if MIN_ACC_TO_SAVE_MODEL <= logs['accuracy']:\r\n            super().on_epoch_end(epoch, logs)\r\n\r\n\r\nif __name__ == '__main__':\r\n    data_filename = 'train_2020-01-05_data.csv'\r\n    print(\"Loading data file: %s\" % data_filename)\r\n\r\n    dataset = pd.read_csv('e:\\\\ml\\\\data\\\\training\\\\faulty\\\\%s' % data_filename, delimiter=',', header=None)\r\n    dataset = dataset.drop(columns=[0, 1, 2, 3, 4, 5, 6]).values  # drop columns with additional information\r\n\r\n    test_set_size = int(len(dataset) * TEST_SET_RATIO)\r\n    print(\"Test set split at: %d\" % test_set_size)\r\n\r\n    train_data = dataset[:-test_set_size]\r\n    test_data = dataset[-test_set_size:]  # use most recent data for testing\r\n\r\n    rnn_tr_f = train_data[:, 0:RNN_SEQ_AMOUNT]\r\n    rnn_ts_f = test_data[:, 0:RNN_SEQ_AMOUNT]\r\n\r\n    combined_tr_l = train_data[:, RNN_SEQ_AMOUNT:RNN_SEQ_AMOUNT + L_AMOUNT]\r\n    combined_ts_l = test_data[:, RNN_SEQ_AMOUNT:RNN_SEQ_AMOUNT + L_AMOUNT]\r\n\r\n    dnn_tr_f = train_data[:, RNN_SEQ_AMOUNT + L_AMOUNT:]  # enhancement data is added in column after labels\r\n    dnn_ts_f = test_data[:, RNN_SEQ_AMOUNT + L_AMOUNT:]\r\n\r\n    rnn_tr_features = reshape(rnn_tr_f, (len(rnn_tr_f), RNN_SEQ_AMOUNT, 1))\r\n    rnn_ts_features = reshape(rnn_ts_f, (len(rnn_ts_f), RNN_SEQ_AMOUNT, 1))\r\n\r\n    # create model for combined RNN and DNN\r\n    model = create_model()\r\n\r\n    TRAINING_TIMESTAMP = datetime.datetime.now().strftime(\"%Y%m%d-%H%M%S\")\r\n    model_name = \"faulty_%s\" % TRAINING_TIMESTAMP\r\n    os.mkdir(\"e:\\\\ml\\\\models\\\\%s\" % model_name)\r\n    filepath = \"e:\\\\ml\\\\models\\\\%s\\\\%s--{epoch:02d}-{val_accuracy:.3f}.model\" % (model_name, model_name)\r\n    checkpoint = CustomModelCheckpoint(filepath,\r\n                                       monitor='val_accuracy',\r\n                                       verbose=1,\r\n                                       save_best_only=True,\r\n                                       mode='max')\r\n\r\n    log_dir = \"e:\\\\ml\\\\logs\\\\fit\\\\\" + model_name + \".model\"\r\n    tensorboard = tf.keras.callbacks.TensorBoard(log_dir=log_dir, histogram_freq=1, profile_batch=0)\r\n\r\n    model.fit(x=[rnn_tr_features, dnn_tr_f],\r\n              y=combined_tr_l,\r\n              epochs=EPOCHS,\r\n              shuffle=True,\r\n              batch_size=BATCH_SIZE,\r\n              validation_data=([rnn_ts_features, dnn_ts_f], combined_ts_l),\r\n              callbacks=[checkpoint, tensorboard])\r\n```\r\n\r\n**DATA**\r\n\r\n[train_2020-01-05_data.zip](https://github.com/tensorflow/tensorflow/files/4050437/train_2020-01-05_data.zip)\r\n\r\n**Installed packages**\r\n\r\n```\r\nC:\\WINDOWS\\system32>pip list\r\nPackage              Version\r\n-------------------- ----------\r\nabsl-py              0.9.0\r\nastor                0.8.1\r\nattrs                19.3.0\r\nbackcall             0.1.0\r\nbleach               3.1.0\r\ncachetools           4.0.0\r\ncertifi              2019.11.28\r\nchardet              3.0.4\r\ncolorama             0.4.3\r\ncycler               0.10.0\r\ndecorator            4.4.1\r\ndefusedxml           0.6.0\r\nentrypoints          0.3\r\ngast                 0.2.2\r\ngoogle-auth          1.10.0\r\ngoogle-auth-oauthlib 0.4.1\r\ngoogle-pasta         0.1.8\r\ngrpcio               1.26.0\r\nh5py                 2.10.0\r\nidna                 2.8\r\nimportlib-metadata   1.3.0\r\nipykernel            5.1.3\r\nipython              7.11.1\r\nipython-genutils     0.2.0\r\njedi                 0.15.2\r\nJinja2               2.10.3\r\njson5                0.8.5\r\njsonschema           3.2.0\r\njupyter-client       5.3.4\r\njupyter-core         4.6.1\r\njupyterlab           1.2.4\r\njupyterlab-server    1.0.6\r\nKeras-Applications   1.0.8\r\nKeras-Preprocessing  1.1.0\r\nkiwisolver           1.1.0\r\nMarkdown             3.1.1\r\nMarkupSafe           1.1.1\r\nmatplotlib           3.1.2\r\nmistune              0.8.4\r\nmore-itertools       8.0.2\r\nnbconvert            5.6.1\r\nnbformat             4.4.0\r\nnotebook             6.0.2\r\nnumpy                1.18.0\r\noauthlib             3.1.0\r\nopt-einsum           3.1.0\r\npandas               0.25.3\r\npandocfilters        1.4.2\r\nparso                0.5.2\r\npatsy                0.5.1\r\npickleshare          0.7.5\r\npip                  19.3.1\r\nprometheus-client    0.7.1\r\nprompt-toolkit       3.0.2\r\nprotobuf             3.11.2\r\npyasn1               0.4.8\r\npyasn1-modules       0.2.8\r\nPygments             2.5.2\r\npyparsing            2.4.6\r\npyrsistent           0.15.6\r\npython-dateutil      2.8.1\r\npytz                 2019.3\r\npywin32              227\r\npywinpty             0.5.7\r\npyzmq                18.1.1\r\nrequests             2.22.0\r\nrequests-oauthlib    1.3.0\r\nrsa                  4.0\r\nscipy                1.4.1\r\nSend2Trash           1.5.0\r\nsetuptools           41.0.0\r\nsix                  1.13.0\r\nstatsmodels          0.10.2\r\ntensorboard          2.1.0\r\ntensorflow           2.1.0\r\ntensorflow-estimator 2.1.0\r\ntermcolor            1.1.0\r\nterminado            0.8.3\r\ntestpath             0.4.4\r\ntornado              6.0.3\r\ntraitlets            4.3.3\r\nurllib3              1.25.7\r\nwcwidth              0.1.7\r\nwebencodings         0.5.1\r\nWerkzeug             0.16.0\r\nwheel                0.33.6\r\nwrapt                1.11.2\r\nzipp                 0.6.0\r\n```", "comments": ["@alewir \r\nI have tried on colab with TF version 2.1.0-rc2 and was able to execute code successfully. Please, find the gist [here](https://colab.sandbox.google.com/gist/ravikyram/ed4786d6fccb981dfde304f7201e4031/untitled563.ipynb). Thanks!", "Hi, right, sometimes it finishes with a success although in most of the cases it fails with any of above errors. I'm wondering if it isn't some GPU issue but it's hard to tell at this moment.", "I can confirm the same error with TF 1.13 and 1.15.\r\nThe error raises only in Windows.\r\nI tried to get this error in CentOS/Ubuntu with the same GPU - nothing.", "@enhany may I ask you what GPU have you been using while getting the error? I'm wondering if the newer models from rtx 10XX and 20YY are affected...", "@alewir  2070s", "@alewir I don't see any issue with the code. I suspect root-cause is related to GPU cuda drivers or somethings related to them. `TF2.1` is built with cuda10.1 so please uninstall `cuda10.2`, unistall `TF2.1`, restart computer, install `cuda10.1`, install `TF2.1` and then test again. \r\n\r\nPlease let us know how it progresses. Thanks!", "I've done that (uninstalling everything from nvidia, wipeing out installation folders, cleaning registry from any nvidia files related paths) reinstalling everything as suggested by @jvishnuvardhan (again: cudnn-10.1-windows10-x64-v7.6.5.32 / cuda_10.1.243_426.00_win10 / TF 2.1.0) and... so far so good. I've run stable trainings thru-out the night and today. Usually it would fail for me already. I'll do some more testing and then I'll confirm if it's now fully stable. \r\n\r\nUPDATE:\r\n\r\nI'm running different trainings for couple of days already and it's 100% stable now. Thanks for help! I think that this ticket may be closed/rejected.", "@alewir Thanks for confirming the issue was resolved. Thanks again. I am closing it.", "@jvishnuvardhan I get the same issue with similar code. Using tf2.1 on cuda 10.2 with driver 440.33.01. Interestingly this error only appears when all of the following settings\r\n\r\n* under a strategy scope\r\n* with more than one gpus\r\n* when the sequence_length changes (e.g. going from train to test back to train)\r\n* not in eager mode\r\n\r\nany workaround?", "@faroit Please create a new issue with details and a simple standalone code to reproduce the issue. Thanks!"]}, {"number": 35790, "title": "Add Example usage to tf.math.add", "body": "Participating in GCI '19 (handle is jimmy_page). Task: Add a usage example to TensorFlow 2.0 API documentation. ", "comments": ["I had some issues with my git branches. I will resolve them and create a new pull request, this one need not be merged."]}, {"number": 35789, "title": "DLL load failed even though I have everything installed and I only upgraded tensorflow to 2.10", "body": "Hello I am using tensorflow gpu version. I had tf 2.0 gpu version but tensorboard was giving me some trouble. It was using tf1.4 tensorboard. So I uninstalled tf1.4 and tensorboard1.4 and then upgraded tf2.0 gpu version to tf2.1 gpu version but when I do it it gives me some problems. Here is my system information.\r\n**System information**\r\n- OS - Windows 10\r\n- TensorFlow version: 2.1(after upgrading)\r\n- Python version:3.6.9\r\n- I am using conda environment which I have named tensorflow_gpuenv\r\n- CUDA version: 10.0.130\r\n-CUDNN version: 7.6.0\r\n- GPU model: NVIDIA 1080 TI\r\nSo now I have been using gpu version of tensorflow since a long time. I have everything installed and I also have vs if you are wondering I do not have that and vs 2017 more specifically. And by the way my tf 1 was installed using conda and tf 2 using pip and then tf 2.1 also using pip. So know when I \r\n```py\r\nimport tensorflow\r\n```\r\nit gives me the following error - \r\n\r\n```py\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow\\__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow\\__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow\\__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\Tejas\\Anaconda3\\envs\\tensorflow_gpuenv\\lib\\imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n```\r\n", "comments": ["@rajcivils, Can you check CPU model does your CPU support AVX instruction sets?\r\nPlease take a look at issue [#19584](https://github.com/tensorflow/tensorflow/issues/19584). \r\nhttps://www.tensorflow.org/install/pip?lang=python3#hardware-requirements. Thanks!\r\n", "@gadagashwini You can close this issue. I want to make a new issue as I installed tensorflow from start.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35789\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35789\">No</a>\n", "Closing as requested"]}, {"number": 35788, "title": "Tensors are getting passes to metric functions when they want an array", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Through Pycharm PIP\r\n- TensorFlow version (use command below): 2.0\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 10.2\r\n- GPU model and memory:  GTX 1060 6GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nWhen i pass my numpy array data to fit() i see that at some point tensors are pass to update_state() in the metrics class when they need to be arrays.\r\n\r\n**Describe the expected behavior**\r\n\r\nMaybe tensorflow is not converting these to arrays first?\r\n\r\n**Code to reproduce the issue**\r\nAgain, not sure\r\n\r\n**Other info / logs**\r\ntypes being passed to fit() <class 'numpy.ndarray'>\r\ntypes being passed to update_state() <class 'tensorflow.python.framework.ops.Tensor'>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\sklearn\\utils\\validation.py\", line 159, in _num_samples\r\n    return len(x)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\framework\\ops.py\", line 741, in __len__\r\n    \"shape information.\".format(self.name))\r\nTypeError: len is not well defined for symbolic Tensors. (output_1_target:0) Please call `x.shape` rather than `len(x)` for shape information.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/Ben/PycharmProjects/trader/trainer-crypto.py\", line 17, in <module>\r\n    tune(executions_per_trial, data_params, 'test2')\r\n  File \"C:\\Users\\Ben\\PycharmProjects\\trader\\HPtuner.py\", line 134, in tune\r\n    tuner.search(data, num_executions, val_baseline)\r\n  File \"C:\\Users\\Ben\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\kerastuner\\engine\\base_tuner.py\", line 78, in search\r\n    self.run_trial(trial, *fit_args, **fit_kwargs)\r\n  File \"C:\\Users\\Ben\\PycharmProjects\\trader\\HPtuner.py\", line 100, in run_trial\r\n    history = train(model, data['X_train'], data['y_train'], min_delta, patience, batch_size, X_test=data['X_test'], y_test=data['y_test'])[1]\r\n  File \"C:\\Users\\Ben\\PycharmProjects\\trader\\HPtuner.py\", line 87, in train\r\n    verbose=0)])\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 728, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 224, in fit\r\n    distribution_strategy=strategy)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 547, in _process_training_inputs\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 594, in _process_inputs\r\n    steps=steps)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 2433, in _standardize_user_data\r\n    self._compile_from_inputs(all_inputs, y_input, x, y)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 2668, in _compile_from_inputs\r\n    experimental_run_tf_function=self._experimental_run_tf_function)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\training\\tracking\\base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 366, in compile\r\n    masks=self._prepare_output_masks())\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 2063, in _handle_metrics\r\n    target, output, output_mask))\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 2014, in _handle_per_output_metrics\r\n    metric_fn, y_true, y_pred, weights=weights, mask=mask)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_utils.py\", line 1067, in call_metric_function\r\n    return metric_fn(y_true, y_pred, sample_weight=weights)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\metrics.py\", line 193, in __call__\r\n    replica_local_fn, *args, **kwargs)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\distribute\\distributed_training_utils.py\", line 1135, in call_replica_local_fn\r\n    return fn(*args, **kwargs)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\metrics.py\", line 176, in replica_local_fn\r\n    update_op = self.update_state(*args, **kwargs)  # pylint: disable=not-callable\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\utils\\metrics_utils.py\", line 75, in decorated\r\n    update_op = update_state_fn(*args, **kwargs)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\tensorflow_core\\python\\keras\\metrics.py\", line 582, in update_state\r\n    matches = self._fn(y_true, y_pred, **self._fn_kwargs)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\sklearn\\metrics\\_regression.py\", line 178, in mean_absolute_error\r\n    y_true, y_pred, multioutput)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\sklearn\\metrics\\_regression.py\", line 84, in _check_reg_targets\r\n    check_consistent_length(y_true, y_pred)\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\sklearn\\utils\\validation.py\", line 208, in check_consistent_length\r\n    lengths = [_num_samples(X) for X in arrays if X is not None]\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\sklearn\\utils\\validation.py\", line 208, in <listcomp>\r\n    lengths = [_num_samples(X) for X in arrays if X is not None]\r\n  File \"C:\\Users\\Ben\\AppData\\Roaming\\Python\\Python36\\site-packages\\sklearn\\utils\\validation.py\", line 161, in _num_samples\r\n    raise TypeError(message)\r\nTypeError: Expected sequence or array-like, got <class 'tensorflow.python.framework.ops.Tensor'>\r\n", "comments": []}, {"number": 35787, "title": "[GPU Backend] Tensorflow Task Graph", "body": "I am wondering about the tensorflow task/op graph. Is scheduling done ahead of time? If I am using an accelerator like a GPU using CUDA, how does the tensorflow runtime synchronise data dependencies? Does it use CUDA streams or something more sophisticated?", "comments": ["@jon-chuang, Can you elaborate the issue with code snippet. \r\nPlease provide the information asked in the [template](https://github.com/tensorflow/tensorflow/issues/new/choose). Thanks! ", "@jon-chuang, Please take a look at the [Tensorflow doc](https://www.tensorflow.org/guide/gpu#with_tfdistributestrategy). Thanks!"]}, {"number": 35786, "title": "Some C++ fixes", "body": "", "comments": ["Closing this and opening another one."]}, {"number": 35785, "title": "TPU InternalError with TF 2.1.0 on Google Colab (Assigned device does not have registered OpKernel support for _Arg node iteratorgetnext_iterator)", "body": "**System information**\r\n- Custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n- TensorFlow installed from (source or binary): use of `%tensorflow_version 2.x`\r\n- TensorFlow version (use command below): 2.1.0-rc1\r\n- Python version: 3.6.9\r\n\r\n**Describe the current behavior**\r\n\r\nI tried to run @huan's Google Colab Notebook mentioned [here](https://stackoverflow.com/questions/55541881/how-to-convert-tf-keras-model-to-tpu-using-tensorflow-2-0-in-google-colab/55686370#55686370) and available [here](https://colab.research.google.com/github/huan/tensorflow-handbook-tpu/blob/master/tensorflow-handbook-tpu-example.ipynb). It raises the following error:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInternalError                             Traceback (most recent call last)\r\n<ipython-input-7-79d308ea228d> in <module>()\r\n      4   steps_per_epoch=60,\r\n      5   validation_data=(x_test.astype(np.float32), y_test.astype(np.float32)),\r\n----> 6   validation_freq=5\r\n      7 )\r\n      8 \r\n\r\n11 frames\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nInternalError: Assigned device '/job:worker/replica:0/task:0/device:TPU:0' does not have registered OpKernel support for _Arg\r\n\t [[{{node iteratorgetnext_iterator}}]] [Op:__inference_distributed_function_2822]\r\n```\r\n\r\nI tried `tf.compat.v1.disable_eager_execution()` as discussed [here](https://github.com/huan/tensorflow-handbook-tpu/issues/1) but it doesn't work:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-15-5118e7c1b79a> in <module>()\r\n      6   steps_per_epoch=60,\r\n      7   validation_data=(x_test.astype(np.float32), y_test.astype(np.float32)),\r\n----> 8   validation_freq=5\r\n      9 )\r\n     10 \r\n\r\n25 frames\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/ops.py in convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, dtype_hint, ctx, accepted_result_types)\r\n   1278       graph = get_default_graph()\r\n   1279       if not graph.building_function:\r\n-> 1280         raise RuntimeError(\"Attempting to capture an EagerTensor without \"\r\n   1281                            \"building a function.\")\r\n   1282       return graph.capture(value, name=name)\r\n\r\nRuntimeError: Attempting to capture an EagerTensor without building a function.\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nNot sure if @huan's example should be working given what he explained on [stackoverflow](https://stackoverflow.com/questions/55541881/how-to-convert-tf-keras-model-to-tpu-using-tensorflow-2-0-in-google-colab/55686370#55686370), but I think it should with TF 2.1.0 version.\r\n\r\n**Code to reproduce the issue**\r\nAgain, @huan's work available [here](https://colab.research.google.com/github/huan/tensorflow-handbook-tpu/blob/master/tensorflow-handbook-tpu-example.ipynb).\r\n\r\n**Other info / logs**\r\nI had the same issue with personal code and thought first it was due to `ImageDataGenerator` (see my last comment [here](https://github.com/tensorflow/tensorflow/issues/34346)), however it seems not to be as @huan's example doesn't use it.\r\nI have the same issue on @huan's code with TF 2.1.0 installed with `!pip install tensorflow==2.1.0` in his notebook.", "comments": ["@MichaelKarpe \r\n\r\nI have tried on colab with TF version 2.1.0-rc1 and was able to reproduce the issue.However i tried with `tf.compat.v1.disable_eager_execution()` and i am not seeing any error message. Please, find the gist [here](https://colab.sandbox.google.com/gist/ravikyram/e148b074900cf92a5ab2fc8730fe4f68/tensorflow-2-0-handbook-tpu-example.ipynb). Is this the expected behavior? Thanks!", "@ravikyram \r\n\r\nIndeed I did put `tf.compat.v1.disable_eager_execution()` after the `with strategy.scope():` section and before the `model.fit()`, which was not correct. It works when I put it before `with strategy.scope():`, thus your gist has the expected behavior.", "Please note however that when I use `tf.compat.v1.disable_eager_execution()` in my notebook using `ImageDataGenerator` (not Huan's code), I get the `AssertionError` from `assert isinstance(x, dataset_ops.DatasetV2)` described by the creator of this [issue](https://github.com/tensorflow/tensorflow/issues/34346). Sorry, I am not able to share code to reproduce the issue for now.", "Please find another issue raising the `DatasetV2` `AssertionError` when using `tf.compat.v1.disable_eager_execution()`: https://github.com/tensorflow/tensorflow/issues/32104#issuecomment-540326691\r\n\r\nI tried to switch to a `DatasetV2` from my `ImageDataGenerator` but then I get this [error](https://github.com/tensorflow/tensorflow/issues/34346#issuecomment-569772139).\r\n\r\nIt seems that there are two issues: one with eager execution and then one with the `DatasetV2` assertion when using `ImageDataGenerator` (which occurs when disabling eager execution).", "Can you change \"tf.config.experimental_connect_to_host(resolver.master())\" to \"tf.config.experimental_connect_to_cluster(resolver)\"?\r\n\r\nPlease refer to https://www.tensorflow.org/guide/tpu for the official TPU guide.", "Hi @rxsang @ymodak,\r\n\r\nI tried your suggestion but it didn't change anything. I also tried to make a simple reproducible example but I have now the same error as in the other [issue](https://github.com/tensorflow/tensorflow/issues/34346) about `ImageDataGenerator`. Thus I made a reproducible example using `ImageDataGenerator` with the example from the official TPU guide. Please find the gist [here](https://colab.research.google.com/drive/1-03688teNuDZ3Zqjb5VvlPxwt7wdNom6).", "same probleam , do u slove it ? @MichaelKarpe ", "@bestpredicts I didn't look for a workaround, probably you should build your own `ImageDataGenerator` if you want it to work now. `ImageDataGenerator` should work in `TF 2.2.0` given what's been said [here](https://github.com/tensorflow/tensorflow/issues/34346#issuecomment-577996000).\r\n\r\nIf someone from Tensorflow confirms it's the same issue and it's solved by what's been done in the issue I just mentioned, then we could probably close this issue.", "I believe I have found a way to fix this issue. See https://github.com/huan/tensorflow-handbook-tpu/issues/1#issuecomment-606189444", "@MichaelKarpe Could you please let us know if this issue is resolved as per the above [ comment ](https://github.com/tensorflow/tensorflow/issues/35785#issuecomment-606190516) And if it is resolved please feel free to close this issue ?Thank you!\r\n", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35785\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35785\">No</a>\n"]}, {"number": 35784, "title": "The tflite only utilize single core of CPU", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu18.04 and Raspbian 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nRaspberry Pi 4\r\n- TensorFlow installed from (source or binary):\r\nBinary\r\n- TensorFlow version (use command below):\r\nfor Ubuntu            v1.14.0-rc1-22-gaf24dc9 1.14.0\r\nfor Raspberry Pi     v1.12.1-14948-g43dcb71 1.14.0\r\n- Python version:\r\n3.7\r\n\r\n**Describe the current behavior**\r\nThe tflite only utilize single core of CPU. I test it on PC and raspberry Pi 4.\r\n\r\n**Code to reproduce the issue**\r\n`interpreter = tf.lite.Interpreter(model_content=tflite_model) \r\n\r\ninput_details = interpreter.get_input_details() \r\n\r\noutput_details = interpreter.get_output_details() \r\n\r\ninterpreter.allocate_tensors() \r\n\r\ninterpreter.set_tensor(input_details[0]['index'], inp) \r\n\r\ninterpreter.invoke() \r\n\r\nresult = interpreter.get_tensor(output_details[0]['index'])`\r\n\r\nThe model I use is here:\r\n[1578756226.tar.gz](https://github.com/tensorflow/tensorflow/files/4050550/1578756226.tar.gz)\r\n", "comments": ["Is there any way to solve it now?\r\nThanks for any help.", "I have a patch to enable multi-threading in Python, see https://github.com/tensorflow/tensorflow/pull/25748", "@freedomtan, thanks for your help. I have tried to build the .whl file from your commit. But the network always crashes when downloading Bazel and other files. Could you provide me the compiled .whl, please? Thanks again.", "@woolpeeker check @PINTO0309's repos https://github.com/PINTO0309/Tensorflow-bin and https://github.com/PINTO0309/TensorflowLite-bin", "@freedomtan, you're very kind. I have tested it and set_thread_num to 4, the result is very interesting. Because I tries to test the model speed and run `interperter.invoke()` multiple times. In the first several round, it appear several python process which sum up cpu utilization 400%, but then, it disapears and leave only one python process with utilization 200%. The speed is still slower than when I use the complete tensorflow which can reach 400% utilization. But it doesn't matter, the performance is good enough. Thanks again.", "I'm a bit interested why it can't reach 400% cpu utilization. Are you calling interpreter.invoke repeatedly for a long duration?", "Hi There,\n\n We are checking to see if you still need help on this, as you are using an older version of tensorflow which is officially considered end of life . We recommend that you upgrade to the latest 2.x version and let us know if the issue still persists in newer versions. Please open a new issue for any help you need against 2.x, and we will get you the right help. \n\n This issue will be closed automatically 7 days from now. If you still need help with this issue, please provide us with more information.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35784\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35784\">No</a>\n"]}, {"number": 35783, "title": "model._function_kwargs is silently ignored", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): see below\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows, Linux\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.6\r\n\r\n**Describe the current behavior**\r\nIn this example, no error is raised although session kwargs are not supported in eager mode. kwargs are simply silently ignored.\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\nfetches = [lambda: whatever_I_write_here_is_ignored]\r\n\r\nvar = tf.Variable([[3.0]])\r\nmodel = keras.models.Sequential([keras.layers.Dense(1, input_shape=(1,))])\r\nmodel.compile(loss=\"mse\", optimizer=\"adam\")\r\nmodel._function_kwargs = {\"fetches\": fetches, \"should_fail\": \"ignored_as_well\"}\r\n\r\nmodel.fit([[7.0]], [[9.0]], epochs=2)\r\n```\r\n\r\n**Describe the expected behavior**\r\nAn error should be raised. I am aware that `model._function_kwargs` is not part of the public API, but `keras` (as opposed to `tf.keras`) does raise an error here:\r\n```\r\nimport keras\r\nimport tensorflow as tf\r\n\r\nfetches = [lambda: whatever_I_write_here_is_ignored]\r\n\r\nvar = tf.Variable([[3.0]])\r\nmodel = keras.models.Sequential([keras.layers.Dense(1, input_shape=(1,))])\r\nmodel.compile(loss=\"mse\", optimizer=\"adam\")\r\nmodel._function_kwargs = {\"fetches\": fetches, \"should_fail\": \"ignored_as_well\"}\r\n\r\nmodel.fit([[7.0]], [[9.0]], epochs=2)\r\n```\r\n\r\noutputs\r\n```\r\nException has occurred: ValueError\r\nSession keyword arguments are not support during eager execution. You passed: {'fetches': [<function <lambda> at 0x7f94681be3b0>], 'should_fail': 'ignored_as_well'}\r\n  File \"/home/bersbersbers/.pyenv/versions/3.7.6/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py\", line 3759, in function\r\n```\r\nSomewhat related: https://github.com/tensorflow/tensorflow/issues/34448", "comments": ["I tried replicating issue with Tf 2.1 but facing different error.\r\nPlease find the [gist](https://colab.sandbox.google.com/gist/gadagashwini/b744dcb3fe10d5c97560dce02220af9e/untitled344.ipynb?authuser=1) and confirm. Thanks!", "@gadagashwini you are reproducing the issue just fine. The issue is that in the first example using `from tensorflow import keras` , `fetches = [lambda: whatever_I_write_here_is_ignored]` and `model._function_kwargs = {\"fetches\": fetches, \"should_fail\": \"ignored_as_well\"}` are silently ignored. This is the issue I am reporting.\r\n\r\nI agree that the comparison `import keras` case behaves differently by issuing a different error than I reported initially, but that is not my point. My point is that `keras` is correct to throw an error, and that `tf.keras` is incorrect in not doing the same.", "This is fixed with latest tf-nightly '2.2.0-dev20200325'. Thanks!", "I can still reproduce this issue on `tensorflow==2.2.0rc2`; this version was released to PyPI on March 28, but I don't know how this relates to March 25's nightly that is supposedly fixed.", "Still an issue with `tensorflow==2.2.0rc3`, just in case anyone is wondering.", "@bersbersbers \r\nI ran the code on tf-nightly [2.4.0-dev20200819] and do not face any issues, please find the [gist here](https://colab.research.google.com/gist/Saduf2019/e0171158ebee39eb2d30adb7054af8bc/untitled380.ipynb).", "@Saduf2019 your code does not raise an error. That is the issue, you are reproducing it just fine. Please see https://github.com/tensorflow/tensorflow/issues/35783#issuecomment-573662235 for context.", "This issue still persist on 2.4.0-dev20200819", "The issue still exists in TF nightly version(2.6.0-dev20210524), please find the gist [here](https://colab.research.google.com/gist/sachinprasadhs/122c36f5154898369075959bcc273e7c/35650.ipynb).", "I have come to the conclusion that this can be closed, though. The reference code (using standalone `keras`) does not throw an error, either. And the code using an undocumented API is from TF 2.1 and can be considered outdated.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35783\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35783\">No</a>\n"]}, {"number": 35782, "title": "tensor_jni memory cleanup", "body": "Delete dims[] before return.", "comments": []}, {"number": 35781, "title": "tf.Variable.assign fails silently", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): see below\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10, Linux\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.6\r\n\r\n\r\n**Describe the current behavior**\r\nA special assign operation does nothing (not even raising an error).\r\n\r\n**Describe the expected behavior**\r\nAt least an error should be raised.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\n# tf.config.experimental_run_functions_eagerly(True)\r\nvar = tf.Variable([[3.0]])\r\nmodel = keras.Sequential([keras.layers.Dense(1, input_shape=(1,))])\r\nmodel.compile(loss=\"mse\", optimizer=\"adam\")\r\n\r\ntf.print(var)  # should print 3, OK\r\nvar.assign(model.inputs[0])\r\ntf.print(var)  # should print anything else but 3, or raise an error - but prints 3\r\n```\r\n\r\n**Other info / logs**\r\n```\r\n>>> tf.print(var)  # should print 3, OK\r\n[[3]]\r\n>>> var.assign(model.inputs[0])\r\n<tf.Variable 'UnreadVariable' shape=(1, 1) dtype=float32, numpy=array([[3.]], dtype=float32)>\r\n>>> tf.print(var)  # should print anything else but 3, or raise an error - fail.\r\n[[3]]\r\n```", "comments": ["Issue replicating for [tf-nightly](https://colab.sandbox.google.com/gist/oanush/6c3deeb470d47befe145856a6c714ae8/35781.ipynb#scrollTo=sNXTUz6w-Pb5) , Thanks! ", "@bersbersbers \r\n\r\nI tried in colab with TF nightly version (`2.4.0-dev20200907`) and i can see after assigning operation it is raising an `TypeError:`.Please, find the gist [here](https://colab.research.google.com/gist/ravikyram/85ef6cf191ebdd087c76313532cedb99/untitled318.ipynb).Please, verify once .Thanks!", "@ravikyram thanks, I double-checked that it's throwing an error as expected. I guess TF2.4.0 will have this fix then.", "@bersbersbers \r\n\r\nThank you for the confirmation. I am closing this issue as it was fixed in TF nightly. Thanks!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35781\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35781\">No</a>\n"]}, {"number": 35780, "title": "[ROCm] Add a GPU kernel for RELU int8x4", "body": "This PR adds a ROCm GPU kernel for RELU int8x4 and enables the corresponding test.", "comments": []}, {"number": 35779, "title": "[ROCm] Reenable the zero division test", "body": "This PR enables the zero division test for ROCm and adds the observed value to the list of valid results.", "comments": []}, {"number": 35777, "title": " Windows fatal exception: access violation ", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):windows10\r\n- TensorFlow installed from (source or binary):pip\r\n- TensorFlow version (use command below):2.1\r\n- Python version:3.7.6\r\n- CUDA/cuDNN version:10.1,7.6\r\n- GPU model and memory:GTX1060,6g\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n2020-01-12 02:31:50.290624: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll\r\nWindows fatal exception: access violation\r\n\r\nCurrent thread 0x00002d50 (most recent call first):\r\n  File \"D:\\Anaconda3\\envs\\tf21\\lib\\site-packages\\tensorflow_core\\python\\lib\\io\\file_io.py\", line 84 in _preread_check\r\n  File \"D:\\Anaconda3\\envs\\tf21\\lib\\site-packages\\tensorflow_core\\python\\lib\\io\\file_io.py\", line 122 in read\r\n  File \"D:\\Anaconda3\\envs\\tf21\\lib\\json\\__init__.py\", line 293 in load\r\n  File \"E:\\tensorflow_natural_question\\official\\nlp\\bert\\squad_lib.py\", line 146 in read_squad_examples\r\n  File \"E:\\tensorflow_natural_question\\official\\nlp\\bert\\squad_lib.py\", line 836 in generate_tf_record_from_json_file\r\n  File \"create_finetuning_data.py\", line 152 in generate_squad_dataset\r\n  File \"create_finetuning_data.py\", line 175 in main\r\n  File \"D:\\Anaconda3\\envs\\tf21\\lib\\site-packages\\absl\\app.py\", line 250 in _run_main\r\n  File \"D:\\Anaconda3\\envs\\tf21\\lib\\site-packages\\absl\\app.py\", line 299 in run\r\n  File \"create_finetuning_data.py\", line 184 in <module>\r\n\r\n**Describe the expected behavior**\r\nno bug\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n", "comments": ["@cnzjhdx, Please provide the complete code snippet to replicate the reported issue. Thanks!", "@cnzjhdx, Any update\r\n", "Automatically closing due to lack of recent activity. Please update the issue when new information becomes available, and we will reopen the issue. Thanks!"]}, {"number": 35776, "title": "Fix version comparison for Python 3.10 and 4", "body": "### Fix for Python 3.10: use `sys.version_info` instead of comparing `sys.version` to string\r\n\r\nDon't assume the minor version is a single character: `'3.10' >= '3.4'` is `False`!\r\n\r\n---\r\n\r\n### Fix for Python 4: replace unsafe `six.PY3` with `six.PY2`\r\n\r\nThere's some code which uses `six.PY3`:\r\n\r\n```python\r\nif six.PY3:\r\n    print(\"Python 3+ code\")\r\nelse:\r\n    print \"Python 2 code\" \r\n```\r\n\r\nWhere:\r\n\r\n```python\r\nPY3 = sys.version_info[0] == 3\r\n```\r\n\r\nWhen run on Python 4, this will run the Python 2 code!\r\n\r\nInstead, use `six.PY2`.\r\n\r\n---\r\n\r\nFound using https://github.com/asottile/flake8-2020.\r\n\r\n", "comments": []}, {"number": 35775, "title": "Added MobileNetV2 Usage Example (GCI 2019)", "body": "Hi, I am a GCI 2019 participant and this is a task to add an usage example. ", "comments": ["Closing this since it is a duplicate of PR#[35396](https://github.com/tensorflow/tensorflow/pull/35396)."]}, {"number": 35774, "title": "Installation from Docker instructions have wrong argument in workspace flag", "body": "I'm trying to [build tensorflow from source](https://www.tensorflow.org/install/source) following the Docker instructions:\r\n>docker pull tensorflow/tensorflow:devel\r\n\r\n>docker run -it -w /tensorflow -v $PWD:/mnt -e HOST_PERMS=\"$(id -u):$(id -g)\" \\\r\n    tensorflow/tensorflow:devel bash\r\n>\r\n>git pull  # within the container, download the latest source code\r\n\r\nHere are the commands I run in the terminal (on Ubuntu), along with their output:\r\n```\r\n$ docker --version\r\nDocker version 19.03.2, build 6a30dfc\r\n\r\n$ docker pull tensorflow/tensorflow:devel\r\ndevel: Pulling from tensorflow/tensorflow\r\nDigest: sha256:0ee065743f0001f922561bcba914013929a88263ec2a5af21ba35899c3ac85a7\r\nStatus: Image is up to date for tensorflow/tensorflow:devel\r\ndocker.io/tensorflow/tensorflow:devel\r\n\r\n$ docker run -it -w /tensorflow -v $PWD:/mnt -e HOST_PERMS=\"$(id -u):$(id -g)\" \\\r\n>     tensorflow/tensorflow:devel bash\r\n\r\n________                               _______________                \r\n___  __/__________________________________  ____/__  /________      __\r\n__  /  _  _ \\_  __ \\_  ___/  __ \\_  ___/_  /_   __  /_  __ \\_ | /| / /\r\n_  /   /  __/  / / /(__  )/ /_/ /  /   _  __/   _  / / /_/ /_ |/ |/ / \r\n/_/    \\___//_/ /_//____/ \\____//_/    /_/      /_/  \\____/____/|__/\r\n\r\n\r\nWARNING: You are running this container as root, which can cause new files in\r\nmounted volumes to be created as the root user on your host machine.\r\n\r\nTo avoid this, run the container by specifying your user's userid:\r\n\r\n$ docker run -u $(id -u):$(id -g) args...\r\n\r\nroot@4746a002f18e:/tensorflow# \r\n\r\n```\r\n\r\nBut now, if I run `git pull` as instructed, I get\r\n```\r\nfatal: not a git repository (or any of the parent directories): .git\r\n```", "comments": ["I asked about this on [StackOverflow](https://stackoverflow.com/q/59693655/9988333), and user Zeitounator suggesting instead passing the flag\r\n```\r\n-w /tensorflow_src\r\n```\r\nwhich seems to be working", "@MarcoGorelli, Since issue is resolved can we close this issue. Thanks!", "It's resolved, but will the [instructions](https://www.tensorflow.org/install/source) be updated?", "I notice that the instruction is already updated, so this issue is finally resolved?", "looks like it, thanks!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35774\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35774\">No</a>\n"]}, {"number": 35773, "title": "ImportError: DLL load failed: The specified module could not be found", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information** 64 bit operating system\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 Home Single Language\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):not sure\r\n- TensorFlow version:\r\n- Python version:3.7.6\r\n- Installed using virtualenv? pip? conda?:pip\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nconda create -n tensorflow python=3.7\r\nactivate tensorflow\r\npip install --ignore-installed --upgrade tensorflow\r\npython\r\nimport tensorflow as tf\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow\\__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow\\__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow\\__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\importlib\\__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\Asus Pc\\AppData\\Local\\conda\\conda\\envs\\tensorflow_cpu\\lib\\imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n", "comments": ["Please try to install the correct VisualC++ Redist. - see https://github.com/tensorflow/tensorflow/issues/35036#issuecomment-565605748", "Just to verify did you get chance to follow instructions from [TensorFlow website ](https://www.tensorflow.org/install/source_windows).Please, let us know how it progress. \r\nWhat is make/model of your cpu?\r\nI suspect your cpu model does not support AVX instructions sets.See [hardware requirements](https://www.tensorflow.org/install/pip?lang=python3#hardware-requirements)\r\nThanks!", "Thanks Ravi, you are correct so i setup account on GCP to work on tensorflow\n\nregards\nGuru\n\nOn Mon, Jan 13, 2020 at 1:50 PM ravikyram <notifications@github.com> wrote:\n\n> Just to verify did you get chance to follow instructions from TensorFlow\n> website <https://www.tensorflow.org/install/source_windows>.Please, let\n> us know how it progress.\n> What is make/model of your cpu?\n> I suspect your cpu model does not support AVX instructions sets.See hardware\n> requirements\n> <https://www.tensorflow.org/install/pip?lang=python3#hardware-requirements>\n> Thanks!\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/35773?email_source=notifications&email_token=AOH6V6O5E3WU6JUAAZL7PNLQ5QP3FA5CNFSM4KFRVJG2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEIX3PQQ#issuecomment-573552578>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOH6V6NATUIRMHXQZS3TZS3Q5QP3FANCNFSM4KFRVJGQ>\n> .\n>\n", "@igururaman \r\nThanks Guru for the prompt response. Can we close this thread if it solves your question. Thanks!", "Yes please\n\nRegards.\nGuru\n\nOn Mon, Jan 13, 2020, 17:10 ravikyram <notifications@github.com> wrote:\n\n> @igururaman <https://github.com/igururaman>\n> Thanks Guru for the prompt response. Can we close this thread if it solves\n> your question. Thanks!\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/35773?email_source=notifications&email_token=AOH6V6IS7CKLQAKHZBS23PLQ5RHJPA5CNFSM4KFRVJG2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEIYMY2Q#issuecomment-573623402>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOH6V6KW3ZALDNMCL7CDBPLQ5RHJPANCNFSM4KFRVJGQ>\n> .\n>\n", "Closing per request", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35773\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35773\">No</a>\n"]}, {"number": 35772, "title": "Tensorflow import issue", "body": "error code\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in <module>\r\n    from tensorflow.python import *\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 52, in <module>\r\n    from tensorflow.core.framework.graph_pb2 import *\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\core\\framework\\graph_pb2.py\", line 6, in <module>\r\n    from google.protobuf import descriptor as _descriptor\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\google\\protobuf\\descriptor.py\", line 47, in <module>\r\n    from google.protobuf.pyext import _message\r\nImportError: DLL load failed: The specified procedure could not be found.\r\n\r\n\r\npython version 3.6\r\ntensorflow version 1.5(installed via pip)\r\nvisual studio c++ installed\r\nusing a 64 bit machine", "comments": ["Are you sure, you installed the correct VisualC++ Redist? - see https://github.com/tensorflow/tensorflow/issues/35036#issuecomment-565605748", "yes VisualC++ Redist is already installed", "@arnabnag2000 ,\r\nI see that you are trying to install tf-1.5 version which is very old, please try installing latest version of TF  like 1.15. Also follow the instruction from[ TensorFlow website](https://www.tensorflow.org/install/source_windows). You can have a look on similar issue #[22794](https://github.com/tensorflow/tensorflow/issues/22794)  and #[10033](https://github.com/tensorflow/tensorflow/issues/10033) . let us know if that helps. Looks like you need to add path for CUDA and CuDNN.Thanks!", "installed tensorflow 1.15 and cuda and cudnn\r\nand visual studio 2017\r\n\r\n>>> import tensorflow\r\n2020-01-13 12:01:28.089835: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 99, in <module>\r\n    from tensorflow_core import *\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\__init__.py\", line 28, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\__init__.py\", line 52, in <module>\r\n    from tensorflow.core.framework.graph_pb2 import *\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\core\\framework\\graph_pb2.py\", line 7, in <module>\r\n    from google.protobuf import descriptor as _descriptor\r\n  File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\google\\protobuf\\descriptor.py\", line 47, in <module>\r\n    from google.protobuf.pyext import _message\r\nImportError: DLL load failed: The specified procedure could not be found.", "> installed tensorflow 1.15 and cuda and cudnn\r\n> and visual studio 2017\r\n> \r\n> > > > import tensorflow\r\n> > > > 2020-01-13 12:01:28.089835: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll\r\n> > > > Traceback (most recent call last):\r\n> > > > File \"\", line 1, in \r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow__init__.py\", line 99, in \r\n> > > > from tensorflow_core import *\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core__init__.py\", line 28, in \r\n> > > > from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow__init__.py\", line 50, in **getattr**\r\n> > > > module = self._load()\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow__init__.py\", line 44, in _load\r\n> > > > module = _importlib.import_module(self.**name**)\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\importlib__init__.py\", line 126, in import_module\r\n> > > > return _bootstrap._gcd_import(name[level:], package, level)\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python__init__.py\", line 52, in \r\n> > > > from tensorflow.core.framework.graph_pb2 import *\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\core\\framework\\graph_pb2.py\", line 7, in \r\n> > > > from google.protobuf import descriptor as _descriptor\r\n> > > > File \"C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\google\\protobuf\\descriptor.py\", line 47, in \r\n> > > > from google.protobuf.pyext import _message\r\n> > > > ImportError: DLL load failed: The specified procedure could not be found.\r\n\r\n@arnabnag2000 ,\r\nIs the issue resolved ?if no,mention CUDA and CuDNN versions.Thanks!", "no its not resolved\r\nCUDA VS 10.0\r\nCuDNN VS 7.64\r\n", "@arnabnag2000 ,\r\nCan you check the [issue](https://github.com/tensorflow/tensorflow/issues/28095) and let us know if its helped? Thanks!", "Automatically closing due to lack of recent activity. Please update the issue when new information becomes available, and we will reopen the issue. Thanks!\r\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35772\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35772\">No</a>\n"]}, {"number": 35771, "title": "An exception has occurred, use %tb to see the full traceback.  SystemExit: 2", "body": "This template is for miscellaneous issues not covered by the other issue categories.\r\n\r\nFor questions on how to work with TensorFlow, or support for problems that are not verified bugs in TensorFlow, please go to [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\r\n\r\nIf you are reporting a vulnerability, please use the [dedicated reporting process](https://github.com/tensorflow/tensorflow/blob/master/SECURITY.md).\r\n\r\nFor high-level discussions about TensorFlow, please post to discuss@tensorflow.org, for questions about the development or internal workings of TensorFlow, or if you would like to know how to contribute to TensorFlow, please post to developers@tensorflow.org.\r\n", "comments": ["@isayasfeyera,\r\nPlease fill the template to analyze the issue.\r\nSystem information\r\n\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nTensorFlow installed from (source or binary):\r\nTensorFlow version (use command below):\r\nPython version:\r\nBazel version (if compiling from source):\r\nGCC/Compiler version (if compiling from source):\r\nCUDA/cuDNN version:\r\nGPU model and memory:\r\nYou can collect some of this information using our environment capture script You can also obtain the TensorFlow version with: 1. TF 1.0: python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\" 2. TF 2.0: python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"\r\n\r\nDescribe the current behavior\r\n\r\nDescribe the expected behavior\r\n\r\nCode to reproduce the issue Provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nOther info / logs Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.", "Automatically closing due to lack of recent activity. Please update the issue when new information becomes available, and we will reopen the issue. Thanks!"]}, {"number": 35770, "title": "ERROR: ~/....../tensorflow/python/keras/api/BUILD:130:1: Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed", "body": "\r\nbazel 1.1.0\r\n\r\n```console\r\n\u279c  tensorflow git:(master) \u2717 bazel version\r\nBuild label: 1.1.0- (@non-git)\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed. Jan. 8 01:20:59 2020 (1578446459)\r\nBuild timestamp: 1578446459\r\nBuild timestamp as int: 1578446459\r\n```\r\n\r\nfailed to build tensorflow master.\r\n```console\r\nINFO: From Compiling tensorflow/lite/toco/graph_transformations/propagate_array_data_types.cc [for host]:\r\ntensorflow/lite/toco/graph_transformations/propagate_array_data_types.cc: In member function 'virtual tensorflow::Status toco::PropagateArrayDataTypes::Run(toco::Model*, std::size_t, bool*)':\r\ntensorflow/lite/toco/graph_transformations/propagate_array_data_types.cc:173:25: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n       for (int i = 0; i < op->outputs.size(); ++i) {\r\n                       ~~^~~~~~~~~~~~~~~~~~~~\r\nERROR: ~/....../tensorflow/python/keras/api/BUILD:130:1: Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 776, in <module>\r\n    main()\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 772, in main\r\n    lazy_loading, args.use_relative_imports)\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 629, in create_api_files\r\n    compat_api_versions, lazy_loading, use_relative_imports)\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 503, in get_api_init_text\r\n    _, attr = tf_decorator.unwrap(attr)\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/tf_decorator.py\", line 219, in unwrap\r\n    elif _has_tf_decorator_attr(cur):\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/tf_decorator.py\", line 124, in _has_tf_decorator_attr\r\n    hasattr(obj, '_tf_decorator') and\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/lazy_loader.py\", line 62, in __getattr__\r\n    module = self._load()\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/lazy_loader.py\", line 45, in _load\r\n    module = importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n    _wrap_py_utils = swig_import_helper()\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 684, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 658, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 571, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 922, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: ~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor14StreamExecutor18EnablePeerAccessToEPS0_\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: ~/....../tensorflow/python/tools/BUILD:81:1 Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nINFO: Elapsed time: 10740.244s, Critical Path: 307.06s\r\nINFO: 15793 processes: 15793 local.\r\nFAILED: Build did NOT complete successfully\r\n```", "comments": ["This problem occurs when tensorrt is enabled, whether it is Python 2 or Python 3, or whether it is tensorrt 6 or tensorrt 7.\r\n\r\nEveryone can try the following docker image to reproduce this problem:\r\n\r\n- [https://hub.docker.com/r/vistart/build_tensorflow](https://hub.docker.com/r/vistart/build_tensorflow)", "\r\n@vistart \r\n\r\nThank you for your prompt reply. I'm using Python3.6 + TensorRT 7.\r\n\r\n\r\n", "Please provide details about what platform you are using (operating system, architecture). Also include your TensorFlow version.\r\n\r\nProvide the exact sequence of commands / steps that you executed before running into the problem. Thanks!\r\n\r\n", "> Please provide details about what platform you are using (operating system, architecture). Also include your TensorFlow version.\r\n> \r\n> Provide the exact sequence of commands / steps that you executed before running into the problem. Thanks!\r\n\r\nI simply made several docker images for building tensorflow. I have uploaded it to the docker hub and the link is [here](https://hub.docker.com/r/vistart/build_tensorflow).\r\n\r\nThe images with compilation problems are as follows(You can click on the link to see the dockerfile that made the image):\r\n- [vistart/build_tensorflow:py27-cuda10.0-tf2](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/py27/Dockerfile) (depends on [vistart/cuda:10.0-cudnn7-tensorrt7-devel-ubuntu18.04](https://github.com/vistart/Dockerfiles/blob/cuda/cuda/ubuntu18.04/10.0/devel/cudnn7/tensorrt7/Dockerfile))\r\n- [vistart/build_tensorflow:py27-cuda10.1-tf2](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/py27-cuda10.1/Dockerfile) (depends on [vistart/cuda:10.1-cudnn7-tensorrt6-devel-ubuntu18.04](https://github.com/vistart/Dockerfiles/blob/cuda/cuda/ubuntu18.04/10.1/devel/cudnn7/tensorrt6/Dockerfile))\r\n- [vistart/build_tensorflow:py27-cuda10.2-tf2](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/py27-cuda10.2/Dockerfile) (depends on [vistart/cuda:10.2-cudnn7-tensorrt7-devel-ubuntu18.04](https://github.com/vistart/Dockerfiles/blob/cuda/cuda/ubuntu18.04/10.2/devel/cudnn7/tensorrt7/Dockerfile))\r\n- [vistart/build_tensorflow:py36-cuda10.0-tf2](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/py36/Dockerfile) (depends on [vistart/cuda:10.0-cudnn7-tensorrt7-devel-ubuntu18.04](https://github.com/vistart/Dockerfiles/blob/cuda/cuda/ubuntu18.04/10.0/devel/cudnn7/tensorrt7/Dockerfile))\r\n- [vistart/build_tensorflow:py36-cuda10.1-tf2](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/py36-cuda10.1/Dockerfile) (depends on [vistart/cuda:10.1-cudnn7-tensorrt6-devel-ubuntu18.04](https://github.com/vistart/Dockerfiles/blob/cuda/cuda/ubuntu18.04/10.1/devel/cudnn7/tensorrt6/Dockerfile))\r\n- [vistart/build_tensorflow:py36-cuda10.2-tf2](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/py36-cuda10.2/Dockerfile) (depends on [vistart/cuda:10.2-cudnn7-tensorrt7-devel-ubuntu18.04](https://github.com/vistart/Dockerfiles/blob/cuda/cuda/ubuntu18.04/10.2/devel/cudnn7/tensorrt7/Dockerfile))\r\n\r\nThe above images already contain the source code of Tensorflow 2.1.0, and the submission signature is e5bf8de410005de06a7ff5393fafdf832ef1d4ad.\r\n\r\nThe differences between the above images are the python and cuda versions, as the tag names indicate. Each image uses ubuntu18.04. Specific environment can refer to the introduction on [this page](https://hub.docker.com/r/vistart/cuda). For example, the environment of the image(vistart/cuda:10.0-cudnn7-tensorrt7-devel-ubuntu18.04) is:\r\n\r\n- cuda 10.2.89\r\n- cudnn 7.6.5.32\r\n- nccl 2.5.6\r\n- tensorrt 7.0.0.11\r\n\r\n## Compilation parameters(.tf_configure.bazelrc)\r\n\r\n[python2.7](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/.tf_configure.bazelrc.py27) | [python3.6](https://github.com/vistart/Dockerfiles/blob/build_tensorflow/build_tensorflow/.tf_configure.bazelrc.py36)\r\n\r\n# Steps for usage:\r\n\r\n## 1. Create the container for building tensorflow:\r\n\r\n```\r\ndocker run -itd --rm --runtime=nvidia --name build_tensorflow_2_py27_cuda10.0 -v /home/jenkins/workspace:/mnt  -w /root/tensorflow -u root\r\n```\r\n\r\n## 2. Build the tensorflow\r\n\r\n```\r\ndocker exec build_tensorflow_2_py27_cuda10.0 bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n", "```\r\nERROR: /root/tensorflow/tensorflow/BUILD:881:1: Executing genrule //tensorflow:tf_python_api_gen_v2 failed (Exit 1)\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 85, in <module>\r\n\r\n    from tensorflow.python.ops.standard_ops import *\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/ops/standard_ops.py\", line 117, in <module>\r\n\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/__init__.py\", line 22, in <module>\r\n\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 28, in <module>\r\n\r\n    from tensorflow.compiler.tf2tensorrt import wrap_py_utils\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n\r\n    _wrap_py_utils = swig_import_helper()\r\n\r\n  File \"/root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\n\r\nImportError: /root/.cache/bazel/_bazel_root/efb88f6336d9c4a18216fb94287b8d97/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor14StreamExecutor18EnablePeerAccessToEPS0_\r\n\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n\r\nUse --verbose_failures to see the command lines of failed build steps.\r\n\r\nERROR: /root/tensorflow/tensorflow/python/tools/BUILD:97:1 Executing genrule //tensorflow:tf_python_api_gen_v2 failed (Exit 1)\r\n```", "As long as tensorrt 6 or 7 is enabled, the same problem will occur under cuda10.0, 10.1, 10.2 and python2.7, 3.6, whether it is ubuntu18.04 or windows10.", "I am also having the same issue.", "Ubuntu 18.04, TF 2.1, CUDA 10.2, TensorRT 7, cudnn 7, bazel 0.27.2 and with 0.29.1 too.\r\n```\r\n[39,613 / 39,674] 15 actions running\r\n[39,620 / 39,675] 16 actions, 15 running\r\n    Compiling tensorflow/core/kernels/conv_ops_fused_float.cc; 203s local\r\n[39,629 / 39,677] 15 actions, 14 running\r\n    Compiling tensorflow/core/kernels/conv_ops_fused_float.cc; 203s local\r\nERROR: /home/jonas/tensorflow/tensorflow/BUILD:881:1: Executing genrule //tensorflow:tf_python_api_gen_v2 failed (Exit 1)\r\n[39,634 / 39,678] 15 actions running\r\n    Compiling tensorflow/core/kernels/conv_ops_fused_float.cc; 203s local\r\n2020-02-08 14:50:30.456621: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.2\r\nTraceback (most recent call last):\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 85, in <module>\r\n    from tensorflow.python.ops.standard_ops import *\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/ops/standard_ops.py\", line 117, in <module>\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/__init__.py\", line 22, in <module>\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 28, in <module>\r\n    from tensorflow.compiler.tf2tensorrt import wrap_py_utils\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n    _wrap_py_utils = swig_import_helper()\r\n  File \"/home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /home/jonas/.cache/bazel/_bazel_jonas/94e1c862effc6da040a35101d0b11916/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_2_tf_python_api_gen_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor14StreamExecutor18EnablePeerAccessToEPS0_\r\n----------------\r\nNote: The failure of target //tensorflow:create_tensorflow.python_api_2_tf_python_api_gen_v2 (with exit code 1) may have been caused by the fact that it is a Python 2 program that was built in the host configuration, which uses Python 3. You can change the host configuration (for the entire build) to instead use Python 2 by setting --host_force_python=PY2.\r\n\r\nIf this error started occurring in Bazel 0.27 and later, it may be because the Python toolchain now enforces that targets analyzed as PY2 and PY3 run under a Python 2 and Python 3 interpreter, respectively. See https://github.com/bazelbuild/bazel/issues/7899 for more information.\r\n----------------\r\n[39,634 / 39,678] 15 actions running\r\n    Compiling tensorflow/core/kernels/conv_ops_fused_float.cc; 203s local\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: /home/jonas/tensorflow/tensorflow/python/tools/BUILD:140:1 Executing genrule //tensorflow:tf_python_api_gen_v2 failed (Exit 1)\r\nINFO: Elapsed time: 9782.993s, Critical Path: 386.77s\r\nINFO: 22453 processes: 22453 local.\r\n\r\n```", "I'm also seeing this on:\r\n* Ubuntu 18.04, x86_64\r\n* TensorRT 7 or 6\r\n* CUDA 10.2\r\n* TF 2.1.0\r\n* Python 3.6\r\n* Bazel 0.29.1\r\n\r\nIs there a fix in the works? Has anyone found a way around this?\r\n\r\nAnd why is it trying to build any of the python 2 targets in the first place? During configure I explicitly said use python 3...", "I believe I have the same problem.\r\n\r\n- 18.04.4 LTS\r\n- TensorRT 6\r\n- CUDA 10.0\r\n- TF 2.1.0\r\n- Bazel 0.24.1\r\n\r\n```\r\nERROR: /home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/external/org_tensorflow/tensorflow/python/keras/api/BUILD:129:1: Executing genrule @org_tensorflow//tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 85, in <module>\r\n    from tensorflow.python.ops.standard_ops import *\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/ops/standard_ops.py\", line 117, in <module>\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/__init__.py\", line 22, in <module>\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 28, in <module>\r\n    from tensorflow.compiler.tf2tensorrt import wrap_py_utils\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n    _wrap_py_utils = swig_import_helper()\r\n  File \"/home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\nImportError: /home/baris/.cache/bazel/_bazel_baris/88b8d574e18ace4f095f2d8aed3cb778/execroot/tf_serving/bazel-out/host/bin/external/org_tensorflow/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor8internal9DsoLoader26TryDlopenTensorRTLibrariesEv\r\n```", "I opened a more generic issue for this https://github.com/tensorflow/tensorflow/issues/37076 FYI\r\n@barisdemiray @EricSites @jggithub2017 ", "Use --noincompatible_do_not_split_linking_cmdline, when you want to build your tf2.1.0, such as:\r\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package  --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --noincompatible_do_not_split_linking_cmdline", "@jiapei100 Could you please let us know if you still need help on this issue? if it is resolved then please feel free to move this issue to close status ? refer **[link](https://github.com/tensorflow/tensorflow/issues/37076)** Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35770\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35770\">No</a>\n"]}, {"number": 35769, "title": "No module named 'tensorflow.python.keras.applications.ResNet50'", "body": "", "comments": ["![image](https://user-images.githubusercontent.com/56769420/72201840-099a8f00-347a-11ea-9d44-5b5820c9731d.png)\r\ni have this issue anyone here who can help???\r\n", "Try import tensorflow.keras.applications.ResNet50", "@UHayyat007 ,\r\nHi, please try using \r\n```\r\nimport tensorflow.keras.applications.ResNet50\r\nfrom keras_applications.resnet import ResNet50\r\n\r\n```\r\nOr if you just want to use ResNet50\r\n\r\n```\r\nimport tensorflow.keras.applications.ResNet50\r\nfrom keras.applications.resnet50 import ResNet50\r\n\r\n```\r\nfor more info please refer the [link](https://stackoverflow.com/questions/54682539/i-am-not-able-to-import-resnet-from-keras-applications-module).", "thank you\n\n\nOn Mon, Jan 13, 2020 at 8:23 AM oanush <notifications@github.com> wrote:\n\n> @UHayyat007 <https://github.com/UHayyat007> ,\n> Hi, please try using\n> from keras_applications.resnet import ResNet50\n>\n> Or if you just want to use ResNet50\n>\n> from keras.applications.resnet50 import ResNet50\n> for more info please refer the link\n> <https://stackoverflow.com/questions/54682539/i-am-not-able-to-import-resnet-from-keras-applications-module>\n> .\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/35769?email_source=notifications&email_token=ANRDXDHJ2TQLWRDGQJXULVLQ5PNBTA5CNFSM4KFQ56MKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEIXNNLI#issuecomment-573494957>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ANRDXDCO2LFHBIDNHIVE7GTQ5PNBTANCNFSM4KFQ56MA>\n> .\n>\n", "Closing since the issue is resolved.Thanks!", "This works for me with \r\ntensorflow ver.: 2.0.0\r\nkeras ver.: 2.2.4-tf\r\npython ver.: 3.7.6 (default, Jan  8 2020, 20:23:39) [MSC v.1916 64 bit (AMD64)]\r\n\r\n**from tensorflow.python.keras.applications import ResNet50**\r\nResNet50_model_ = ResNet50(weights='imagenet')", "Hi,\r\nI'm having a very similar issue with not being able to import the ResNet50 module with the module not being found.\r\nI have tried both:\r\n`import tensorflow.python.keras.applications.ResNet50\r\nfrom keras.applications.resnet50 import ResNet50`\r\nas well as, from the original code (it's not mine)\r\n`from keras.applications.resnet50 import ResNet50`\r\nI've tried combinations of others but cant seem to get any solution to work.\r\n\r\nIm running the code in a miniconda env\r\npip version: 21.2.4\r\npython 3.9.11\r\nkeras ver.: 2.8.0\r\ntensorflow ver.: 2.8.0\r\nI also have installed visual studio 2015, '17 and '19, CUDA installed on compatible GPU and checked %PATH% to ensure cuDNN64_8.dll is enabled.\r\n\r\nThanks! \r\n\r\n"]}, {"number": 35768, "title": "Add `run_eagerly` to .compile() docs", "body": "Closes #34890 \r\n\r\ncc @lamberta ", "comments": []}, {"number": 35767, "title": "tensorflow-gpu not working", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10, 64 bit\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: tensorflow-gpu==2.1.0\r\n- Python version: Python 3.7.6 (tags/v3.7.6:43364a7ae0, Dec 19 2019, 00:42:30) [MSC v.1916 64 bit (AMD64)] on win32\r\n- Installed using virtualenv? pip? conda?: pip\r\n- CUDA/cuDNN version: CUDA: 10.1\r\n- GPU model and memory: GeForce GTX 1060 with Max-Q, Memory: 8GB\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n\r\nTensorflow is not able to get imported properly.\r\nthe program is simple:\r\n```\r\nimport tensorflow as tf\r\n\r\nhello = tf.constant('Hello, TensorFlow!')\r\nsess = tf.Session()\r\nprint(sess.run(hello))\r\n```\r\n\r\n\r\n\r\nTensorflow returns following error:\r\n```\r\n\"D:\\Multiverse_Projects\\Python Environment\\Scripts\\python.exe\" \"D:\\Apps\\JetBrains\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\" --multiproc --qt-support=auto --client 127.0.0.1 --port 50936 --file \"D:/Multiverse_Projects/Final year project- Fall Detection/fall-detection-two-stream-cnn-master/tensorflow_test.py\"\r\npydev debugger: process 4236 is connecting\r\n\r\nConnected to pydev debugger (build 191.7479.30)\r\nTraceback (most recent call last):\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\prahu\\AppData\\Local\\Programs\\Python\\Python37\\lib\\imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\prahu\\AppData\\Local\\Programs\\Python\\Python37\\lib\\imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\Apps\\JetBrains\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1758, in <module>\r\n    main()\r\n  File \"D:\\Apps\\JetBrains\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1752, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"D:\\Apps\\JetBrains\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\pydevd.py\", line 1147, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"D:\\Apps\\JetBrains\\PyCharm Community Edition 2019.1.3\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"D:/Multiverse_Projects/Final year project- Fall Detection/fall-detection-two-stream-cnn-master/tensorflow_test.py\", line 1, in <module>\r\n    import tensorflow as tf\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow\\__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow\\__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow\\__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"C:\\Users\\prahu\\AppData\\Local\\Programs\\Python\\Python37\\lib\\importlib\\__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"D:\\Multiverse_Projects\\Python Environment\\lib\\site-packages\\tensorflow_core\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\prahu\\AppData\\Local\\Programs\\Python\\Python37\\lib\\imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\prahu\\AppData\\Local\\Programs\\Python\\Python37\\lib\\imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\nProcess finished with exit code -1\r\n\r\n```\r\n\r\n\r\nI have set all the environment variables.\r\nOne issue I faces during the installation was that the cudnn-10.1 zip downloaded from the [Nvidia website](https://developer.nvidia.com/cudnn) seems to be corrupt, no matter what zip software I use.\r\n\r\nAlthough, I was able to unzip the required files (not sure if they are not broken), and follow this process: https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#install-windows\r\n\r\nI've tried multiple TensorFlow versions including the CPU only ones. Same issue in each.\r\n\r\n", "comments": ["Please try to install the correct VisualC++ Redist. - see https://github.com/tensorflow/tensorflow/issues/35036#issuecomment-565605748", "@praharshbhatt,  Check your CPU model, does your CPU support AVX instruction sets?\r\nNext, MSVC 2015 redistributable update 3. It is listed here under windows:\r\nhttps://www.tensorflow.org/install/pip. ", "@praharshbhatt, Were you able to solve this issue. Thanks!", "Thanks for the reply, I had the work done with visual CV so did not have to install Tensorflow.\r\nI will comment if the issue arises in future."]}, {"number": 35766, "title": "tensorflow-gpu Importerror: DLL load failed: DLL initialization routine failed.", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): windows 10 pro 1909\r\n- TensorFlow installed from (source or binary): https://files.pythonhosted.org/packages/\r\n- TensorFlow version:1.8.0\r\n- Python version:3.6.8\r\n- Installed using virtualenv? pip? conda?: pip\r\n- CUDA/cuDNN version:CUDA 9.0/cuDNN7.0(and cuDNN7.1)\r\n- GPU model and memory:GTX1050 (4GB)\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nImport tensorflow error ,it reads  DLL initialization routine failed,i have changed  vc++ 2015  runtime libs(both x64 and x86) and using Nvidia display driver version 385.54(CUDA9.0 default)\r\n\r\nIf I use tensorflow-gpu 2.1.0 and import tensorflow, python will crash immediately, but if it is 1.8.0 or 1.7.0, python will run for a few seconds or so, and then the above error occurs\r\n\r\n**Any other info / logs**\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n```\r\nTraceback (most recent call last):\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\nfrom tensorflow.python.pywrap_tensorflow_internal import *\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 18, in <module>  \r\n_pywrap_tensorflow_internal = swig_import_helper()\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 17, in swig_import_helper\r\nreturn importlib.import_module(mname)\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\importlib\\__init__.py\", line 126, in import_module\r\nreturn _bootstrap._gcd_import(name[level:], package, level)\r\nImporterror: DLL load failed: DLL initialization routine failed.\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\nFile \"f:/DL/1 hello world/index.py\", line 1, in <module>\r\nimport tensorflow as tf\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in <module>\r\nfrom tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 49, in <module>\r\nfrom tensorflow.python import pywrap_tensorflow\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 74, in <module>\r\nraise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\nfrom tensorflow.python.pywrap_tensorflow_internal import *\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 18, in <module>  \r\n_pywrap_tensorflow_internal = swig_import_helper()\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 17, in swig_import_helper\r\nreturn importlib.import_module(mname)\r\nFile \"C:\\Users\\Hasee\\AppData\\Local\\Programs\\Python\\Python36\\lib\\importlib\\__init__.py\", line 126, in import_module\r\nreturn _bootstrap._gcd_import(name[level:], package, level)\r\nImporterror: DLL load failed: DLL initialization routine failed.\r\nFailed to load the native TensorFlow runtime.\r\n DLL initialization routine failed\r\n```", "comments": ["OK guys,i currently solved this problem,It is because of my CPU is Pentium G5420 and it doesnt support AVX2 instruction set. So do not install tensorflow by pip and download tensorflow for SSE2 at  https://github.com/fo40225/tensorflow-windows-wheel", "@heyheyheyheyhey1 \r\n\r\nPlease, see [hardware requirements](https://www.tensorflow.org/install/pip?lang=python3#hardware-requirements). Uninstall tensorflow using pip and reinstall using \"`conda install TensorFlow\" ` and check. Can we close this thread if your issue got resolved. Thanks!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "> @heyheyheyheyhey1\r\n> \r\n> Please, see [hardware requirements](https://www.tensorflow.org/install/pip?lang=python3#hardware-requirements). Uninstall tensorflow using pip and reinstall using \"`conda install TensorFlow\" ` and check. Can we close this thread if your issue got resolved. Thanks!\r\n\r\nBro, is there any differences using conda or pip?(I am sure my problem originate from my CPU's dosent support AVX)", "@heyheyheyheyhey1 \r\nPlease, go through the [article](https://towardsdatascience.com/stop-installing-tensorflow-using-pip-for-performance-sake-5854f9d9eb0c) and #23683.Can we close this thread as it looks like you already solved the problem. Thanks!", "> @heyheyheyheyhey1\r\n> Please, go through the [article](https://towardsdatascience.com/stop-installing-tensorflow-using-pip-for-performance-sake-5854f9d9eb0c) and #23683.Can we close this thread as it looks like you already solved the problem. Thanks!\r\n\r\nyes,please", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35766\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35766\">No</a>\n"]}, {"number": 35765, "title": "Autograph failure with `\\`", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: Nvidia RTX 2080\r\n\r\n**Describe the current behavior**\r\nTensorflow shows warning about  failure of autograph\r\n```\r\nWARNING:tensorflow:AutoGraph could not transform <bound method C.f of <__main__.C object at 0x7f4a83904668>> and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: expected exactly one node node, found [<gast.gast.FunctionDef object at 0x7f4a47e0d5c0>, <gast.gast.Return object at 0x7f4a47e0df28>]\r\n```\r\nThe warning seems to be caused by the backslash `\"\\\"`. \r\n\r\n**Describe the expected behavior**\r\nThere should be no such warning\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n\r\nclass C(object):\r\n    def f(self):\r\n        # error disappear if \\ in the following line is removed\r\n        a = \\\r\n            1\r\n        return a\r\n\r\nobj = C()\r\n\r\n@tf.function\r\ndef func():\r\n    mem =  obj.f()\r\n    return mem\r\n\r\ndef main():\r\n    print(func())\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n", "comments": ["Just ran into this as well, removing the slash fixed it. ", "I am closing this as the related PR fix merged. Thanks!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765\">No</a>\n", "@jvishnuvardhan which PR fixed this bug?", "@emailweixu Sorry. I thought it was merged into `master` branch in `tensorflow`. It was my mistake. I am reopening it. Thanks!", "Looks like a bug in the parser. `dedent_block` seems to be confused by the backslash continuation:\r\n\r\n```\r\ns = r'''\r\n    def f():\r\n        a = \\\r\n            1\r\n        return a\r\n'''\r\n\r\nprint(dedent_block(s))\r\n```\r\n\r\n```\r\ndef f():\r\n    a = \\\r\n    1\r\nreturn a\r\n```", "For a workaround until this is fixed, note that you can use parentheses to break expressions on multiple lines:\r\n\r\n```\r\na = (\r\n    1)\r\n```", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765\">No</a>\n"]}, {"number": 35764, "title": "[ROCm] Minor updates to sync some of the ROCm fork contents ", "body": "see individual commit messages for details.\r\n\r\n-------\r\n\r\n/cc @whchung @chsigg @cheshire ", "comments": ["Let's break this up into multiple PRs and discuss one by one. It would be also good to understand why you are seeing a compilation failure but we don't. What toolchain do you use?", "@cheshire I have broken up this PR into the following 6\r\n\r\n#36017 \r\n#36018 \r\n#36019 \r\n#36030 \r\n#36031 \r\n#36032 \r\n\r\nClosing out this PR."]}, {"number": 35763, "title": "A Subclass of Custom Loss Function Is not Trackable as an Argument in Checkpoint", "body": "Tf Version: 2.0.0\r\nPython: 3.7.5\r\nIDE: Spyder\r\nOS: Windows\r\n\r\nI wrote a subclass of custom loss function and tried to list it in the arguments of a checkpoint as follows. The model is an arbitrary one\r\n```\r\nclass SoftDiceLoss(tf.keras.losses.Loss):\r\n    '''\r\n    SoftDiceLoss calculates multi-class soft dice loss\r\n    loss = avg_batch(1-(sum(W_k*sum(yPred.*yTrue)))/(sum(W_ksum(yPred^2+yTrue^2))))\r\n    where W_k = 1/(number of voxels in class k)^wPow\r\n    Class number of segmented regions includes background\r\n    Args:\r\n        yPred/yTrue: prediced and desired outputs shaped as [mbSize, classNum, tensor dimensions]. Also, both must be float-point\r\n    \twPow, power of weiight. A higher one favours classes with a smaller number of voxels\r\n    Return:\r\n        loss: a scalar tensor\r\n    '''\r\n    def __init__(self, wPow=2.0, name='SoftDiceLoss'):\r\n        super().__init__(name=name)\r\n        self.epsilon = 1e-16 \r\n        self.wPow = wPow\r\n\r\n    def call(self, yPred, yTrue):\r\n        yTrue =tf.dtypes.cast(yTrue, dtype=yPred.dtype)\r\n\t\t# Dot product yPred and yTrue and sum them up for each datum and class\r\n        crossProd=tf.multiply(yPred, yTrue)\r\n\t\t# As a symbolic tensor, dimensions and shapes etc. cannot be extracted from data, nor can it be used in subroutines.\r\n        crossProdSum=tf.math.reduce_sum(crossProd, axis=np.arange(2, 5)) #tf.rank(yTrue)))\r\n\t\t# Calculate weight for each datum and class \r\n        weight = tf.math.reduce_sum(yTrue, axis=np.arange(2, 5))#tf.rank(yTrue)))\r\n\t\t#weight = tf.math.divide(1, tf.math.square(weight)+self.epsilon)\r\n        weight = tf.math.divide(1, tf.math.pow(weight, self.wPow)+self.epsilon)\r\n\t\t# Weighted sum over classes\r\n        numerator = 2*tf.math.reduce_sum(tf.multiply(crossProdSum, weight), axis=1)\r\n\t\t# Saquared summation \r\n        yySum = tf.math.reduce_sum(tf.math.square(yPred) + tf.math.square(yTrue), axis=np.arange(2, 5))#tf.rank(yTrue)))\r\n\t\t# Weighted sum over classes\r\n        denominator = tf.math.reduce_sum(tf.multiply(weight, yySum), axis=1)\r\n\t\t# Get individual loss and average over minibatch\r\n        loss = tf.math.reduce_mean(1 - tf.math.divide(numerator, denominator+self.epsilon))\r\n\t\t\t\r\n        return loss\r\n    \r\n    def get_config(self):\r\n        config = super(SoftDiceLoss, self).get_config()\r\n        return config\r\n\r\ncurOpt = tf.keras.optimizers.Adam(learning_rate=1e-4)\t\r\nlossFunc=SoftDiceLoss(2.0)\r\nckpt = tf.train.Checkpoint(model=myModel(...), optimizer=curOpt, lossFunc=lossFunc, accFunc=accFunc)\r\n\r\n```\r\n\r\nI got the following error\r\n```\r\nckpt = tf.train.Checkpoint(model=myModel(...), optimizer=curOpt, lossFunc=lossFunc, accFunc=accFunc)\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-17-a4d9163bdda3>\", line 2, in <module>\r\n    optimizer=curOpt, lossFunc=lossFunc, accFunc=accFunc)\r\n\r\n  File \"D:\\TProgramFiles\\Anaconda3\\envs\\keras-gpu\\lib\\site-packages\\tensorflow_core\\python\\training\\tracking\\util.py\", line 1779, in __init__\r\n    % (v,))\r\n\r\nValueError: `Checkpoint` was expecting a trackable object (an object derived from `TrackableBase`), got <SoftDiceLoss object at 0x0000000011F6F7C8>. If you believe this object should be trackable (i.e. it is part of the TensorFlow Python API and manages state), please open an issue.\r\n```\r\nI am not sure if a subclass is trackable or not. Is that an intention of design? Or shall such a feature be added? \r\nBy the way, if I change the subclass into a normal function, it works fine. Actually, my accFunc(...) is just a normal function.", "comments": ["@yourtheron ,\r\nCan you please please provide complete reproducible code to reflect this issue?Thanks!", "@oanush Sure. The following code snippet can reproduce the issue, and I have verified it on Colab\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import layers, activations\r\n\r\nclass C3BR(tf.keras.Model):\r\n    def __init__(self, filterNum, kSize, strSize, padMode, dFormat='channels_first'):\r\n        super(C3BR, self).__init__()\r\n        if dFormat == 'channels_first':\r\n            self.conAx = 1\r\n        else:\r\n            self.conAx = -1\r\n        self.kSize = (kSize, kSize, kSize)\r\n        self.conv = layers.Conv3D(filters=filterNum, kernel_size=self.kSize, strides=strSize, padding=padMode, data_format=dFormat)\r\n        self.BN = layers.BatchNormalization(axis=self.conAx)\r\n        self.Relu = layers.ReLU()\r\n    \r\n    def call(self, inputs, ifTrain=False):\r\n        x = self.conv(inputs)\r\n        x= self.BN(x, training=ifTrain)\r\n        outputs = self.Relu(x)\r\n        return outputs\r\n\r\n    def build_model(self, input_shape):\r\n        ''' A work-around to define dimensions of signals through the NN'''\r\n        self.build(input_shape)\r\n        inputs = tf.keras.Input(shape=input_shape[1:])\r\n        _ = self.call(inputs, True) \r\n\r\n\r\nclass lossExample(tf.keras.losses.Loss):\r\n\r\n    def __init__(self, name='lossExample'):\r\n        super().__init__(name=name)\r\n\t\t\r\n    def call(self, yPred, yTrue):\r\n\t\t\t\r\n        return tf.reduce_mean(yPred - yTrue)\r\n    \r\n\r\ncurOpt = tf.keras.optimizers.Adam(learning_rate=1e-4)\t\r\nlossFunc=lossExample()\r\nckpt = tf.train.Checkpoint(model=C3BR(32, 3, 1, 'valid'), optimizer=curOpt, lossFunc=lossFunc)\r\n\r\n```\r\nIf I use a normal tf function, it works\r\n```\r\n@tf.function\r\ndef lossExample(yPred, yTrue):\r\n    return tf.reduce_mean(yPred-yTrue)\r\n\r\ncurOpt = tf.keras.optimizers.Adam(learning_rate=1e-4)\t\r\nckpt = tf.train.Checkpoint(model=C3BR(32, 3, 1, 'valid'), optimizer=curOpt, lossFunc=lossExample)\r\n```", "Issue replicating for [tf-nightly](https://colab.sandbox.google.com/gist/oanush/9bfa54eea4b310293ecb54ce9297556a/35888.ipynb).Thanks!", "This is still reproducing same error. Here is the full error trace for our reference. Thanks!\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-4-70b3948a7d11> in <module>()\r\n     39 curOpt = tf.keras.optimizers.Adam(learning_rate=1e-4)\r\n     40 lossFunc=lossExample()\r\n---> 41 ckpt = tf.train.Checkpoint(model=C3BR(32, 3, 1, 'valid'), optimizer=curOpt, lossFunc=lossFunc)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/util.py in __init__(self, **kwargs)\r\n   1816              \"object should be trackable (i.e. it is part of the \"\r\n   1817              \"TensorFlow Python API and manages state), please open an issue.\")\r\n-> 1818             % (v,))\r\n   1819     self._save_counter = None  # Created lazily for restore-on-create.\r\n   1820     self._save_assign_op = None\r\n\r\nValueError: `Checkpoint` was expecting a trackable object (an object derived from `TrackableBase`), got <__main__.lossExample object at 0x7ff535468cf8>. If you believe this object should be trackable (i.e. it is part of the TensorFlow Python API and manages state), please open an issue.\r\n```", "Does the loss have any variables? It doesn't look like it, in which case there isn't anything to checkpoint.\r\n\r\nBasically, what should the Checkpoint object do with the loss object?", "@yourtheron,\r\nCan you please respond to the [above comment](https://github.com/tensorflow/tensorflow/issues/35763#issuecomment-595392657)? Thanks!", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35763\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35763\">No</a>\n"]}]