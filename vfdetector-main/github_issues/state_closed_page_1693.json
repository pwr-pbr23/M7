[{"number": 2110, "title": "update configuration in os_setup.md", "body": "update configuration in os_setup.md according to master branch\n", "comments": ["Can one of the admins verify this patch?\n"]}, {"number": 2109, "title": "Undeclared inclusions and missing dependencies in building", "body": "The following commands were run on a Fedora 23 64 bits on Tensorflow master, but I get similar results on the 0.8 branch. \n\nUsing Bazel 0.2.1 on a laptop without graphics card:\n\n```\n$ bazel build -c opt --verbose_failures //tensorflow/tools/pip_package:build_pip_package\nINFO: Found 1 target...\nERROR: /home/david/.cache/bazel/_bazel_david/47d00ffdd2fc0515138a34f138cebd63/external/re2/BUILD:9:1: undeclared inclusion(s) in rule '@re2//:re2':\nthis rule is missing dependency declarations for the following files included by 'external/re2/util/rune.cc':\n  '/lib/gcc/x86_64-redhat-linux/5.3.1/include/stdarg.h'\n  '/lib/gcc/x86_64-redhat-linux/5.3.1/include/stddef.h'\n  '/lib/gcc/x86_64-redhat-linux/5.3.1/include/stdint.h'.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 1.394s, Critical Path: 0.34s\n```\n\nOn a machine with Cuda 7.5 and cudnn 5 installed, GCC 4.9 built locally (but I get the same results with system's GCC 5.3.1):\n\nWith bazel 0.1.1:\n\n```\n$ bazel build -c opt --config=cuda --spawn_strategy=standalone //tensorflow/tools/pip_package:build_pip_package\nWarning: ignoring LD_PRELOAD in environment.\nERROR: /home/david/gits/tensorflow/WORKSPACE:16:6: First argument of load() is a path, not a label. It should start with a single slash if it is an absolute path..\nERROR: /home/david/gits/tensorflow/WORKSPACE:20:6: First argument of load() is a path, not a label. It should start with a single slash if it is an absolute path..\nERROR: WORKSPACE file could not be parsed.\nERROR: no such package 'external': Package 'external' contains errors.\nINFO: Elapsed time: 0.065s\n```\n\nWith Bazel 0.2.1:\n\n```\nbazel build -c opt --config=cuda --spawn_strategy=standalone //tensorflow/tools/pip_package:build_pip_package\nWarning: ignoring LD_PRELOAD in environment.\nSending SIGTERM to previous Bazel server (pid=19634)... done.\n.....\nINFO: Found 1 target...\nERROR: /home/david/.cache/bazel/_bazel_david/47d00ffdd2fc0515138a34f138cebd63/external/re2/BUILD:9:1: undeclared inclusion(s) in rule '@re2//:re2':\nthis rule is missing dependency declarations for the following files included by 'external/re2/re2/perl_groups.cc':\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stddef.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdarg.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdint.h'\n  '/home/david/.local/include/c++/4.9.3/ctime'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++config.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/os_defines.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/cpu_defines.h'\n  '/home/david/.local/include/c++/4.9.3/vector'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algobase.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functexcept.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cpp_type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/numeric_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_pair.h'\n  '/home/david/.local/include/c++/4.9.3/bits/move.h'\n  '/home/david/.local/include/c++/4.9.3/bits/concept_check.h'\n  '/home/david/.local/include/c++/4.9.3/type_traits'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_types.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_funcs.h'\n  '/home/david/.local/include/c++/4.9.3/debug/debug.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/ptr_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/predefined_ops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/allocator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/new_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/new'\n  '/home/david/.local/include/c++/4.9.3/exception'\n  '/home/david/.local/include/c++/4.9.3/bits/atomic_lockfree_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_ptr.h'\n  '/home/david/.local/include/c++/4.9.3/bits/nested_exception.h'\n  '/home/david/.local/include/c++/4.9.3/bits/memoryfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_construct.h'\n  '/home/david/.local/include/c++/4.9.3/ext/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_uninitialized.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_vector.h'\n  '/home/david/.local/include/c++/4.9.3/initializer_list'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_bvector.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hash_bytes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/range_access.h'\n  '/home/david/.local/include/c++/4.9.3/bits/vector.tcc'\n  '/home/david/.local/include/c++/4.9.3/string'\n  '/home/david/.local/include/c++/4.9.3/bits/stringfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/char_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/postypes.h'\n  '/home/david/.local/include/c++/4.9.3/cwchar'\n  '/home/david/.local/include/c++/4.9.3/cstdint'\n  '/home/david/.local/include/c++/4.9.3/bits/localefwd.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++locale.h'\n  '/home/david/.local/include/c++/4.9.3/clocale'\n  '/home/david/.local/include/c++/4.9.3/iosfwd'\n  '/home/david/.local/include/c++/4.9.3/cctype'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream_insert.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cxxabi_forced.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_function.h'\n  '/home/david/.local/include/c++/4.9.3/backward/binders.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.h'\n  '/home/david/.local/include/c++/4.9.3/ext/atomicity.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr-default.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/atomic_word.h'\n  '/home/david/.local/include/c++/4.9.3/ext/string_conversions.h'\n  '/home/david/.local/include/c++/4.9.3/cstdlib'\n  '/home/david/.local/include/c++/4.9.3/cstdio'\n  '/home/david/.local/include/c++/4.9.3/cerrno'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.tcc'\n  '/home/david/.local/include/c++/4.9.3/algorithm'\n  '/home/david/.local/include/c++/4.9.3/utility'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_relops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algo.h'\n  '/home/david/.local/include/c++/4.9.3/bits/algorithmfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_heap.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_tempbuf.h'\n  '/home/david/.local/include/c++/4.9.3/random'\n  '/home/david/.local/include/c++/4.9.3/cmath'\n  '/home/david/.local/include/c++/4.9.3/limits'\n  '/home/david/.local/include/c++/4.9.3/bits/random.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/opt_random.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/x86intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/ia32intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/mmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/mm_malloc.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/emmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/pmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/tmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/ammintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/smmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/popcntintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/wmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/immintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avxintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx2intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512fintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512erintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512pfintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512cdintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/shaintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/lzcntintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/bmiintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/bmi2intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/fmaintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/f16cintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/rtmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xtestintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/mm3dnow.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/prfchwintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/fma4intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xopintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/lwpintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/tbmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/rdseedintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/fxsrintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xsaveintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xsaveoptintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/adxintrin.h'\n  '/home/david/.local/include/c++/4.9.3/bits/random.tcc'\n  '/home/david/.local/include/c++/4.9.3/numeric'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_numeric.h'\n  '/home/david/.local/include/c++/4.9.3/map'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_tree.h'\n  '/home/david/.local/include/c++/4.9.3/ext/aligned_buffer.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_map.h'\n  '/home/david/.local/include/c++/4.9.3/tuple'\n  '/home/david/.local/include/c++/4.9.3/array'\n  '/home/david/.local/include/c++/4.9.3/stdexcept'\n  '/home/david/.local/include/c++/4.9.3/bits/uses_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_multimap.h'\n  '/home/david/.local/include/c++/4.9.3/stack'\n  '/home/david/.local/include/c++/4.9.3/deque'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_deque.h'\n  '/home/david/.local/include/c++/4.9.3/bits/deque.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_stack.h'\n  '/home/david/.local/include/c++/4.9.3/ostream'\n  '/home/david/.local/include/c++/4.9.3/ios'\n  '/home/david/.local/include/c++/4.9.3/bits/ios_base.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_classes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_classes.tcc'\n  '/home/david/.local/include/c++/4.9.3/streambuf'\n  '/home/david/.local/include/c++/4.9.3/bits/streambuf.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_ios.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_facets.h'\n  '/home/david/.local/include/c++/4.9.3/cwctype'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/ctype_base.h'\n  '/home/david/.local/include/c++/4.9.3/bits/streambuf_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/ctype_inline.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_facets.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_ios.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream.tcc'\n  '/home/david/.local/include/c++/4.9.3/set'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_set.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_multiset.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/unordered_set'\n  '/home/david/.local/include/c++/4.9.3/tr1/type_traits'\n  '/home/david/.local/include/c++/4.9.3/tr1/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/hashtable.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/hashtable_policy.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/unordered_set.h'\n  '/home/david/.local/include/c++/4.9.3/sstream'\n  '/home/david/.local/include/c++/4.9.3/istream'\n  '/home/david/.local/include/c++/4.9.3/bits/istream.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/sstream.tcc'.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\n```\n\n```\nbazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\nWarning: ignoring LD_PRELOAD in environment.\nINFO: Found 1 target...\nERROR: /home/david/.cache/bazel/_bazel_david/47d00ffdd2fc0515138a34f138cebd63/external/re2/BUILD:9:1: undeclared inclusion(s) in rule '@re2//:re2':\nthis rule is missing dependency declarations for the following files included by 'external/re2/util/valgrind.cc':\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stddef.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdarg.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdint.h'\n  '/home/david/.local/include/c++/4.9.3/ctime'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++config.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/os_defines.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/cpu_defines.h'\n  '/home/david/.local/include/c++/4.9.3/vector'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algobase.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functexcept.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cpp_type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/numeric_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_pair.h'\n  '/home/david/.local/include/c++/4.9.3/bits/move.h'\n  '/home/david/.local/include/c++/4.9.3/bits/concept_check.h'\n  '/home/david/.local/include/c++/4.9.3/type_traits'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_types.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_funcs.h'\n  '/home/david/.local/include/c++/4.9.3/debug/debug.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/ptr_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/predefined_ops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/allocator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/new_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/new'\n  '/home/david/.local/include/c++/4.9.3/exception'\n  '/home/david/.local/include/c++/4.9.3/bits/atomic_lockfree_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_ptr.h'\n  '/home/david/.local/include/c++/4.9.3/bits/nested_exception.h'\n  '/home/david/.local/include/c++/4.9.3/bits/memoryfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_construct.h'\n  '/home/david/.local/include/c++/4.9.3/ext/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_uninitialized.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_vector.h'\n  '/home/david/.local/include/c++/4.9.3/initializer_list'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_bvector.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hash_bytes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/range_access.h'\n  '/home/david/.local/include/c++/4.9.3/bits/vector.tcc'\n  '/home/david/.local/include/c++/4.9.3/string'\n  '/home/david/.local/include/c++/4.9.3/bits/stringfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/char_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/postypes.h'\n  '/home/david/.local/include/c++/4.9.3/cwchar'\n  '/home/david/.local/include/c++/4.9.3/cstdint'\n  '/home/david/.local/include/c++/4.9.3/bits/localefwd.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++locale.h'\n  '/home/david/.local/include/c++/4.9.3/clocale'\n  '/home/david/.local/include/c++/4.9.3/iosfwd'\n  '/home/david/.local/include/c++/4.9.3/cctype'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream_insert.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cxxabi_forced.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_function.h'\n  '/home/david/.local/include/c++/4.9.3/backward/binders.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.h'\n  '/home/david/.local/include/c++/4.9.3/ext/atomicity.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr-default.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/atomic_word.h'\n  '/home/david/.local/include/c++/4.9.3/ext/string_conversions.h'\n  '/home/david/.local/include/c++/4.9.3/cstdlib'\n  '/home/david/.local/include/c++/4.9.3/cstdio'\n  '/home/david/.local/include/c++/4.9.3/cerrno'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.tcc'\n  '/home/david/.local/include/c++/4.9.3/algorithm'\n  '/home/david/.local/include/c++/4.9.3/utility'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_relops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algo.h'\n  '/home/david/.local/include/c++/4.9.3/bits/algorithmfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_heap.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_tempbuf.h'\n  '/home/david/.local/include/c++/4.9.3/random'\n  '/home/david/.local/include/c++/4.9.3/cmath'\n  '/home/david/.local/include/c++/4.9.3/limits'\n  '/home/david/.local/include/c++/4.9.3/bits/random.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/opt_random.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/x86intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/ia32intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/mmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/mm_malloc.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/emmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/pmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/tmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/ammintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/smmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/popcntintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/wmmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/immintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avxintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx2intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512fintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512erintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512pfintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/avx512cdintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/shaintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/lzcntintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/bmiintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/bmi2intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/fmaintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/f16cintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/rtmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xtestintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/mm3dnow.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/prfchwintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/fma4intrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xopintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/lwpintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/tbmintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/rdseedintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/fxsrintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xsaveintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/xsaveoptintrin.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/adxintrin.h'\n  '/home/david/.local/include/c++/4.9.3/bits/random.tcc'\n  '/home/david/.local/include/c++/4.9.3/numeric'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_numeric.h'\n  '/home/david/.local/include/c++/4.9.3/map'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_tree.h'\n  '/home/david/.local/include/c++/4.9.3/ext/aligned_buffer.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_map.h'\n  '/home/david/.local/include/c++/4.9.3/tuple'\n  '/home/david/.local/include/c++/4.9.3/array'\n  '/home/david/.local/include/c++/4.9.3/stdexcept'\n  '/home/david/.local/include/c++/4.9.3/bits/uses_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_multimap.h'\n  '/home/david/.local/include/c++/4.9.3/stack'\n  '/home/david/.local/include/c++/4.9.3/deque'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_deque.h'\n  '/home/david/.local/include/c++/4.9.3/bits/deque.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_stack.h'\n  '/home/david/.local/include/c++/4.9.3/ostream'\n  '/home/david/.local/include/c++/4.9.3/ios'\n  '/home/david/.local/include/c++/4.9.3/bits/ios_base.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_classes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_classes.tcc'\n  '/home/david/.local/include/c++/4.9.3/streambuf'\n  '/home/david/.local/include/c++/4.9.3/bits/streambuf.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_ios.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_facets.h'\n  '/home/david/.local/include/c++/4.9.3/cwctype'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/ctype_base.h'\n  '/home/david/.local/include/c++/4.9.3/bits/streambuf_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/ctype_inline.h'\n  '/home/david/.local/include/c++/4.9.3/bits/locale_facets.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_ios.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream.tcc'\n  '/home/david/.local/include/c++/4.9.3/set'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_set.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_multiset.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/unordered_set'\n  '/home/david/.local/include/c++/4.9.3/tr1/type_traits'\n  '/home/david/.local/include/c++/4.9.3/tr1/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/hashtable.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/hashtable_policy.h'\n  '/home/david/.local/include/c++/4.9.3/tr1/unordered_set.h'\n  '/home/david/.local/include/c++/4.9.3/sstream'\n  '/home/david/.local/include/c++/4.9.3/istream'\n  '/home/david/.local/include/c++/4.9.3/bits/istream.tcc'\n  '/home/david/.local/include/c++/4.9.3/bits/sstream.tcc'.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 2.889s, Critical Path: 2.49s\n```\n\nWith Bazel 0.1.5:\n\n```\nbazel build -c opt --config=cuda --verbose_failures //tensorflow/cc:tutorials_example_trainer\nWarning: ignoring LD_PRELOAD in environment.\nINFO: Found 1 target...\nERROR: /home/david/gits/tensorflow/google/protobuf/BUILD:64:1: undeclared inclusion(s) in rule '//google/protobuf:protobuf':\nthis rule is missing dependency declarations for the following files included by 'google/protobuf/src/google/protobuf/io/strtod.cc':\n  '/home/david/.local/include/c++/4.9.3/cstdio'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++config.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/os_defines.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/cpu_defines.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stddef.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdarg.h'\n  '/home/david/.local/include/c++/4.9.3/cstring'\n  '/home/david/.local/include/c++/4.9.3/limits'\n  '/home/david/.local/include/c++/4.9.3/string'\n  '/home/david/.local/include/c++/4.9.3/bits/stringfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/memoryfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/char_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algobase.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functexcept.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cpp_type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/numeric_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_pair.h'\n  '/home/david/.local/include/c++/4.9.3/bits/move.h'\n  '/home/david/.local/include/c++/4.9.3/bits/concept_check.h'\n  '/home/david/.local/include/c++/4.9.3/type_traits'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_types.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_funcs.h'\n  '/home/david/.local/include/c++/4.9.3/debug/debug.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/ptr_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/predefined_ops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/postypes.h'\n  '/home/david/.local/include/c++/4.9.3/cwchar'\n  '/home/david/.local/include/c++/4.9.3/cstdint'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdint.h'\n  '/home/david/.local/include/c++/4.9.3/bits/allocator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/new_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/new'\n  '/home/david/.local/include/c++/4.9.3/exception'\n  '/home/david/.local/include/c++/4.9.3/bits/atomic_lockfree_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_ptr.h'\n  '/home/david/.local/include/c++/4.9.3/bits/nested_exception.h'\n  '/home/david/.local/include/c++/4.9.3/bits/localefwd.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++locale.h'\n  '/home/david/.local/include/c++/4.9.3/clocale'\n  '/home/david/.local/include/c++/4.9.3/iosfwd'\n  '/home/david/.local/include/c++/4.9.3/cctype'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream_insert.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cxxabi_forced.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_function.h'\n  '/home/david/.local/include/c++/4.9.3/backward/binders.h'\n  '/home/david/.local/include/c++/4.9.3/bits/range_access.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.h'\n  '/home/david/.local/include/c++/4.9.3/ext/atomicity.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr-default.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/atomic_word.h'\n  '/home/david/.local/include/c++/4.9.3/initializer_list'\n  '/home/david/.local/include/c++/4.9.3/ext/string_conversions.h'\n  '/home/david/.local/include/c++/4.9.3/cstdlib'\n  '/home/david/.local/include/c++/4.9.3/cerrno'\n  '/home/david/.local/include/c++/4.9.3/bits/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hash_bytes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.tcc'\n  '/home/david/.local/include/c++/4.9.3/cstddef'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/limits.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/syslimits.h'\n  '/home/david/.local/include/c++/4.9.3/utility'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_relops.h'.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nINFO: Elapsed time: 2.634s, Critical Path: 2.21s\n\n$ bazel build -c opt --config=cuda --verbose_failures --spawn_strategy=standalone //tensorflow/cc:tutorials_example_trainer\nWarning: ignoring LD_PRELOAD in environment.\nINFO: Found 1 target...\nERROR: /home/david/gits/tensorflow/google/protobuf/BUILD:64:1: undeclared inclusion(s) in rule '//google/protobuf:protobuf':\nthis rule is missing dependency declarations for the following files included by 'google/protobuf/src/google/protobuf/stubs/substitute.cc':\n  '/home/david/.local/include/c++/4.9.3/string'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++config.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/os_defines.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/cpu_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stringfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/memoryfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/char_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algobase.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functexcept.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cpp_type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/numeric_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_pair.h'\n  '/home/david/.local/include/c++/4.9.3/bits/move.h'\n  '/home/david/.local/include/c++/4.9.3/bits/concept_check.h'\n  '/home/david/.local/include/c++/4.9.3/type_traits'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_types.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_funcs.h'\n  '/home/david/.local/include/c++/4.9.3/debug/debug.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/ptr_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/predefined_ops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/postypes.h'\n  '/home/david/.local/include/c++/4.9.3/cwchar'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdarg.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stddef.h'\n  '/home/david/.local/include/c++/4.9.3/cstdint'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdint.h'\n  '/home/david/.local/include/c++/4.9.3/bits/allocator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/new_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/new'\n  '/home/david/.local/include/c++/4.9.3/exception'\n  '/home/david/.local/include/c++/4.9.3/bits/atomic_lockfree_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_ptr.h'\n  '/home/david/.local/include/c++/4.9.3/bits/nested_exception.h'\n  '/home/david/.local/include/c++/4.9.3/bits/localefwd.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++locale.h'\n  '/home/david/.local/include/c++/4.9.3/clocale'\n  '/home/david/.local/include/c++/4.9.3/iosfwd'\n  '/home/david/.local/include/c++/4.9.3/cctype'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream_insert.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cxxabi_forced.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_function.h'\n  '/home/david/.local/include/c++/4.9.3/backward/binders.h'\n  '/home/david/.local/include/c++/4.9.3/bits/range_access.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.h'\n  '/home/david/.local/include/c++/4.9.3/ext/atomicity.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr-default.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/atomic_word.h'\n  '/home/david/.local/include/c++/4.9.3/initializer_list'\n  '/home/david/.local/include/c++/4.9.3/ext/string_conversions.h'\n  '/home/david/.local/include/c++/4.9.3/cstdlib'\n  '/home/david/.local/include/c++/4.9.3/cstdio'\n  '/home/david/.local/include/c++/4.9.3/cerrno'\n  '/home/david/.local/include/c++/4.9.3/bits/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hash_bytes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.tcc'\n  '/home/david/.local/include/c++/4.9.3/cstddef'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/limits.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/syslimits.h'\n  '/home/david/.local/include/c++/4.9.3/utility'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_relops.h'\n  '/home/david/.local/include/c++/4.9.3/vector'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_construct.h'\n  '/home/david/.local/include/c++/4.9.3/ext/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_uninitialized.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_vector.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_bvector.h'\n  '/home/david/.local/include/c++/4.9.3/bits/vector.tcc'\n  '/home/david/.local/include/c++/4.9.3/limits'\n  '/home/david/.local/include/c++/4.9.3/unordered_map'\n  '/home/david/.local/include/c++/4.9.3/tuple'\n  '/home/david/.local/include/c++/4.9.3/array'\n  '/home/david/.local/include/c++/4.9.3/stdexcept'\n  '/home/david/.local/include/c++/4.9.3/bits/uses_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/aligned_buffer.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hashtable.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hashtable_policy.h'\n  '/home/david/.local/include/c++/4.9.3/bits/unordered_map.h'\n  '/home/david/.local/include/c++/4.9.3/unordered_set'\n  '/home/david/.local/include/c++/4.9.3/bits/unordered_set.h'.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nERROR: /home/david/gits/tensorflow/tensorflow/cc/BUILD:28:1 undeclared inclusion(s) in rule '//google/protobuf:protobuf':\nthis rule is missing dependency declarations for the following files included by 'google/protobuf/src/google/protobuf/stubs/substitute.cc':\n  '/home/david/.local/include/c++/4.9.3/string'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++config.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/os_defines.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/cpu_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stringfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/memoryfwd.h'\n  '/home/david/.local/include/c++/4.9.3/bits/char_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_algobase.h'\n  '/home/david/.local/include/c++/4.9.3/bits/functexcept.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cpp_type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/type_traits.h'\n  '/home/david/.local/include/c++/4.9.3/ext/numeric_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_pair.h'\n  '/home/david/.local/include/c++/4.9.3/bits/move.h'\n  '/home/david/.local/include/c++/4.9.3/bits/concept_check.h'\n  '/home/david/.local/include/c++/4.9.3/type_traits'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_types.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator_base_funcs.h'\n  '/home/david/.local/include/c++/4.9.3/debug/debug.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_iterator.h'\n  '/home/david/.local/include/c++/4.9.3/bits/ptr_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/predefined_ops.h'\n  '/home/david/.local/include/c++/4.9.3/bits/postypes.h'\n  '/home/david/.local/include/c++/4.9.3/cwchar'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdarg.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stddef.h'\n  '/home/david/.local/include/c++/4.9.3/cstdint'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stdint.h'\n  '/home/david/.local/include/c++/4.9.3/bits/allocator.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/new_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/new'\n  '/home/david/.local/include/c++/4.9.3/exception'\n  '/home/david/.local/include/c++/4.9.3/bits/atomic_lockfree_defines.h'\n  '/home/david/.local/include/c++/4.9.3/bits/exception_ptr.h'\n  '/home/david/.local/include/c++/4.9.3/bits/nested_exception.h'\n  '/home/david/.local/include/c++/4.9.3/bits/localefwd.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/c++locale.h'\n  '/home/david/.local/include/c++/4.9.3/clocale'\n  '/home/david/.local/include/c++/4.9.3/iosfwd'\n  '/home/david/.local/include/c++/4.9.3/cctype'\n  '/home/david/.local/include/c++/4.9.3/bits/ostream_insert.h'\n  '/home/david/.local/include/c++/4.9.3/bits/cxxabi_forced.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_function.h'\n  '/home/david/.local/include/c++/4.9.3/backward/binders.h'\n  '/home/david/.local/include/c++/4.9.3/bits/range_access.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.h'\n  '/home/david/.local/include/c++/4.9.3/ext/atomicity.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/gthr-default.h'\n  '/home/david/.local/include/c++/4.9.3/x86_64-unknown-linux-gnu/bits/atomic_word.h'\n  '/home/david/.local/include/c++/4.9.3/initializer_list'\n  '/home/david/.local/include/c++/4.9.3/ext/string_conversions.h'\n  '/home/david/.local/include/c++/4.9.3/cstdlib'\n  '/home/david/.local/include/c++/4.9.3/cstdio'\n  '/home/david/.local/include/c++/4.9.3/cerrno'\n  '/home/david/.local/include/c++/4.9.3/bits/functional_hash.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hash_bytes.h'\n  '/home/david/.local/include/c++/4.9.3/bits/basic_string.tcc'\n  '/home/david/.local/include/c++/4.9.3/cstddef'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/limits.h'\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/syslimits.h'\n  '/home/david/.local/include/c++/4.9.3/utility'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_relops.h'\n  '/home/david/.local/include/c++/4.9.3/vector'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_construct.h'\n  '/home/david/.local/include/c++/4.9.3/ext/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/alloc_traits.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_uninitialized.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_vector.h'\n  '/home/david/.local/include/c++/4.9.3/bits/stl_bvector.h'\n  '/home/david/.local/include/c++/4.9.3/bits/vector.tcc'\n  '/home/david/.local/include/c++/4.9.3/limits'\n  '/home/david/.local/include/c++/4.9.3/unordered_map'\n  '/home/david/.local/include/c++/4.9.3/tuple'\n  '/home/david/.local/include/c++/4.9.3/array'\n  '/home/david/.local/include/c++/4.9.3/stdexcept'\n  '/home/david/.local/include/c++/4.9.3/bits/uses_allocator.h'\n  '/home/david/.local/include/c++/4.9.3/ext/aligned_buffer.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hashtable.h'\n  '/home/david/.local/include/c++/4.9.3/bits/hashtable_policy.h'\n  '/home/david/.local/include/c++/4.9.3/bits/unordered_map.h'\n  '/home/david/.local/include/c++/4.9.3/unordered_set'\n  '/home/david/.local/include/c++/4.9.3/bits/unordered_set.h'.\nINFO: Elapsed time: 0.999s, Critical Path: 0.80s\n```\n\nBazel 2.2b fails when tensorflow tries to parse the version:\n\n```\n bazel build -c opt --config=cuda --verbose_failures --spawn_strategy=standalone //tensorflow/cc:tutorials_example_trainer\nWarning: ignoring LD_PRELOAD in environment.\nSending SIGTERM to previous Bazel server (pid=24216)... done.\n......\nERROR: /home/david/gits/tensorflow/WORKSPACE:21:1: Traceback (most recent call last):\n    File \"/home/david/gits/tensorflow/WORKSPACE\", line 21\n        check_version(\"0.1.4\")\n    File \"/home/david/gits/tensorflow/tensorflow/tensorflow.bzl\", line 22, in check_version\n        _parse_bazel_version(native.bazel_version)\n    File \"/home/david/gits/tensorflow/tensorflow/tensorflow.bzl\", line 15, in _parse_bazel_version\n        int(number)\ninvalid literal for int(): \"2b\".\nERROR: Error evaluating WORKSPACE file.\nERROR: no such package 'external': Package 'external' contains errors.\nINFO: Elapsed time: 0.610s\n```\n\nCorrecting that mistake I get a bulld error again:\n\n```\n bazel build -c opt --config=cuda --spawn_strategy=standalone --verbose_failures //tensorflow/tools/pip_package:build_pip_package\nWarning: ignoring LD_PRELOAD in environment.\nERROR: no such package 'external': Package 'external' contains errors.\nINFO: Elapsed time: 0.084s\n```\n\nHow can I get it to work? I am interested in building Tensorflow with vector instructions for my laptop and linking against the latest cudnn for my workstation.\n", "comments": ["following the build from source instructions I also received the next error when trying to build:\n\n`ERROR: /home/yadid/tensorflow/tensorflow/WORKSPACE:21:1: Traceback (most recent call last):\n    File \"/home/yadid/tensorflow/tensorflow/WORKSPACE\", line 21\n        check_version(\"0.1.4\")\n    File \"/home/yadid/tensorflow/tensorflow/tensorflow/tensorflow.bzl\", line 22, in check_version\n        _parse_bazel_version(native.bazel_version)\n    File \"/home/yadid/tensorflow/tensorflow/tensorflow/tensorflow.bzl\", line 15, in _parse_bazel_version\n        int(number)\ninvalid literal for int(): \"2b\".`\n", "Happens to me to when I compile from master for bazel and tensorflow.\nI was running on aws ubuntu machines.\n\nI am guessing some inconsistency between the latest bazel and latest tensorflow?\n\nUpdate: correcting tensorflow/tensorflow/tensorflow.bzl line 15, to parse correctly for the version number, fixes the build for me.\n\n@Dapid: I think you are experiencing some misalignment between bazel and tensorflow on top of this bug.\n\nMore update: @Dapid: you are right, there is still something wrong with the version when you fix it... I think the only hack that will work is to set the version manually, to the one that will work :) It does compile when I put \"2\" for every number, in line 15: int(number) => 2\n\nerr, it was compiling I think, but now it breaks with: ERROR: error loading package 'external': Package 'external' contains errors.\n\nnot sure what is going on.\n\nUpdate: ok, I think I know what fixes it. You need to clone the repository from scratch (force) before you attempt to compile with the line 15 hack, like this: number = \"\".join([c for c in number if c.isdigit()])\nIt woks from me if I do that.\n", "Hi. This is my story of how I got TensorFlow to compile on my Fedora 23 machine. Maybe it will be useful for you:\n\n# How to compile TensorFlow from source on Fedora 23 with a custom compiler.\n\nCompiling TensorFlow with GPU support is possible, but a bit tricky on Fedora 23 and up.\nThe compilation requires a specific GCC version which is not available from Fedora repoisitories and specifying the compiler is more complicated than it should be.\n\n## Compiling GCC\n\nFor CUDA version 7.5, you need to obtain the source code for GCC version 4.9. You can obtain it from [here](ftp://ftp.gnu.org/gnu/gcc/gcc-4.9.2/).\n\nNext, you need to install GCC compile-time dependencies:\n\n```\nsudo dnf install mpfr-devel gmp-devel libmpc-devel isl-devel\n```\n\nNow you have to configure the GCC build. For details, check out the [GCC configuration page](https://gcc.gnu.org/install/configure.html). I suggest installing into a custom prefix, such as `/opt/gcc-4.9`. I suggest enabling only C and C++ and skipping the rest of the GCC languages to save time and disk space. The options --with-as, --with-ld and --with-nm are required, because otherwise TensorFlow build will fail, complaining that those binaries cannot be found.\n\n```\n/configure --prefix=/opt/gcc-4.9 --disable-nls --enable-languages=c,c++ --with-ld=/bin/ld --with-nm=/bin/nm --with-as=/usr/bin/as\n```\n\nWhen this step is done, you can compile GCC with the following command:\n\n```\nmake -j4\n```\n\nThis assumes you want to use 4 processing cores. You can use more or less, or omit the -j option entirely.\n\nFinally, run as root:\n\n```\nmake install\n```\n\n## Compiling bazel\n\nObtain the bazel source code. You need the current master branch, NOT any of the recent releases.\n\n```\ngit clone https://github.com/bazelbuild/bazel.git\n```\n\nTo compile bazel, you need to specify \n\n```\nexport CC=/opt/gcc-4.9/bin/gcc\n./compile\n```\n\nThis will produce the bazel binary in `path/to/bazel/output/bazel`\n\n## Compiling TensorFlow\n\nObtain the TensorFlow source code\n\n```\ngit clone --recurse-submodules https://github.com/tensorflow/tensorflow\n```\n\nModify the file `third_party/gpus/crosstool/CROSSTOOL`: Find the toolchain entry where the `toolchain_identifier`is set to `\"local_linux\"`. Only change entries here, the rest is irrelevant.\n\nReplace the following lines:\n\ncxx_builtin_include_directory: \"/usr/lib/gcc/\"\ncxx_builtin_include_directory: \"/usr/local/include\"\n\nwith the following lines:\ncxx_builtin_include_directory: \"/opt/gcc-4.9/lib/gcc/\"\ncxx_builtin_include_directory: \"/opt/gcc-4.9/local/include\"\ncxx_builtin_include_directory: \"/opt/gcc-4.9/include\"\n\nNext, run the `./configure` and set your options. Specify your self-compiled GCC (for me `/opt/gcc-4.9/bin/gcc`) as the compiler to be used by nvcc.\n\nTo compile the source, use the following command line:\n\n```\npath/to/bazel/output/bazel build -c opt --config=cuda --genrule_strategy=standalone --local_resources 4096,4.0,1.0 -j 4 //tensorflow/cc:tutorials_example_trainer\n```\n\nExplanations:\n- build: what bazel should do\n- -c opt: Don't know, says so in the docu\n- --config=cuda: Compile with CUDA support. Don't ask me why you have to specify that again, even though you did so in ./configure.\n- --genrule_strategy=standalone: This compiles in \"standalone mode\". Don't ask me what that is, but it's required so that generated output files can find the `libcudart.so` that they are linked to (see issue #2053).\n- --local_resources 4096,4.0,1.0 -j 4: Use at most 4096M of memory, 4.0 CPU's, 1.0 of I/O and 4 threads. This is required so that the compilation doesn't crash due to out-of-memory (I have 8GB of physical memory and 4GB of swap). The 4096 is still a lie, because the compilation still used more - but at least it didn't crash.\n- //tensorflow/cc:tutorials_example_trainer: What to build.\n\nI sincerely hope that this guide will be obsolete very soon, and you can just get cracking without all these workarounds. But for now, this will probably be useful.\n", "It would be great to get these instructions into the documentation somewhere.  @martinwicke : is there a place for build help specific to linux distributions?\n", "> It would be great to get these instructions into the documentation somewhere. @martinwicke : is there a place for build help specific to linux distributions?\n\nHonestly, I think a better approach would be actually fixing the bugs in the TensorFlow build system and bazel itself, for example\n- Don't use an infinite amount of threads and memory, even when not limited explicitly\n- Either pass --genrule-strategy=standalone by default or make libcudart.so available in sandbox mode (I believe this is being worked on).\n- Find nm, as, ld by default, from PATH\n- Respect the CC variable instead of having to hack the CROSSTOOL file\n- Fix the version parsing to allow for non-numerical characters in the bazel version string\n\nThis guide was born out of my desparation, but new users probably shouldn't jump through all the hoops.\n", "@akors: I see this issue happening not on fedora but ubuntu as well. Just a plain development setup from sources cloning master bazel and tensorflow\n", "https://github.com/tensorflow/tensorflow/pull/2094 is fixing the bazel parse version issue.\n\nAs for the other four issues, would it be better to file these bugs at buildbazel/bazel ?  @damienmg is there anything else we should be doing on the TF side to make this better?\n", "For the four first issues:\n- A known issue, and not an easy answer. I know that we have a inflight fix for resource detection on OS X, I will gather more info tomorrow.\n- --genrule_strategy=standalone should be in tensorflow's bazel.rc until all the hermeticity issue in TF build are resolved. I think Bazel's one with custom c++ toolchain should be solved prior (see bazelbuild/bazel#1019).\n-  (last 2 issues): TF's cuda crosstool should do autoconfiguration just like we do for the main c++ \n\nExplanations extended:\nExplanations:\n\nbuild: what bazel should do\n- -c opt: build using optimization C++ flags\n- --config=cuda: select cuda configuration, which is different from detecting the cuda environment which could be done inside bazel now.\n- --genrule_strategy=standalone: deactivate namespace sandbox because some tools are outside of mounted paths, this can also be fixed remote repositories (bazelbuild/bazel#1019 for bazel).\n- --local_resources 4096,4.0,1.0: unecessary, -j 4 is sufficient\n- -j 4: 4 simultaneous jobs maximum. We should improve resources detection and estimation to better compute than number.\n- //tensorflow/cc:tutorials_example_trainer: What to build.\n", "@akors I followed your instructions, but unfortunately I keep getting the same failures. No idea what the difference between your system and mine may be.\n\nI'll try again, maybe some bugs have been squash in Bazel in the meantime.\n", "@Dapid did you use Bazel HEAD and Tensorflow HEAD? And you are still getting \"missing dependency declaration\" errors?\n", "@fat-lobyte Yes. I just retried with latest master for both TF and Bazel:\n\n```\nERROR: /home/david/.cache/bazel/_bazel_david/47d00ffdd2fc0515138a34f138cebd63/external/re2/BUILD:9:1: undeclared inclusion(s) in rule '@re2//:re2':\nthis rule is missing dependency declarations for the following files included by 'external/re2/re2/bitstate.cc':\n  '/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/stddef.h'\n[etc]\n```\n", "@Dapid weird. If you have modified your third_party/gpus/crosstool/CROSSTOOL file to point to your private install, then I am out of ideas. What happens if you add another line \n\n```\ncxx_builtin_include_directory: \"/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include\"\n```\n\n?\n", "@akors well spotted.\n\nThis is how the relevant section of CROSTOOL looks like, and the build finishes:\n\n```\n 56   # TODO(bazel-team): In theory, the path here ought to exactly match the path\n 57   # used by gcc. That works because bazel currently doesn't track files at\n 58   # absolute locations and has no remote execution, yet. However, this will need\n 59   # to be fixed, maybe with auto-detection?\n 60   cxx_builtin_include_directory: \"/home/david/.local/gcc-4.9/lib/gcc\"\n 61   cxx_builtin_include_directory: \"/home/david/.local/gcc-4.9/include\"\n 62   cxx_builtin_include_directory: \"/home/david/.local/gcc-4.9/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include\"\n 63   cxx_builtin_include_directory: \"/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include\"\n 64   cxx_builtin_include_directory: \"/home/david/.local/include/\"\n 65   cxx_builtin_include_directory: \"/home/david/.local/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/\"\n 66   cxx_builtin_include_directory: \"/usr/include\"\n 67   tool_path { name: \"gcov\" path: \"/usr/bin/gcov\" }\n```\n", "stuck me  a lot of time until I reach this post, may be we should rewrite CROSTOOL to make gcc path not static\n", "I've got a solution and it performed very well.\nHere is it:\n- Using package installer to install tf automatically\n\n```\nsudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\n```\n- Fix any **dependency problem** occurred during the process above\n- Remove the installed tensorflow, and any bazel cache:\n\n```\nsudo pip uninstall tensorflow\nrm -rf ~/.cache/bazel\n```\n- Implement the usual installation as the guide says and it's done.\n\nThe idea is simple: using package installation to detect dependency problem, fix the problem and follow the usual guide.\n", "@vrv, @akors: Should we split the conclusions of this up into separate bugs, appropriately distributed between TensorFlow and Bazel?  At least one of the issues is fixed by #2504, and it's hard from this thread to know what's left. \n", "Yes, it would be good to file separate bugs for the individual issues, since catch all bugs like these tend to get filled with lots of hard to parse info.\n", "@girving OK, so I redid all the testing with the most recent HEADs of TensorFlow and bazel. I will try to summarize comprehensively:\n\nCustom GCC, Bazel 0.2.3 (Release), TensorFlow head (b3621c95160a916d4d255f9f44318b9d465701af): compilation fails with the undeclared inclusion messages above.\n\nCustom GCC, Bazel head (e7e2301) compiled with CC and CXX set to the custom GCC, TensorFlow head (b3621c95160a916d4d255f9f44318b9d465701af): compilation fails with the undeclared inclusion messages above.\n\nCustom GCC, Bazel head (e7e2301) compiled with CC and CXX set to the custom GCC, TensorFlow head (b3621c95160a916d4d255f9f44318b9d465701af) with CROSSTOOL `cxx_builtin_include_directory` modified to the custom GCC include paths: compilation succeeds.\n\nCustom GCC, Bazel 0.2.3 (Release), TensorFlow head (b3621c95160a916d4d255f9f44318b9d465701af) with CROSSTOOL `cxx_builtin_include_directory` modified to the custom GCC include paths: compilation succeeds.\n\nThat's what's up. I believe the first two methods should also work, but you can divide this issue up as you wish.\n\n---\n\nps.: Might I quote from the CROSSTOOL file, right above the `cxx_builtin_include_directory` definitions?\n\n```\n# TODO(bazel-team): In theory, the path here ought to exactly match the path\n# used by gcc. That works because bazel currently doesn't track files at\n# absolute locations and has no remote execution, yet. However, this will need\n# to be fixed, maybe with auto-detection?\n```\n\nI would agree to that. This will need to be fixed ;)\n", "@martinwicke @damienmg Can you advise on how to split this bug across Bazel and Github?\n", "@girving: the TODO is copied from the legacy CROSSTOOL of Bazel. In beetween we did C++ autoconfiguration.\n\nIf I understand correctly there is only one issue: cxx_builtin_include_directory? In which case it should be covered by the work that @davidzchen has started on auto-detecting nvcc config.\n", "This is the tracking bug for cuda autoconf: #2873\n", "follow @akors guidance, I finally succeed on centos 6.5, with cuda7.5 and cudnn v5.0.5. I set compute capability to 3.0 though my gpu is actually 2.0 (Quadro 4000).\nnote python config by conda may has some problem with bazel build.\n\n## cuda path\n\nin ~/.bash_profile\n\n```\nexport CUDA_HOME=/usr/local/cuda-7.5 \nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:$CUDA_HOME/lib64\" \nexport PATH=\"$CUDA_HOME/bin:$PATH\" \n```\n\n## build gcc\n\nfollow this [https://gcc.gnu.org/wiki/InstallingGCC](url), I use gcc4.9.2\n`$PWD/../gcc-4.9.2/configure --prefix=$HOME/gcc-4.9.2 --disable-nls --enable-languages=c,c++ --with-ld=/usr/bin/ld --with-nm=/usr/bin/nm --with-as=/usr/bin/as`, a little different.\n\n## build tensorflow\n\nif you get error like genrule missing dependency of a list of head files, just add these head files paths(like /path/to/include) to the `third_party/gpus/crosstool/CROSSTOOL`, even `cuda/include` can be added.\n\n## about gpu\n\n I always failed when I set compute capability to 2.0 when configure tensorflow build, error is like `....some symbol not defined.......` at the end ,`.....not all outputs were created....`\n", "@davidzchen is this still being worked on? Or is the procedure by @suiyuan2009 a general fix?\n", "@alextp Apologies for the wait. I just returned from vacation. We are ironing out the remaining CI build failure for the PR for CUDA autodetection (tensorflow/tensorflow#3269). I am hoping to have the PR submitted soon, but feel free to use @suiyuan2009's fix as a workaround in the meantime.\n", "@alextp The cuda autoconf change has been merged. Can you try building with the latest tensorflow HEAD and see if you still run into any issues?\n", "@davidzchen \nI still get the undeclared inclusions with the latest HEAD. Glossing over your PR, it seems that only the CUDA headers are made configurable, but there are no changes to the \"cxx_builtin_include_directory\" of the host compiler. Namely, I get errors for the directories:\n\n```\n/opt/gcc-5.3/include/c++/5.3.0\n/opt/gcc-5.3/lib/gcc/x86_64-unknown-linux-gnu/5.3.0/include\n...\n```\n\nWhere `/opt/gcc-5.3/` is my manually compiled GCC, because the different CUDA version need very specific GCC versions to work (e.g. CUDA 8 -> GCC 5.3) which are often not available on the distributions. \n\nThis means, I still have to hack the CROSSTOOL.tpl file to get TF to compile. I believe it's very important to include those directories (depending on the nvcc host compiler configuration choice) in the configuration as well.\n", "@akors That's a good point. It should not be a difficult fix, and we should be able to reuse [`_get_cxx_inc_directories()`](https://github.com/bazelbuild/bazel/blob/master/tools/cpp/cc_configure.bzl#L168) from Bazel's `cc_configure` rule to get a list of the compiler's include dirs. I'll put together a fix.\n", "@akors - I have opened #4058 for the host compiler include directories issue.\n", "Clsoing due to inactivity."]}, {"number": 2108, "title": "How to recognize a jpg from sdcard", "body": "I try to use tensorflow to recognize a jpg from sdcard, Is it right?\nBitmap bitmap = BitmapFactory.decodeFile(\"/storage/8A38-1900/1/1.jpg\");\n        if (bitmap != null && !bitmap.isRecycled()) {\n            List<Recognition> recogns = tensorflow.recognizeImage(bitmap);\n            if(recogns!=null){\n                for (Recognition recognition:recogns) {\n                    Log.e(\"recognition\", \"recognition=\"+recognition.toString());\n                }\n            }\n        }\n", "comments": ["Assuming you are using the Android demo code [here](https://github.com/tensorflow/tensorflow/tree/e39d8feebb9666a331345cd8d960f5ade4652bba/tensorflow/examples/android/src/org/tensorflow/demo), yes, that looks approximately right.\n"]}, {"number": 2107, "title": "\"CUDNN_STATUS_BAD_PARAM\" raised when running MNIST expert tutorial on GPU", "body": "I tried the code from MNIST expert tutorial and it works only on cpu. When I try to execute it in the gpu I get a session crash.\nThe code for begginers tutorial however works well in both the gpu and cpu.\n### Environment info\n- OS: Ubuntu 16.04\n- CUDA: 7.5\n- cuDNN: 5\n- Pip: 8.1.1\n- Python: 2.7.11\n- Anaconda:  4.0.0 (64-bit)\n- Tensorflow: 0.8.0 (running on conda environment)\n- GPU: GeForce GTX 860M\n### Steps to reproduce\n1. conda create -n tensorflow python=2.7\n2. pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\n### What have you tried?\n1. I tried the MNIST tutorial for begginer and it works well on both cpu and gpu\n2. I tried the MNIST tutorial for expert on cpu and it works well\n3. I tried the MNIST tutorial for expert on gpu and its not working, here's the output:\n\n```\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:900] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX 860M\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.0195\npciBusID 0000:01:00.0\nTotal memory: 2.00GiB\nFree memory: 1.67GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 860M, pci bus id: 0000:01:00.0)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:427] could not set cudnn filter descriptor: CUDNN_STATUS_BAD_PARAM\nAborted (core dumped)\n```\n## Additional information (the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n-rw-r--r-- 1 root root  189170 Apr 22 15:05 libcudadevrt.a\nlrwxrwxrwx 1 root root      16 Apr 22 15:05 libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root      19 Apr 22 15:05 libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root  311596 Apr 22 15:05 libcudart.so.7.5.18\n-rw-r--r-- 1 root root  558020 Apr 22 15:05 libcudart_static.a\nlrwxrwxrwx 1 root root      17 Apr 22 15:05 libcuinj32.so -> libcuinj32.so.7.5\nlrwxrwxrwx 1 root root      20 Apr 22 15:05 libcuinj32.so.7.5 -> libcuinj32.so.7.5.18\n-rwxr-xr-x 1 root root 5396088 Apr 22 15:05 libcuinj32.so.7.5.18\nlrwxrwxrwx 1 root root       13 Apr 22 16:38 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Apr 22 16:38 libcudnn.so.5 -> libcudnn.so.5.0.4\n-rwxrwxr-x 1 root root 59823168 Mar 22 10:37 libcudnn.so.5.0.4\n```\n", "comments": ["This is because you have cudnn v5, which requires installing from source.\n\nSee: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/get_started/os_setup.md#requirements for info\n", "If you have the error `\"CUDNN_STATUS_BAD_PARAM\"`, make sure that this problem does not come from your code.\r\n\r\nFor example if you give an empty array as an input.", "I also encounter this error. In my case, the forward pass works normally but the backward pass I filtered unsuitable samples (convert from [`origin_batch_size`, h, w, 3] -> [`keep_samples`, h, w, 3]) for training and keep them backprop through graph, it makes on some batches has zero sample when run the backward pass (keep_samples=0). I solved my problem by settings contributed loss to zero when `keep_samples` is zero.", "This happens with batch_size=1:\r\n<img width=\"1269\" alt=\"problem\" src=\"https://user-images.githubusercontent.com/2902390/35783938-48f4031e-09d6-11e8-835d-aad366c8396d.png\">\r\n"]}, {"number": 2106, "title": "[ distribution ] How to use multiple GPU on each replica ?", "body": "The [Code Here](https://github.com/tensorflow/models/blob/master/inception/inception/imagenet_distributed_train.py) shows how to set each replica which has a single tower that uses one GPU. I'm wondering if there is a way changing this code a little bit to make use of multiple GPU on one machine like [that example](https://github.com/tensorflow/models/blob/master/inception/inception/inception_train.py). \n\nThe way I currently used for using all GPU on a worker machine is starting the number of workers that equal to the number of GPUs. then the workers can communicate to each other as if they are not on one machine. That is slower than if I can start a woker that control more than one GPU. \n", "comments": ["Closing as a duplicate of https://github.com/tensorflow/models/issues/54.\n"]}, {"number": 2105, "title": "Faile to run tensorflow ", "body": "I just want to install the tensorflow using pip.\n$ sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\nand it succeed.\n\nAnd I run python -c \"import tensorflow;it will report\nImportError: /lib64/libc.so.6: version `GLIBC_2.15' not found (required by /usr/local/python2710/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so)\n\nAnd I tried to upgrade GLIBC_2.15,and then now it reported that\nImportError: /opt/glibc-2.15/lib/libc.so.6: version `GLIBC_2.17' not found (required by /usr/local/python2710/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.s\n\nAnd then tried to upgrade to GLIBC_2.17,and then type ls ,the error as below:\nls: error while loading shared libraries: __vdso_time: invalid mode for dlopen(): Invalid argument\n\nMy machine is \nLinux sjs_88_78 2.6.32-504.23.4.el6.x86_64 #1 SMP Fri May 29 10:16:43 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux\n", "comments": ["Sorry you're having trouble.  Did you previously install another version of tensorflow?  If so, you must use pip uninstall to remove the first installation before trying to upgrade.  If you have an unusual linux distribution it may be necessary to install from sources by configuring and compiling on your machine.\n", "It is the first time I tried to install the tensorflow\nI just also tried to install from sources,but it still failed when install bazel\n", "I have the same problem too! Have you solved this problem?\n", "@liumilan: It does sound like you'll need to install from source.  I'm going to close this bug for now: if you still have issues please reopen a separate bug about the problems installing from source. \n"]}, {"number": 2104, "title": "only update batch norm averages during training", "body": "according to [#1724](https://github.com/tensorflow/tensorflow/issues/1724), a node that is meant to only run in one state of tf.cond needs to be defined inside that conditional function.\n", "comments": ["Can one of the admins verify this patch?\n", "Thanks for your pull request.  It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit https://cla.developers.google.com/ to sign.**\n\nOnce you've signed, please reply here (e.g. `I signed it!`) and we'll verify.  Thanks.\n\n---\n- If you've already signed a CLA, it's possible we don't have your GitHub username or you're using a different email address.  Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n- If you signed the CLA as a corporation, please let us know the company's name.\n\n<!-- need_sender_cla -->\n", "I signed it!\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "@tensorflow-jenkins test this please.\n", "Am I reading the test failures correctly that my change in the true branch is now causing an error to [be thrown by the false branch](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_ops.py#L1181)?  The specific error is because `ema.average()` will [return `None`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/moving_averages.py#L316) until `ema.apply()` has been used and `None` does not have a `name` property?\n", "The false branch is `lambda: (ema_mean, ema_var)`.  Both ema_mean and ema_var must not be None. Otherwise the computation is meaningless.  The error message should have been better.\n", "I have added a check for None values in the false branch.  Should there also be a warning message when an ExponentialMovingAverage().average() is None, since accessing an average before any values have been applied seems like a mistake.  \n", "@tensorflow-jenkins test this please.\n", "@mikowals can you please resolve conflicts?\n", "I removed the spaces and squashed the commits to one.\n", "@mikowals There's still conflict\n", "status?\n", "@tensorflow-jenkins test this please.\n", "status?\n", "I do not understand the error messages coming from the Linux GPU PIP tests.  Is it possible they are linter related? \n\nI notice that lines 60 and 61 that I have written are into the right margin compared to the rest of the file and that since this pull originated many other lines in the file have had returns added with a commit message about fixing lint errors.\n", "not sure, might be test infra failure.  if you rebase to resolve the conflict we can try again\n", "rebased to resolve confict. \n", "Thanks!\n\n@tensorflow-jenkins test this please\n", "Since this has yet to be merged I wonder if I should amend to it use the newly added  `tf.contrib.layers.batch_norm` to avoid duplication.\n\nI think this could become:\n\n```\ndef batch_normalize(tensor_in,\n       epsilon=1e-5,\n       convnet=False, # this becomes redundant with tensor_in shape\n       decay=0.9,\n       scale_after_normalization=True):\n\n    with vs.variable_scope(\"batch_norm\"):\n        batch_norm = functools.partial(layers.batch_norm, tensor_in,\n              decay=decay,\n              center=True,\n              scale=scale_after_normalization,\n              epsilon=epsilon,\n              updates_collections=None, \n              scope='learn_bn')\n\n        batch_norm_from_moving_averages = functools.partial(batch_norm, \n              is_training=False, reuse=True)\n\n        is_training = array_ops_.squeeze(ops.get_collection(\"IS_TRAINING\"))\n        return control_flow_ops.cond(is_training, batch_norm, batch_norm_from_moving_averages)\n```\n", "Sorry @mikowals, this PR dropped off the attention list.  @ilblackdragon what do you think about his suggestion?\n", "Can one of the admins verify this patch?\n", "Can one of the admins verify this patch?\n", "I have rebased to current master.  Sorry for close / reopen activity.  I am learning the limits of my git understanding.\n", "@tensorflow-jenkins test this please!\n\n@mikowals Let's submit what you have (sorry for late responses on my side) and we can refactor to use `layers.batch_norm` in subsequent changes. Note, we ideally want to move `learn/ops/` into `layers/`, so it will be a bit more work.\n"]}, {"number": 2103, "title": "Branch 120750153", "body": "", "comments": ["Can one of the admins verify this patch?\n", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for the commit author(s).  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\n\n<!-- need_author_cla -->\n", "test this please\n", "test this please\n", "Jenkins, test this please!\n\nthe RE isn't perfect. We want to move this to a proper chatbot. ;)\n", "i added benoit to the trigger list (I used the wrong username, sigh).\n"]}, {"number": 2102, "title": "Those aren't floats...", "body": "Am I misunderstanding something here? I fail to see floats.\n", "comments": ["Can one of the admins verify this patch?\n", "Thanks for your pull request.  It looks like this may be your first contribution to a Google open source project. Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit https://cla.developers.google.com/ to sign.**\n\nOnce you've signed, please reply here (e.g. `I signed it!`) and we'll verify.  Thanks.\n\n---\n- If you've already signed a CLA, it's possible we don't have your GitHub username or you're using a different email address.  Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n- If you signed the CLA as a corporation, please let us know the company's name.\n\n<!-- need_sender_cla -->\n", "Signed CLA\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "I believe these are actually floats. Sure, floats that each carry only one bit of information, but partly for historical reasons, partly for convenience, they are floats. \n"]}, {"number": 2101, "title": "TensorFlow_0.8.0 somehow breaks PIL ? ", "body": "### Environment info\n\nOperating System:\n\n```\nubuntu@ip-172-31-32-186:~$ uname -a\nLinux ip-172-31-32-186 3.13.0-48-generic #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nTensorFlow version and installation method:\n\n```\nubuntu@ip-172-31-32-186:~$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n0.8.0\n```\n\nI installed with command:\n`sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl`\n\nMy problem: Tensorflow break the PIL image read\n### Steps to reproduce\n\nFollowing command verifies that my PIL works good without importing TensorFlow:\n\n```\nubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from PIL import Image\n>>> a = Image.open('bubble-counting/images/original/bubble.jpg')\n>>> b = a.getdata()\n>>> b[0]\n(166, 56, 57)\n```\n\nAfter importing TensorFlow, same code does not work any more:\n\n```\nubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import tensorflow as tf\n>>> from PIL import Image\n>>> a = Image.open('bubble-counting/images/original/bubble.jpg')\n>>> b = a.getdata()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/Image.py\", line 1151, in getdata\n    self.load()\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 235, in load\n    raise_ioerror(e)\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 59, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\n```\n### Other info\n\n**After uninstall TensorFlow0.8 and install TensorFlow0.7.1, the problem disappeared!**\n\ninstallation code:\n`sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl`\n\n```\n>>> PIL.VERSION\n'1.1.7'\n>>> pandas.__version__\nu'0.18.0'\n>>> dask.__version__\n'0.8.2'\n>>> numpy.__version__\n'1.11.0'\n>>> scipy.__version__\n'0.17.0'\n```\n\nMy questions:\n1. Can you reproduce the problem ?\n2. What might be the reason of this problem since I am not familiar with PIL or TensorFlow code ?\n\nIf there were any information you need, pls let me know.\n", "comments": ["Can you try importing tensorflow after PIL? There are some shared library issues we've been seeing where the version of libpng and libjpeg tensorflow is compiled with conflicts with other libraries that are linked against a different version (we've seen problems with OpenCV).\n", "@martinwicke Import TensorFlow after PIL works. Thanks for the information.  \n", "I'm closing this issue as a duplicate of #1924, it seems to be the same problem.\n"]}, {"number": 2100, "title": "Branch 120724543", "body": "", "comments": ["Can one of the admins verify this patch?\n", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for the commit author(s).  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\n\n<!-- need_author_cla -->\n", "@tensorflow-jenkins test this please\n", "Regarding the quantization related errors, please make another push from internal. There is a recent CL (120733385) that fixes it.\n\nWe'll also have to look into the remaining errors.\n"]}, {"number": 2099, "title": "Misleading error message when using \"empty\" variables", "body": "The code below fails with \"Attempting to use uninitialized value Variable\". This came up [here](http://stackoverflow.com/questions/36763913/tensorflow-failedpreconditionerror-but-all-variables-have-been-initialized) and makes debugging harder. Maybe instead it should fail during Variable creation or Shape inference with \"Variable must have non-zero size\"\n\nsess = tf.InteractiveSession()\nempty = np.zeros(shape=(0, 0) )\na = tf.Variable(empty)\nsess.run(tf.initialize_all_variables())\nsess.run(tf.reduce_sum(a))\n", "comments": ["There's no reason to restrict variables to have nonzero size.  I'll fix.\n"]}, {"number": 2098, "title": "max_pool_with_argmax: No gradient defined", "body": "GitHub issues are for bugs / installation problems / feature requests.  \nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\n\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\n### Environment info\n\nOperating System: Linux Ubuntu 14.04\n\nInstalled version of CUDA and cuDNN: None\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\nIf installed from binary pip package, provide: pip package:\ntensorflow-0.8.0-cp34-cp34m-linux_x86_64.whl\n1. Which pip package you installed.  \n2. The output from python -c \"import tensorflow; print(tensorflow.**version**)\".\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n1. include a max_pool_with_argmax layer in a convolutional neural network and use it for training.\n   The process terminate with this error:\n   LookupError: No gradient defined for operation 'conv2/MaxPoolWithArgmax' (op type: MaxPoolWithArgmax)\n", "comments": ["Thanks for the bug report.  Fix in process.\n", "@zheng-xq, @poxvoculi: Is a fix really in progress?  It's only 10 or so lines of code, and @mwalton already wrote most of it here: https://github.com/tensorflow/tensorflow/issues/1793  \n", "@girving, a PR is welcome. \n", "Closing as duplicate of #1793.\n"]}, {"number": 2097, "title": "Undefined symbol in GPU user op", "body": "### Environment info\n\nOperating System: Ubuntu 14.04\n\nInstalled version of CUDA and cuDNN: 7.5, 5 (see bottom for ls output)\nIf installed from sources, provide the commit hash: 55068f32c87c73c8de7a417d8be735306e5307a1\n### Steps to reproduce\n1. Get BUILD, get_diag.cc, get_diag.cu.cc from [my fork](https://github.com/c0g/tensorflow/tree/master/tensorflow/core/user_ops)\n2. Build the get_diag op with `bazel build -c opt --config cuda //tensorflow/core/user_ops:get_diag.so`\n3. Try to run it on the GPU.\n\nError messages is: \n`\ntensorflow.python.framework.errors.NotFoundError: /home/tron/Source/tensorflow/bazel-bin/tensorflow/core/user_ops/get_diag.so: undefined symbol: _Z21GetDiagKernelLauncherIdEvPKT_iiPS0_\n`\n\nhowever, running `nm -an get_diag.so | grep _Z21GetDiagKernelLauncherIdEvPKT_iiPS0_` shows `U _Z21GetDiagKernelLauncherIdEvPKT_iiPS0_` , so it appears the symbol is present.\n\nThis works fine with the CPU version of the op - is there something I'm missing to make Bazel link things properly?\n### Logs or other output that would be helpful\n\n-rw-r--r-- 1 root root   322936 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a\nlrwxrwxrwx 1 tron tron       13 Mar 22 07:44 /usr/local/cuda-7.5/lib64/libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 tron tron       17 Mar 22 07:44 /usr/local/cuda-7.5/lib64/libcudnn.so.5 -> libcudnn.so.5.0.4\n-rwxrwxr-x 1 tron tron 59823168 Mar 22 01:37 /usr/local/cuda-7.5/lib64/libcudnn.so.5.0.4\n-rw-rw-r-- 1 tron tron 58734618 Mar 22 01:37 /usr/local/cuda-7.5/lib64/libcudnn_static.a\n", "comments": ["Closing: user error.\n", "can you briefly explain what your user error is? I think i am hitting the same issue and not able to get around this.\n"]}, {"number": 2096, "title": "fix missing import `monitors`", "body": "", "comments": ["Can one of the admins verify this patch?\n", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for the commit author(s).  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\n\n<!-- need_author_cla -->\n", "CLAs look good, thanks!\n\n<!-- ok -->\n", "@tensorflow-jenkins test this please.\n"]}, {"number": 2095, "title": "Update os_setup.md", "body": "Fixed command to Installing from sources on OS X\n\nIn file \"os_setup.md\"\n\nWhen try to build from sources on OS X, it need to root permission during\n\n> sudo bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\n> sudo pip install /tmp/tensorflow_pkg/tensorflow-0.8.0-py2-none-any.whl\n", "comments": ["Can one of the admins verify this patch?\n", "I'll close this for inactivity. If you update the PR, I'm happy to reopen.\n"]}, {"number": 2094, "title": "tensorflow.bzl: strip bazel version number to work with patch bazel release", "body": "The newest bazel version number is 0.2.2b, when need to strip 2b\n", "comments": ["Can one of the admins verify this patch?\n", "There are probably better ways to do this, but in the interest of unbreaking people, this seems fine.  Going to test and merge if successful.\n", "@tensorflow-jenkins test this please\n", "hurray\n"]}, {"number": 2093, "title": "Some Sampling Ops", "body": "issue: https://github.com/tensorflow/tensorflow/issues/565\n\nThis git pull request will give support to doing the sampling trick presented by Bengio et al., 2015 \"Scheduled Sampling for Sequence Prediction with Recurrent Neural Networks\". Originally I was thinking of doing the entire \"softmax sampling\" in one step (i.e., 1 kernel), but I decided to seperate it. I might submit a \"monolithic\" op for that later, but i highly doubt theres any major perf diff...\n", "comments": ["Can one of the admins verify this patch?\n", "status of this PR?  you also need to add license headers to all of these new files\n", "This looks good overall. Remember to add the required license headers as vrv pointed out.\n", "whats the required license header? should i include the copyright google?\nor just the apache part?\n\n## \n\nWilliam Chan\nCarnegie Mellon University\n(650) 450-9455\nwilliamchan.ca\n\nOn Thu, May 12, 2016 at 4:47 PM, gouwsmeister notifications@github.com\nwrote:\n\n> This looks good overall. Remember to add the required license headers as\n> vrv pointed out.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/tensorflow/tensorflow/pull/2093#issuecomment-218916950\n", "Look at just about any other checked-in file :)\n", "can someone pls launch a Jenkins, test this please.\n\n## \n\nWilliam Chan\nCarnegie Mellon University\n(650) 450-9455\nwilliamchan.ca\n\nOn Thu, May 12, 2016 at 4:56 PM, Vijay Vasudevan notifications@github.com\nwrote:\n\n> Look at just about any other checked-in file :)\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/tensorflow/tensorflow/pull/2093#issuecomment-218918315\n", "@tensorflow-jenkins test this please !!\n", "may want to add sample_ops to gen_docs ?\n", "is this ready to review again?\n", "I think we can remove this PR / ops... made aware of random_ops.multinomial which sorta make these ops obsolete.\n", "Ah, gotcha.  We can reopen later if needed.  Thanks!\n"]}, {"number": 2092, "title": "'ClusterSpec' object has no attribute '_cluster_spec'", "body": "I want to test tensorflow cluster,According tothe website https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/how_tos/distributed/index.md\nERROR 'ClusterSpec' object has no attribute '_cluster_spec'  happend\n\n> > > import numpy\n> > > import matplotlib\n> > > import tensorflow as tf\n> > > I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\n> > > I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\n> > > I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\n> > > I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\n> > > I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n> > > cluster = tf.train.ClusterSpec({\"local\": [\"localhost:2222\", \"localhost:2223\"]})\n> > > server = tf.train.Server(cluster, job_name=\"local\", task_index=0)\n> > > Traceback (most recent call last):\n> > >   File \"<stdin>\", line 1, in <module>\n> > >   File \"/usr/lib/python2.7/site-packages/tensorflow/python/training/server_lib.py\", line 135, in **init**\n> > >     job_name, task_index, protocol)\n> > >   File \"/usr/lib/python2.7/site-packages/tensorflow/python/training/server_lib.py\", line 65, in _make_server_def\n> > >     cluster_spec = ClusterSpec(server_or_cluster_def)\n> > >   File \"/usr/lib/python2.7/site-packages/tensorflow/python/training/server_lib.py\", line 242, in __init__\n> > >     self._cluster_spec[job_def.name] = [t for t in job_def.tasks.values()]\n> > > AttributeError: 'ClusterSpec' object has no attribute '_cluster_spec'\n", "comments": ["See: https://github.com/tensorflow/tensorflow/issues/1961\n", "This bug (#1961) has been fixed at HEAD and in the 0.8 release.\n"]}, {"number": 2091, "title": "installing TensorFlow  on Ubuntu 16.04", "body": "I'm trying to install gpu version of TensorFlow using pip3 on Ubuntu 16.04 \nTo do so I'm running below command(I've downloaded the file to make an archive of stable versions for me):\n`sudo pip3 install --upgrade tensorflow-0.8.0-cp34-cp34m-linux_x86_64.whl`\nI'm getting some error about locale setting as below:\n`File \"/usr/bin/pip3\", line 11, in <module>`\n`sys.exit(main())`\n`File \"/usr/lib/python3/dist-packages/pip/__init__.py\", line 215, in main`\n`locale.setlocale(locale.LC_ALL, '')`\n`File \"/usr/lib/python3.5/locale.py\", line 595, in setlocale`\n`return _setlocale(category, locale)`\n`locale.Error: unsupported locale setting`\n\nany help?\n", "comments": ["I've found the soloution here:\nhttp://askubuntu.com/questions/205378/unsupported-locale-setting-fault-by-command-not-found\n"]}, {"number": 2090, "title": "Fixes #2063 not displaying loss in tensorboard", "body": "Merge summaries after optimizer adds loss and gradients summaries.\n\nRe: #2063 \n", "comments": ["Still missing monitor loss! \nI've reported the modification in my already installed version (the last nightly build fails) [this one](http://ci.tensorflow.org/view/Nightly/job/nigntly-matrix-linux-gpu/TF_BUILD_CONTAINER_TYPE=GPU,TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=PYTHON2,label=gpu-working/lastBuild/)\nbut I have no validation loss in tensorboard\n"]}, {"number": 2089, "title": "Add support for reading HDF5", "body": "HDF5 is a popular format to store complicated datasets (alternative to proto files).\nAlso has different random seeking functionality and is widely used in scientific community.\n\nThis is FR for:\n- Adding HDF5 reader.\n- Support of HDF5 in tf.learn.\n\n(originally from https://github.com/tensorflow/skflow/issues/52)\n", "comments": ["May be the hdf5 reader prefer to read from a single huge hdf5 file, instead of a file-name queue.\nThe bioinformatics data often stores in one mat/gtcx/hdf5 file.\nHowever, open it with h5py.File as numpy array and feed the tf.placeholder is OK for now.\n", "I'll be happy to help with any questions regarding the best way to utilize HDF5.\n", "I would like to work on this issue. I am new here and looking for help to get started.\n", "This can be closed. See an example in examples/skflow. \n", "Thanks @terrytangyuan!\n", "@ilblackdragon The skflow is not suitable for out-of-core hdf5 data, some hdf5 or matlabv7.3 data are the same size as ImageNet. Maybe a reader randomly acesss hdf5 data and feed the model with reasonbale memory is still necessary.\n", "@sun9700 Yes, the out-of-core doesn't work yet. Feel free to file a separate Feature Request about it (support streaming from hdf5) - and of cause PR will be highly welcome :)\n"]}, {"number": 2088, "title": "[tf.learn] High-level DNNAutoencoder ", "body": "1. Added autoencoder model and estimator. (can be extended later) \n2. Allow unsupervised model in estimator\n3. Tests for autoencoder\n\ncc: @ilblackdragon  \n", "comments": ["Can one of the admins verify this patch?\n", "I am planning to do some refactoring: \n1. Move `rnn_estimator` in  `get_rnn_model` into an `rnn_op`\n2. Replace `get_dnn_model` and `get_rnn_model` with a more generalized `get_supervised_model`.\n3. Make `get_autoencoder_model` more general so other ops, like `rnn_op`, can be used as encoder/decoder. \n\nAny thoughts? Should I do that in a following new PR? @ilblackdragon \n", "@ilblackdragon Conflicts fixed, example added, delaying refactoring after internal changes. \n", "@tensorflow-jenkins test this please.\n"]}, {"number": 2087, "title": "Merge 0.8.0rc --> 0.8.0 version bump to master", "body": "Cherry pick of version bumping for 0.8.0 final release (#1959)\n\n0.8.0rc0 --> 0.8.0\n", "comments": ["@vrv @martinwicke ready to merge. PTAL.\n"]}, {"number": 2086, "title": "Merge r0.8 to master", "body": "Merge r0.8 final release to master\n", "comments": ["We found a Contributor License Agreement for you (the sender of this pull request) and all commit authors, but as best as we can tell these commits were authored by someone else.  If that's the case,  please add them to this pull request and have them confirm that they're okay with these commits being contributed to Google.  If we're mistaken and you did author these commits, just reply here to confirm.\n\n<!-- need_author_consent -->\n"]}, {"number": 2085, "title": "segmentation fault with tensorflow 0.8.0 and matplotlib", "body": "When I build a simple script:\n\n`import tensorflow`\n`import matplotlib.pyplot as plt`\n`import numpy as np`\n\n`plt.plot(np.arange(100))`\n`plt.show()`\n\nI get a segmentation fault with TensorFlow 0.8.0. Tested with both, Matplotlib 1.5.1 and 1.4.3.\n\nWhen I downgrade TensorFlow to 0.7.1 everything runs fine, with both, Matplotlib 1.5.1 and 1.4.3.\n\nTensorFlow is installed via pip inside a virtual environment. I've not installed it outside of a virtual-env, because I do not want to break anything on my system.\n### Environment info\n\nOperating System: Manjaro Linux\n\n`uname --all`\nLinux 4.4.6-1-MANJARO #1 SMP PREEMPT Sat Mar 19 06:00:37 CET 2016 x86_64 GNU/Linux\n\n`pip freeze`\nbackports.shutil-get-terminal-size==1.0.0\ncycler==0.10.0\ndecorator==4.0.9\nfuncsigs==1.0.1\nipython==4.2.0\nipython-genutils==0.1.0\nlouis==2.6.5\nmatplotlib==1.5.1\nmock==2.0.0\nnetsnmp-python==1.0a1\nnose==1.3.7\nnumpy==1.11.0\npackaging==16.6\npathlib2==2.1.0\npbr==1.9.1\npexpect==4.0.1\npickleshare==0.7.2\nprotobuf==3.0.0b2\nptyprocess==0.5.1\npwquality==1.3.0\npyparsing==2.1.1\npython-dateutil==2.5.3\npython-libtorrent==1.0.9\npython-musicbrainz==0.0.0\npytz==2016.4\nsimplegeneric==0.8.1\nsix==1.10.0\nteam==1.0\ntensorflow==0.7.1\ntraitlets==4.2.1\nvirtualenv==15.0.0\n", "comments": ["What if you switch the order and do\n\n```\nimport numpy as np\nimport tensorflow\nimport matplotlib.pyplot as plt\n```\n\nSeems related to https://github.com/tensorflow/tensorflow/issues/2034\n", "```\nimport numpy as np\nimport tensorflow\nimport matplotlib.pyplot as plt\n\nplt.plot(np.arange(100))\nplt.show()\n```\n\nProduces a segmentation fault, too.\n\nSurprisingly:\n\n```\nimport numpy as np                                                                                                                                                                                \nimport matplotlib.pyplot as plt \nimport tensorflow\n\nplt.plot(np.arange(100))\nplt.show()\n```\n\nruns fine, no issues at all.\n\nWhat kind of dark magic is this?^^\nDoes TensorFlow actually _need_ dependencies to be imported _before_ TensorFlow is imported itself?\nWhy isn't this happening in TensorFlow 0.7.1?\n", "Not sure if this is of any help, but I ran into the same apparent problem -- importing tf and matplotlib.pyplot gives a segfault, but for me the import order does not matter. I resolved my issue by installing the tensorflow and matplotlib inside a virtual environment _without_ the --system-site-packages flag (so everything is installed anew).\n\nI am using Archlinux w/ kernel 4.5.0-1.\n", "Mysterious...\nCan someone confirm this issue? Does it only happen on _some_ systems?\n", "Does it still happen at head? (a similar-sounding segfault issue was fixed in https://github.com/tensorflow/tensorflow/commit/be092f47e0072645116a64496f7fa654ed708624)\n", "I have the same problem. And that's how it is solved.\nBefore import tensorflow .I import numpy. It have  no problem.  And Why This\uff1f\uff1f\uff1f\n", "Closing as a duplicate of #2034.  This is fixed in 0.9.\n"]}, {"number": 2084, "title": " Check failed: message->ParseFromZeroCopyStream(&adaptor) ", "body": "I replaced the pb&labels.txt files in asset in android demo with what I retrained in examples/image_retraining . I built the demo successfully,but when running ,it shut down,and toast the error message: \n`Check failed: message->ParseFromZeroCopyStream(&adaptor)`\n`Fatal signal 6 (SIGABRT), code -6 in tid 14617 (ImageListener)`\nI have no idea about this,please give some advice.\n", "comments": ["what is the difference between inceptionv3 and inception5h? why I canot use it in android demo?\n", "close it,they are some models,but different of output_layer name.\n", "@neverPick just wondering, what did you end up doing? \n", "@l4chong You can edit [TensorflowImageListener.java](https://cs.corp.google.com/piper///depot/google3/third_party/tensorflow/examples/android/src/org/tensorflow/demo/TensorflowImageListener.java?q=tensorflow/examples/android+inception&sq=package:piper+file://depot/google3+-file:google3/%28experimental%7Cobsolete%29&l=45) according to the comment there to adapt it to handle Inception v3.\n", "@andrewharp what parameters need to change to adapt the retrained data t work on Android Demo?\n", "I believe the params to be modified are:\n  private static final int NUM_CLASSES = 256;\n  private static final int INPUT_SIZE = 224;\n  private static final int IMAGE_MEAN = 117;\n\nBut I'm not sure what values to use (though I suspect that NUM_CLASSES should correspond to the number of lines in the labels file). I'm also having the same error message (Check failed: message->ParseFromZeroCopyStream(&adaptor)) when trying to use my own model in the demo.\n", "@barantes I opened a new issue here https://github.com/tensorflow/tensorflow/issues/3599\nto declare my problem. Let me know if you find any solutions.\n", "It's working for me, with a retrained model. \n\n  private static final int NUM_CLASSES = 7;\n  private static final int INPUT_SIZE = 299;\n  private static final int IMAGE_MEAN = 128;\n  private static final float IMAGE_STD = 128;\n  private static final String INPUT_NAME = \"Mul:0\";\n  private static final String OUTPUT_NAME = \"final_result:0\";\n\nyou have to change the NUM_CLASSES with the number of labels you have\n"]}, {"number": 2083, "title": "build doc enhancements", "body": "The installation guide https://www.tensorflow.org/versions/r0.8/get_started/os_setup.html could use the following improvements:\n1. In the \"pip installation\" and \"virtualenv installation\" section, should specify that the wheel package is _specifically_ for Python 3.4. \n   As a side note, a wheel package for Python 3.5 would be greatly appreciated.\n2. In build from sources -> install other dependencies:\n   Replace:\n   $ sudo apt-get install python-numpy swig python-dev\n   With:\n   For Python 2.7:\n   $ sudo apt-get install python-numpy swig python-dev python-wheel\n   For Python 3.x:\n   $ sudo apt-get install python3-numpy swig python3-dev python3-wheel\n3. In the build from sources section: specify that the compilation is VERY memory hungry (it won't fit on 8GB RAM), and suggest to add --local_resources 2048,.5,1.0 to the bazel build command as a workaround.\n   Alternatively, change the bazel script to detect the available RAM and scale down automatically.\n", "comments": ["Thanks for the suggestions!\n\nOur documentation is open source too, so feel free to send us a PR for these!\n\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/get_started/os_setup.md is the file to edit.\n", "For 3., it would be best to note that you can use -j X to throttle bazel. It's easier than local_resources and gets the job done. \n", "I believe this should be closed now. Addressed comment 2 in #4410, and as for the first one: I believe there are wheel packages for 3.5 now, too.\n"]}, {"number": 2082, "title": "conv_grad_ops: return after setting error status", "body": "If cudnn/cublas fails to launch, we should just error immediately.\n\nI'm hoping this will give us more information for #2066\n", "comments": []}, {"number": 2081, "title": "install from source fails on Mac", "body": "The installation of tensorflow from source fails on Mac.\n\nThe step it fails on is ./configure. The configure script looks like it has never been written to work on the Mac, even though the install guide suggests running ./configure in the section for Mac installation.\n\nThe script contains these lines which is where the failure happens:\n\n  if [ -e $CUDA_TOOLKIT_PATH/lib64/libcudart.so$TF_CUDA_EXT ]; then\n    break\n  fi\n  echo \"Invalid path to CUDA $TF_CUDA_VERSION toolkit. $CUDA_TOOLKIT_PATH/lib64/libcudart.so$TF_CUDA_EXT cannot be found\"\n## \n\nOf course the Mac doesn't have .so libs, or a lib64 dir. For example, my Cuda installation is at /usr/local/cuda, with /usr/local/cuda/lib/ containing *.dylib files including libcudart.dylib.\n", "comments": ["Thanks for the report: we do not yet support GPUs on OS X, but https://github.com/tensorflow/tensorflow/pull/664 is adding support for it, stay tuned.  Follow on that thread, will close for now!\n"]}]