[{"number": 53120, "title": "changing the error message when libtpu is in use", "body": "changing the error message when libtpu is in use", "comments": []}, {"number": 53119, "title": "changing the error message when libtpu is in use", "body": null, "comments": []}, {"number": 53118, "title": "Build from source failing for TF 2.7.0 (with a custom gcc 7.4.0 compiler)", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Scientific Linux 7.9 (Nitrogen)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.7.0 (also tried 2.6.0, 2.5.0, 2.3.0)\r\n- Python version: 3.8\r\n- Installed using virtualenv? pip? conda?: No\r\n- Bazel version (if compiling from source): 3.7.2 \r\n- GCC/Compiler version (if compiling from source): 7.4.0 (also tried 7.3.0, 5.3.0, 6.3.0)\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: 1080ti\r\n\r\n\r\n\r\n**Describe the problem**\r\nI've been trying to install TensorFlow from source for about a month on a cluster in which the native GCC version is old (4.8.0). If I don't build my own GCC version, the installation fails every time because of this issue  #38718 . I've been using this [guide](https://gist.github.com/jakublipinski/40ba68994fe0092600a05b0060e7d445) to install the TensorFlow from source, but while I don't face the earlier error, the compilation **always** fails with some error related to Eigen, regardless of whichever GCC or TensorFlow version I use.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nenv BAZEL_LINKOPTS=-static-libstdc++:-static-libgcc BAZEL_LINKLIBS=-l%:libstdc++.a:-lm BAZEL_CXXOPTS=-std=c++17 ../bazel-3.7.2/output/bazel build  //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\" --verbose_failures --config=nonccl --config=opt \r\n\r\n**Any other info / logs**\r\n\r\n```\r\nERROR: /global/home/groups/co_noneq/deepmd/tensorflow/tensorflow/core/kernels/BUILD:3535:18: C++ compilation of rule '//tensorflow/core/kernels:cwise_op_gpu' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command \r\n  (cd /global/scratch/users/ansingh/_bazel_ansingh/ccb34797bcab4c95cac85d6d3e6f44f2/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/global/software/sl-7.x86_64/modules/langs/cuda/10.2 \\\r\n    GCC_HOST_COMPILER_PATH=/global/home/groups/co_noneq/deepmd/gcc/bin/gcc \\\r\n    LD_LIBRARY_PATH=/global/home/groups/co_noneq/deepmd/binutils/lib:/global/home/groups/co_noneq/deepmd/gcc/lib64:/global/software/sl-7.x86_64/modules/langs/cuda/10.1/lib64/stubs:/global/software/sl-7.x86_64/modules/langs/cuda/10.1/lib64:/global/home/users/ansingh/openmm/lib:/global/home/users/ansingh/openmm/lib \\\r\n    PATH=/global/home/groups/co_noneq/deepmd/binutils/bin:/global/home/groups/co_noneq/deepmd/gcc/bin:/global/software/sl-7.x86_64/modules/langs/cuda/10.1/bin:/global/home/users/ansingh/miniconda3/bin:/global/home/users/ansingh/miniconda3/condabin:/global/software/sl-7.x86_64/modules/tools/sq/0.1.0/bin:/global/software/sl-7.x86_64/modules/tools/emacs/25.1/bin:/global/software/sl-7.x86_64/modules/tools/vim/7.4/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/global/home/groups/allhands/bin:/global/home/users/ansingh/moltemplate/moltemplate/moltemplate:/global/home/users/ansingh/moltemplate/moltemplate/moltemplate/scripts:/global/home/users/ansingh/bin:/global/home/groups/allhands/bin:/global/home/users/ansingh/moltemplate/moltemplate/moltemplate:/global/home/users/ansingh/moltemplate/moltemplate/moltemplate/scripts \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/global/home/users/ansingh/miniconda3/bin/python3 \\\r\n    PYTHON_LIB_PATH=/global/home/users/ansingh/miniconda3/lib/python3.8/site-packages \\\r\n    TF2_BEHAVIOR=1 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=3.5,7.0 \\\r\n    TF_CUDA_PATHS=/global/software/sl-7.x86_64/modules/cuda/10.1/cudnn/7.6,/global/software/sl-7.x86_64/modules/langs/cuda/10.2 \\\r\n    TF_CUDA_VERSION=10 \\\r\n    TF_CUDNN_VERSION=7 \\\r\n    TF_NCCL_VERSION='' \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/cwise_op_gpu/cwise_op_gpu_zeta.cu.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/cwise_op_gpu/cwise_op_gpu_zeta.cu.pic.o' -DHAVE_SYS_UIO_H -DTF_USE_SNAPPY -DCURL_STATICLIB '-DLLVM_ON_UNIX=1' '-DHAVE_BACKTRACE=1' '-DBACKTRACE_HEADER=<execinfo.h>' '-DLTDL_SHLIB_EXT=\".so\"' '-DLLVM_PLUGIN_EXT=\".so\"' '-DLLVM_ENABLE_THREADS=1' '-DHAVE_SYSEXITS_H=1' '-DHAVE_UNISTD_H=1' '-DHAVE_STRERROR_R=1' '-DHAVE_LIBPTHREAD=1' '-DHAVE_PTHREAD_GETNAME_NP=1' '-DHAVE_PTHREAD_SETNAME_NP=1' '-DHAVE_PTHREAD_GETSPECIFIC=1' '-DHAVE_REGISTER_FRAME=1' '-DHAVE_DEREGISTER_FRAME=1' -D_GNU_SOURCE '-DHAVE_LINK_H=1' '-DHAVE_LSEEK64=1' '-DHAVE_MALLINFO=1' '-DHAVE_POSIX_FALLOCATE=1' '-DHAVE_SBRK=1' '-DHAVE_STRUCT_STAT_ST_MTIM_TV_NSEC=1' '-DLLVM_NATIVE_ARCH=\"X86\"' '-DLLVM_NATIVE_ASMPARSER=LLVMInitializeX86AsmParser' '-DLLVM_NATIVE_ASMPRINTER=LLVMInitializeX86AsmPrinter' '-DLLVM_NATIVE_DISASSEMBLER=LLVMInitializeX86Disassembler' '-DLLVM_NATIVE_TARGET=LLVMInitializeX86Target' '-DLLVM_NATIVE_TARGETINFO=LLVMInitializeX86TargetInfo' '-DLLVM_NATIVE_TARGETMC=LLVMInitializeX86TargetMC' '-DLLVM_NATIVE_TARGETMCA=LLVMInitializeX86TargetMCA' '-DLLVM_HOST_TRIPLE=\"x86_64-unknown-linux-gnu\"' '-DLLVM_DEFAULT_TARGET_TRIPLE=\"x86_64-unknown-linux-gnu\"' -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -DEIGEN_MPL2_ONLY '-DEIGEN_MAX_ALIGN_BYTES=64' -iquote . -iquote bazel-out/k8-opt/bin -iquote external/com_google_absl -iquote bazel-out/k8-opt/bin/external/com_google_absl -iquote external/nsync -iquote bazel-out/k8-opt/bin/external/nsync -iquote external/eigen_archive -iquote bazel-out/k8-opt/bin/external/eigen_archive -iquote external/gif -iquote bazel-out/k8-opt/bin/external/gif -iquote external/libjpeg_turbo -iquote bazel-out/k8-opt/bin/external/libjpeg_turbo -iquote external/com_google_protobuf -iquote bazel-out/k8-opt/bin/external/com_google_protobuf -iquote external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/bin/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/k8-opt/bin/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/k8-opt/bin/external/fft2d -iquote external/highwayhash -iquote bazel-out/k8-opt/bin/external/highwayhash -iquote external/zlib -iquote bazel-out/k8-opt/bin/external/zlib -iquote external/local_config_cuda -iquote bazel-out/k8-opt/bin/external/local_config_cuda -iquote external/double_conversion -iquote bazel-out/k8-opt/bin/external/double_conversion -iquote external/local_config_rocm -iquote bazel-out/k8-opt/bin/external/local_config_rocm -iquote external/local_config_tensorrt -iquote bazel-out/k8-opt/bin/external/local_config_tensorrt -iquote external/snappy -iquote bazel-out/k8-opt/bin/external/snappy -iquote external/llvm-project -iquote bazel-out/k8-opt/bin/external/llvm-project -iquote external/llvm_terminfo -iquote bazel-out/k8-opt/bin/external/llvm_terminfo -iquote external/llvm_zlib -iquote bazel-out/k8-opt/bin/external/llvm_zlib -iquote external/curl -iquote bazel-out/k8-opt/bin/external/curl -iquote external/boringssl -iquote bazel-out/k8-opt/bin/external/boringssl -iquote external/jsoncpp_git -iquote bazel-out/k8-opt/bin/external/jsoncpp_git -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual -Ibazel-out/k8-opt/bin/external/local_config_tensorrt/_virtual_includes/tensorrt_headers -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cudnn_header -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributeInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinAttributesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinDialectIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinLocationAttributesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinTypeInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/BuiltinTypesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/CallOpInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/CastOpInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/InferTypeOpInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/OpAsmInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/RegionKindInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SideEffectInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SubElementInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SymbolInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TensorEncodingIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ControlFlowInterfacesIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/canonicalize_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/chlo_ops_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/hlo_ops_base_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/hlo_ops_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/hlo_ops_pattern_gen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AffineMemoryOpInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AffineOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LoopLikeInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/CopyOpInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/MemRefBaseIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/MemRefOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/StandardOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/VectorInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TensorOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ViewLikeInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LinalgInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LinalgStructuredOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LinalgOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/MathBaseIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/MathOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ParserTokenKinds -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SCFIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SCFPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TilingInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/MLIRShapeCanonicalizationIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ShapeOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/PDLOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/PDLTypesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/PDLInterpOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ConversionPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TransformsPassIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/DiscRalPassIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/LmhloPassIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/MhloPassIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/transforms_pass_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/chlo_legalize_to_hlo_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/lhlo_ops_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/lhlo_ops_structs_inc_gen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ShapeTransformsPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/StandardOpsTransformsPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LLVMDialectAttributesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LLVMDialectInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LLVMOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ComplexBaseIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ComplexOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/DLTIBaseIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/GPUBaseIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/GPUOpsIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/legalize_to_standard_inc_gen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LinalgPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/VectorOpsIncGen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/lower_complex_inc_gen -Ibazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/_virtual_includes/disc_ral_ops_inc_gen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AMXIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AffinePassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ArmNeonIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ArmSVEIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AsyncOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AsyncPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/OpenACCOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/GPUPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ParallelLoopMapperAttrGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LLVMConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/LLVMPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/OpenMPOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/InstCombineTableGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/NVVMConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/NVVMOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/X86VectorIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/GPUToNVVMGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/GPUToROCDLTGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ROCDLOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SPIRVAttrUtilsGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SPIRVAvailabilityIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SPIRVCanonicalizationIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SPIRVOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SPIRVSerializationGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ShapeToStandardGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/QuantOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/QuantPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TosaDialectIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TosaInterfacesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TosaPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/EmitCAttributesIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/EmitCOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/MemRefPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SPIRVPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SparseTensorAttrDefsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SparseTensorOpsIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/SparseTensorPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/TensorPassIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/DerivedAttributeOpInterfaceIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ROCDLConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/NVPTXCodeGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/NVPTXCommonTableGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/NVPTXInfo -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/NVPTXUtilsAndDesc -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AMXConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ArmNeonConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ArmSVEConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/X86VectorConversionIncGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/X86CodeGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/X86CommonTableGen -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/X86Info -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/X86UtilsAndDesc -Ibazel-out/k8-opt/bin/external/llvm-project/llvm/_virtual_includes/X86DisassemblerInternalHeaders -isystem external/nsync/public -isystem bazel-out/k8-opt/bin/external/nsync/public -isystem third_party/eigen3/mkl_include -isystem bazel-out/k8-opt/bin/third_party/eigen3/mkl_include -isystem external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/gif -isystem bazel-out/k8-opt/bin/external/gif -isystem external/com_google_protobuf/src -isystem bazel-out/k8-opt/bin/external/com_google_protobuf/src -isystem external/farmhash_archive/src -isystem bazel-out/k8-opt/bin/external/farmhash_archive/src -isystem external/zlib -isystem bazel-out/k8-opt/bin/external/zlib -isystem external/local_config_cuda/cuda -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda/cuda/include -isystem external/double_conversion -isystem bazel-out/k8-opt/bin/external/double_conversion -isystem external/local_config_rocm/rocm -isystem bazel-out/k8-opt/bin/external/local_config_rocm/rocm -isystem external/local_config_rocm/rocm/rocm/include -isystem bazel-out/k8-opt/bin/external/local_config_rocm/rocm/rocm/include -isystem external/local_config_rocm/rocm/rocm/include/rocrand -isystem bazel-out/k8-opt/bin/external/local_config_rocm/rocm/rocm/include/rocrand -isystem external/local_config_rocm/rocm/rocm/include/roctracer -isystem bazel-out/k8-opt/bin/external/local_config_rocm/rocm/rocm/include/roctracer -isystem external/llvm-project/llvm/include -isystem bazel-out/k8-opt/bin/external/llvm-project/llvm/include -isystem external/llvm-project/mlir/include -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/include -isystem external/curl/include -isystem bazel-out/k8-opt/bin/external/curl/include -isystem external/boringssl/src/include -isystem bazel-out/k8-opt/bin/external/boringssl/src/include -isystem external/jsoncpp_git/include -isystem bazel-out/k8-opt/bin/external/jsoncpp_git/include -isystem tensorflow/compiler/mlir/hlo/include -isystem bazel-out/k8-opt/bin/tensorflow/compiler/mlir/hlo/include -isystem external/llvm-project/mlir/lib/Conversions/GPUToSPIRV -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversions/GPUToSPIRV -isystem external/llvm-project/mlir/lib/Conversion/MemRefToSPIRV -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversion/MemRefToSPIRV -isystem external/llvm-project/mlir/lib/Conversion/StandardToSPIRV -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversion/StandardToSPIRV -isystem external/llvm-project/mlir/lib/Conversion/MathToSPIRV -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversion/MathToSPIRV -isystem external/llvm-project/mlir/lib/Conversion/TosaToLinalg -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversion/TosaToLinalg -isystem external/llvm-project/mlir/lib/Conversion/TosaToSCF -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversion/TosaToSCF -isystem external/llvm-project/mlir/lib/Conversion/TosaToStandard -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/lib/Conversion/TosaToStandard -isystem tensorflow/compiler/mlir/tensorflow/include -isystem bazel-out/k8-opt/bin/tensorflow/compiler/mlir/tensorflow/include -isystem external/llvm-project/llvm/lib/Target/NVPTX -isystem bazel-out/k8-opt/bin/external/llvm-project/llvm/lib/Target/NVPTX -isystem external/llvm-project/llvm/lib/Target/X86 -isystem bazel-out/k8-opt/bin/external/llvm-project/llvm/lib/Target/X86 -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -w -DAUTOLOAD_DYNAMIC_KERNELS -Wno-sign-compare '-std=c++14' -x cuda '-DGOOGLE_CUDA=1' '-Xcuda-fatbinary=--compress-all' '--no-cuda-include-ptx=all' '--cuda-include-ptx=sm_35' '--cuda-gpu-arch=sm_35' '--cuda-include-ptx=sm_70' '--cuda-gpu-arch=sm_70' -DMLIR_GENERATED_CPU_KERNELS_ENABLED -DMLIR_GENERATED_GPU_KERNELS_ENABLED -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare '-ftemplate-depth=900' -fno-exceptions '-DGOOGLE_CUDA=1' '-DTENSORFLOW_USE_NVCC=1' '-DTENSORFLOW_USE_XLA=1' -DINTEL_MKL -msse3 -pthread '-nvcc_options=relaxed-constexpr' '-nvcc_options=ftz=true' -c tensorflow/core/kernels/cwise_op_gpu_zeta.cu.cc -o bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/cwise_op_gpu/cwise_op_gpu_zeta.cu.pic.o)\r\nExecution platform: @local_execution_config_platform//:platform\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h: In member function 'std::size_t std::hash<float>::operator()(float) const':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:232:22: error: expected ')' before numeric constant\r\n  return __val != 0.0f ? std::_Hash_impl::hash(__val) : 0;\r\n                      ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:232:15: error: invalid operands of types 'float' and 'double(const char*) throw ()' to binary 'operator!='\r\n  return __val != 0.0f ? std::_Hash_impl::hash(__val) : 0;\r\n         ~~~~~~^~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:232:64: error: expected ')' before ';' token\r\n  return __val != 0.0f ? std::_Hash_impl::hash(__val) : 0;\r\n                                                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h: In member function 'std::size_t std::hash<double>::operator()(double) const':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:244:22: error: expected ')' before numeric constant\r\n  return __val != 0.0 ? std::_Hash_impl::hash(__val) : 0;\r\n                      ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:244:15: error: invalid operands of types 'double' and 'double(const char*) throw ()' to binary 'operator!='\r\n  return __val != 0.0 ? std::_Hash_impl::hash(__val) : 0;\r\n         ~~~~~~^~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:244:63: error: expected ')' before ';' token\r\n  return __val != 0.0 ? std::_Hash_impl::hash(__val) : 0;\r\n                                                               ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: At global scope:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:35: error: expected ')' before numeric constant\r\n       _GLIBCXX_CONSTEXPR complex(float __r = 0.0f, float __i = 0.0f)\r\n                                   ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:32: error: could not convert 'nan' from 'double(const char*) throw ()' to 'float'\r\n       _GLIBCXX_CONSTEXPR complex(float __r = 0.0f, float __i = 0.0f)\r\n                               ~^~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:57: error: expected ')' before numeric constant\r\n       _GLIBCXX_CONSTEXPR complex(float __r = 0.0f, float __i = 0.0f)\r\n                                                         ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:54: error: could not convert 'nan' from 'double(const char*) throw ()' to 'float'\r\n       _GLIBCXX_CONSTEXPR complex(float __r = 0.0f, float __i = 0.0f)\r\n                                                     ~^~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:36: error: expected ')' before numeric constant\r\n       _GLIBCXX_CONSTEXPR complex(double __r = 0.0, double __i = 0.0)\r\n                                    ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:33: error: could not convert 'nan' from 'double(const char*) throw ()' to 'double'\r\n       _GLIBCXX_CONSTEXPR complex(double __r = 0.0, double __i = 0.0)\r\n                                ~^~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:58: error: expected ')' before numeric constant\r\n       _GLIBCXX_CONSTEXPR complex(double __r = 0.0, double __i = 0.0)\r\n                                                          ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:55: error: could not convert 'nan' from 'double(const char*) throw ()' to 'double'\r\n       _GLIBCXX_CONSTEXPR complex(double __r = 0.0, double __i = 0.0)\r\n                                                      ~^~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1359:41: error: expected ')' before numeric constant\r\n       _GLIBCXX_CONSTEXPR complex(long double __r = 0.0L,\r\n                                         ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1359:38: error: could not convert 'nan' from 'double(const char*) throw ()' to 'long double'\r\n       _GLIBCXX_CONSTEXPR complex(long double __r = 0.0L,\r\n                                     ~^~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1360:11: error: expected ')' before numeric constant\r\n      long double __i = 0.0L)\r\n           ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1360:8: error: could not convert 'nan' from 'double(const char*) throw ()' to 'long double'\r\n      long double __i = 0.0L)\r\n       ~^~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: In function 'constexpr std::complex<float> std::literals::complex_literals::operator\"\"if(long double)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1954:28: error: no matching function for call to 'std::complex<float>::complex(<brace-enclosed initializer list>)'\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                            ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1508:11: note: candidate: constexpr std::complex<float>::complex(const std::complex<long double>&)\r\n   complex<float>::complex(const complex<long double>& __z)\r\n           ^~~~~~~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1508:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1504:11: note: candidate: constexpr std::complex<float>::complex(const std::complex<double>&)\r\n   complex<float>::complex(const complex<double>& __z)\r\n           ^~~~~~~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1504:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:11: note: candidate: constexpr std::complex<float>::complex(float, float)\r\n       _GLIBCXX_CONSTEXPR complex(float __r = 0.0f, float __i = 0.0f)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1058:11: note: candidate: constexpr std::complex<float>::complex(std::complex<float>::_ComplexT)\r\n       _GLIBCXX_CONSTEXPR complex(_ComplexT __z) : _M_value(__z) { }\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1058:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note: candidate: constexpr std::complex<float>::complex(const std::complex<float>&)\r\n     struct complex<float>\r\n                   ^~~~~~~        \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note: candidate: constexpr std::complex<float>::complex(std::complex<float>&&)\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1954:26: error: expected primary-expression before '{' token\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                          ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1954:26: error: expected ';' before '{' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1954:31: error: expected ')' before numeric constant\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                               ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1954:63: error: expected ';' before '}' token\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                                                               ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: In function 'constexpr std::complex<float> std::literals::complex_literals::operator\"\"if(long long unsigned int)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1958:28: error: no matching function for call to 'std::complex<float>::complex(<brace-enclosed initializer list>)'\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                            ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1508:11: note: candidate: constexpr std::complex<float>::complex(const std::complex<long double>&)\r\n   complex<float>::complex(const complex<long double>& __z)\r\n           ^~~~~~~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1508:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1504:11: note: candidate: constexpr std::complex<float>::complex(const std::complex<double>&)\r\n   complex<float>::complex(const complex<double>& __z)\r\n           ^~~~~~~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1504:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:11: note: candidate: constexpr std::complex<float>::complex(float, float)\r\n       _GLIBCXX_CONSTEXPR complex(float __r = 0.0f, float __i = 0.0f)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1060:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1058:11: note: candidate: constexpr std::complex<float>::complex(std::complex<float>::_ComplexT)\r\n       _GLIBCXX_CONSTEXPR complex(_ComplexT __z) : _M_value(__z) { }\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1058:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note: candidate: constexpr std::complex<float>::complex(const std::complex<float>&)\r\n     struct complex<float>\r\n                   ^~~~~~~        \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note: candidate: constexpr std::complex<float>::complex(std::complex<float>&&)\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1053:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1958:26: error: expected primary-expression before '{' token\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                          ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1958:26: error: expected ';' before '{' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1958:31: error: expected ')' before numeric constant\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                               ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1958:63: error: expected ';' before '}' token\r\n   { return std::complex<float>{0.0F, static_cast<float>(__num)}; }\r\n                                                               ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: In function 'constexpr std::complex<double> std::literals::complex_literals::operator\"\"i(long double)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1962:29: error: no matching function for call to 'std::complex<double>::complex(<brace-enclosed initializer list>)'\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                             ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1512:11: note: candidate: constexpr std::complex<double>::complex(const std::complex<long double>&)\r\n   complex<double>::complex(const complex<long double>& __z)\r\n           ^~~~~~~~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1512:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1219:11: note: candidate: constexpr std::complex<double>::complex(const std::complex<float>&)\r\n       _GLIBCXX_CONSTEXPR complex(const complex<float>& __z)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1219:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:11: note: candidate: constexpr std::complex<double>::complex(double, double)\r\n       _GLIBCXX_CONSTEXPR complex(double __r = 0.0, double __i = 0.0)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1207:11: note: candidate: constexpr std::complex<double>::complex(std::complex<double>::_ComplexT)\r\n       _GLIBCXX_CONSTEXPR complex(_ComplexT __z) : _M_value(__z) { }\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1207:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note: candidate: constexpr std::complex<double>::complex(const std::complex<double>&)\r\n     struct complex<double>\r\n                   ^~~~~~~~        \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note: candidate: constexpr std::complex<double>::complex(std::complex<double>&&)\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1962:27: error: expected primary-expression before '{' token\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                           ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1962:27: error: expected ';' before '{' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1962:32: error: expected ')' before numeric constant\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                                ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1962:64: error: expected ';' before '}' token\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                                                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: In function 'constexpr std::complex<double> std::literals::complex_literals::operator\"\"i(long long unsigned int)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1966:29: error: no matching function for call to 'std::complex<double>::complex(<brace-enclosed initializer list>)'\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                             ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1512:11: note: candidate: constexpr std::complex<double>::complex(const std::complex<long double>&)\r\n   complex<double>::complex(const complex<long double>& __z)\r\n           ^~~~~~~~~~~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1512:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1219:11: note: candidate: constexpr std::complex<double>::complex(const std::complex<float>&)\r\n       _GLIBCXX_CONSTEXPR complex(const complex<float>& __z)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1219:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:11: note: candidate: constexpr std::complex<double>::complex(double, double)\r\n       _GLIBCXX_CONSTEXPR complex(double __r = 0.0, double __i = 0.0)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1209:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1207:11: note: candidate: constexpr std::complex<double>::complex(std::complex<double>::_ComplexT)\r\n       _GLIBCXX_CONSTEXPR complex(_ComplexT __z) : _M_value(__z) { }\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1207:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note: candidate: constexpr std::complex<double>::complex(const std::complex<double>&)\r\n     struct complex<double>\r\n                   ^~~~~~~~        \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note: candidate: constexpr std::complex<double>::complex(std::complex<double>&&)\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1202:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1966:27: error: expected primary-expression before '{' token\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                           ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1966:27: error: expected ';' before '{' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1966:32: error: expected ')' before numeric constant\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                                ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1966:64: error: expected ';' before '}' token\r\n   { return std::complex<double>{0.0, static_cast<double>(__num)}; }\r\n                                                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: In function 'constexpr std::complex<long double> std::literals::complex_literals::operator\"\"il(long double)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1970:34: error: no matching function for call to 'std::complex<long double>::complex(<brace-enclosed initializer list>)'\r\n   { return std::complex<long double>{0.0L, __num}; }\r\n                                  ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1373:11: note: candidate: constexpr std::complex<long double>::complex(const std::complex<double>&)\r\n       _GLIBCXX_CONSTEXPR complex(const complex<double>& __z)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1373:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1370:11: note: candidate: constexpr std::complex<long double>::complex(const std::complex<float>&)\r\n       _GLIBCXX_CONSTEXPR complex(const complex<float>& __z)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1370:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1359:11: note: candidate: constexpr std::complex<long double>::complex(long double, long double)\r\n       _GLIBCXX_CONSTEXPR complex(long double __r = 0.0L,\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1359:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1357:11: note: candidate: constexpr std::complex<long double>::complex(std::complex<long double>::_ComplexT)\r\n       _GLIBCXX_CONSTEXPR complex(_ComplexT __z) : _M_value(__z) { }\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1357:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note: candidate: constexpr std::complex<long double>::complex(const std::complex<long double>&)\r\n     struct complex<long double>\r\n                   ^~~~~~~~~~~~~        \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note: candidate: constexpr std::complex<long double>::complex(std::complex<long double>&&)\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1970:32: error: expected primary-expression before '{' token\r\n   { return std::complex<long double>{0.0L, __num}; }\r\n                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1970:32: error: expected ';' before '{' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1970:37: error: expected ')' before numeric constant\r\n   { return std::complex<long double>{0.0L, __num}; }\r\n                                     ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1970:48: error: expected ';' before '}' token\r\n   { return std::complex<long double>{0.0L, __num}; }\r\n                                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex: In function 'constexpr std::complex<long double> std::literals::complex_literals::operator\"\"il(long long unsigned int)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1974:34: error: no matching function for call to 'std::complex<long double>::complex(<brace-enclosed initializer list>)'\r\n   { return std::complex<long double>{0.0L, static_cast<long double>(__num)}; }\r\n                                  ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1373:11: note: candidate: constexpr std::complex<long double>::complex(const std::complex<double>&)\r\n       _GLIBCXX_CONSTEXPR complex(const complex<double>& __z)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1373:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1370:11: note: candidate: constexpr std::complex<long double>::complex(const std::complex<float>&)\r\n       _GLIBCXX_CONSTEXPR complex(const complex<float>& __z)\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1370:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1359:11: note: candidate: constexpr std::complex<long double>::complex(long double, long double)\r\n       _GLIBCXX_CONSTEXPR complex(long double __r = 0.0L,\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1359:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1357:11: note: candidate: constexpr std::complex<long double>::complex(std::complex<long double>::_ComplexT)\r\n       _GLIBCXX_CONSTEXPR complex(_ComplexT __z) : _M_value(__z) { }\r\n           ^~~~~~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1357:11: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note: candidate: constexpr std::complex<long double>::complex(const std::complex<long double>&)\r\n     struct complex<long double>\r\n                   ^~~~~~~~~~~~~        \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note: candidate: constexpr std::complex<long double>::complex(std::complex<long double>&&)\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1352:19: note:   conversion of argument 1 would be ill-formed:\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1974:32: error: expected primary-expression before '{' token\r\n   { return std::complex<long double>{0.0L, static_cast<long double>(__num)}; }\r\n                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1974:32: error: expected ';' before '{' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1974:37: error: expected ')' before numeric constant\r\n   { return std::complex<long double>{0.0L, static_cast<long double>(__num)}; }\r\n                                     ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/complex:1974:75: error: expected ';' before '}' token\r\n   { return std::complex<long double>{0.0L, static_cast<long double>(__num)}; }\r\n                                                                           ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/limits: In static member function 'static constexpr long double std::numeric_limits<long double>::denorm_min()':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/limits:1799:65: error: expected ')' before numeric constant\r\n       denorm_min() _GLIBCXX_USE_NOEXCEPT { return __LDBL_DENORM_MIN__; }\r\n                                                                 ^~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/limits:1799:68: error: cannot convert 'double (*)(const char*) throw ()' to 'long double' in return\r\n       denorm_min() _GLIBCXX_USE_NOEXCEPT { return __LDBL_DENORM_MIN__; }\r\n                                                                    ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h: In function 'Packet Eigen::internal::psqrt_complex(const Packet&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:856:80: error: expected ')' before numeric constant\r\n   const RealPacket cst_imag_sign_mask = pset1<Packet>(Scalar(RealScalar(0.0), neg_zero)).v;\r\n                                                                                ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:856:63: error: expected primary-expression before '(' token\r\n   const RealPacket cst_imag_sign_mask = pset1<Packet>(Scalar(RealScalar(0.0), neg_zero)).v;\r\n                                                               ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:856:80: error: expected ')' before numeric constant\r\n   const RealPacket cst_imag_sign_mask = pset1<Packet>(Scalar(RealScalar(0.0), neg_zero)).v;\r\n                                                                                ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:856:99: error: expected ')' before ';' token\r\n   const RealPacket cst_imag_sign_mask = pset1<Packet>(Scalar(RealScalar(0.0), neg_zero)).v;\r\n                                                                                                   ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:856:99: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:856:99: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:881:94: error: expected ')' before numeric constant\r\n   real_inf_result.v = pmul(a_abs, pset1<Packet>(Scalar(RealScalar(1.0), RealScalar(0.0))).v);\r\n                                                                                              ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:881:58: error: expected primary-expression before '(' token\r\n   real_inf_result.v = pmul(a_abs, pset1<Packet>(Scalar(RealScalar(1.0), RealScalar(0.0))).v);\r\n                                                          ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:881:94: error: expected ')' before numeric constant\r\n   real_inf_result.v = pmul(a_abs, pset1<Packet>(Scalar(RealScalar(1.0), RealScalar(0.0))).v);\r\n                                                                                              ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:881:103: error: expected ')' before ';' token\r\n   real_inf_result.v = pmul(a_abs, pset1<Packet>(Scalar(RealScalar(1.0), RealScalar(0.0))).v);\r\n                                                                                                       ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:881:103: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h: In static member function 'static Packet Eigen::internal::pchebevl<Packet, N>::run(Packet, const typename Eigen::internal::unpacket_traits<T>::type*)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:1653:54: error: expected ')' before numeric constant\r\n     Packet b1 = pset1<Packet>(static_cast<Scalar>(0.f));\r\n                                                      ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:1653:60: error: expected ')' before ';' token\r\n     Packet b1 = pset1<Packet>(static_cast<Scalar>(0.f));\r\n                                                            ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h:1653:60: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_i1e<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:314:42: error: expected ')' before numeric constant\r\n     return pselect(pcmp_lt(x, pset1<T>(0.0f)), pnegate(y), y);\r\n                                          ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:314:64: error: expected ')' before ';' token\r\n     return pselect(pcmp_lt(x, pset1<T>(0.0f)), pnegate(y), y);\r\n                                                                ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_i1e<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:395:42: error: expected ')' before numeric constant\r\n     return pselect(pcmp_lt(x, pset1<T>(0.0)), pnegate(y), y);\r\n                                          ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:395:63: error: expected ')' before ';' token\r\n     return pselect(pcmp_lt(x, pset1<T>(0.0)), pnegate(y), y);\r\n                                                               ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k0e<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:501:42: error: expected ')' before numeric constant\r\n     return pselect(\r\n                                          ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:501:102: error: expected ')' before ';' token\r\n     return pselect(\r\n                                                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k0e<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:576:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:576:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k0<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:668:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:668:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k0<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:746:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:746:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k1e<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:833:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:833:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k1e<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:904:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:904:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k1<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:992:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:992:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_k1<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1068:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1068:70: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), MAXNUM, x_le_two);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_y0<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1373:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), NEG_MAXNUM, x_le_two);\r\n                                              ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1373:74: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_le(x, pset1<T>(0.0)), NEG_MAXNUM, x_le_two);\r\n                                                                          ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_y0<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1461:47: error: expected ')' before numeric constant\r\n     x_le_five = pselect(pcmp_le(x, pset1<T>(0.0)), NEG_MAXNUM, x_le_five);\r\n                                               ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1461:76: error: expected ')' before ';' token\r\n     x_le_five = pselect(pcmp_le(x, pset1<T>(0.0)), NEG_MAXNUM, x_le_five);\r\n                                                                            ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_j1<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1574:46: error: expected ')' before numeric constant\r\n     y_gt_two = pselect(\r\n                                              ^  \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1574:82: error: expected ')' before ';' token\r\n     y_gt_two = pselect(\r\n                                                                                  ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_j1<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1662:47: error: expected ')' before numeric constant\r\n     y_gt_five = pselect(\r\n                                               ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1662:84: error: expected ')' before ';' token\r\n     y_gt_five = pselect(\r\n                                                                                    ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_y1<T, float>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1766:46: error: expected ')' before numeric constant\r\n     x_le_two = pselect(pcmp_lt(x, pset1<T>(0.0f)), NEG_MAXNUM, x_le_two);\r\n                                              ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1766:75: error: expected ')' before ';' token\r\n     x_le_two = pselect(pcmp_lt(x, pset1<T>(0.0f)), NEG_MAXNUM, x_le_two);\r\n                                                                           ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h: In static member function 'static T Eigen::internal::generic_y1<T, double>::run(const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1855:47: error: expected ')' before numeric constant\r\n     x_le_five = pselect(pcmp_le(x, pset1<T>(0.0)), NEG_MAXNUM, x_le_five);\r\n                                               ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/BesselFunctionsImpl.h:1855:76: error: expected ')' before ';' token\r\n     x_le_five = pselect(pcmp_le(x, pset1<T>(0.0)), NEG_MAXNUM, x_le_five);\r\n                                                                            ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static float Eigen::internal::digamma_impl_maybe_poly<float>::run(float)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:153:21: error: expected ')' before numeric constant\r\n     } else return 0.0f;\r\n                     ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:153:24: error: cannot convert 'double (*)(const char*) throw ()' to 'float' in return\r\n     } else return 0.0f;\r\n                        ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static double Eigen::internal::digamma_impl_maybe_poly<double>::run(double)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:176:12: error: expected ')' before numeric constant\r\n     else return 0.0;\r\n            ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:176:14: error: cannot convert 'double (*)(const char*) throw ()' to 'double' in return\r\n     else return 0.0;\r\n              ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In function 'T Eigen::internal::flipsign(const T&, const T&)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:494:46: error: expected ')' before numeric constant\r\n   const T sign_mask = pset1<T>(Scalar(-0.0));\r\n                                              ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:494:50: error: wrong type argument to unary minus\r\n   const T sign_mask = pset1<T>(Scalar(-0.0));\r\n                                                  ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:494:51: error: expected ')' before ';' token\r\n   const T sign_mask = pset1<T>(Scalar(-0.0));\r\n                                                   ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static Scalar Eigen::internal::cephes_helper<Scalar>::machep()':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:687:60: error: expected ')' before numeric constant\r\n   static EIGEN_STRONG_INLINE Scalar machep() { assert(false && \"machep not supported for this type\"); return 0.0; }\r\n                                                            ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static Scalar Eigen::internal::cephes_helper<Scalar>::big()':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:689:57: error: expected ')' before numeric constant\r\n   static EIGEN_STRONG_INLINE Scalar big() { assert(false && \"big not supported for this type\"); return 0.0; }\r\n                                                         ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static Scalar Eigen::internal::cephes_helper<Scalar>::biginv()':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:691:60: error: expected ')' before numeric constant\r\n   static EIGEN_STRONG_INLINE Scalar biginv() { assert(false && \"biginv not supported for this type\"); return 0.0; }\r\n                                                            ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static Scalar Eigen::internal::zeta_impl<Scalar>::run(Scalar, Scalar)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1390:26: error: expected ')' before numeric constant\r\n         const Scalar zero = 0.0, half = 0.5, one = 1.0;\r\n                          ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1390:61: error: expected ')' before ';' token\r\n         const Scalar zero = 0.0, half = 0.5, one = 1.0;\r\n                                                             ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1394:10: error: 'one' was not declared in this scope\r\n         if( x == one )\r\n          ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1394:10: note: suggested alternative: 'conj'\r\n         if( x == one )\r\n          ^~~\r\n          conj\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1397:9: error: 'one' was not declared in this scope\r\n         if( x < one )\r\n         ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1397:9: note: suggested alternative: 'conj'\r\n         if( x < one )\r\n         ^~~\r\n         conj\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1433:22: error: 'one' was not declared in this scope\r\n         s += b*w/(x-one);\r\n                      ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1433:22: note: suggested alternative: 'conj'\r\n         s += b*w/(x-one);\r\n                      ^~~\r\n                      conj\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1434:12: error: expected primary-expression before '*' token\r\n         s -= half * b;\r\n            ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static Scalar Eigen::internal::polygamma_impl<Scalar>::run(Scalar, Scalar)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1483:20: error: expected ')' before numeric constant\r\n         Scalar zero = 0.0, one = 1.0;\r\n                    ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1483:39: error: expected ')' before ';' token\r\n         Scalar zero = 0.0, one = 1.0;\r\n                                       ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1484:20: error: 'one' was not declared in this scope\r\n         Scalar nplus = n + one;\r\n                    ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1484:20: note: suggested alternative: 'conj'\r\n         Scalar nplus = n + one;\r\n                    ^~~\r\n                    conj\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static float Eigen::internal::betainc_helper<float>::incbps(float, float, float)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1782:9: error: expected ')' before numeric constant\r\n     s = 0.0f;\r\n         ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1782:12: error: cannot convert 'double(const char*) throw ()' to 'float' in assignment\r\n     s = 0.0f;\r\n            ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1786:14: error: expected ')' before numeric constant\r\n       if (b == 0.0f) {\r\n              ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1786:7: error: invalid operands of types 'float' and 'double(const char*) throw ()' to binary 'operator=='\r\n       if (b == 0.0f) {\r\n       ^~~~~~~~~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1789:1: error: expected ')' before 'a'\r\n       a += 1.0f;\r\n ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static float Eigen::internal::betainc_impl<float>::run(float, float, float)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1805:14: error: expected ')' before numeric constant\r\n     if (a <= 0.0f) return nan;\r\n              ^~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1806:1: error: expected ')' before 'if'\r\n     if (b <= 0.0f) return nan;\r\n ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1824:1: error: expected primary-expression before '}' token\r\n   }\r\n ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static double Eigen::internal::betainc_helper<double>::incbps(double, double, double)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1841:9: error: expected ')' before numeric constant\r\n     s = 0.0;\r\n         ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1841:11: error: cannot convert 'double(const char*) throw ()' to 'double' in assignment\r\n     s = 0.0;\r\n           ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In static member function 'static double Eigen::internal::betainc_impl<double>::run(double, double, double)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1878:16: error: expected ')' before numeric constant\r\n     if (aa <= 0.0 || bb <= 0.0) {\r\n                ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1882:1: error: expected ')' before 'if'\r\n     if ((xx <= 0.0) || (xx >= 1.0)) {\r\n ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1889:1: error: expected ')' before 'if'\r\n     if ((bb * xx) <= 1.0 && xx <= 0.95) {\r\n ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1921:13: error: expected ')' before numeric constant\r\n     if (y < 0.0) {\r\n             ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1923:3: error: expected ')' before 'else'\r\n     } else {\r\n   ^ ~~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.h: In member function 'double std::random_device::entropy() const':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.h:1606:14: error: expected ')' before numeric constant\r\n     { return 0.0; }\r\n              ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.h:1606:16: error: cannot convert 'double (*)(const char*) throw ()' to 'double' in return\r\n     { return 0.0; }\r\n                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'std::poisson_distribution<_IntType>::result_type std::poisson_distribution<_IntType>::operator()(_UniformRandomNumberGenerator&, const std::poisson_distribution<_IntType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1319:18: error: expected ')' before numeric constant\r\n   double __w = 0.0;\r\n                  ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'std::binomial_distribution<_IntType>::result_type std::binomial_distribution<_IntType>::_M_waiting(_UniformRandomNumberGenerator&, _IntType, double)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1503:20: error: expected ')' before numeric constant\r\n  double __sum = 0.0;\r\n                    ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'std::normal_distribution<_RealType>::result_type std::normal_distribution<_RealType>::operator()(_UniformRandomNumberGenerator&, const std::normal_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1804:39: error: expected ')' before numeric constant\r\n      while (__r2 > 1.0 || __r2 == 0.0);\r\n                                       ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1804:44: error: expected ')' before ';' token\r\n      while (__r2 > 1.0 || __r2 == 0.0);\r\n                                            ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1804:44: error: expected ')' before ';' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'void std::normal_distribution<_RealType>::__generate_impl(_ForwardIterator, _ForwardIterator, _UniformRandomNumberGenerator&, const std::normal_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1851:39: error: expected ')' before numeric constant\r\n      while (__r2 > 1.0 || __r2 == 0.0);\r\n                                       ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1851:44: error: expected ')' before ';' token\r\n      while (__r2 > 1.0 || __r2 == 0.0);\r\n                                            ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1851:44: error: expected ')' before ';' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1867:39: error: expected ')' before numeric constant\r\n      while (__r2 > 1.0 || __r2 == 0.0);\r\n                                       ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1867:44: error: expected ')' before ';' token\r\n      while (__r2 > 1.0 || __r2 == 0.0);\r\n                                            ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:1867:44: error: expected ')' before ';' token\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'std::gamma_distribution<_RealType>::result_type std::gamma_distribution<_RealType>::operator()(_UniformRandomNumberGenerator&, const std::gamma_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2354:19: error: expected ')' before numeric constant\r\n      while (__v <= 0.0);\r\n                   ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2354:23: error: expected ')' before ';' token\r\n      while (__v <= 0.0);\r\n                       ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2369:19: error: expected ')' before numeric constant\r\n      while (__u == 0.0);\r\n                   ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2369:23: error: expected ')' before ';' token\r\n      while (__u == 0.0);\r\n                       ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'void std::gamma_distribution<_RealType>::__generate_impl(_ForwardIterator, _ForwardIterator, _UniformRandomNumberGenerator&, const std::gamma_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2403:19: error: expected ')' before numeric constant\r\n     while (__v <= 0.0);\r\n                   ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2403:23: error: expected ')' before ';' token\r\n     while (__v <= 0.0);\r\n                       ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2424:19: error: expected ')' before numeric constant\r\n     while (__v <= 0.0);\r\n                   ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2424:23: error: expected ')' before ';' token\r\n     while (__v <= 0.0);\r\n                       ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2435:19: error: expected ')' before numeric constant\r\n        while (__u == 0.0);\r\n                   ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2435:23: error: expected ')' before ';' token\r\n        while (__u == 0.0);\r\n                       ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'void std::discrete_distribution<_IntType>::param_type::_M_initialize()':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2652:78: error: expected ')' before numeric constant\r\n       const double __sum = std::accumulate(_M_prob.begin(),\r\n                                                                              ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2652:82: error: expected ')' before ';' token\r\n       const double __sum = std::accumulate(_M_prob.begin(),\r\n                                                                                  ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'void std::piecewise_constant_distribution<_RealType>::param_type::_M_initialize()':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2805:76: error: expected ')' before numeric constant\r\n       const double __sum = std::accumulate(_M_den.begin(),\r\n                                                                            ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2805:80: error: expected ')' before ';' token\r\n       const double __sum = std::accumulate(_M_den.begin(),\r\n                                                                                ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'std::piecewise_constant_distribution<_RealType>::result_type std::piecewise_constant_distribution<_RealType>::operator()(_UniformRandomNumberGenerator&, const std::piecewise_constant_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2902:71: error: expected ')' before numeric constant\r\n  const double __pref = __i > 0 ? __param._M_cp[__i - 1] : 0.0;\r\n                                                                       ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2902:75: error: expected ')' before ';' token\r\n  const double __pref = __i > 0 ? __param._M_cp[__i - 1] : 0.0;\r\n                                                                           ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'void std::piecewise_constant_distribution<_RealType>::__generate_impl(_ForwardIterator, _ForwardIterator, _UniformRandomNumberGenerator&, const std::piecewise_constant_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2935:71: error: expected ')' before numeric constant\r\n      const double __pref = __i > 0 ? __param._M_cp[__i - 1] : 0.0;\r\n                                                                       ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:2935:75: error: expected ')' before ';' token\r\n      const double __pref = __i > 0 ? __param._M_cp[__i - 1] : 0.0;\r\n                                                                           ^\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'void std::piecewise_linear_distribution<_RealType>::param_type::_M_initialize()':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:3030:20: error: expected ')' before numeric constant\r\n       double __sum = 0.0;\r\n                    ^~\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc: In member function 'std::piecewise_linear_distribution<_RealType>::result_type std::piecewise_linear_distribution<_RealType>::operator()(_UniformRandomNumberGenerator&, const std::piecewise_linear_distribution<_RealType>::param_type&)':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:3125:71: error: expected ')' before numeric constant\r\n  const double __pref = __i > 0 ? __param._M_cp[__i - 1] : 0.0;\r\n                                                                       ^ \r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/random.tcc:3125:75: error: expected ')' before ';' token\r\n  const double __pref = __i > 0 ? __param._M_cp[__i - 1] : 0.0;\r\n                                                                           ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorArgMax.h: In member function 'Eigen::TensorOpCost Eigen::TensorEvaluator<const Eigen::TensorPairReducerOp<ReduceOp, Dims, XprType>, Device>::costPerCoeff(bool) const':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorArgMax.h:289:65: error: expected ')' before numeric constant\r\n     const double compute_cost = 1.0 +\r\n                                                                 ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorArgMax.h:289:159: error: expected ':' before ';' token\r\n     const double compute_cost = 1.0 +\r\n                                                                                                                                                               ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorArgMax.h:289:159: error: expected primary-expression before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorArgMax.h:289:159: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h: At global scope:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:595:61: error: expected ')' before numeric constant\r\n   const RealScalar m_sin_PI_div_n_LUT[32] = {\r\n                                                             ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:595:1414: error: expected ')' before '}' token\r\n   const RealScalar m_sin_PI_div_n_LUT[32] = {\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:631:69: error: expected ')' before numeric constant\r\n   const RealScalar m_minus_sin_2_PI_div_n_LUT[32] = {\r\n                                                                     ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:631:1404: error: expected ')' before '}' token\r\n   const RealScalar m_minus_sin_2_PI_div_n_LUT[32] = {\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h: In member function 'void Eigen::TensorEvaluator<const Eigen::TensorFFTOp<FFT, ArgType, FFTResultType, FFTDir>, Device>::butterfly_4(Eigen::TensorEvaluator<const Eigen::TensorFFTOp<FFT, ArgType, FFTResultType, FFTDir>, Device>::ComplexScalar*)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:441:26: error: expected primary-expression before '(' token\r\n       tmp[3] = ComplexScalar(0.0, -1.0) * (data[2] - data[3]);\r\n                          ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:441:31: error: expected ')' before numeric constant\r\n       tmp[3] = ComplexScalar(0.0, -1.0) * (data[2] - data[3]);\r\n                               ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:441:70: error: expected ')' before ';' token\r\n       tmp[3] = ComplexScalar(0.0, -1.0) * (data[2] - data[3]);\r\n                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:441:70: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:443:26: error: expected primary-expression before '(' token\r\n       tmp[3] = ComplexScalar(0.0, 1.0) * (data[2] - data[3]);\r\n                          ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:443:31: error: expected ')' before numeric constant\r\n       tmp[3] = ComplexScalar(0.0, 1.0) * (data[2] - data[3]);\r\n                               ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:443:69: error: expected ')' before ';' token\r\n       tmp[3] = ComplexScalar(0.0, 1.0) * (data[2] - data[3]);\r\n                                                                     ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:443:69: error: expected ')' before ';' token\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h: In member function 'void Eigen::TensorEvaluator<const Eigen::TensorFFTOp<FFT, ArgType, FFTResultType, FFTDir>, Device>::butterfly_1D_merge(Eigen::TensorEvaluator<const Eigen::TensorFFTOp<FFT, ArgType, FFTResultType, FFTDir>, Device>::ComplexScalar*, Eigen::TensorEvaluator<const Eigen::TensorFFTOp<FFT, ArgType, FFTResultType, FFTDir>, Device>::Index, Eigen::TensorEvaluator<const Eigen::TensorFFTOp<FFT, ArgType, FFTResultType, FFTDir>, Device>::Index)':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:515:28: error: expected ')' before numeric constant\r\n     ComplexScalar w(1.0, 0.0);\r\n                            ^~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorFFT.h:515:32: error: expected ')' before ';' token\r\n     ComplexScalar w(1.0, 0.0);\r\n                                ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h: In member function 'Eigen::TensorOpCost Eigen::TensorEvaluator<const Eigen::TensorAssignOp<LhsXprType, RhsXprType>, Device>::costPerCoeff(bool) const':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h:196:64: error: expected primary-expression before '(' token\r\n     return m_rightImpl.costPerCoeff(vectorized) +\r\n                                                                ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h:196:82: error: expected ')' before numeric constant\r\n     return m_rightImpl.costPerCoeff(vectorized) +\r\n                                                                                  ^ \r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h:196:251: error: expected ')' before ';' token\r\n     return m_rightImpl.costPerCoeff(vectorized) +\r\n                                                                                                                                                                                                                                                           ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h:196:251: error: expected ')' before ';' token\r\n./tensorflow/core/kernels/cwise_ops.h: In member function 'Scalar Eigen::internal::xlogy_op<Scalar>::operator()(const Scalar&, const Scalar&) const':\r\n./tensorflow/core/kernels/cwise_ops.h:696:23: error: expected ')' before numeric constant\r\n     if (x == Scalar(0.)) {\r\n                       ^~\r\n./tensorflow/core/kernels/cwise_ops.h:699:1: error: expected ')' before 'return'\r\n     return x * numext::log(y);\r\n ^   ~~\r\n./tensorflow/core/kernels/cwise_ops.h:699:26: error: expected ')' before ';' token\r\n     return x * numext::log(y);\r\n                          ^\r\n./tensorflow/core/kernels/cwise_ops.h: In member function 'Scalar Eigen::internal::xlog1py_op<Scalar>::operator()(const Scalar&, const Scalar&) const':\r\n./tensorflow/core/kernels/cwise_ops.h:727:23: error: expected ')' before numeric constant\r\n     if (x == Scalar(0.)) {\r\n                       ^~\r\n./tensorflow/core/kernels/cwise_ops.h:730:1: error: expected ')' before 'return'\r\n     return x * numext::log1p(y);\r\n ^   ~~\r\n./tensorflow/core/kernels/cwise_ops.h:730:28: error: expected ')' before ';' token\r\n     return x * numext::log1p(y);\r\n                            ^\r\n./tensorflow/core/kernels/cwise_ops.h: In member function 'Scalar Eigen::internal::xdivy_op<Scalar>::operator()(const Scalar&, const Scalar&) const':\r\n./tensorflow/core/kernels/cwise_ops.h:762:23: error: expected ')' before numeric constant\r\n     if (x == Scalar(0.)) {\r\n                       ^~\r\n./tensorflow/core/kernels/cwise_ops.h:765:1: error: expected ')' before 'return'\r\n     return x / y;\r\n ^   ~~\r\n./tensorflow/core/kernels/cwise_ops.h:765:13: error: expected ')' before ';' token\r\n     return x / y;\r\n             ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In instantiation of 'static Scalar Eigen::internal::zeta_impl<Scalar>::run(Scalar, Scalar) [with Scalar = float]':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1985:114:   required from 'typename Eigen::internal::zeta_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type Eigen::numext::zeta(const Scalar&, const Scalar&) [with Scalar = float; typename Eigen::internal::zeta_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type = float]'\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsBFloat16.h:22:86:   required from here\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1390:14: error: cannot convert 'double (*)(const char*) throw ()' to 'const float' in initialization\r\n         const Scalar zero = 0.0, half = 0.5, one = 1.0;\r\n              ^~~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In instantiation of 'static Scalar Eigen::internal::polygamma_impl<Scalar>::run(Scalar, Scalar) [with Scalar = float]':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1991:119:   required from 'typename Eigen::internal::polygamma_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type Eigen::numext::polygamma(const Scalar&, const Scalar&) [with Scalar = float; typename Eigen::internal::polygamma_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type = float]'\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsBFloat16.h:25:91:   required from here\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1483:8: error: cannot convert 'double (*)(const char*) throw ()' to 'float' in initialization\r\n         Scalar zero = 0.0, one = 1.0;\r\n        ^~~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In instantiation of 'static Scalar Eigen::internal::zeta_impl<Scalar>::run(Scalar, Scalar) [with Scalar = double]':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1985:114:   required from 'typename Eigen::internal::zeta_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type Eigen::numext::zeta(const Scalar&, const Scalar&) [with Scalar = double; typename Eigen::internal::zeta_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type = double]'\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/arch/GPU/SpecialFunctions.h:60:34:   required from here\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1390:14: error: cannot convert 'double (*)(const char*) throw ()' to 'const double' in initialization\r\n         const Scalar zero = 0.0, half = 0.5, one = 1.0;\r\n              ^~~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h: In instantiation of 'static Scalar Eigen::internal::polygamma_impl<Scalar>::run(Scalar, Scalar) [with Scalar = double]':\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1991:119:   required from 'typename Eigen::internal::polygamma_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type Eigen::numext::polygamma(const Scalar&, const Scalar&) [with Scalar = double; typename Eigen::internal::polygamma_retval<typename Eigen::internal::global_math_functions_filtering_base<Scalar>::type>::type = double]'\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/arch/GPU/SpecialFunctions.h:74:39:   required from here\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:1483:8: error: cannot convert 'double (*)(const char*) throw ()' to 'double' in initialization\r\n         Scalar zero = 0.0, one = 1.0;\r\n        ^~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 866.600s, Critical Path: 166.89s\r\nINFO: 11958 processes: 2116 internal, 9842 local.\r\nFAILED: Build did NOT complete successfully`\r\n```", "comments": ["It'd be nice to have a response soon, as I haven't been able to resolve this issue after trying all different gcc/tensorflow versions!", "I don't think TF 2.7 has support for GCC 4.8. The default build is C++14\r\nhttps://github.com/tensorflow/tensorflow/blob/ef2f6915b33be4ef5ed5e629866c4415366a76f6/.bazelrc#L320\r\n\r\nhttps://www.tensorflow.org/install/source#bazel_build_options\r\n\r\nSee GCC compatibility with C++ 14\r\nhttps://gcc.gnu.org/projects/cxx-status.html#cxx14\r\n\r\nCan you build [TF in Docker](https://www.tensorflow.org/install/source#docker_linux_builds)? \r\n", "We will move to C++17 soon.", "Thanks for the response! I mentioned in my post that I tried compiling it in GCC 7.3.0, 5.4.0 and 6.3.0 and it still didn't work. This specific error shows up when I install it using GCC 7.3.0", "And the cluster that I'm trying to install in does not have docker installed, and to install TensorFlow via docker, I'll need sudo access", "It was not so much clear from the description were the error emerged as the description start with\r\n> I've been trying to install TensorFlow from source for about a month on a cluster in which the native GCC version is old (4.8.0)\r\n\r\nSo is the build still failing with GCC 7.3.0, 5.4.0 and 6.3.0?\r\n\r\n>  ll need sudo access\r\n\r\nIn some env, but I don't know your cluster, you could still install and use docker rootless https://docs.docker.com/engine/security/rootless/", "Yup the build falls in every version gcc I use, this specific error shows up for Gcc 7.3.0. I\u2019ve also tried installing different versions of tensor flow with different versions of Gcc, but all of them have failed with some eigen issues", "It is hard to reproduce exactly your env without a Dockerfile receipt. \r\nWhat I can tell is that currently we are bulding successful master/nightly versions (and so I suppose 2.7.x) with `gcc 7.3.1`:\r\nhttps://github.com/tensorflow/build/blob/master/tf_sig_build_dockerfiles/builder.devtoolset/build_devtoolset.sh#L74", "I would like to try installing it in gcc 7.3.1, but I can't find the source code for that specific gcc version. Can you all point to a link for gcc 7.3.1?", "Do you mean the TF source code version?", "No, the gcc (I can find the source code for 7.3.0 but not 7.3.1)", "I don't know as we need to produce manylinux compatible wheels we are using devtoolset 7 in an Ubuntu distro. So it is why I mentioned gcc 7.3.1: \r\nhttps://centos.pkgs.org/7/centos-sclo-rh-x86_64/devtoolset-7-gcc-7.3.1-5.10.el7.x86_64.rpm.html \r\n\r\nIn the official devel image we install just the standard `build-essential` in an Ubuntu 20.04 base image:\r\nhttps://github.com/tensorflow/tensorflow/blob/a0edcfaeebae70f82bbdfd56d0f339c05b68e3bb/tensorflow/tools/dockerfiles/dockerfiles/devel-gpu.Dockerfile#L22-L41\r\n\r\n", "gcc 7.3.0 and gcc 7.3.1 should not have many differences between them. Can you post the error log that would result with gcc 7.3.0? Please do a ` bazel clean --expunge` just before that, to make sure everything is building from scratch. Also, please share output of `git log -n1` and also make sure you wrap the error message around 3 backticks, not just one (I edited the first post as an example)", "Btw,\r\n\r\n```\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h: In member function 'std::size_t std::hash<float>::operator()(float) const':\r\n/global/home/groups/co_noneq/deepmd/gcc/lib/gcc/x86_64-pc-linux-gnu/7.4.0/../../../../include/c++/7.4.0/bits/functional_hash.h:232:22: error: expected ')' before numeric constant\r\n  return __val != 0.0f ? std::_Hash_impl::hash(__val) : 0;\r\n  ```\r\n  \r\nlooks like an error in your toolchain, not in TF. Are you able to compile any other program that uses this header?", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53118\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53118\">No</a>\n"]}, {"number": 53117, "title": "[TF:TRT] Fix TrtUniquePtr warnings/error for TRT 8.2", "body": "In TensorRT 8.2, the `destroy` method was deprecated for API objects. Instead, API users are expected to use `delete` or standard managed pointers after receiving a pointer to an API object created by TensorRT. This change is applied to the `TrtUniquePtr` type used through TF-TRT.", "comments": ["Request review from @bixia1 ", "Please hold off on merging this", "I requested change, that is the only way I can hold off the merge.", "This is fine to merge"]}, {"number": 53116, "title": "Mixed precision doesn't work properly on NVIDIA A10G GPUs", "body": "A large U-Net 3D model configured with mixed precision fails with `No algorithm worked!` (see full `a10g.log` attached) when running inference on a NVIDIA A10G 20GB GPU (compute capability 8.6).\r\n\r\nUsing `tensorflow/tensorflow:nightly-gpu` Docker image, the error points to an out-of-memory issue (see full log `a10g_tf_nightly.log` attached):\r\n```\r\nNo algorithm worked!  Error messages:\r\n  Profiling failure on CUDNN engine 1#TC: RESOURCE_EXHAUSTED: Allocating 4718624784 bytes exceeds the memory limit of 4294967296 bytes.\r\n  Profiling failure on CUDNN engine 1: RESOURCE_EXHAUSTED: Allocating 4718624784 bytes exceeds the memory limit of 4294967296 bytes.\r\n         [[{{node model/conv3d_transpose_3/conv3d_transpose}}]] [Op:__inference_predict_function_1150]\r\n\r\n```\r\nI'm able to overcome the issue by using full precision instead (i.e by setting `mixed_precision.set_global_policy(\"float32\")`.\r\n\r\nThe same model configured with mixed precision works fine on the previous generation T4 Tesla GPU (compute capability 7.5), which have even less GPU memory - 16GB (see full `t4_tesla.log` attached).\r\n\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1019-aws x86_64)\r\n- TensorFlow installed from (source or binary): Official `tensorflow:latest-gpu` Docker image (`sha256@fc5eb0604722c7bef7b499bb007b3050c4beec5859c2e0d4409d2cca5c14d442`)\r\n- TensorFlow version (use command below): 2.7.0\r\n- Python version: 3.8.10\r\n- CUDA/cuDNN version: 11.2.1 / 8.1.0.77-1\r\n- GPU model and memory: A10G (20G) and Tesla T4 (16G).\r\n- NVIDIA driver: 470.82\r\n- `nvidia-smi` outputs for both GPU types provided in attachments.\r\n\r\n**Describe the expected behavior**\r\n\r\nMixed precision mode should not exhaust all GPU memory on the newest generation of NVIDIA A10G.\r\n\r\n\r\n**Standalone code to reproduce the issue**\r\nSteps to reproduce:\r\n\r\n1. Start instance with A10G GPU\r\n\r\n2. Start interactive Docker container and pass `test.py` (copy from [Colab](https://colab.research.google.com/drive/1Vg8LPNNrYJYAd4qjA_p_GuabzjQdqTwU?usp=sharing))\r\n```\r\n$ docker run --gpus all -v /path/to/test.py:/srv/test.py -it tensorflow/tensorflow:latest-gpu /bin/bash\r\n```\r\n3. Run script\r\n```\r\npython /srv/test.py\r\n```\r\n4. Repeat steps using Tesla T4 (no error obtained)\r\n\r\n\r\n**Other info / logs**\r\n[a10g.log](https://github.com/tensorflow/tensorflow/files/7565542/a10g.log)\r\n[a10g_tf_nightly.log](https://github.com/tensorflow/tensorflow/files/7565545/a10g_tf_nightly.log)\r\n[t4_tesla.log](https://github.com/tensorflow/tensorflow/files/7565547/t4_tesla.log)\r\n\r\n[a10g_nvidia_smi.log](https://github.com/tensorflow/tensorflow/files/7565555/a10g_nvidia_smi.log)\r\n[t4_tesla_nvidia_smi.log](https://github.com/tensorflow/tensorflow/files/7565558/t4_tesla_nvidia_smi.log)", "comments": ["@goncinious ,\r\nPlease post this issue on [keras-team/keras](https://github.com/keras-team/keras/issues) repo.\r\nTo know more refer to:\r\nhttps://discuss.tensorflow.org/t/keras-project-moved-to-new-repository-in-https-github-com-keras-team-keras/1999\r\n", "Thanks @tilakrayal, I've submitted to Keras' team as requested - https://github.com/keras-team/keras/issues/15678.", "@goncinious ,\r\nPlease feel free to move this issue to closed status as it has been tracking in keras repo.Thanks", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53116\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53116\">No</a>\n"]}, {"number": 53114, "title": "[TF-TRT] Provide a way to use different Grappler optimizers for the function library than the main graph", "body": "This is a POC that probably needs some refining. During TF-TRT conversion, we need to turn on different optimizers during optimization of the main graph and `TRTEngine` functions. Since other functions are inlined, it is effectively equivalent to using different optimizers for the function library.\r\n\r\n### How it works\r\n\r\n- Add fields to `RewriterConfig` to specify an alternate list of optimizers and custom optimizers, along with a boolean to toggle the use of these alternate lists. The default behavior doesn't change (i.e same optimizers for the main graph and function library)\r\n- Add an optional parameter to `MetaOptimizer::OptimizeGraph()` and helper functions to know whether the main graph or function library is being optimized, and set this parameter when optimizing the function library in `MetaOptimizer::OptimizeConsumeItem()`.\r\n- When optimizing the function library, get the optimizer list from these new fields if the boolean is true.\r\n\r\n### Example of TRT conversion logs (BERT Base)\r\n\r\n```\r\nOptimization results for grappler item: tf_graph\r\n  constant_folding: Graph size after: 2884 nodes (-409), 3897 edges (-410), time = 2186.9751ms.\r\n  layout: Graph size after: 2884 nodes (0), 3897 edges (0), time = 1524.755ms.\r\n  constant_folding: Graph size after: 2884 nodes (0), 3897 edges (0), time = 447.266ms.\r\n  TensorRTOptimizer: Graph size after: 521 nodes (-2363), 664 edges (-3233), time = 4766.79492ms.\r\n  constant_folding: Graph size after: 229 nodes (-292), 445 edges (-219), time = 247.384ms.\r\nOptimization results for grappler item: TRTEngineOp_0_2_native_segment\r\n  constant_folding: Graph size after: 8 nodes (0), 7 edges (0), time = 1.111ms.\r\nOptimization results for grappler item: TRTEngineOp_0_1_native_segment\r\n  constant_folding: Graph size after: 36 nodes (0), 37 edges (0), time = 45.684ms.\r\nOptimization results for grappler item: TRTEngineOp_0_0_native_segment\r\n  constant_folding: Graph size after: 2689 nodes (0), 3132 edges (0), time = 455.876ms.\r\n```\r\n\r\n### TODO\r\n\r\n- [ ] Gather feedback\r\n- [ ] Add tests\r\n- [ ] Change defaults in `trt_convert.py`", "comments": ["@Nyrio This PR is in draft, any update on this? Please. Thanks!", "@gbaned This is on hold. I will close or open for review in the coming days.", "Replacing this PR with #54374 "]}, {"number": 53113, "title": "TFLite conversion fails when empty weights are involved", "body": "### 1. System information\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 20.04\r\n- TensorFlow installation (pip package or built from source): pip\r\n- TensorFlow library (version, if pip package or github SHA, if built from source): TF 2.7 and tf-nightly are both affected\r\n\r\n### 2. Code\r\n```python\r\nimport tensorflow as tf                                                        \r\n                                                                               \r\nclass TestModel(tf.keras.models.Model):                                        \r\n                                                                               \r\n  def __init__(self, dims, **kwargs):                                          \r\n    super().__init__(**kwargs)                                                 \r\n    self._dense = tf.keras.layers.Dense(dims)                                  \r\n        \r\n  @tf.function\r\n  def test(self, x):\r\n    return self._dense(x)                                                      \r\n                                                                               \r\n  \r\n# Fails only if dims=0.\r\ntest_model = TestModel(dims=0)                                                 \r\nsignatures = [\r\n  test_model.test.get_concrete_function(x=tf.TensorSpec([None, 10], tf.float32))  \r\n]                                                                              \r\n    \r\nconverter = tf.lite.TFLiteConverter.from_concrete_functions(signatures, test_model)                                                                            \r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]                           \r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS]         \r\n\r\n# Fails with \"ConverterError: Quantize weights transformation failed.\"         \r\n# But calling directly test_model.test(tf.random.normal(shape=[1, 10]) works.\r\ntflite_model = converter.convert()\r\n  \r\ninterpreter = tf.lite.Interpreter(model_content=tflite_model)                  \r\nresult = interpreter.get_signature_runner()(x=tf.random.normal(shape=[1, 10]))\r\n```\r\n\r\n### 3. Failure after conversion\r\nConversion fails when empty tensors are involved. Doing the same manually with an empty matrix variable has the same effect.\r\n`tensorflow.lite.python.convert_phase.ConverterError: Quantize weights transformation failed.`\r\n\r\nThis does not happen when calling the model method directly, which correctly returns an empty tensor.\r\nIt does not fail either if the dense layer weights are not empty by setting `dims > 0`.\r\n\r\nFor context, I'm not trying to figure out corner cases that fail. I have a multiple signature model where some training time settings can cause some weights to become empty. This is not a problem with regular TF, but this limitation of TFLite is forcing me to introduce additional code in multiple places to work around the issue.", "comments": ["@jvishnuvardhan Was able to replicate the issue on colab using TF v2.7.0 and tf-nightly,please find the gist [here](https://colab.research.google.com/gist/sushreebarsa/a8042f5a279da16599c2860b1f5a0c3e/53113.ipynb) for reference.Thanks!", "Hi @leandro-gracia-gil ! This issue seems to be fixed in the 2.9.0rc0 and nightly  version . Attaching [gist](https://colab.sandbox.google.com/gist/mohantym/effdb0a92e61b3e2ef8bb056bd5d5b96/git_53113.ipynb) for reference. Thanks!", "I can confirm the problem is fixed in the latest tf-nightly build (2.10.0-dev20220420).\r\nI'll be closing this then. Thanks!\r\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53113\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53113\">No</a>\n"]}, {"number": 53112, "title": "Misleading behavior on matrix and vector division, which is in contradiction with the documentation in nn.softmax", "body": "\r\n**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux-5.4.104+-x86_64-with-Ubuntu-18.04-bionic\r\n- TensorFlow version (use command below): 2.7.0\r\n- Python version: 3.7.12\r\n\r\n**Describe the current behavior**\r\n\r\nI found a misleading behavior when using broadcast between matrix and vectors. I will use the example of softmax to demonstrate the issue, which if it's not a bug then the following documentation I believe it is wrong \" https://www.tensorflow.org/api_docs/python/tf/nn/softmax\".\r\n\r\n```\r\n# random matrix\r\nA = tf.random.uniform((4,4), maxval=10, dtype=tf.float64)\r\n\r\n# softmax by hand, as suggested in: https://www.tensorflow.org/api_docs/python/tf/nn/softmax\r\nA_softmax = tf.exp(A) / tf.reduce_sum(tf.exp(A), axis=-1)\r\ntf.reduce_sum(A_norm, axis=-1) \r\n# >>> <tf.Tensor: shape=(4,), dtype=float64, numpy=array([0.79724022, 0.34883704, 3.8507741 , 2.37962821])>\r\n\r\nA_nn_softmax = tf.nn.softmax(A, axis=-1)\r\ntf.reduce_sum(A_nn_softmax, axis=-1) \r\n# >>> <tf.Tensor: shape=(4,), dtype=float64, numpy=array([1., 1., 1., 1.])>\r\n```\r\nIn the above example, I use the tf.nn.softmax as a baseline and then use the corresponding computation as described in the documentation ( that is also the way I usually implement the softmax operation ). However, as you can see, A_softmax (direct computation) and A_nn_softmax (from the function nn.softmax) gave two different outputs, which according to the documentation should have not happened. I expect the same output for both matrices.\r\n\r\nAfter some time I realise that the problem was related to the column-wise division that has, what I believe to be, a **misleading** behaviour.\r\n\r\n```\r\ntf.exp(A) / tf.reduce_sum(tf.exp(A), axis=-1)\r\n```\r\n\r\nIn the above computation, I am dividing a (4, 4) matrix per (4,) vector, which I expect to perform a column-wise division since it is a column vector. However, it performs a row-wise division. I would like to know if this is an intended behavior and if so, I believe that the documentation of nn.softmax is wrong and should be \"tf.exp(logits) / tf.reduce_sum(tf.expand_dims(tf.exp(logits), axis=-1), axis=-1)\".\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nI expect that A_softmax equals A_nn_softmax.\r\n\r\nTo achieve the expected behavior I need to implicitly add an additional dimension to the denominator vector, becoming (4, 1).\r\n\r\nIn code correspond to:\r\n\r\n```\r\ntf.exp(logits) /tf.expand_dims(tf.reduce_sum(tf.exp(logits), axis=-1), axis=-1)\r\n```\r\nIn alternative I can also use \"keepdims=True\" when doing the reduce_sum\r\n\r\n**Standalone code to reproduce the issue**\r\nhttps://colab.research.google.com/drive/1Iv7cw4_gddfaxre5AD_oBQlGih6cJvMM?usp=sharing", "comments": ["I was able to run more experiments, and now I believe that is indeed the intended behavior and after all, what was misleading was the documentation in nn.softmax \"tf.exp(logits) / tf.reduce_sum(tf.exp(logits), axis)\", since is wrong when axis=-1 which is the default behavior.\r\n\r\nMaybe change this to a documentation issue?", "@T-Almeida ,\r\nI ran the code shared and face a different error, please find the gist [here](https://colab.research.google.com/gist/tilakrayal/f4bf945d7416ff13e6c2f2ffda8f81e5/2-7.ipynb) and share all dependencies to replicate the issue.", "Hi @tilakrayal, indeed I change the code and forgot to update that line, my mistake. \r\n\r\nInstead of \"tf.reduce_sum(A_norm, axis=-1)\" it should be \"tf.reduce_sum(A_softmax, axis=-1)\". Then the output of this should be ones (correct normalization sums to 1), as suggested in https://www.tensorflow.org/api_docs/python/tf/nn/softmax . However, you will see that this is not true because the vector resulting from the reduce_sum operation is handled as a row-vector (I believe). Therefore, I consider this to be an issue related to the documentation. Nevertheless, I found that to be also misleading since a column-wise reduce operation results in a row-vector.", "@T-Almeida,\r\n\r\nIn this case of documentation bug, Would you like to submit a PR addressing the issue? Thanks!", "Hi, @sanatmpa1 yes sure, I can open a PR.", "@T-Almeida,\r\n\r\nAs the PR that you have submitted is merged, Can you confirm if we are good to close this issue? Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n"]}, {"number": 53110, "title": "Missing wheels for tflite-runtime on PyPI", "body": "Thanks for releasing tflite to PyPI! I have been using the tflite wheels from the coral release previously (https://github.com/google-coral/pycoral/releases), but having tflite on PyPI greatly simplifies usage as a dependency of other python packages.\r\n\r\nThe PyPI release however doesn't have wheels for all the major platforms as the pycoral release has. For example is `linux_x86_64` missing and there are no wheels for python 3.9.\r\n\r\nIt would also be really great to have wheels for python 3.10 (which i previously asked for here: https://github.com/google-coral/pycoral/issues/58) in PyPI.", "comments": ["@rikardn \r\nIn order to expedite the trouble-shooting process here,Could you please fill the issue [template](https://github.com/tensorflow/tensorflow/issues/new/choose). Thanks!", "I cannot really fit it into any of the templates. Does this summary help?\r\n\r\nThe python package tflite-runtime v2.5.0 on PyPI (https://pypi.org/project/tflite-runtime/2.5.0/) is lacking some important wheels:\r\n\r\n| Python version  | Platform for which wheel is missing |\r\n| ------------- | ------------- |\r\n| 3.8   | Linux x86 64  |\r\n| 3.9   | MacOS x86 x64 | \r\n| 3.9   | Windows amd64 |\r\n| 3.9   | Linux x86 64 |\r\n| 3.10 | MacOS x86 x64 | \r\n| 3.10  | Windows amd64 |\r\n| 3.10  | Linux x86 64 |\r\n", "`Pypi` wheels for `tflite-runtime` is maintained by `Coral Support`, you can track the progress in the issue https://github.com/google-coral/pycoral/issues/58 which you raised in pycoral repository. Thanks!", "@rikardn coral team added packages to PyPI just to ensure somebody else doesn't take the library name. We don't ave any plans to update or maintain it. Please get the required wheels from [pycoral releases](https://github.com/google-coral/pycoral/releases) or install pycoral and corresponding tflite-runtime using command below. Thanks!\r\n\r\n`python3 -m pip install --extra-index-url https://google-coral.github.io/py-repo/ pycoral~=2.0 `", "Thanks @sachinprasadhs and @hjonnala for the explanation. May I ask why there is no plan to have tflite on PyPI? This is the most standard way of distributing python packages and it would open up for other python packages to have it as a dependency.", "Hi @rikardn tflite-runtime install is not recommended using pip for [Debian packages](https://www.tensorflow.org/lite/guide/python) as it can cause runtime failures. We recommend installing tflite-runtime using this [guide](https://www.tensorflow.org/lite/guide/python) or form [coral software center](https://coral.ai/software/#pycoral-api). As PyPI distribution does not work for all the platforms we  host all our supported wheels on GitHub instead. Also we(coral team) support for only limited platforms.\r\n \r\nOn a side note,  tflite-runtime v2.5.0 does not support python3.9. The latest version `tflite-runtime==2.5.0.post1` has wheels for python 3.9.\r\n \r\nPlease follow up [here](https://github.com/google-coral/pycoral/issues/58) for any further questions on `tflite-runtime`. Thanks!\r\n", "Thanks for explaining the situation."]}, {"number": 53108, "title": "Add missing `clean_dep` for `tf_cc_shared_object`", "body": null, "comments": []}, {"number": 53107, "title": "Details about tf.keras.layers.Conv2DTranspose params 'padding' and 'output_padding'", "body": "https://www.tensorflow.org/api_docs/python/tf/keras/layers/Conv2DTranspose\r\n\r\n## Description of issue (what needs changing):\r\nThe documentation tells developers that output_padding has only one restriction that it should be lower that stride param, and it may not be all-inclusive.\r\n\r\n### Clear description\r\nDifferent from PyTorch, Conv2DTranspose implements Keras API, which uses padding params as 'same' or 'valid' instead of concrete int values. That gives developers a false impression that we can give padding cal tasks safely to TF. However, padding param should work with output_padding param, and output_padding cannot be set casually. I check the source code of TF and found that while using padding params as 'same', TF set pad to be kernel_size / 2 defaultly, that means output_padding param shoud be set to stride - 1, or mistakes may occur in some situation. However, the documentation tells developers that output_padding has only one restriction that it should be lower that stride param, so it may not be all-inclusive.\r\n\r\n### Suggestions\r\nActually, setting param 'padding' in 'same' and 'valid' in this layer may be an ill considered decision, but since TF should implement Keras API, may be we have two solutions: One is to tell the developers in the documentation the relation of output_padding with padding param, and adds the implementation theory of same padding in this layer; Or just to adapt the actual pad values to the output_padding param as far as possible, and to warn the developers the risk and give them suggestions.\r\n", "comments": ["Hi @beginner401!\r\nPlease post this issue on [keras-team/keras repo.](https://github.com/keras-team/keras/issues)\r\nTo know more see;\r\n[https://discuss.tensorflow.org/t/keras-project-moved-to-new-repository-in-https-github-com-keras-team-keras/1999](https://discuss.tensorflow.org/t/keras-project-moved-to-new-repository-in-https-github-com-keras-team-keras/1999) . Thanks!", "Hi @mohantym !\r\nI have post this issue on [keras-team/keras repo.](https://github.com/keras-team/keras/issues), and thanks for your guidance.\r\n\r\n\r\n"]}, {"number": 53106, "title": "support cosn and ofs schema", "body": "support cosn and ofs schema", "comments": ["We are no longer patching TF 2.2"]}, {"number": 53105, "title": "What arguments should I be using for tf.nn.ctc_loss?", "body": "I'm having a lot of trouble converting tf.compat.v1.nn.ctc_loss to tf.nn.ctc_loss (or even tf.v1.ctc_loss_v2 for that matter, which seems to be based on the same thing.) The lack of example usages on https://www.tensorflow.org/api_docs/python/tf/nn/ctc_loss makes this rather unclear. Is there any end-to-end example that I can use? Specifically I'm trying to convert \r\n\r\ninput_tensor=tf.compat.v1.nn.ctc_loss(\r\n                labels=self.gt_texts,\r\n                inputs=self.ctc_in_3d_tbc,\r\n                sequence_length=self.seq_len,\r\n                ctc_merge_repeated=True,\r\n            )\r\n\r\nThe above works fine.  My understanding is this is equivalent to \r\n\r\ninput_tensor=tf.nn.ctc_loss(\r\n                labels=self.gt_texts,  \r\n                logits=self.ctc_in_3d_tbc,\r\n                label_length=None,  \r\n                logit_length=self.seq_len, \r\n                blank_index=-1,\r\n            )\r\n\r\nbut it goesn't seem to be working as well. Can someone confirm that I'm using my arguments properly (especially logit_length - is it supposed to be the same as the previously specified sequence length argument)?", "comments": ["@thetruejacob,\r\n\r\nCan you take a look at this [comment](https://github.com/tensorflow/tensorflow/issues/35063) from a similar issue? Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 53104, "title": "layers.LocallyConnected2D takes a lot of time to get initialized.", "body": "Tensorflow version: 2.7.0\r\nlayers.LocallyConnected2D takes an awful amount of time to build. The time taken to build increases dramatically with increasing size of input. \r\n\r\n> LocallyConnected2D in mode 1 takes 11.0303 seconds which is 43.0397 times Normal Conv2D\r\n> LocallyConnected2D in mode 2 takes 6.6656 seconds which is 26.0089 times Normal Conv2D\r\n> LocallyConnected2D in mode 3 takes 4.1878 seconds which is 16.3407 times Normal Conv2D\r\n\r\nHere mode means implementation. \r\nSample code to generate the problem can be found in this [notebook](https://colab.research.google.com/drive/1r--vgfn9_6UD-ff7pIYSRfNoZlXQN0gk?usp=sharing)\r\n\r\nMoreover the sparse tensor generated in implementation mode 2 uses sparse_mat_mul which is deprecated.\r\n", "comments": ["@old-school-kid ,\r\nPlease post this issue on [keras-team/keras](https://github.com/keras-team/keras/issues) repo.\r\nTo know more refer to:\r\nhttps://discuss.tensorflow.org/t/keras-project-moved-to-new-repository-in-https-github-com-keras-team-keras/1999\r\n", "Thank you! Shifted this to the [issue here](https://github.com/keras-team/keras/issues/15668#issue-1057314962)"]}, {"number": 53103, "title": "[TF-TRT] Detailed Non-Conversion Report Added", "body": "Follow-up of: #52671 that was reverted.\r\n\r\nCC: @bixia1 @jwoolley for review\r\n\r\nThis PR does the following:\r\n- fix `std::string` into `string`\r\n- fix **un**conversion into **non**conversion\r\n- fix `std::pair` of `std::pair` into `std::tuple`\r\n- various renaming for readability\r\n", "comments": ["@DEKHTIARJonathan Can you please resolve conflicts? Thanks!", "Can you also remove [these few lines](https://github.com/tensorflow/tensorflow/blob/71857f3727c957f46c2e73eacb74a3b19704f56c/tensorflow/compiler/tf2tensorrt/convert/ops/slice_ops.cc#L100-L107) from your previous PR?", "@bixia1 Sorry left-overs from the rebase, all comments fixed please review", "@bixia1 I just noticed there was a few typos in the PR, I corrected them. If you can re-approve the PR. Thanks :) "]}, {"number": 53102, "title": "TFDS CLI Fails to Install: TFDS Command not Found ", "body": "I am getting the following error when trying to install TFDS CLI. I am running the commands as per the documentation/tutorial on the tensorflow website (https://www.tensorflow.org/datasets/cli). I basically clicked on the open in colab button on the link I attached and tried to run the first cell with. the below listed commands and it failed.\r\n\r\n>> !pip install -q tfds-nightly (Executes Successfully)\r\n>> !tfds --version (Throws and Error)\r\n\r\nError Message:\r\nTraceback (most recent call last):\r\nFile \"/usr/local/bin/tfds\", line 5, in\r\nfrom tensorflow_datasets.scripts.cli.main import launch_cli\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow_datasets/scripts/cli/main.py\", line 40, in\r\nfrom tensorflow_datasets.scripts.utils import flag_utils\r\nModuleNotFoundError: No module named 'tensorflow_datasets.scripts.utils'\r\n\r\nNOTE:\r\n\r\nOn inspection of this path --> /usr/local/lib/python3.7/dist-packages/tensorflow_datasets/scripts/cli/main.py\r\nI realize that there should exist a similar path --> usr/local/lib/python3.7/dist-packages/tensorflow_datasets/scripts/utils.py with the flag_utils function in it for the ~/cli/main.py script to import/call but it does not exist in the Google Colab directory and I think this is a bug as someone might have deleted it or replcated its functionality elsewhere without realizing that this script would break.\r\n\r\nHere is a screenshot of the error. \r\n\r\n![image](https://user-images.githubusercontent.com/35322634/142265312-47476721-f27f-4fd2-b8a2-b5b2c185c693.png)\r\n", "comments": ["Hi @Royston2708 ! I was able to print version using below command `print(tfds.__version__)`. For further assistance ,please create an issue in this[ repo](https://github.com/tensorflow/datasets/issues). Thanks!", "Hi @mohantym that did not work for me. TFDS is not recognized. The issue is that I don't really care about finding out the version. The objective for me is to be able to create a new TFDS dataset that I can fine tune a model on in Tensorflow. In order to create a new dataset i need TFDS CLI but due to errors and bugs in the package the code is looking for a function called \" flag_utils\" in a package/script called \"utils\" that does not exist.  \r\n\r\nAre you trying to run this from a generic google account? Could you check what happens if you to login to your personal google account then go to the colab website using the link I provided, click the run in colab button and try to run the code. It does not run for me and keeps giving me this error. I looked into the **/usr/local/lib/python3.7/dist-packages/tensorflow-datasets** path and there is no utils script or any mention of **def flag utils** in any of the scripts which means someone from Google deleted that script/function withouth realizing that it is being called elsewhere. \r\n\r\n\r\n<img width=\"1792\" alt=\"Screen Shot 2021-11-18 at 12 10 02 PM\" src=\"https://user-images.githubusercontent.com/35322634/142463258-005c65b0-02db-4636-abb5-caa43ac122a9.png\">\r\n ", "@Royston2708 ! You can print version after importing tensorflow_dataset as tfds through `\"import tensorflow_datasets as tfds\"`. Was able to replicate and resolve the issue.  Attaching [Gist](https://colab.research.google.com/gist/mohantym/4bc33436df8e554ceaa90ab12823d341/github_53102.ipynb#scrollTo=PsUbtvMAza51) for reference . Please create this issue in [Dataset repo](https://github.com/tensorflow/datasets) if you need further assistance . Thank you!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53102\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53102\">No</a>\n"]}, {"number": 53100, "title": "Conflicting behavior with dvc in pytest", "body": "Hello,\r\n\r\nI recently came across a conflicting interaction with `dvc` (and possibly other packages presenting the same behavior) regarding the use of `sys.stdout.close()` and `sys.stderr.close()`.\r\nIn the codebase of tensorflow this is used here only:\r\n - https://github.com/tensorflow/tensorflow/blob/d11296a34b8b9ad798d8f273966de83dbb83de83/tensorflow/python/distribute/multi_process_runner.py#L809-L810\r\nwhile it used there only in the dvc package (I put it for the sake of completeness):\r\n - https://github.com/iterative/dvc/blob/6c0bc9563c3ac6b104eedf6688dd79a1bc5bf4ba/dvc/daemon.py#L68-L70\r\n \r\nIf I understand correctly, this is done here so that threads may close more quickly as is explained in the docstring:\r\n\r\n> We need to explicitly close them since Tensorflow may take a while to exit,\r\nso that the reading threads in the main process can exit more quickly. \r\n\r\nIn `dvc` they use it in a method called `_spawn_posix`, so I guess to help them deal with child processes.\r\n\r\nI don't mean to enter into the details of the implementation of each package as it seems normal to do that kind of things there, but in the context of `pytest`, as it mocks subprocesses or at least tamper with it, it creates a conflicting resulting in a traceback:\r\n\r\n```\r\nTest session starts (platform: linux, Python 3.6.15, pytest 6.0.2, pytest-sugar 0.9.4)\r\ncachedir: .pytest_cache\r\nrootdir: /lib/data-science, configfile: setup.cfg\r\nplugins: cov-3.0.0, sugar-0.9.4, mock-3.6.1\r\ncollecting ... \r\n\r\nResults (15.85s):\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 240, in wrap_session\r\n    session.exitstatus = doit(config, session) or 0\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 295, in _main\r\n    config.hook.pytest_collection(session=session)\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/hooks.py\", line 286, in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/manager.py\", line 87, in <lambda>\r\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/callers.py\", line 208, in _multicall\r\n    return outcome.get_result()\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/callers.py\", line 80, in get_result\r\n    raise ex[1].with_traceback(ex[2])\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/callers.py\", line 187, in _multicall\r\n    res = hook_impl.function(*args)\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 306, in pytest_collection\r\n    session.perform_collect()\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 516, in perform_collect\r\n    items = self._perform_collect(args, genitems)\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 568, in _perform_collect\r\n    self.items.extend(self.genitems(node))\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 771, in genitems\r\n    yield from self.genitems(subnode)\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/main.py\", line 768, in genitems\r\n    rep = collect_one_node(node)\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/runner.py\", line 441, in collect_one_node\r\n    rep = ihook.pytest_make_collect_report(collector=collector)  # type: CollectReport\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/hooks.py\", line 286, in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/manager.py\", line 87, in <lambda>\r\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\n  File \"/usr/local/lib/python3.6/site-packages/pluggy/callers.py\", line 203, in _multicall\r\n    gen.send(outcome)\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/capture.py\", line 740, in pytest_make_collect_report\r\n    out, err = self.read_global_capture()\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/capture.py\", line 661, in read_global_capture\r\n    return self._global_capturing.readouterr()\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/capture.py\", line 571, in readouterr\r\n    err = self.err.snap()\r\n  File \"/usr/local/lib/python3.6/site-packages/_pytest/capture.py\", line 481, in snap\r\n    self.tmpfile.seek(0)\r\nValueError: I/O operation on closed file.\r\n```\r\nas any of the two packages that runs after the other tries to close an already close stream.\r\n\r\nOne workaround I have for this (in case this might interest people that had the same issue) was to tamper with the two objects:\r\n```\r\ndef pytest_configure(config):\r\n    with ExitStack() as stack:\r\n        for stream in (sys.stdout, sys.stderr):\r\n            stack.enter_context(patch.object(stream, stream.close.__name__))\r\n        yield\r\n```\r\nput in a `conftest.py` file at the root of the testing folder.\r\n\r\nI guess such behavior will also arise whenever two packages make use of these same methods.\r\nI have posted an issue on `dvc` github also:\r\n - https://github.com/iterative/dvc/issues/6992", "comments": ["I can see that by adding `analytics = False` has resolved your problem as reported [here](https://github.com/iterative/dvc/issues/6992), in that case could you please close this issue. Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 53099, "title": "Can't run Hexagonal Delegate with Java API", "body": "I am following this doc: \r\nhttps://www.tensorflow.org/lite/performance/hexagon_delegate#add_the_shared_library_to_your_app\r\nI did all 3 steps that are in Java API example (added the dependencies, and added Hexagonal Delegate as option when loading the interpreter), but when I run the interpreter I am getting the error:\r\n\r\n`java.lang.UnsupportedOperationException: This Device doesn't support Hexagon DSP execution.`\r\n\r\nI tried also all the suggestions that are in the bottom of the documentation provided by tensorflow: \r\n1. `adb shell cat /proc/cpuinfo | grep Hardware`  returns -> `Hardware        : Qualcomm Technologies, Inc APQ8098` , so I guess we are good here.\r\n2.  I disabled SELinux enforce by running `adb shell setenforce 0` as super user, and when I run `adb shell getenforce` this returns -> `Permissive` , which means that the command worked.\r\n\r\nAlso another information: `adb shell getprop ro.board.platform` returns -> `msm8998`\r\n\r\nI added 3 .so files that I generated by running the script `hexagon_nn_skel.run` ` v1.20.0.1`, in two main folders: `app/src/main/jniLibs/arm64-v8a` and `app/src/main/jniLibs/armeabi-v7a`, now I think that I am missing the part when we load these .so files. Does anybody have any idea ?\r\n\r\n\r\nUpdate: \r\nMore information related to issue: \r\nDevice is running on Android 10, Snapdragon 835.\r\nAlso I saw that Hexagonal Delegate class is trying to load this native library 'tensorflowlite_hexagon_jni', but I can't find it in my project.", "comments": ["Hi @sachinprasadhs! Could you look at this issue ?", "Could you please provide details about your device, and which Hexagon you are using and also check the similar issue [here](https://github.com/tensorflow/tensorflow/issues/39024). Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n"]}, {"number": 53098, "title": "tensorflow allreduce  train problem.", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- 18.04ubuntu\r\n- TensorFlow version 2.6.0\r\n- Python version:3.6.8\r\n\r\n**Describe the current behavior**\r\n there are sometimes error, not always, small chance happen, not easy to reproduce.......\r\nonly using cpu train. \r\n\r\n2 workers. using tfjob kubeflow operator.\r\nhere are the work-0 logs: \uff08note: and each worker restart themself 3times, then reaches backofflimit . job failed..)\r\n```bash\r\n\r\n\r\n\u00a0 | \u00a0 | 2021-11-17 12:30:26 | 20211117\r\n-- | -- | -- | --\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:26 | python ./train_atp_day.py --data_path /workspace/data/data --featmap_path /workspace/data/featMap/part-00000 --checkpoint_path /workspace/model/deepfm_v1 --start_date 20211117 --embed_dim 8 --input_length 42\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:27 | INFO:tensorflow:Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:0/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:27 | 2021-11-17 12:30:27,792 [INFO] Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:0/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:27 | INFO:tensorflow:Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:27 | 2021-11-17 12:30:27,812 [INFO] Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | INFO:tensorflow:Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,907 [INFO] Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | INFO:tensorflow:MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ('/job:worker/task:0',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,913 [INFO] MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ('/job:worker/task:0',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | WARNING:tensorflow:/job:worker/replica:0/task:1 seems down, retrying 1/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,914 [WARNING] /job:worker/replica:0/task:1 seems down, retrying 1/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | WARNING:tensorflow:/job:worker/replica:0/task:1 seems down, retrying 2/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,915 [WARNING] /job:worker/replica:0/task:1 seems down, retrying 2/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | ERROR:tensorflow:Cluster check alive failed, /job:worker/replica:0/task:1 is down, aborting collectives: DNS resolution failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | Additional GRPC error information from remote target /job:worker/replica:0/task:1:\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | :{\"created\":\"@1637123432.915347775\",\"description\":\"Failed to pick subchannel\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":3941,\"referenced_errors\":[{\"created\":\"@1637123432.913304158\",\"description\":\"Resolver transient failure\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolving_lb_policy.cc\",\"file_line\":262,\"referenced_errors\":[{\"created\":\"@1637123432.913302221\",\"description\":\"DNS resolution failed\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc\",\"file_line\":202,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1637123432.913259195\",\"description\":\"Name or service not known\",\"errno\":-2,\"file\":\"external/com_github_grpc_grpc/src/core/lib/iomgr/resolve_address_posix.cc\",\"file_line\":108,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222\"}]}]}]}\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,915 [ERROR] Cluster check alive failed, /job:worker/replica:0/task:1 is down, aborting collectives: DNS resolution failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | Additional GRPC error information from remote target /job:worker/replica:0/task:1:\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | :{\"created\":\"@1637123432.915347775\",\"description\":\"Failed to pick subchannel\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":3941,\"referenced_errors\":[{\"created\":\"@1637123432.913304158\",\"description\":\"Resolver transient failure\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolving_lb_policy.cc\",\"file_line\":262,\"referenced_errors\":[{\"created\":\"@1637123432.913302221\",\"description\":\"DNS resolution failed\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc\",\"file_line\":202,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1637123432.913259195\",\"description\":\"Name or service not known\",\"errno\":-2,\"file\":\"external/com_github_grpc_grpc/src/core/lib/iomgr/resolve_address_posix.cc\",\"file_line\":108,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222\"}]}]}]}\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | Traceback (most recent call last):\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"./train_atp_day.py\", line 115, in <module>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | model = DeepFM(onehot_feature_len, input_length=input_length, embed_dim=embed_dim, hidden_units=hidden_units, dnn_dropout=dnn_dropout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/workspace/script/atp_test_v2/model.py\", line 92, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | super(DeepFM, self).__init__()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 259, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | self._init_batch_counters()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 267, in _init_batch_counters\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | self._train_counter = tf.Variable(0, dtype='int64', aggregation=agg)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 270, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | return cls._variable_v2_call(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 263, in _variable_v2_call\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 68, in getter\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | return captured_getter(captured_previous, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_lib.py\", line 2159, in creator_with_resource_vars\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | created = self._create_variable(next_creator, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 530, in _create_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | distribute_utils.VARIABLE_POLICY_MAPPING, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_utils.py\", line 308, in create_mirrored_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | value_list = real_mirrored_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 522, in _real_mirrored_creator\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | v = next_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 244, in <lambda>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | previous_getter = lambda **kws: default_variable_creator_v2(None, **kws)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variable_scope.py\", line 2675, in default_variable_creator_v2\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 272, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | return super(VariableMetaclass, cls).__call__(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1607, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | distribute_strategy=distribute_strategy)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1734, in _init_from_args\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | initial_value = initial_value()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py\", line 572, in initial_value_fn\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | group_size, group_key, collective_instance_key)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/collective_ops.py\", line 268, in broadcast_send\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | timeout_seconds=timeout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 246, in collective_bcast_send\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | timeout_seconds=timeout_seconds, name=name, ctx=_ctx)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 301, in collective_bcast_send_eager_fallback\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | attrs=_attrs, ctx=ctx, name=name)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/execute.py\", line 60, in quick_execute\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | inputs, attrs, num_outputs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | tensorflow.python.framework.errors_impl.UnavailableError: [_Derived_]Collective ops is aborted by: cluster check alive failed, /job:worker/replica:0/task:1 is down\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | The error could be from a previous operation. Restart your program to reset. [Op:CollectiveBcastSend]\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | Exception ignored in: <bound method CollectiveAllReduceExtended.__del__ of <tensorflow.python.distribute.collective_all_reduce_strategy.CollectiveAllReduceExtended object at 0x7fc2fa04cf28>>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | Traceback (most recent call last):\r\n2x | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py\", line 526, in __del__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | AttributeError: 'NoneType' object has no attribute 'info'\r\n2x | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:34 | python ./train_atp_day.py --data_path /workspace/data/data --featmap_path /workspace/data/featMap/part-00000 --checkpoint_path /workspace/model/deepfm_v1 --start_date 20211117 --embed_dim 8 --input_length 42\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | INFO:tensorflow:Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:0/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | 2021-11-17 12:30:36,687 [INFO] Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:0/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | INFO:tensorflow:Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | 2021-11-17 12:30:36,707 [INFO] Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | INFO:tensorflow:Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,081 [INFO] Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | INFO:tensorflow:MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ('/job:worker/task:0',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,087 [INFO] MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ('/job:worker/task:0',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | WARNING:tensorflow:/job:worker/replica:0/task:1 seems down, retrying 1/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,088 [WARNING] /job:worker/replica:0/task:1 seems down, retrying 1/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | WARNING:tensorflow:/job:worker/replica:0/task:1 seems down, retrying 2/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,088 [WARNING] /job:worker/replica:0/task:1 seems down, retrying 2/3\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | ERROR:tensorflow:Cluster check alive failed, /job:worker/replica:0/task:1 is down, aborting collectives: DNS resolution failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Additional GRPC error information from remote target /job:worker/replica:0/task:1:\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | :{\"created\":\"@1637123437.089088483\",\"description\":\"Failed to pick subchannel\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":3941,\"referenced_errors\":[{\"created\":\"@1637123437.086762179\",\"description\":\"Resolver transient failure\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolving_lb_policy.cc\",\"file_line\":262,\"referenced_errors\":[{\"created\":\"@1637123437.086759773\",\"description\":\"DNS resolution failed\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc\",\"file_line\":202,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1637123437.086713372\",\"description\":\"Name or service not known\",\"errno\":-2,\"file\":\"external/com_github_grpc_grpc/src/core/lib/iomgr/resolve_address_posix.cc\",\"file_line\":108,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222\"}]}]}]}\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,089 [ERROR] Cluster check alive failed, /job:worker/replica:0/task:1 is down, aborting collectives: DNS resolution failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Additional GRPC error information from remote target /job:worker/replica:0/task:1:\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | :{\"created\":\"@1637123437.089088483\",\"description\":\"Failed to pick subchannel\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":3941,\"referenced_errors\":[{\"created\":\"@1637123437.086762179\",\"description\":\"Resolver transient failure\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolving_lb_policy.cc\",\"file_line\":262,\"referenced_errors\":[{\"created\":\"@1637123437.086759773\",\"description\":\"DNS resolution failed\",\"file\":\"external/com_github_grpc_grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc\",\"file_line\":202,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1637123437.086713372\",\"description\":\"Name or service not known\",\"errno\":-2,\"file\":\"external/com_github_grpc_grpc/src/core/lib/iomgr/resolve_address_posix.cc\",\"file_line\":108,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222\"}]}]}]}\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Traceback (most recent call last):\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"./train_atp_day.py\", line 115, in <module>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | model = DeepFM(onehot_feature_len, input_length=input_length, embed_dim=embed_dim, hidden_units=hidden_units, dnn_dropout=dnn_dropout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/workspace/script/atp_test_v2/model.py\", line 92, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | super(DeepFM, self).__init__()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 259, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | self._init_batch_counters()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 267, in _init_batch_counters\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | self._train_counter = tf.Variable(0, dtype='int64', aggregation=agg)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 270, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | return cls._variable_v2_call(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 263, in _variable_v2_call\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 68, in getter\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | return captured_getter(captured_previous, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_lib.py\", line 2159, in creator_with_resource_vars\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | created = self._create_variable(next_creator, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 530, in _create_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | distribute_utils.VARIABLE_POLICY_MAPPING, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_utils.py\", line 308, in create_mirrored_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | value_list = real_mirrored_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 522, in _real_mirrored_creator\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | v = next_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 244, in <lambda>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | previous_getter = lambda **kws: default_variable_creator_v2(None, **kws)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variable_scope.py\", line 2675, in default_variable_creator_v2\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 272, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | return super(VariableMetaclass, cls).__call__(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1607, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | distribute_strategy=distribute_strategy)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1734, in _init_from_args\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | initial_value = initial_value()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py\", line 572, in initial_value_fn\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | group_size, group_key, collective_instance_key)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/collective_ops.py\", line 268, in broadcast_send\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | timeout_seconds=timeout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 246, in collective_bcast_send\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | timeout_seconds=timeout_seconds, name=name, ctx=_ctx)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 301, in collective_bcast_send_eager_fallback\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | attrs=_attrs, ctx=ctx, name=name)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/execute.py\", line 60, in quick_execute\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | inputs, attrs, num_outputs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | tensorflow.python.framework.errors_impl.UnavailableError: [_Derived_]Collective ops is aborted by: cluster check alive failed, /job:worker/replica:0/task:1 is down\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | The error could be from a previous operation. Restart your program to reset. [Op:CollectiveBcastSend]\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Exception ignored in: <bound method CollectiveAllReduceExtended.__del__ of <tensorflow.python.distribute.collective_all_reduce_strategy.CollectiveAllReduceExtended object at 0x7f56042d7f28>>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Traceback (most recent call last):\r\n2x | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py\", line 526, in __del__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | AttributeError: 'NoneType' object has no attribute 'info'\r\n2x | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:52 | python ./train_atp_day.py --data_path /workspace/data/data --featmap_path /workspace/data/featMap/part-00000 --checkpoint_path /workspace/model/deepfm_v1 --start_date 20211117 --embed_dim 8 --input_length 42\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | INFO:tensorflow:Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:0/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | 2021-11-17 12:30:54,287 [INFO] Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:0/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | INFO:tensorflow:Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | 2021-11-17 12:30:54,311 [INFO] Waiting for the cluster, timeout = inf\r\n\r\n\r\n```\r\n\r\nand the  worker-1's log is:\r\n\r\n```bash\r\n\r\n2021-11-17 12:30:31 | 20211117\r\n-- | --\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:31 | python ./train_atp_day.py --data_path /workspace/data/data --featmap_path /workspace/data/featMap/part-00000 --checkpoint_path /workspace/model/deepfm_v1 --start_date 20211117 --embed_dim 8 --input_length 42\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | INFO:tensorflow:Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:1/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,903 [INFO] Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:1/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | INFO:tensorflow:Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,914 [INFO] Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | INFO:tensorflow:Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,924 [INFO] Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | INFO:tensorflow:MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ('/job:worker/task:1',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:32 | 2021-11-17 12:30:32,926 [INFO] MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ('/job:worker/task:1',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | Traceback (most recent call last):\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"./train_atp_day.py\", line 115, in <module>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | model = DeepFM(onehot_feature_len, input_length=input_length, embed_dim=embed_dim, hidden_units=hidden_units, dnn_dropout=dnn_dropout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/workspace/script/atp_test_v2/model.py\", line 92, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | super(DeepFM, self).__init__()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 259, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | self._init_batch_counters()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 267, in _init_batch_counters\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | self._train_counter = tf.Variable(0, dtype='int64', aggregation=agg)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 270, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | return cls._variable_v2_call(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 263, in _variable_v2_call\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 68, in getter\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | return captured_getter(captured_previous, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_lib.py\", line 2159, in creator_with_resource_vars\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | created = self._create_variable(next_creator, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 530, in _create_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | distribute_utils.VARIABLE_POLICY_MAPPING, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_utils.py\", line 308, in create_mirrored_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | value_list = real_mirrored_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 522, in _real_mirrored_creator\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | v = next_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 244, in <lambda>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | previous_getter = lambda **kws: default_variable_creator_v2(None, **kws)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variable_scope.py\", line 2675, in default_variable_creator_v2\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 272, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | return super(VariableMetaclass, cls).__call__(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1607, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | distribute_strategy=distribute_strategy)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1734, in _init_from_args\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | initial_value = initial_value()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py\", line 579, in initial_value_fn\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | collective_instance_key)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/collective_ops.py\", line 345, in broadcast_recv\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | timeout_seconds=timeout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 59, in collective_bcast_recv\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | timeout_seconds=timeout_seconds, name=name, ctx=_ctx)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 115, in collective_bcast_recv_eager_fallback\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | attrs=_attrs, ctx=ctx, name=name)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/execute.py\", line 60, in quick_execute\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | inputs, attrs, num_outputs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | tensorflow.python.framework.errors_impl.FailedPreconditionError: [_Derived_]Collective ops is aborted by: group 1 failed to resolve. This normally means the server has restarted\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | Additional GRPC error information from remote target /job:worker/replica:0/task:0:\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | :{\"created\":\"@1637123433.061968995\",\"description\":\"Error received from peer ipv4:100.91.109.177:2222\",\"file\":\"external/com_github_grpc_grpc/src/core/lib/surface/call.cc\",\"file_line\":1056,\"grpc_message\":\"group 1 failed to resolve. This normally means the server has restarted\",\"grpc_status\":9}\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | The error could be from a previous operation. Restart your program to reset. [Op:CollectiveBcastRecv]\r\n2x | \u00a0 | \u00a0 | 2021-11-17 12:30:33 | failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:34 | python ./train_atp_day.py --data_path /workspace/data/data --featmap_path /workspace/data/featMap/part-00000 --checkpoint_path /workspace/model/deepfm_v1 --start_date 20211117 --embed_dim 8 --input_length 42\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | INFO:tensorflow:Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:1/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | 2021-11-17 12:30:36,075 [INFO] Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:1/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | INFO:tensorflow:Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:36 | 2021-11-17 12:30:36,086 [INFO] Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | INFO:tensorflow:Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,098 [INFO] Cluster is ready.\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | INFO:tensorflow:MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ('/job:worker/task:1',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | 2021-11-17 12:30:37,098 [INFO] MultiWorkerMirroredStrategy with cluster_spec = {'worker': ['deepfm-open-v1-1637123400-worker-0.ai-ctr.svc:2222', 'deepfm-open-v1-1637123400-worker-1.ai-ctr.svc:2222']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ('/job:worker/task:1',), communication = CommunicationImplementation.AUTO\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Traceback (most recent call last):\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"./train_atp_day.py\", line 115, in <module>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | model = DeepFM(onehot_feature_len, input_length=input_length, embed_dim=embed_dim, hidden_units=hidden_units, dnn_dropout=dnn_dropout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/workspace/script/atp_test_v2/model.py\", line 92, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | super(DeepFM, self).__init__()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 259, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | self._init_batch_counters()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py\", line 530, in _method_wrapper\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | result = method(self, *args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 267, in _init_batch_counters\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | self._train_counter = tf.Variable(0, dtype='int64', aggregation=agg)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 270, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | return cls._variable_v2_call(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 263, in _variable_v2_call\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 68, in getter\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | return captured_getter(captured_previous, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_lib.py\", line 2159, in creator_with_resource_vars\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | created = self._create_variable(next_creator, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 530, in _create_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | distribute_utils.VARIABLE_POLICY_MAPPING, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/distribute_utils.py\", line 308, in create_mirrored_variable\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | value_list = real_mirrored_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 522, in _real_mirrored_creator\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | v = next_creator(**kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 244, in <lambda>\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | previous_getter = lambda **kws: default_variable_creator_v2(None, **kws)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variable_scope.py\", line 2675, in default_variable_creator_v2\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | shape=shape)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/variables.py\", line 272, in __call__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | return super(VariableMetaclass, cls).__call__(*args, **kwargs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1607, in __init__\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | distribute_strategy=distribute_strategy)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1734, in _init_from_args\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | initial_value = initial_value()\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py\", line 579, in initial_value_fn\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | collective_instance_key)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/collective_ops.py\", line 345, in broadcast_recv\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | timeout_seconds=timeout)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 59, in collective_bcast_recv\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | timeout_seconds=timeout_seconds, name=name, ctx=_ctx)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_collective_ops.py\", line 115, in collective_bcast_recv_eager_fallback\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | attrs=_attrs, ctx=ctx, name=name)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/execute.py\", line 60, in quick_execute\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | inputs, attrs, num_outputs)\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | tensorflow.python.framework.errors_impl.FailedPreconditionError: [_Derived_]Collective ops is aborted by: group 1 failed to resolve. This normally means the server has restarted\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | Additional GRPC error information from remote target /job:worker/replica:0/task:0:\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | :{\"created\":\"@1637123437.205532722\",\"description\":\"Error received from peer ipv4:100.91.109.177:2222\",\"file\":\"external/com_github_grpc_grpc/src/core/lib/surface/call.cc\",\"file_line\":1056,\"grpc_message\":\"group 1 failed to resolve. This normally means the server has restarted\",\"grpc_status\":9}\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | The error could be from a previous operation. Restart your program to reset. [Op:CollectiveBcastRecv]\r\n2x | \u00a0 | \u00a0 | 2021-11-17 12:30:37 | failed\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:52 | python ./train_atp_day.py --data_path /workspace/data/data --featmap_path /workspace/data/featMap/part-00000 --checkpoint_path /workspace/model/deepfm_v1 --start_date 20211117 --embed_dim 8 --input_length 42\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | INFO:tensorflow:Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:1/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | 2021-11-17 12:30:54,563 [INFO] Enabled multi-worker collective ops with available devices: ['/job:worker/replica:0/task:1/device:CPU:0']\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | INFO:tensorflow:Waiting for the cluster, timeout = inf\r\n\u00a0 | \u00a0 | \u00a0 | 2021-11-17 12:30:54 | 2021-11-17 12:30:54,574 [INFO] Waiting for the cluster, timeout = inf\r\n\r\n```\r\n\r\ncan anyone help to analysis this behavior. \r\n\r\ni have checked  dns log, there not any error log , and all the logs is ok..\r\n\r\ni have read some code, i doubt that  \"cluster is ready\"  check condition is not very convincing.... ready ,but have problem....\r\n\r\n**Describe the expected behavior**\r\n  not happen this type error ...", "comments": ["@berlinsaint \r\nIn order to expedite the trouble-shooting process, please provide a code snippet to reproduce the issue reported here. Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53098\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53098\">No</a>\n"]}, {"number": 53097, "title": "Same input of Models loaded on Apple M1 and GCP COS instance have different output vectors.", "body": "**Describe the current behavior**\r\nWhen giving the same input to the same model loaded in 2 different architectures we expect the output to be \"almost\" identical. In my case I have an encoder model and when I give the same input in the 2 different systems listed below, I find the output vectors to be too different. In particular take a look at the first 6 entries of the output vector in the mentioned scenarios. In both cases inference is done on CPU\r\n\r\n**System information 1**\r\n- OS Platform and Distribution: \r\n      System Version: macOS 11.2.1 (20D75)\r\n      Kernel Version: Darwin 20.3.0\r\n- TensorFlow installed from: source\r\n- TensorFlow version: v1.12.1-44683-gbcaa5ccc43e 2.4.0-rc0\r\n- Python version: Python 3.8.8 | packaged by conda-forge | (default, Feb 20 2021, 15:50:57) [Clang 11.0.1 ] on darwin\r\n\r\noutput vector: `[2.94306199e-03, -1.54599566e-02,  1.47927711e-02, 4.50096987e-02, -1.71471871e-02,  7.42880329e-02, ...]`\r\n\r\n**System information 2**\r\n- OS Platform and Distribution: \r\n      Linux cff446c83c59 5.10.68+ #1 SMP Sat Nov 6 09:06:00 UTC 2021 x86_64 GNU/Linux\r\n- TensorFlow installed from: source\r\n- TensorFlow version: v2.4.0-49-g85c8b2a817f 2.4.1\r\n- Python version: Python 3.7.7 (default, Jun  9 2020, 17:58:51) [GCC 8.3.0] on linux\r\n\r\noutput vector: `[3.02067166e-03, -1.54666584e-02,  1.48272496e-02, 4.50056419e-02, -1.72036942e-02,  7.43456334e-02, ...]`\r\n\r\n**Describe the expected behavior**\r\nI expect the 2 vectors to be \"almost\" equal. The difference shown across the 2 systems is not acceptable.\r\n\r\n", "comments": ["@GabboM ,\r\nCould you please update TensorFlow to the latest stable version v2.7 and let us know if you are facing the same error. Thanks!", "Hey @tilakrayal thanks for your help.\r\n\r\nI updated the `tensorflow-macos` version to `2.6.0` (that is the latest available in [pip](https://pypi.org/project/tensorflow-macos)) and indeed it looks like the problem is solved :\r\n`[ 3.02065164e-03, -1.54666286e-02,  1.48272403e-02, 4.50056605e-02, -1.72036830e-02,  7.43457153e-02, ...]`", "@GabboM ,\r\nGlad the issue is resolved for you, please feel free to move this to closed status.", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53097\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53097\">No</a>\n"]}, {"number": 53096, "title": "undefined reference to `tensorflow::TensorShapeBase<tensorflow::TensorShape>::TensorShapeBase(absl::Span<long long const>)", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):ubuntu18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (use command below):2.3.0\r\n- Python version:python3.6\r\n- Bazel version (if compiling from source):bazel3.1\r\n- GCC/Compiler version (if compiling from source):7.5\r\n- CUDA/cuDNN version:cuda10.2\u3001cudnn8\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\n**Describe the expected behavior**\r\n\r\n**[Contributing](https://www.tensorflow.org/community/contribute)**\r\n\r\n- Do you want to contribute a PR? (yes/no):\r\n- Briefly describe your candidate solution(if contributing):\r\n\r\n**Standalone code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["Does this occur on newer versions of TF?\r\n\r\nAfaik, TF 2.3 does not really contain all the changes to prevent code using invalid shapres from crashing the interpreter via `CHECK`-failures. Plus, TF 2.3 is no longer supported", "Tf2.1, there is no such problem", "@gp1322719830 \r\nIt looks like you are using an older Version of Tensorflow . Many bugs have been fixed in the latest version. Can you please execute your code using latest Version (2.7.0) and let us know if the issue still persists? Please do refer this [comment](https://github.com/tensorflow/tensorflow/issues/53096#issuecomment-971778763) .Thanks!", "I need use 2.3.0", "@gp1322719830 \r\nIn order to expedite the trouble-shooting process, please provide a code snippet to reproduce the issue reported here. Thanks!", "tensorflow::Tensor input_tensor(tensorflow::DT_FLOAT, tensorflow::TensorShape({1,299,2399,3}));", "Is there any other way to set the input size\uff1fAvoid tensorflow:: tensorshape construction.", "tf2.3.0 code error ----> tensor.cc\uff1a645: Tensor::Tensor(DataType type) : shape_(type), buf_(nullptr) {}\r\n", "Tensorflow::TensorShape shape;\r\nshape.AddDim(1);\r\nshape.AddDim(299);\r\nshape.AddDim(299);\r\nshape.AddDim(3);\r\ntensorflow::Tensor input_tensor(tensorflow::DT_FLOAT, shape);\r\nsuccess\uff01", "Closing since you have a workaround and since this is only affecting TF 2.3 which is no longer supported.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53096\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53096\">No</a>\n"]}, {"number": 53095, "title": "Declare Go import path in coordination service proto", "body": "PR declares `go_package` in proto definition and resolves protoc-gen-go error.", "comments": ["@haoyuz  Can you please review this PR ? Thanks!"]}, {"number": 53094, "title": "Skipping quantization of tensor X because it has fewer than 1024 elements", "body": "### 1. System information\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18\r\n- TensorFlow installation (pip package or built from source): pip\r\n- TensorFlow library (version, if pip package or github SHA, if built from source): 2.4.1\r\n\r\n### 2. Code\r\n\r\nMy model is based on keras [MobilenetV3](https://github.com/keras-team/keras/blob/master/keras/applications/mobilenet_v3.py).\r\n\r\n```\r\ndef build_mode(input_shape, \r\n\t\t\toutput_bias=None, \r\n\t\t\tl1_factor=0, \r\n\t\t\tl2_factor=0, \r\n\t\t\tdropout_rate=0.2,\r\n\t\t\talpha=1.0):\r\n\tif l1_factor > 0 and l2_factor == 0:\r\n\t\tkernel_regularizer = regularizers.L1(l1_factor)\r\n\telif l2_factor > 0 and l1_factor == 0:\r\n\t\tkernel_regularizer = regularizers.L2(l2_factor)\r\n\telif l1_factor > 0 and l2_factor > 0:\r\n\t\tkernel_regularizer = regularizers.L1L2(l1_factor, l2_factor)\r\n\telse:\r\n\t\tkernel_regularizer = None\r\n\r\n\tinputs = layers.Input(shape=(input_shape[0], input_shape[1], 3))\r\n\tchannel_axis = -1\r\n\tkernel = 3\r\n\tactivation = relu\r\n\tx = inputs\r\n\tx = layers.Conv2D(16, \r\n\t\t\t\t\tkernel_size=3, \r\n\t\t\t\t\tstrides=(2,2), \r\n\t\t\t\t\tpadding='same', \r\n\t\t\t\t\tuse_bias=False, \r\n\t\t\t\t\tkernel_regularizer=kernel_regularizer,\r\n\t\t\t\t\tname='Conv')(x)\r\n\tx = layers.BatchNormalization(axis=channel_axis, epsilon=1e-3, momentum=0.999, name='Conv/BatchNorm')(x)\r\n\tx = activation(x)\r\n\r\n\t# stack\r\n\tdef depth(d):\r\n\t\treturn _depth(d * alpha)\r\n\r\n\tx = _inverted_res_block(x, 1, depth(16), 3, 2, relu, 0, kernel_regularizer)\r\n\tx = _inverted_res_block(x, 72. / 16, depth(24), 3, 2, relu, 1, kernel_regularizer)\r\n\tx = _inverted_res_block(x, 88. / 24, depth(24), 3, 1, relu, 2, kernel_regularizer)\r\n\tx = _inverted_res_block(x, 4, depth(40), kernel, 2, activation, 3, kernel_regularizer)\r\n\tx = _inverted_res_block(x, 6, depth(40), kernel, 1, activation, 4, kernel_regularizer)\r\n\tx = _inverted_res_block(x, 6, depth(40), kernel, 1, activation, 5, kernel_regularizer)\r\n\tx = _inverted_res_block(x, 6, depth(96), kernel, 2, activation, 8, kernel_regularizer)\r\n\r\n\t# final\r\n\tlast_conv_ch = _depth(backend.int_shape(x)[channel_axis]*6)\r\n\tlast_point_ch = 128#1024\r\n\r\n\tif alpha > 1.0:\r\n\t\tlast_point_ch = _depth(last_point_ch * alpha)\r\n\r\n\tx = layers.Conv2D(last_conv_ch, kernel_size=1, padding='same', use_bias=False, name='Conv_1')(x)\r\n\tx = layers.BatchNormalization(axis=channel_axis, epsilon=1e-3, momentum=0.999, name='Conv_1/BatchNorm')(x)\r\n\tx = activation(x)\r\n\t\r\n\tx = layers.AveragePooling2D(7, 1)(x)\r\n\r\n\tx = layers.Conv2D(last_point_ch, kernel_size=1, padding='same', use_bias=True, name='Conv_2')(x)\r\n\tx = activation(x)\r\n\r\n\tif dropout_rate > 0:\r\n\t  x = layers.Dropout(dropout_rate)(x)\r\n\r\n\tx = layers.Conv2D(2, kernel_size=1, padding='same', name='Logits')(x)\r\n\tx = layers.Flatten()(x)\r\n\tprob = layers.Softmax()(x) \r\n\r\n\r\n\tmodel = tf.keras.Model(inputs=inputs, outputs=prob)\r\n\r\n\treturn model\r\n```\r\n\r\nThe model is trained with quantization-aware training:\r\n\r\n```\r\nimport tensorflow_model_optimization as tfmot\r\nimport tensorflow as tf\r\n\r\nmodel = build_model()\r\nannotated_model = tf.keras.models.clone_model(model, clone_function=custom_quantization)\r\n\r\nwith tfmot.quantization.keras.quantize_scope():\r\n\tmodel = tfmot.quantization.keras.quantize_apply(annotated_model)\r\n\r\n# standard training pipeline\r\n# ...\r\n\r\n```\r\nFinally, the model is quantized:\r\n```\r\nwith tfmot.quantization.keras.quantize_scope():\r\n    model = tf.keras.models.load_model(model_path)\r\n\r\nconverter = tf.lite.TFLiteConverter.from_keras_model(model)\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\nquantized_tflite_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(quantized_tflite_model)\r\n```\r\n\r\n\r\n\r\n### 3. Failure after conversion\r\nSome tensors are not quantized. Other custom models that I had trained before are properly quantized.\r\n\r\n\r\n### 5. (optional) Any other info / logs\r\n**2021-11-17 10:23:37.425715: I tensorflow/lite/tools/optimize/quantize_weights.cc:222] Skipping quantization of tensor model/expanded_conv/depthwise/BatchNorm/FusedBatchNormV3;model/expanded_conv/depthwise/depthwise;model/expanded_conv_5/project/Conv2D because it has fewer than 1024 elements (288).\r\n2021-11-17 10:23:37.425738: I tensorflow/lite/tools/optimize/quantize_weights.cc:222] Skipping quantization of tensor model/expanded_conv/project/Conv2D because it has fewer than 1024 elements (512).\r\n2021-11-17 10:23:37.425744: I tensorflow/lite/tools/optimize/quantize_weights.cc:222] Skipping quantization of tensor model/expanded_conv_1/depthwise/BatchNorm/FusedBatchNormV3;model/expanded_conv_1/depthwise/depthwise;model/expanded_conv_8/project/Conv2D because it has fewer than 1024 elements (648).\r\n2021-11-17 10:23:37.425749: I tensorflow/lite/tools/optimize/quantize_weights.cc:222] Skipping quantization of tensor model/expanded_conv_2/depthwise/BatchNorm/FusedBatchNormV3;model/expanded_conv_2/depthwise/depthwise because it has fewer than 1024 elements (792).\r\n2021-11-17 10:23:37.425753: I tensorflow/lite/tools/optimize/quantize_weights.cc:222] Skipping quantization of tensor model/expanded_conv_3/depthwise/BatchNorm/FusedBatchNormV3;model/expanded_conv_3/depthwise/depthwise because it has fewer than 1024 elements (864).\r\n2021-11-17 10:23:37.425760: I tensorflow/lite/tools/optimize/quantize_weights.cc:222] Skipping quantization of tensor model/Logits/Conv2D because it has fewer than 1024 elements (256).**\r\n\r\n", "comments": []}, {"number": 53093, "title": "tensorflow-macos cannot train model", "body": "**System information**\r\n\r\n- OS Platform and Distribution):macOS 12.1\r\n- TensorFlow installed from (source or binary):tensorflow-macos pip\r\n- TensorFlow version (use command below):2.6\r\n- Python version:3.8\r\n- Bazel version (if compiling from source):\r\n- GPU model and memory: AMD RX6600 8G\r\n\r\n\r\n**Unable to train model**\r\n```\r\nimport tensorflow as tf\r\n\r\nmnist = tf.keras.datasets.mnist\r\n(x_train, y_train), (x_test, y_test) = mnist.load_data()\r\nx_train, x_test = x_train / 255.0, x_test / 255.0\r\nw, h = 28, 28\r\n\r\nx_train = x_train.reshape(x_train.shape[0], w, h, 1)\r\nx_test = x_test.reshape(x_test.shape[0], w, h, 1)\r\n\r\nmodel = tf.keras.models.Sequential([\r\n    tf.keras.layers.Conv2D(filters=64, kernel_size=2, padding='same', activation='relu', input_shape=(28, 28, 1)),\r\n    tf.keras.layers.Flatten(),\r\n    tf.keras.layers.Dense(512, activation=tf.nn.relu),\r\n    tf.keras.layers.Dropout(0.2),\r\n    tf.keras.layers.Dense(10, activation=tf.nn.softmax)\r\n])\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='sparse_categorical_crossentropy',\r\n              metrics=['accuracy'])\r\n\r\nmodel.fit(x_train, y_train, epochs=5)\r\nmodel.evaluate(x_test, y_test)\r\n```\r\n\r\n**Run Information**\r\n```\r\n2021-11-17 16:07:45.954518: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  SSE4.2 AVX AVX2 FMA\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2021-11-17 16:07:45.955017: I tensorflow/core/common_runtime/pluggable_device/pluggable_device_factory.cc:305] Could not identify NUMA node of platform GPU ID 0, defaulting to 0. Your kernel may not have been built with NUMA support.\r\n2021-11-17 16:07:45.955191: I tensorflow/core/common_runtime/pluggable_device/pluggable_device_factory.cc:271] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 0 MB memory) -> physical PluggableDevice (device: 0, name: METAL, pci bus id: <undefined>)\r\nMetal device set to: AMD Radeon RX 6600\r\n\r\nsystemMemory: 16.00 GB\r\nmaxCacheSize: 3.99 GB\r\n\r\n2021-11-17 16:07:46.368598: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:185] None of the MLIR Optimization Passes are enabled (registered 2)\r\nEpoch 1/5\r\n2021-11-17 16:07:46.584915: I tensorflow/core/grappler/optimizers/custom_graph_optimizer_registry.cc:112] Plugin optimizer for device_type GPU is enabled.\r\n2021-11-17 16:07:46.623 python[4372:114284] -[MPSGraph adamUpdateWithLearningRateTensor:beta1Tensor:beta2Tensor:epsilonTensor:beta1PowerTensor:beta2PowerTensor:valuesTensor:momentumTensor:velocityTensor:gradientTensor:name:]: unrecognized selector sent to instance 0x600007d83720\r\n\r\nProcess finished with exit code 139 (interrupted by signal 11: SIGSEGV)\r\n```\r\n\r\n", "comments": ["Hi @Yuri-Su ! Could not find any issue  in 2.7 ,It was throwing AlreadyExistsError in 2.6 (You can match Keras version to Tensorflow version to resolve that).  Attaching [Gist](https://colab.sandbox.google.com/gist/mohantym/042ff221befd4824b51563e8b7889695/github_53093.ipynb) fore reference. \r\nFor further assistance. \r\nPlease post this issue on [keras-team/keras repo.](https://github.com/keras-team/keras/issues)\r\nTo know more see;\r\n[https://discuss.tensorflow.org/t/keras-project-moved-to-new-repository-in-https-github-com-keras-team-keras/1999](https://discuss.tensorflow.org/t/keras-project-moved-to-new-repository-in-https-github-com-keras-team-keras/1999) . Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53093\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53093\">No</a>\n", "This problem was solved in the latest version 2.7, the metal version is 0.3.0. But the adam optimizer still has problems", "I have the same problem by running OP's codes: Adam optimizer would not work. Although SGD works, it does not actually optimize anything, i.e. loss does not improve over epochs.\r\n\r\nIntel iMac 27 (2020, AMD Radeon Pro 5500 XT)\r\n\r\n```\r\n2022-03-26 00:44:34.419170: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  SSE4.2 AVX AVX2 FMA\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2022-03-26 00:44:34.419981: I tensorflow/core/common_runtime/pluggable_device/pluggable_device_factory.cc:305] Could not identify NUMA node of platform GPU ID 0, defaulting to 0. Your kernel may not have been built with NUMA support.\r\n2022-03-26 00:44:34.420349: I tensorflow/core/common_runtime/pluggable_device/pluggable_device_factory.cc:271] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 0 MB memory) -> physical PluggableDevice (device: 0, name: METAL, pci bus id: <undefined>)\r\n2022-03-26 00:44:42.064285: I tensorflow/core/grappler/optimizers/custom_graph_optimizer_registry.cc:113] Plugin optimizer for device_type GPU is enabled.\r\n2022-03-26 00:44:42.113 python[1663:54618] -[MPSGraph adamUpdateWithLearningRateTensor:beta1Tensor:beta2Tensor:epsilonTensor:beta1PowerTensor:beta2PowerTensor:valuesTensor:momentumTensor:velocityTensor:gradientTensor:name:]: unrecognized selector sent to instance 0x60000459da40\r\n```\r\nVersions are as following:\r\n```\r\ntensorflow-macos: tensorflow_macos-2.8.0-cp38-cp38-macosx_11_0_x86_64\r\ntensor flow-metal: tensorflow_metal-0.4.0-cp38-cp38-macosx_11_0_x86_64\r\npython: 3.8\r\nmacOS: 12.3\r\n```\r\n\r\nI have also tried to roll back tensorflow-macos to 2.7 and tensorflow-metal to 0.3.0, as well as mix&match them. Nothing worked.\r\n\r\nMeanwhile, my M1 MacBook Pro works without any problem with the following:\r\n```\r\ntensorflow-macos: tensorflow_macos-2.8.0-cp39-cp39-macosx_11_0_arm64\r\ntensorflow-metal: tensorflow_metal-0.4.0-cp39-cp39-macosx_11_0_arm64\r\npython: 3.9\r\nmacOS: 12.3\r\n```\r\n\r\nSince intel Mac does not have cp39 version for tensorflow-metal, I have no way to test if it is a TF2 problem, metal problem or a macOS 12.3 problem.\r\n\r\nDid some research, seems like M1 Mac used to have this problem but got fixed, and it's only the Intel/AMD Macs having the issue currently. \r\n\r\n@mohantym Looks like it is a tensorflow-macos and tensorflow-metal unique problem."]}, {"number": 53092, "title": "Remove unused header", "body": "`tensorflow/core/lib/core/errors.h` already included", "comments": ["Does it mean that `tensorflow/core/lib/core/errors.h` is forwarding  `tensorflow/core/platform/errors.h`, but these two are not considered as duplicate?", "Looking at the last commit that [touched `core/errors.h`](https://cs.opensource.google/tensorflow/tensorflow/+/22141f949e4ce29bf64b8885f17d27af7e470f86) (22141f949e4ce29bf64b8885f17d27af7e470f86) it seems we should instead remove `core/errors.h`.\r\n\r\nPartial migration", "Yes, 22141f9 seems just deals with `errors.h`, yet there are many other components that got moved from `tensorflow/core/lib/` to `tensorflow/core/platform`", "@mihaimaruseac Could you have a look at the PR? IMHO,  header files in  `tensorflow/core/lib/core` will be moved th `tensorflow/core/platform` in the long run. This PR deals with `tensor_shape.h` and `tensor_shape.cc`", "Was OOO in the past 10 days, sorry for the delay"]}, {"number": 53091, "title": "I got problem when I create Interpreter using TF lite", "body": "<em>Please make sure that this is an issue related to performance of TensorFlow.\r\nAs per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:performance_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Android \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Samsung Galaxy S10+\r\n- TensorFlow installed from (source or binary): \r\n- TensorFlow version (use command below): 2.7\r\n- Python version: 3.8.10\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nHello, \r\nI'm trying to make an app using GPU while training with below example code.\r\nhttps://github.com/tensorflow/examples/tree/master/lite/examples/model_personalization\r\n\r\nplease refer the code above,\r\nwith GPUdelegate(https://www.tensorflow.org/lite/performance/gpu_advanced),\r\nI added \"implementation 'org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly-SNAPSHOT'\" in build.gradle of trasfer_api\r\n    implementation 'org.tensorflow:tensorflow-lite:0.0.0-nightly-SNAPSHOT'\r\n    implementation 'org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly-SNAPSHOT'\r\n    // This dependency adds the necessary TF op support.\r\n    implementation 'org.tensorflow:tensorflow-lite-select-tf-ops:0.0.0-nightly-SNAPSHOT'\r\n\r\nplus I changed LiteMultipleSignatureModel as\r\n  LiteMultipleSignatureModel(ByteBuffer tfLiteModel, int numClasses) {\r\n    // Initialize interpreter with GPU delegate\r\n    Interpreter.Options options = new Interpreter.Options();\r\n    CompatibilityList compatList = new CompatibilityList();\r\n\r\n    if(compatList.isDelegateSupportedOnThisDevice()){\r\n      // if the device has a supported GPU, add the GPU delegate\r\n      GpuDelegate.Options delegateOptions = compatList.getBestOptionsForThisDevice();\r\n      GpuDelegate gpuDelegate = new GpuDelegate(delegateOptions);\r\n      options.addDelegate(gpuDelegate);\r\n    } else {\r\n      // if the GPU is not supported, run on 4 threads\r\n      options.setNumThreads(4);\r\n    }\r\n\r\n    this.interpreter = new Interpreter(tfLiteModel, options);\r\n    this.numClasses = numClasses;\r\n  }\r\n\r\nI tried to start the app and I found this device support GPU delegation but it failed with fatal exception as\r\n2021-06-11 09:20:23.894 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Created TensorFlow Lite delegate for GPU.\r\n2021-06-11 09:20:23.899 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Initialized TensorFlow Lite runtime.\r\n2021-06-11 09:20:23.969 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Created TensorFlow Lite delegate for select TF ops.\r\n2021-06-11 09:20:23.972 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: TfLiteFlexDelegate delegate: 0 nodes delegated out of 79 nodes with 0 partitions.\r\n2021-06-11 09:20:23.972 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 2 node(s) with delegate (TfLiteFlexDelegate) node, yielding 3 partitions.\r\n2021-06-11 09:20:23.990 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 2 node(s) with delegate (TfLiteFlexDelegate) node, yielding 3 partitions.\r\n2021-06-11 09:20:23.990 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 1 node(s) with delegate (TfLiteFlexDelegate) node, yielding 2 partitions.\r\n2021-06-11 09:20:23.990 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 4 node(s) with delegate (TfLiteFlexDelegate) node, yielding 3 partitions.\r\n2021-06-11 09:20:23.991 8460-8460/org.tensorflow.lite.examples.transfer D/AndroidRuntime: Shutting down VM\r\n2021-06-11 09:20:23.894 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Created TensorFlow Lite delegate for GPU.\r\n2021-06-11 09:20:23.899 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Initialized TensorFlow Lite runtime.\r\n2021-06-11 09:20:23.969 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Created TensorFlow Lite delegate for select TF ops.\r\n2021-06-11 09:20:23.972 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: TfLiteFlexDelegate delegate: 0 nodes delegated out of 79 nodes with 0 partitions.\r\n2021-06-11 09:20:23.972 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 2 node(s) with delegate (TfLiteFlexDelegate) node, yielding 3 partitions.\r\n2021-06-11 09:20:23.990 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 2 node(s) with delegate (TfLiteFlexDelegate) node, yielding 3 partitions.\r\n2021-06-11 09:20:23.990 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 1 node(s) with delegate (TfLiteFlexDelegate) node, yielding 2 partitions.\r\n2021-06-11 09:20:23.990 8460-8460/org.tensorflow.lite.examples.transfer I/tflite: Replacing 4 node(s) with delegate (TfLiteFlexDelegate) node, yielding 3 partitions.\r\n2021-06-11 09:20:23.991 8460-8460/org.tensorflow.lite.examples.transfer D/AndroidRuntime: Shutting down VM\r\n2021-06-11 09:20:23.992 8460-8460/org.tensorflow.lite.examples.transfer E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: org.tensorflow.lite.examples.transfer, PID: 8460\r\n    java.lang.IllegalArgumentException: Internal error: Error applying delegate: \r\n        at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.init(NativeInterpreterWrapper.java:93)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:66)\r\n        at org.tensorflow.lite.NativeInterpreterWrapperExperimental.<init>(NativeInterpreterWrapperExperimental.java:44)\r\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:226)\r\n        at org.tensorflow.lite.examples.transfer.api.LiteMultipleSignatureModel.<init>(LiteMultipleSignatureModel.java:63)\r\n        at org.tensorflow.lite.examples.transfer.api.TransferLearningModel.<init>(TransferLearningModel.java:114)\r\n        at org.tensorflow.lite.examples.transfer.TransferLearningModelWrapper.<init>(TransferLearningModelWrapper.java:46)\r\n        at org.tensorflow.lite.examples.transfer.CameraFragment.onCreate(CameraFragment.java:332)\r\n\r\nat the first, this app started to create gpu delegate but it worked as TfLiteFlexDelegate. I guess this is not proper.\r\n\r\nI also tried tfLiteModel to set nitivOrder like tfLiteModel.order(ByteOrder.nativeOrder() but got same result.\r\n\r\nplease help me out to find the way to resolve this problem :)\r\n\r\nThank you\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\n**Standalone code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["@haozha111 FYI\r\n\r\nWe do not currently support GPU acceleration on the models generated for personalization/on-device training. These graphs have some advanced data structures & properties that the mobile GPU backend can't currently handle :-). We are internally investigating ways to solve this in the coming months."]}, {"number": 53089, "title": "Query regarding contributing", "body": "i have reformatted all files in python directory of tensorflow with black and this is it's link:-https://github.com/Naman23-coder/tensorflow/tree/Naman23-coder ,should i open a pull request?", "comments": ["@mohantym I have closed this issue as my commits has 500k additions and 600k deletions so this might create bugs in tensorflow", "Hi @Naman23-coder ! Sorry for the late response! Please create an issue if you face any issue raising [pull requests](https://opensource.com/article/19/7/create-pull-request-github). Thanks!"]}, {"number": 53088, "title": "tf.distribute.MirroredStrategy makes wrong outputs with tf.keras.layers.Dense", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution : Linux Ubuntu 18.04\r\n- TensorFlow installed from binary:\r\n- TensorFlow version: 2.6.2\r\n- Python version: 3.8\r\n- CUDA/cuDNN version: cuda 11.3,  8.2.1\r\n- GPU model and memory:  RTX 5000, 2 EA, 16gb\r\n\r\nwhen I'm using mirroredstrategy, the model makes wrong outputs.\r\n\r\n![image](https://user-images.githubusercontent.com/9550691/142134915-29371557-c661-4856-9f35-fdb70976ca36.png)\r\n\r\nthis is logs and the code is like\r\n\r\n![image](https://user-images.githubusercontent.com/9550691/142134955-8adc2634-9f9e-483b-b151-065643611097.png)\r\n\r\nit's part of music transformer.\r\n\r\nthe logits changes when I using 2 gpus.\r\nI don't no why it make wrong output shape.\r\n\r\nthere is no problem with 1 gpu.\r\n\r\nI don't no why it works like this.", "comments": ["Oh I think I make mistakes. subcalssing code is wrong", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53088\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53088\">No</a>\n"]}, {"number": 53087, "title": "tflite with C/C++ on Android, iOS, Linux, MacOS: Is it possible? How to do it?", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macos\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): n/a\r\n- TensorFlow version: latest\r\n- Python version: n/a\r\n- Installed using virtualenv? pip? conda?: n/a\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n**Describe the problem**\r\n\r\nHi thanks for the wonderful tf and tflite! I need to use it in Android and iOS apps, and also test my code on MacOS and Linux. Therefore, I need the C++ library of tflite on all these four platforms. I wonder what should I do to compile it?\r\n\r\np.s. I have searched and found related issues, but they seem to be outdated, so I create a new one. I have also read all documents, but get confused since most of them creates libs for java/swift/objc/c/..., instead of C++. I have even seen [doc saying](https://www.tensorflow.org/lite/guide/inference#load_and_run_a_model_in_c) C++ on ios must use bazel - but I do not know what part should use bazel - is it saying *all my code* must use bazel, or simply compile with bazel?\r\n\r\nIt is best if I can do it with C++. If not possible, I can accept C.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nn/a\r\n\r\n**Any other info / logs**\r\nn/a", "comments": ["@fzyzcjy ,\r\nCan you please take a look at this [link](https://www.tensorflow.org/install/lang_c) for installation of tensorflow for C.It helps.Thanks", "@tilakrayal No I need tflite, not tensorflow.\r\n\r\nIn addition, it would be best if I can get *static* lib instead of *dynamic* lib.", "@fzyzcjy ,\r\nPlease refer this official [document](https://www.tensorflow.org/lite/guide/build_cmake) for the installation.Thanks", "Thank you. I will have a try.", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53087\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53087\">No</a>\n"]}, {"number": 53086, "title": "assets/vocab.txt; No such file or directory when loading/saving BERT models from TFhub", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 21.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.7.0-rc1-69-gc256c071bb2 2.7.0\r\n- Python version: 3.9\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n**Describe the current behavior**\r\nUsing models https://tfhub.dev/tensorflow/bert_en_uncased_L-12_H-768_A-12/4 and https://tfhub.dev/google/experts/bert/wiki_books/squad2/2, `tf.saved_model.save` fails with error below.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/tensorflow/test_load_save.py\", line 30, in <module>\r\n    tf.saved_model.save(model, model_path)\r\n  File \"/home/tensorflow/.venv_tf27/lib/python3.9/site-packages/tensorflow/python/saved_model/save.py\", line 1280, in save\r\n    save_and_return_nodes(obj, export_dir, signatures, options)\r\n  File \"/home/tensorflow/.venv_tf27/lib/python3.9/site-packages/tensorflow/python/saved_model/save.py\", line 1327, in save_and_return_nodes\r\n    builder_impl.copy_assets_to_destination_dir(asset_info.asset_filename_map,\r\n  File \"/home/tensorflow/.venv_tf27/lib/python3.9/site-packages/tensorflow/python/saved_model/builder_impl.py\", line 781, in copy_assets_to_destination_dir\r\n    file_io.copy(asset_source_filepath, asset_destination_filepath)\r\n  File \"/home/tensorflow/.venv_tf27/lib/python3.9/site-packages/tensorflow/python/lib/io/file_io.py\", line 589, in copy\r\n    copy_v2(oldpath, newpath, overwrite)\r\n  File \"/home/tensorflow/.venv_tf27/lib/python3.9/site-packages/tensorflow/python/lib/io/file_io.py\", line 583, in copy_v2\r\n    _pywrap_file_io.CopyFile(\r\ntensorflow.python.framework.errors_impl.NotFoundError: /tmp/tmps54xx3u2/assets/vocab.txt; No such file or directory\r\n```\r\n\r\n\r\n**Describe the expected behavior**\r\nNo errors\r\n\r\n**[Contributing](https://www.tensorflow.org/community/contribute)**\r\n\r\n- Do you want to contribute a PR? (yes/no):\r\n- Briefly describe your candidate solution(if contributing):\r\n\r\n**Standalone code to reproduce the issue**\r\n```\r\nmodel_name = \"./models/bert_en_uncased_L-12_H-768_A-12_4.tar.gz\"\r\n\r\nif tarfile.is_tarfile(model_name):\r\n    with tempfile.TemporaryDirectory() as td:\r\n        with tarfile.open(model_name, \"r\") as tar:\r\n            tar.extractall(path=td)\r\n        model = tf.saved_model.load(td)\r\n\r\nwith tempfile.TemporaryDirectory() as td:\r\n    model_path = os.path.join(td, \"saved_model\")\r\n    tf.saved_model.save(model, model_path)\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n", "comments": ["Hi @sfvaroglu! Could you try again by loading the model using using [hub API](https://tfhub.dev/tensorflow/bert_en_uncased_L-12_H-768_A-12/4) ?", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53086\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/53086\">No</a>\n"]}]