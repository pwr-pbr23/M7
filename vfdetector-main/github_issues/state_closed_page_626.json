[{"number": 34857, "title": "How to add \"TFLite_Detection_Postprocess\" op in Keras model when using tf2.x", "body": "In tf1.x, I used `export_tflite_ssd_graph.py` function in the `object_detection` module to convert model adding`TFLite_Detection_Postprocess` op, but now, I write model use Keras in tf2.x, and there are no documents to tell how to do the conversion.", "comments": ["@JoelTsui Do you have any model that you want to convert? There is a [`new expeimental_new_converter`](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/examples/experimental_new_converter) that you could try.\r\n\r\nPlease let us know more details and a standalone code to reproduce the issue. Thanks!", "The problem is not about \"convert\", but about adding `TFLite_Detection_Postprocess` op when converting", "@JoelTsui Can you please share a standalone code to reproduce the issue? Thanks!", "@JoelTsui Can you please share a standalone code to reproduce the issue? Thanks!", "Closing due to lack of recent activity. Please update the issue when new information becomes available, and we will reopen the issue. Thanks!"]}, {"number": 34856, "title": "Push up Switch ops in grappler", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIf we have a chain of ops  `-> A -> B -> Switch ->`, both A and B will need to be evaluated regardless of the outcome of the Switch op. In this case, we can push up the Switch op so it becomes ` -> Switch -> A -> B -> `. That way, neither A or B needs to be evaluated if the wrong branch of the Switch is chosen. This would simplify the use of `tf.cond` by not requiring all conditional ops be created in the supplied true_fn or false_fn.\r\n\r\n**Will this change the current api? How?**\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\nUsers of tf.cond.\r\n\r\n**Any Other info.**\r\n", "comments": ["@guoshimin \r\nDo you have any use case that requires the feature you are interested in? Please feel free to submit a PR if you have use cases that supports that feature.Thanks!", "Well it's still a feature request.\n\nOn Thu, Jan 9, 2020, 4:35 AM Alfred Sorten Wolf <notifications@github.com>\nwrote:\n\n> It has been 14 days with no activity and the awaiting response label was\n> assigned. Is this still an issue?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/34856?email_source=notifications&email_token=ACZ5YHPIPVQVQFQYUXYS3Z3Q44KYJA5CNFSM4JVVSD6KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEIQE3XI#issuecomment-572542429>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ACZ5YHMC3UE4A2OZBSAD73LQ44KYJANCNFSM4JVVSD6A>\n> .\n>\n", "Hi There,\n\n We are checking to see if you still need help on this, as you are using an older version of tensorflow which is officially considered end of life . We recommend that you upgrade to the latest 2.x version and let us know if the issue still persists in newer versions. Please open a new issue for any help you need against 2.x, and we will get you the right help. \n\n This issue will be closed automatically 7 days from now. If you still need help with this issue, please provide us with more information."]}, {"number": 34855, "title": "[tflite] fix a dilated dw conv problem in tflite_convert", "body": "In tflite_convert/toco, it's assumed that there is a BiasAdd\r\nbefore or after a BatchToSpaceND. However, in some frozen\r\ngraph_def files, e.g., DeepLab V3 mobilenet v2 coco\r\ncheckpoints [1], it's a fused BatchNormalization rather than\r\na BiasAdd.\r\n\r\nThis patch adds the BatchNorm case.\r\n\r\n[1] https://github.com/tensorflow/models/blob/master/research/deeplab/g3doc/model_zoo.md", "comments": ["@daverim Can you please take a look at this PR? Thanks!", "this fixed https://github.com/tensorflow/tensorflow/issues/29509 in the original non-MILR `tflite_covert`", "We're no longer pushing updates to the TOCO path, any chance this needs to be added to the MLIR-based conversion path?", "@jdduke The MLIR-based conversion could handle this case already. So, I'll close this."]}, {"number": 34854, "title": "What logging level do deprecation alerts belong to in python-tensorflow?", "body": "Hello everyone, \r\n\r\nI was looking around the documentation and can't seem to find the specific logging level that deprecation warnings live on (e.g. `The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.`).\r\n\r\nFrom the documentation here https://www.tensorflow.org/api_docs/python/tf/compat/v1/logging - I see that there are 5 distinct levels. `DEBUG = 10`, `ERROR = 40`, `FATAL = 50`, `INFO = 20`, `WARN = 30`.\r\n\r\nBut does anyone know the specific level that deprecation alerts belong to? And if so, is the level static across different versions of tensorflow? Or does the level fluctuate between versions?\r\n\r\nAll the best, Alan.\r\n\r\n", "comments": ["Deprecation messages are needed to inform people who want to use an actual version of TensorFlow what is going to happen in the future, and give them time to adapt.\r\nThis belongs to level `WARN = 30`", "Thank you for your response. Some followup questions that I have related to this matter are:\r\n\r\n**Question 1)** What exactly is the difference between the two distinct ways I've seen people use to set logging level in tensorflow (for python 3)?\r\n\r\n```\r\n# I have seen some people do the following\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '3'\r\n\r\n# I have seen other people do the following\r\ntf.compat.v1.logging.set_verbosity(tf.compat.v1.logging.ERROR)\r\n```\r\n\r\nPersonal testing also reveals that both seem to interact differently depending on the message involved. What are the differences between the two, and when am I supposed to use each one?\r\n\r\n**Question 2)** What are the valid values that one can set for the environmental variable `TF_CPP_MIN_LOG_LEVEL`?\r\n\r\n**Question 3)** Are there anymore significant ways of setting the logging level in tensorflow (for python 3), that you think I should be aware of?", "As for all the questions please go through this [question](https://stackoverflow.com/questions/35911252/disable-tensorflow-debugging-information/38645250#38645250) in stack overflow, especially the second answer which should help you understand your answer clearly."]}, {"number": 34853, "title": "Tf lite gpu unity", "body": "Changes to the unity Interpreter script to allow optional use of the GPU delegate on android for tensorflow, and corresponding updates to the readme to explain the additional build changes required.\r\n\r\n", "comments": ["\nThanks for your pull request. It looks like this may be your first contribution to a Google open source project (if not, look below for help). Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit <https://cla.developers.google.com/> to sign.**\n\nOnce you've signed (or fixed any issues), please reply here with `@googlebot I signed it!` and we'll verify it.\n\n----\n\n#### What to do if you already signed the CLA\n\n##### Individual signers\n\n*   It's possible we don't have your GitHub username or you're using a different email address on your commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n\n##### Corporate signers\n\n*   Your company has a Point of Contact who decides which employees are authorized to participate. Ask your POC to be added to the group of authorized contributors. If you don't know who your Point of Contact is, direct the Google project maintainer to [go/cla#troubleshoot](http://go/cla#troubleshoot) ([Public version](https://opensource.google/docs/cla/#troubleshoot)).\n*   The email used to register you as an authorized contributor must be the email used for the Git commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n*   The email used to register you as an authorized contributor must also be [attached to your GitHub account](https://github.com/settings/emails).\n\t\t\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34853) for more info**.\n\n<!-- need_sender_cla -->", "@googlebot I signed it!", "CLAs look good, thanks!\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34853) for more info**.\n\n<!-- ok -->", "hmm, seems like the delegate doesn't just work as is as well as I thought. On further inspection it seems the delegate failed to initialise properly and then it fell back to the cpu, which is why I thought it worked the first time. I'll continue investigating, but we should probably close this pull request as the scope may be larger"]}, {"number": 34852, "title": "Introducing BatchedNMS and CombinedNMS GPU ops", "body": "This PR adds BatchedNMS op, which uses significantly less memory than GPUNMSV[234] ops at the expense of some performance for very small batch sizes. A GPU implementation of CombinedNMS op using BatchedNMS kernels is also included. GPU CombinedNMS improve SSD images/s about 50% with respect to multi-class CPU NMS ops and about 4x vs CPU CombinedNMS implementation", "comments": ["@sanjoy could you help to take a look? Thanks.", "@pkanwar23 and @aaroey please ask your internal teams to give these ops a try.", "@sanjoy, @chsigg Can you please take a look at this PR? Thanks!", "@samikama Can you please check failed build errors? Thanks!", "@gbaned build errors are unrelated with this PR. @sanjoy Will there be a review of this?", "We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for all the commit author(s) or Co-authors.  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\nIn order to pass this check, please resolve this problem and then comment `@googlebot I fixed it.`. If the bot doesn't comment, it means it doesn't think anything has changed.\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34852) for more info**.\n\n<!-- need_author_cla -->", "@gbaned I merged with current master to fix the compilation issues. Earlier issues were because master at the time of PR was not compiling.", "@googlebot I fixed it.", "@samikama  please sign CLA. Thanks!", "@samikama Can you please sign CLA and resolve conflicts? Thanks!", "@cliffwoolley CLAs from NVIDIA side are missing. Do you want me to close this?\r\n", "I see this was auto-closed because of the CLA mismatches; FYI we are still looking into how to move forward with this one and will open a new PR to make the CLA bots happy if necessary as soon as we have a plan solidified.  /cc @reedwm @nluehr "]}, {"number": 34851, "title": "Attempting to fetch value instead of handling error Internal: no supported devices found for platform CUDA", "body": "I have\r\n\r\n```\r\n$ module list\r\nCurrently Loaded Modulefiles:\r\n  1) python3/3.6.5       2) cuda/10.0           3) tensorflow/1.13.1   4) miniconda/4.7.5\r\n```\r\n\r\n\r\nand I get this error:\r\n\r\n```\r\n$ python mouse.py \r\nDLC loaded in light mode; you cannot use any GUI (labeling, relabeling and standalone GUI)\r\n/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04/training-datasets/iteration-0/UnaugmentedDataSet_openfieldDec4  already exists!\r\n/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04/labeled-data/m3v1mp4/CollectedData_Pranav.h5  not found (perhaps not annotated)\r\nAnnotation data was not found by splitting video paths (from config['video_sets']). An alternative route is taken...\r\nThe following folders were found: ['m4s1']\r\n/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04/dlc-models/iteration-0/openfieldDec4-trainset95shuffle1  already exists!\r\n/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04/dlc-models/iteration-0/openfieldDec4-trainset95shuffle1//train  already exists!\r\n/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04/dlc-models/iteration-0/openfieldDec4-trainset95shuffle1//test  already exists!\r\nThe training dataset is successfully created. Use the function 'train_network' to start training. Happy training!\r\nConfig:\r\n{'all_joints': [[0], [1], [2], [3]],\r\n 'all_joints_names': ['snout', 'leftear', 'rightear', 'tailbase'],\r\n 'batch_size': 1,\r\n 'bottomheight': 400,\r\n 'crop': True,\r\n 'crop_pad': 0,\r\n 'cropratio': 0.4,\r\n 'dataset': 'training-datasets/iteration-0/UnaugmentedDataSet_openfieldDec4/openfield_Pranav95shuffle1.mat',\r\n 'dataset_type': 'imgaug',\r\n 'deterministic': False,\r\n 'display_iters': 1000,\r\n 'fg_fraction': 0.25,\r\n 'global_scale': 0.8,\r\n 'init_weights': '/projectnb/dnn-motion/jalal/.conda/envs/deeplabcut/lib/python3.6/site-packages/deeplabcut/pose_estimation_tensorflow/models/pretrained/resnet_v1_50.ckpt',\r\n 'intermediate_supervision': False,\r\n 'intermediate_supervision_layer': 12,\r\n 'leftwidth': 400,\r\n 'location_refinement': True,\r\n 'locref_huber_loss': True,\r\n 'locref_loss_weight': 0.05,\r\n 'locref_stdev': 7.2801,\r\n 'log_dir': 'log',\r\n 'max_input_size': 1500,\r\n 'mean_pixel': [123.68, 116.779, 103.939],\r\n 'metadataset': 'training-datasets/iteration-0/UnaugmentedDataSet_openfieldDec4/Documentation_data-openfield_95shuffle1.pickle',\r\n 'min_input_size': 64,\r\n 'minsize': 100,\r\n 'mirror': False,\r\n 'multi_step': [[0.005, 10000],\r\n                [0.02, 430000],\r\n                [0.002, 730000],\r\n                [0.001, 1030000]],\r\n 'net_type': 'resnet_50',\r\n 'num_joints': 4,\r\n 'optimizer': 'sgd',\r\n 'pos_dist_thresh': 17,\r\n 'project_path': '/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04',\r\n 'regularize': False,\r\n 'rightwidth': 400,\r\n 'save_iters': 50000,\r\n 'scale_jitter_lo': 0.5,\r\n 'scale_jitter_up': 1.25,\r\n 'scoremap_dir': 'test',\r\n 'shuffle': True,\r\n 'snapshot_prefix': '/projectnb/ivcgroup/jalal/mouse10k/openfield-Pranav-2019-12-04/dlc-models/iteration-0/openfieldDec4-trainset95shuffle1/train/snapshot',\r\n 'stride': 8.0,\r\n 'topheight': 400,\r\n 'weigh_negatives': False,\r\n 'weigh_only_present_joints': False,\r\n 'weigh_part_predictions': False,\r\n 'weight_decay': 0.0001}\r\nStarting with imgaug pose-dataset loader.\r\nBatch Size is 1\r\nInitializing ResNet\r\nWARNING:tensorflow:From /share/pkg.7/tensorflow/1.13.1/install/lib/site-packages/../python3.6-gpu/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\nWARNING:tensorflow:From /share/pkg.7/tensorflow/1.13.1/install/lib/site-packages/../python3.6-gpu/site-packages/tensorflow/python/ops/losses/losses_impl.py:209: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.cast instead.\r\nLoading ImageNet-pretrained resnet_50\r\n2019-12-04 23:41:20.555301: F tensorflow/stream_executor/lib/statusor.cc:34] Attempting to fetch value instead of handling error Internal: no supported devices found for platform CUDA\r\nAborted\r\n```\r\n\r\n\r\nHow can I fix it?\r\n\r\n```\r\n$ uname -a\r\nLinux scc-c08 3.10.0-957.27.2.el7.x86_64 #1 SMP Mon Jul 29 17:46:05 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n\r\n$ lsb_release -a\r\nLSB Version:\t:core-4.1-amd64:core-4.1-noarch:cxx-4.1-amd64:cxx-4.1-noarch:desktop-4.1-amd64:desktop-4.1-noarch:languages-4.1-amd64:languages-4.1-noarch:printing-4.1-amd64:printing-4.1-noarch\r\nDistributor ID:\tCentOS\r\nDescription:\tCentOS Linux release 7.5.1804 (Core) \r\nRelease:\t7.5.1804\r\nCodename:\tCore\r\n```\r\n", "comments": ["problem is I was using GPU0 which was busy and after setting it to GPU1, it was fixed!", "Hello!  I'm trying to use Stylegan with tensorflow and I got this same error.  I have 2 GPUs.  Can you explain to me how you set it to GPU1 and fixed the issue?"]}, {"number": 34850, "title": " Error: slice index 0 of dimension 0 out of bounds", "body": "@ravikyram \r\nHi, I am working on tensorflow 2.0  and getting an error at line 3 while running the model  \r\n\r\n1) lstm_cell =tf.keras.layers.LSTM(units=hidden_unit)\r\n2) lstm_cell = tf.nn.RNNCellDropoutWrapper(lstm_cell, output_keep_prob=self.dropout_keep_prob)\r\n3) self._initial_state = lstm_cell.get_initial_state(128, tf.float32)\r\n\r\nGot ERROR at line 3\r\nValueError: slice index 0 of dimension 0 out of bounds. for 'strided_slice' (op: 'StridedSlice') with input shapes: [0], [1], [1], [1] and with computed input tensors: input[1] = <0>, input[2] = <1>, input[3] = <1>.\r\nmay I know why I am getting this error?\r\n", "comments": ["**lstm_cell =tf.keras.layers.LSTMCell(units=hidden_unit)**\r\nlstm_cell = tf.nn.RNNCellDropoutWrapper(lstm_cell, output_keep_prob=self.dropout_keep_prob)\r\nself._initial_state = lstm_cell.get_initial_state(128, tf.float32)\r\n\r\nGot ERROR at line 3\r\nValueError: slice index 0 of dimension 0 out of bounds. for 'strided_slice' (op: 'StridedSlice') with input shapes: [0], [1], [1], [1] and with computed input tensors: input[1] = <0>, input[2] = <1>, input[3] = <1>.\r\nmay I know why I am getting this error?", "Please provide details about what platform you are using (operating system, architecture). Also include your TensorFlow version. Also, did you compile from source or install a binary?\r\n\r\nPlease, share simple standalone code to reproduce the issue in our environment. It helps us in localizing the issue faster. If you are unclear what to include see the issue template displayed in [the Github new issue template](https://github.com/tensorflow/tensorflow/issues/new/choose).\r\n\r\nWe ask for this in the issue submission template, because it is really difficult to help without that information. Thanks!\r\n", "Running against Tensorflow 2.0 and getting error below \r\n\r\nlstm_cell =tf.keras.layers.LSTMCell(units=hidden_unit)\r\nlstm_cell = tf.nn.RNNCellDropoutWrapper(lstm_cell, output_keep_prob=self.dropout_keep_prob)\r\n\r\n**self._initial_state = lstm_cell.get_initial_state(self.batch_size, tf.float32)**\r\n\t\t\r\ninputs = [tf.squeeze(input_, [1]) for input_ in tf.split(pooled_concat,num_or_size_splits=int(reduced),axis=1)]\r\nreturn_state =tf.keras.layers.RNN(lstm_cell, inputs, initial_state=self._initial_state,return_sequences=True, return_state=True)\r\noutput = return_state[0]\r\nwith tf.compat.v1.variable_scope('Output'):\r\n\t\t\ttf.compat.v1.get_variable_scope().reuse_variables()\r\n\t\t\tone = tf.ones([1, hidden_unit], tf.float32)\r\n\t\t\tfor i in range(1,len(outputs)):\r\n\t\t\t\tind = self.real_len < (i+1)\r\n\t\t\t\tind = tf.cast(ind, dtype=tf.float32)\r\n\t\t\t\tind = tf.expand_dims(ind, -1)\r\n\t\t\t\tmat = tf.matmul(ind, one)\r\n\t\t\t\toutput = tf.add(tf.multiply(output, mat),tf.multiply(outputs[i], 1.0 - mat))\r\n\r\nGot ERROR at bullet point line \r\nValueError: slice index 0 of dimension 0 out of bounds. for 'strided_slice' (op: 'StridedSlice') with input shapes: [0], [1], [1], [1] and with computed input tensors: input[1] = <0>, input[2] = <1>, input[3] = <1>.\r\nmay I know why I am getting this error?\r\n", "@niranjan8129 \r\n\r\nLooks like code is incomplete.I am seeing below error.(`NameError: name 'hidden_unit' is not defined`). Can you please help me with the reproducible code in our environment or colab link. It helps us in localizing the issue faster. Thanks!", "@ravikyram ravikyram \r\n{\r\n    \"batch_size\": 128,\r\n    \"dropout_keep_prob\": 0.5,\r\n    \"embedding_dim\": 300,\r\n    \"evaluate_every\": 200,\r\n    \"filter_sizes\": \"3,4,5\",\r\n    \"hidden_unit\": 300,\r\n    \"l2_reg_lambda\": 0.0,\r\n    \"max_pool_size\": 4,\r\n    \"non_static\": false,\r\n    \"num_epochs\": 1,\r\n    \"num_filters\": 32 \r\n}\r\n", "FULL code  for Tensorflow 2.0 version\r\n\t\r\ndef __init__(self, embedding_mat, non_static, hidden_unit, sequence_length, max_pool_size,\r\n\t\tnum_classes, embedding_size, filter_sizes, num_filters, l2_reg_lambda=0.0):\r\n\r\n\r\n\t\tself.input_x = tf.compat.v1.placeholder(tf.int32, [None, sequence_length], name='input_x')\r\n\t\tself.input_y = tf.compat.v1.placeholder(tf.float32, [None, num_classes], name='input_y')\r\n\t\tself.dropout_keep_prob = tf.compat.v1.placeholder(tf.float32, name='dropout_keep_prob')\r\n\t\tself.batch_size = tf.compat.v1.placeholder(tf.int32, [])\r\n\t\tself.pad = tf.compat.v1.placeholder(tf.float32, [None, 1, embedding_size, 1], name='pad')\r\n\t\tself.real_len = tf.compat.v1.placeholder(tf.int32, [None], name='real_len')\r\n\r\n\t\tl2_loss = tf.constant(0.0)\r\n\r\n\t\twith tf.device('/cpu:0'), tf.compat.v1.name_scope('embedding'):\r\n\t\t\tif not non_static:\r\n\t\t\t\tW = tf.constant(embedding_mat, name='W')\r\n\t\t\telse:\r\n\t\t\t\tW = tf.Variable(embedding_mat, name='W')\r\n\t\t\tself.embedded_chars = tf.nn.embedding_lookup(params=W, ids=self.input_x)\r\n\t\t\temb = tf.expand_dims(self.embedded_chars, -1)\r\n\r\n\t\tpooled_concat = []\r\n\t\treduced = np.int32(np.ceil((sequence_length) * 1.0 / max_pool_size))\r\n\t\t\r\n\t\tfor i, filter_size in enumerate(filter_sizes):\r\n\t\t\twith tf.compat.v1.name_scope('conv-maxpool-%s' % filter_size):\r\n\r\n\t\t\t\t# Zero paddings so that the convolution output have dimension batch x sequence_length x emb_size x channel\r\n\t\t\t\tnum_prio = (filter_size-1) // 2\r\n\t\t\t\tnum_post = (filter_size-1) - num_prio\r\n\t\t\t\tpad_prio = tf.concat([self.pad] * num_prio,1)\r\n\t\t\t\tpad_post = tf.concat([self.pad] * num_post,1)\r\n\t\t\t\temb_pad = tf.concat([pad_prio, emb, pad_post],1)\r\n\r\n\t\t\t\tfilter_shape = [filter_size, embedding_size, 1, num_filters]\r\n\t\t\t\tW = tf.Variable(tf.random.truncated_normal(filter_shape, stddev=0.1), name='W')\r\n\t\t\t\tb = tf.Variable(tf.constant(0.1, shape=[num_filters]), name='b')\r\n\t\t\t\tconv = tf.nn.conv2d(input=emb_pad, filters=W, strides=[1, 1, 1, 1], padding='VALID', name='conv')\r\n\r\n\t\t\t\th = tf.nn.relu(tf.nn.bias_add(conv, b), name='relu')\r\n\r\n\t\t\t\t# Maxpooling over the outputs\r\n\t\t\t\tpooled = tf.nn.max_pool2d(input=h, ksize=[1, max_pool_size, 1, 1], strides=[1, max_pool_size, 1, 1], padding='SAME', name='pool')\r\n\t\t\t\tpooled = tf.reshape(pooled, [-1, reduced, num_filters])\r\n\t\t\t\tpooled_concat.append(pooled)\r\n\r\n\t\tpooled_concat = tf.concat(pooled_concat,2)\r\n\t\tpooled_concat = tf.nn.dropout(pooled_concat, 1 - (self.dropout_keep_prob))\r\n\r\n\r\n\t\tlstm_cell =tf.keras.layers.LSTMCell(units=hidden_unit)\r\n\t\tlstm_cell = tf.nn.RNNCellDropoutWrapper(lstm_cell, output_keep_prob=self.dropout_keep_prob)\r\n\r\n\t\tself._initial_state = lstm_cell.get_initial_state(self.batch_size, tf.float32)\r\n\t\t\r\n\t\tinputs = [tf.squeeze(input_, [1]) for input_ in tf.split(pooled_concat,num_or_size_splits=int(reduced),axis=1)]\r\n\t\treturn_state =tf.keras.layers.RNN(lstm_cell, inputs, initial_state=self._initial_state,return_sequences=True, return_state=True)\r\n\t\t# Collect the appropriate last words into variable output (dimension = batch x embedding_size)\r\n\t\toutput = return_state[0]\r\n\t\twith tf.compat.v1.variable_scope('Output'):\r\n\t\t\ttf.compat.v1.get_variable_scope().reuse_variables()\r\n\t\t\tone = tf.ones([1, hidden_unit], tf.float32)\r\n\t\t\tfor i in range(1,len(outputs)):\r\n\t\t\t\tind = self.real_len < (i+1)\r\n\t\t\t\tind = tf.cast(ind, dtype=tf.float32)\r\n\t\t\t\tind = tf.expand_dims(ind, -1)\r\n\t\t\t\tmat = tf.matmul(ind, one)\r\n\t\t\t\toutput = tf.add(tf.multiply(output, mat),tf.multiply(outputs[i], 1.0 - mat))\r\n\r\n\t\twith tf.compat.v1.name_scope('output'):\r\n\t\t\tself.W = tf.Variable(tf.random.truncated_normal([hidden_unit, num_classes], stddev=0.1), name='W')\r\n\t\t\tb = tf.Variable(tf.constant(0.1, shape=[num_classes]), name='b')\r\n\t\t\tl2_loss += tf.nn.l2_loss(W)\r\n\t\t\tl2_loss += tf.nn.l2_loss(b)\r\n\t\t\tself.scores = tf.compat.v1.nn.xw_plus_b(output, self.W, b, name='scores')\r\n\t\t\tself.predictions = tf.argmax(input=self.scores, axis=1, name='predictions')\r\n\r\n\t\twith tf.compat.v1.name_scope('loss'):\r\n\t\t\tlosses = tf.nn.softmax_cross_entropy_with_logits(labels = tf.stop_gradient( self.input_y), logits = self.scores) #  only named arguments accepted            \r\n\t\t\tself.loss = tf.reduce_mean(input_tensor=losses) + l2_reg_lambda * l2_loss\r\n\r\n\t\twith tf.compat.v1.name_scope('accuracy'):\r\n\t\t\tcorrect_predictions = tf.equal(self.predictions, tf.argmax(input=self.input_y, axis=1))\r\n\t\t\tself.accuracy = tf.reduce_mean(input_tensor=tf.cast(correct_predictions, \"float\"), name='accuracy')\r\n\r\n\t\twith tf.compat.v1.name_scope('num_correct'):\r\n\t\t\tcorrect = tf.equal(self.predictions, tf.argmax(input=self.input_y, axis=1))\r\n\t\t\tself.num_correct = tf.reduce_sum(input_tensor=tf.cast(correct, 'float'))\r\n\r\nGot ERROR at bullet point line\r\nValueError: slice index 0 of dimension 0 out of bounds. for 'strided_slice' (op: 'StridedSlice') with input shapes: [0], [1], [1], [1] and with computed input tensors: input[1] = <0>, input[2] = <1>, input[3] = <1>.\r\nmay I know why I am getting this error?", "@ravikyram   here you can clone code and test\r\n\r\n!git clone https://github.com/niranjan8129/classification_tensorflow\r\n\r\n!pip install tensorflow-gpu==2.0.0-beta1\r\nfrom google.colab import drive\r\ndirpath=drive.mount('/classification_tensorflow')\r\n\r\n!chmod 777 classification_tensorflow\r\n!python ./classification_tensorflow/train.py ./classification_tensorflow/data/train.csv.zip ./classification_tensorflow/training_config.json\r\n", "I have tried on colab with TF version 2.0 beta, 2.0 and was able to reproduce the issue.Please, find the gist [here](https://colab.sandbox.google.com/gist/ravikyram/304d34ec814dbbf13ed63b5a23416ab1/untitled458.ipynb). Thanks!", "@ravikyram @jvishnuvardhan @qlzh727  Do you how to overcome this issue ?\r\n\r\nissue at line :  self._initial_state = lstm_cell.get_initial_state(self.batch_size, tf.float32)", "Hi @niranjan8129.\r\n\r\nget_inital_state() method takes 3 named param, (inputs, batch_size, dtype) respectively. Since you are trying to provide batch_size and dtype, you should use\r\n\r\n```\r\ninitial_state = lstm_cell.get_initial_state(batch_size=self.batch_size, dtype=tf.float32)\r\n```", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34850\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34850\">No</a>\n", "@qlzh727  \r\nI modified the code but still getting error below.\r\n\r\n\r\nlstm_cell =tf.keras.layers.GRUCell(units=hidden_unit)\r\nlstm_cell = tf.nn.RNNCellDropoutWrapper(lstm_cell,output_keep_prob=self.dropout_keep_prob)\r\n\r\n\r\n**self._initial_state = lstm_cell.get_initial_state( inputs=lstm_cell, batch_size=self.batch_size, dtype= tf.float32)**\r\ninputs = [tf.squeeze(input_, [1]) for input_ in tf.split(pooled_concat,num_or_size_splits=int(reduced),axis=1)]\r\n\r\nreturn_state =tf.keras.layers.RNN(cell=lstm_cell, inputs=inputs,initial_state=self._initial_state, return_sequences=True, return_state=True, dtype=tf.float32)\r\n\r\n**Error**\r\n=======\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n    self._initial_state = lstm_cell.get_initial_state( inputs=lstm_cell, batch_size=self.batch_size, dtype= tf.float32)\r\n  **File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/layers/recurrent.py\", line 1748, in get_initial_state     return _generate_zero_filled_state_for_cell(self, inputs, batch_size, dtype)\r\nTypeError: Expected binary or unicode string, got <tensorflow.python.keras.layers.recurrent_v2.GRUCell object at 0x7f76c350b3c8>**\r\n\r\n**TypeError: Expected binary or unicode string, got <tensorflow.python.keras.layers.recurrent_v2.GRUCell object at 0x7f76c350b3c8>**", "You shouldn't provide inputs param to get_initial_state(), only batch_size and dtype are the params you have.", "If  I am using below code,getting below error \r\n\r\n**self._initial_state = lstm_cell.get_initial_state(self.batch_size, tf.float32)**\r\n\r\nGot ERROR \r\nValueError: slice index 0 of dimension 0 out of bounds. for 'strided_slice' (op: 'StridedSlice') with input shapes: [0], [1], [1], [1] and with computed input tensors: input[1] = <0>, input[2] = <1>, input[3] = <1>.\r\nmay I know why I am getting this error?", "Also, you are calling the RNN layer incorrectly. The tensor params should be called with RNN layer, rather than pass in as init param.\r\n\r\n```\r\nrnn= tf.keras.layers.RNN(cell=lstm_cell, return_sequences=True, return_state=True, dtype=tf.float32)\r\noutput = rnn(inputs)\r\n```\r\n\r\nAlso, the default init state will be inferred with all zeros. You don't need to call get_initial_state and pass it to the rnn layer. The initial state is optional.", "get_initial_state() takes named argument, you can't just feed your param as the normal positional argument to it. ", "@qlzh727  kindly correct me if I wrong .. I use below code \r\n\r\nlstm_cell =tf.keras.layers.GRUCell(units=hidden_unit)\r\nlstm_cell = tf.nn.RNNCellDropoutWrapper(lstm_cell, output_keep_prob=self.dropout_keep_prob)\r\n\r\nself._initial_state = lstm_cell.get_initial_state( self.batch_size,  tf.float32)\r\n\r\ninputs = [tf.squeeze(input_, [1]) for input_ in tf.split(pooled_concat,num_or_size_splits=int(reduced),axis=1)]\r\n\r\nrnn= tf.keras.layers.RNN(cell=lstm_cell,initial_state=self._initial_state, return_sequences=True, return_state=True, dtype=tf.float32)\r\n\r\noutput = rnn(inputs)\r\n\r\n\r\n", "The correct code should be\r\n\r\n```\r\nself._initial_state = lstm_cell.get_initial_state(batch_size=self.batch_size, dtype=tf.float32)\r\n```", "@qlzh727  I am very close to .. Thank you a lot.  if I use initial_state below places, I get two kinds of error .  is that the places i use correctly?\r\n\r\n1)\r\n rnn= tf.keras.layers.RNN(cell=lstm_cell,initial_state=self._initial_state,return_sequences=True, return_state=True, dtype=tf.float32)\r\n\r\nError:\r\n======\r\nTypeError: ('Keyword argument not understood:', 'initial_state')\r\n\r\n\r\n2)  outputs = rnn(inputs ,initial_state=self._initial_state  )\r\n\r\nError:\r\n========\r\n\r\n   assert initial_state is None and constants is None\r\nAssertionError\r\n\r\n", "i a, working with same code and when try to run train.py getting     scale /= max(1., (fan_in + fan_out) / 2.)\r\nTypeError: unsupported operand type(s) for +: 'NoneType' and 'int'\r\n"]}, {"number": 34849, "title": "TF 2.0 - WARNING - dense_features is casting an input tensor from dtype float64 to the layer's dtype of float32", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution Ubuntu Linux 18.04 x64\r\n\r\n- TensorFlow installed from (source or binary): Installed from Anaconda\r\n\r\n- TensorFlow version (use command below):\r\n`python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\nunknown 2.0.0\r\nI am using TF 2.0.0.\r\n- Python version: python 3.7.4\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: Cuda release 10.1, V10.1.168; cudnn 7.6.0\r\n- GPU model and memory: Nvidia GTX 1080 11GB.\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nThis is both a code issue and a documentation problem--but mostly a code problem. \r\nI was looking at the tutorial(https://www.tensorflow.org/tutorials/structured_data/feature_columns#numeric_columns) and saw that the tutorial itself is generating warnings. So that suggests some problems in the code as well as the tutorial. \r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect the tutorial to generate no warnings--and hence demonstrate proper code functionality. As it is, it is not clear whether the warnings are generated from a bug in the code, or from spurious warnings, etc. \r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow import feature_column\r\nfrom tensorflow.keras import layers\r\nfrom sklearn.model_selection import train_test_split\r\n\r\nURL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\ndataframe = pd.read_csv(URL)\r\ntrain, test = train_test_split(dataframe, test_size=0.2)\r\ntrain, val = train_test_split(train, test_size=0.2)\r\nprint(len(train), 'train examples')\r\nprint(len(val), 'validation examples')\r\nprint(len(test), 'test examples')\r\n\r\ndef df_to_dataset(dataframe, shuffle=True, batch_size=32):\r\n  dataframe = dataframe.copy()\r\n  labels = dataframe.pop('target')\r\n  ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n  if shuffle:\r\n    ds = ds.shuffle(buffer_size=len(dataframe))\r\n  ds = ds.batch(batch_size)\r\n  return ds\r\n\r\nbatch_size = 5 # A small batch sized is used for demonstration purposes\r\ntrain_ds = df_to_dataset(train, batch_size=batch_size)\r\nval_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\ntest_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\n# We will use this batch to demonstrate several types of feature columns\r\nexample_batch = next(iter(train_ds))[0]\r\n\r\n# A utility method to create a feature column\r\n# and to transform a batch of data\r\ndef demo(feature_column):\r\n  feature_layer = layers.DenseFeatures(feature_column)\r\n  print(feature_layer(example_batch).numpy())\r\n\r\nage = feature_column.numeric_column(\"age\")\r\ndemo(age) # <-- SHOULD TRIGGER OR DISPLAY THE WARNING\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nNo other materials provided.", "comments": ["The solution to this is to make a simple update to the code. \r\n```\r\n  feature_layer = layers.DenseFeatures(feature_column, dtype='float64')\r\n```\r\nNeed to add the datatype directly to the call DenseFeatures. This probably should be a pull request to the tutorial.\r\n\r\n", "Tried replicating the issue on colab but it worked as expected, no warnings. \r\nPlease see the gist [here](https://colab.sandbox.google.com/gist/gadagashwini/13f1ce009e37f019928c0dc947a695c5/untitled294.ipynb). Thanks!", "Let me just confirm this first. I was getting this error just yesterday so let me make sure there is nothing different. \r\n", "@00krishna I think this was resolved in the current tutorial. I ran the code without any warning. [Here](https://colab.research.google.com/gist/jvishnuvardhan/61eb3c8dad917ce67c6319ad520ab283/feature_columns.ipynb) is the gist.\r\n\r\nCan you please verify once and close the issue. Thanks!", "Okay sounds good. Thank for looking into this @jvishnuvardhan "]}, {"number": 34848, "title": "TF2.0 - Cannot convert EagerTensor to datatype and casting", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Installed from Anaconda\r\n- TensorFlow version (use command below):\r\n`python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\nunknown 2.0.0\r\nI am using TF 2.0.0.\r\n- Python version: python 3.7.4\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: Cuda release 10.1, V10.1.168; cudnn 7.6.0\r\n\r\n- GPU model and memory: Nvidia GTX 1080 11GB.\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nThe code provided generates an error:\r\n```\r\nTypeError: Cannot convert 1.0 to EagerTensor of dtype int64\r\n```\r\nThe cause of the error is not clear but the setup of the code basically follows the Tensorflow tutorial.\r\n\r\n\r\n**Describe the expected behavior**\r\nThe `model.fit()` function should run and complete training. Instead this error gets generated and the training terminates early. I only get like step or such. \r\n\r\n**Code to reproduce the issue**\r\nNote that the error gets generated towards the bottom of the `main()` function, where I invoke the `fit()` function. \r\n\r\n```\r\n#!/usr/bin/python\r\n\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\n# import comet_ml in the top of your file\r\nfrom comet_ml import Experiment\r\nfrom comet_ml import Optimizer\r\nimport numpy as np\r\nimport pandas as pd\r\nimport tensorflow as tf\r\nimport datetime\r\nfrom tensorflow import feature_column\r\nfrom tensorflow.keras import layers\r\nfrom sklearn.model_selection import train_test_split\r\n\r\n# Add the following code anywhere in your machine learning file\r\n\r\ndef main():\r\n\r\n    # Import and setup data\r\n\r\n    URL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\n    dataframe = pd.read_csv(URL)\r\n\r\n    # Setup training test split\r\n\r\n    train, test = train_test_split(dataframe, test_size=0.2)\r\n    train, val = train_test_split(train, test_size=0.2)\r\n    print(f'The training set is of length: {len(train)}')\r\n    batch_size = 32\r\n\r\n    train_ds = df_to_dataset(train, batch_size=batch_size)\r\n    val_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\n    test_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\n    size_train_ds = get_dataset_length(df_to_dataset(train, batch_size=1, repeat=1))\r\n    size_test_ds = get_dataset_length(df_to_dataset(test, batch_size=1, repeat=1))\r\n    size_validation_ds = get_dataset_length(df_to_dataset(val, batch_size=1, repeat=1))\r\n\r\n    print(f' training data length is: {size_train_ds}')\r\n    print(f' test data length is: {size_test_ds}')\r\n    print(f' validation data length is: {size_validation_ds}')\r\n    # Configure experiment and hyperparameters to test with.\r\n\r\n    hparams = {\"nodes\":128, \"thal_embedding_cols\": 3}\r\n\r\n    loss = fit_model(train_ds,  # <-- ERROR GETS GENERATED AROUND HERE.\r\n                     test_ds,\r\n                     val_ds,\r\n                     epochs=100,\r\n                     batch_size=batch_size,\r\n                     number_training_examples=size_train_ds,\r\n                     number_testing_examples=size_test_ds,\r\n                     number_validation_examples=size_validation_ds,\r\n                     hyper_parameters=hparams)\r\n\r\n\r\n    return 0\r\n\r\ndef df_to_dataset(dataframe, shuffle=True, repeat=None, batch_size=32):\r\n    dataframe = dataframe.copy()\r\n    labels = dataframe.pop('target')\r\n    ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n    if shuffle:\r\n        ds = ds.shuffle(buffer_size=len(dataframe))\r\n    ds = ds.batch(batch_size).repeat(repeat)\r\n    return ds\r\n\r\ndef get_dataset_length(ds):\r\n    \"\"\"\r\n    This function will get the number of examples in a tf.data.Dataset. Make\r\n    sure that the batch size for the dataset is set to 1, otherwise this\r\n    function will count the number of batches in the data. \r\n    \"\"\"\r\n    return ds.reduce(np.int64(0), lambda x, _: x + 1)\r\n\r\ndef define_features(hyper_parameters):\r\n\r\n    feature_columns = []\r\n    # numeric cols\r\n    for header in ['age', 'trestbps', 'chol', 'thalach', 'oldpeak', 'slope', 'ca']:\r\n        feature_columns.append(feature_column.numeric_column(header))\r\n        \r\n\r\n    # bucketized cols\r\n    age = feature_column.numeric_column(\"age\")\r\n    age_buckets = feature_column.bucketized_column(age,\r\n                                                   boundaries=[18, 25, 30, 35,\r\n                                                               40, 45, 50, 55,\r\n                                                               60, 65])\r\n    #feature_columns.append(age_buckets)\r\n\r\n    # indicator cols\r\n    thal = feature_column.categorical_column_with_vocabulary_list(\r\n        'thal', ['fixed', 'normal', 'reversible'])\r\n    thal_one_hot = feature_column.indicator_column(thal)\r\n    #feature_columns.append(thal_one_hot)\r\n\r\n    # embedding cols\r\n    thal_embedding = feature_column.embedding_column(thal,\r\n                                                     dimension= \\\r\n                                                     hyper_parameters['thal_embedding_cols'])\r\n    #feature_columns.append(thal_embedding)\r\n\r\n    # crossed cols\r\n    crossed_feature = feature_column.crossed_column([age_buckets, thal], hash_bucket_size=1000)\r\n    crossed_feature = feature_column.indicator_column(crossed_feature)\r\n    #feature_columns.append(crossed_feature)\r\n    return feature_columns\r\n\r\ndef build_model(features, hyper_parameters):\r\n    '''\r\n    documentation string\r\n    '''\r\n    feature_layer = tf.keras.layers.DenseFeatures(features)\r\n\r\n    model = tf.keras.Sequential([\r\n        feature_layer,\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(1, activation='sigmoid')\r\n    ])\r\n\r\n    model.compile(optimizer='adam',\r\n                  loss='binary_crossentropy',\r\n                  metrics=['accuracy'])\r\n\r\n    return model\r\n\r\n\r\ndef fit_model(\r\n              train_dataset,\r\n              test_dataset,\r\n              validation_dataset,\r\n              epochs=None,\r\n              batch_size=None,\r\n              number_training_examples=None,\r\n              number_testing_examples=None,\r\n              number_validation_examples=None,\r\n              hyper_parameters=None):\r\n\r\n\r\n    model = build_model(define_features(hyper_parameters), hyper_parameters)\r\n\r\n    log_dir = \"logs/fit/\" + datetime.datetime.now().strftime(\"%Y%m%d-%H%M%S\")\r\n    tensorboard_callback = tf.keras.callbacks.TensorBoard(log_dir=log_dir, histogram_freq=1)\r\n\r\n    model.fit(train_dataset,\r\n              validation_data = test_dataset,\r\n              epochs = epochs,\r\n              steps_per_epoch = number_training_examples//batch_size,\r\n              validation_steps= number_testing_examples//batch_size,\r\n              callbacks = [tensorboard_callback])\r\n\r\n    # score = model.evaluate(x_test, y_test, verbose=0)[1]\r\n    loss, accuracy = model.evaluate(validation_dataset,\r\n                                    steps=number_validation_examples//batch_size,\r\n                                    verbose=0)\r\n    print(loss)\r\n    return loss\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n\r\n```\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nNA", "comments": ["Issue replicating for TF 2.0 and tf-nightly, please find the [gist](https://colab.sandbox.google.com/gist/oanush/d9e6b644abc2f9610e677bf2ac4cd6e6/34854.ipynb) of colab.Thanks!", "Okay, I figured out the cause of this error. The `get_dataset_length()` function returns a tensor instead of a scalar. And when I pass that tensor to the `fit()` function as below\r\n```\r\nmodel.fit(train_dataset,\r\n              validation_data = test_dataset,\r\n              epochs = epochs,\r\n              steps_per_epoch = number_training_examples//batch_size, <--PROBLEM\r\n              validation_steps= number_testing_examples//batch_size, <-- PROBLEM\r\n              callbacks = [tensorboard_callback])\r\n```\r\nThen when I pass the tensor to the `fit()` function, this generates the error message. But the error message has nothing to do with the actual error. So that is a big problem since it took me a while to figure out that this is the problem. This could be a simple error trapping issue. Or, if you think that these functions should treat tensors as first-class citizens, then all of the function arguments should be able to accept tensors too, right?\r\n\r\nAnyhow, that is what I figured out. \r\n\r\n\r\n", "Hey folks. So again, the issue seems to be associated with the `get_dataset_length()` function returning a tensor of 1 integer value. So it seems like the `model.fit()` function cannot accept tensors for the `steps_per_epoch` or such arguments. Now I guess that is a design question. Should those argument be limited to scalar values in principal, or should they be able to take a tensor and parse it for a single scalar value?", "> Okay, I figured out the cause of this error. The `get_dataset_length()` function returns a tensor instead of a scalar. And when I pass that tensor to the `fit()` function as below\r\n> \r\n> ```\r\n> model.fit(train_dataset,\r\n>               validation_data = test_dataset,\r\n>               epochs = epochs,\r\n>               steps_per_epoch = number_training_examples//batch_size, <--PROBLEM\r\n>               validation_steps= number_testing_examples//batch_size, <-- PROBLEM\r\n>               callbacks = [tensorboard_callback])\r\n> ```\r\n> \r\n> Then when I pass the tensor to the `fit()` function, this generates the error message. But the error message has nothing to do with the actual error. So that is a big problem since it took me a while to figure out that this is the problem. This could be a simple error trapping issue. Or, if you think that these functions should treat tensors as first-class citizens, then all of the function arguments should be able to accept tensors too, right?\r\n> \r\n> Anyhow, that is what I figured out.\r\n\r\nThank you very much. I could've looked for a solution to this error for years and never would've thought that that might be the problem.\r\nIn my case, I used tf.data.experimental.cardinality", "Issue replicating for TF 2.2 and tf-nightly, please find the [gist](https://colab.research.google.com/gist/ravikyram/aede98eece4cafc03f123fda870d768d/untitled28.ipynb) of colab.Thanks!", "What i found is my test example has one image only\r\nSo\r\nmodel.predict(test_generator,steps=test_generator.n/batch_size,verbose=1)\r\nthrows this error\r\n`TypeError: Cannot convert 0.0625 to EagerTensor of dtype int64`  \r\nWhere 0.0625 is obtained by this `test_generator.n/batch_size`\r\nConverting it to following resolve the error\r\nmodel.predict(test_generator)\r\n", "Was able to replicate the issue in TF v2.5 ,please find the gist [here](https://colab.research.google.com/gist/sushreebarsa/54763fa5449817ab8b3368a8fff992ce/untitled28.ipynb#scrollTo=94DG3yfQGZfB)..Thanks !", "Encountered the same issue when I used a `tensor` for the provided data size length. This is using `tensorflow-2.6.0`\r\n\r\n`train_size = train_split.reduce(0, lambda x, _: x + 1)` \r\n  `val_size = val_split.reduce(0, lambda x, _: x + 1)`\r\n`batch_size = 8`\r\n\r\n`model.fit(..., steps_per_epoch=train_size//batch_size` <-- ERROR \r\n  `TypeError: Cannot convert 1.0 to EagerTensor of dtype int64`\r\n\r\nThe solution was to convert the tensor to a scalar value i.e. train_size.numpy()\r\n\r\nBut I agree that it was hard to debug as the given error is a bit unclear.", "@00krishna ! This issue was getting resolved after putting any random number in **steps_per_epoch and validation_steps** of last model.fit() operation. Attaching [Gist ](https://colab.sandbox.google.com/gist/mohantym/b2679fd377f26782e5308adad5d3c334/untitled28.ipynb#scrollTo=FTNA_s_K10tI)for reference. Thanks!", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "@mohantym thanks so much for your help with this. I appreciate the assistance. ", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34848\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34848\">No</a>\n"]}, {"number": 34847, "title": "Fix `invalid syntax` error when `import carla` is present", "body": "This fix tries to address the issue raised in #34828 where\r\n`import carla` followed by `import tensorflow` caused the\r\nfollowing:\r\n```\r\nSyntaxError: invalid syntax\r\n```\r\n\r\nThe issue is that, when `import carla` is invoked,\r\nI/O operation for `std::ostringstream s` might fail,\r\nwhich caused the conversion of AttrValue to string as empty.\r\n\r\nThis PR check `s.good()` to make sure the I/O operation\r\nis OK, and, fallback to normal conversion if locale-neutral I/O\r\noperation fails.\r\n\r\nThis PR fixes #34828.\r\n\r\nSigned-off-by: Yong Tang <yong.tang.github@outlook.com>", "comments": []}, {"number": 34846, "title": "Feed Input tensor Data from CUDA memory", "body": "Hello \r\n\r\nThis feature request is for the C_API\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): No\r\n- OS : Windows 10\r\n- Compiler : VS2015\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI want the C API to provide a way to feed an input Tensor directly from preallocated CUDA memory without copy data through PCI-Express \r\n\r\nCurrent Behaviour  : Need to copy the data to CPU side, then the data is sent back to the GPU for inference.\r\n\r\n**Who will benefit with this feature?**\r\n Anyone who want a performance improvement using Tensorflow C_API for inference\r\n", "comments": ["@sanjoy As far as the C API is concerned we only need to add a way of creating a TFE_TensorHandle with a non-host-memory pointer, which is not hard.\r\n\r\nAny drawbacks we should be wary of? Allocators / streams / etc?", "> Any drawbacks we should be wary of? Allocators / streams / etc?\r\n\r\n[edit: when I wrote this I assumed we were talking about passing the buffer for a `tensorflow::Tensor` to a normal CUDA kernel, when this issue is about how to go in the other direction.  However the general concern still applies.]\r\n\r\nThe memory can only be safely used after the GPU has caught up to the current tip of the compute stream.  The users can ensure this by enqueuing kernels that use the memory onto the compute stream or by adding an event to the compute stream and making kernels that want to use the memory dependent on that event.", "But we don't expose TF's compute streams anywhere in the API. So if I\nunderstand it correctly we should require that users sync their compute\nstream before handing us a pointer, but otherwise do nothing?\n\nCan we tie the lifetime of the pointer given to us by the user with the\nlifetime of the tensor? Or will this break things because the pointer is\n(likely) managed by cudamalloc while ours is managed by bfcallocator and\nboth allocators might not agree on what is the head of the stream?\n\nOn Fri, Dec 6, 2019 at 1:50 PM Sanjoy Das <notifications@github.com> wrote:\n\n> Any drawbacks we should be wary of? Allocators / streams / etc?\n>\n> The memory can only be safely used after the GPU has caught up to the\n> current tip of the compute stream. The users can ensure this by enqueuing\n> kernels that use the memory onto the compute stream or by adding an event\n> to the compute stream and making kernels that want to use the memory\n> dependent on that event.\n>\n> \u2014\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/34846?email_source=notifications&email_token=AAABHROXXUDTUV3QM4OQ5C3QXLCLBA5CNFSM4JVSGS52YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEGFODUQ#issuecomment-562749906>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAABHRLHFNCH7KBXEQIXE4DQXLCLBANCNFSM4JVSGS5Q>\n> .\n>\n\n\n-- \n - Alex\n", "> Can we tie the lifetime of the pointer given to us by the user with the lifetime of the tensor?\r\n\r\nWhen the refcount for the `TensorBuffer` falls to zero then we know that all uses of the buffer have been enqueued to the compute stream.  So I think at that point the owner of the tensor data can wait till the GPU has caught up with the compute stream and then `cudaFree` the buffer.", "How to use in c++ api? ", "> How to use in c++ api?\r\n\r\nI could be missing some subtlety here, but you can call C from C++ code.", "Can anyone show  some examples using c++?", "> Can anyone show some examples using c++?\r\n\r\nYou can look at the test case Alex added in tensorflow/c/eager/c_api_experimental_test.cc.", "Hi There,\n\n We are checking to see if you still need help on this, as you are using an older version of tensorflow which is officially considered end of life . We recommend that you upgrade to the latest 2.x version and let us know if the issue still persists in newer versions. Please open a new issue for any help you need against 2.x, and we will get you the right help. \n\n This issue will be closed automatically 7 days from now. If you still need help with this issue, please provide us with more information."]}, {"number": 34845, "title": "Mask-RCNN fails in TOCO Conversion: \"Exception: Merge of two inputs that differ on more than one predicate\"", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): 2.1.0-dev20191203\r\n\r\nOn the TF-Lite mailing list it was [announced](https://groups.google.com/a/tensorflow.org/forum/?utm_medium=email&utm_source=footer#!msg/tflite/C7Ag0sUrLYg/tHYfDHmNAAAJ) that the new MLIR-based TOCO converter:\r\n```Enables conversion of new classes of models, including Mask R-CNN, ...```\r\nHowever I was unable to get a version of Mask-RCNN converted to TF-Lite. It would be really helpful if additional notebooks like the [LSTM example](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/experimental_new_converter/keras_lstm.ipynb) could be added. I attempted to create one below for others.\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nSee the notebook modeled after the LSTM example: https://github.com/parvizp/tensorflow/blob/master/tensorflow/lite/examples/experimental_new_converter/maskrcnn.ipynb\r\n\r\n**The output from the converter invocation**\r\n```\r\nConverterError: See console for info.\r\n2019-12-04 18:11:17.034818: W tensorflow/compiler/mlir/lite/python/graphdef_to_tfl_flatbuffer.cc:106] Ignored output_format.\r\n2019-12-04 18:11:17.034844: W tensorflow/compiler/mlir/lite/python/graphdef_to_tfl_flatbuffer.cc:112] Ignored drop_control_dependency.\r\nTraceback (most recent call last):\r\n  File \"/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/env/bin/toco_from_protos\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/env/lib/python3.7/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 93, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/env/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/env/lib/python3.7/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/env/lib/python3.7/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/env/lib/python3.7/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 56, in execute\r\n    enable_mlir_converter)\r\nException: Merge of two inputs that differ on more than one predicate {s(BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/Greater:0,else), s(BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/cond/cond/pred_id:0,then)} and {s(BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/Greater:0,else), s(BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/cond/cond/pred_id:0,else), s(BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/cond/Greater:0,else)}\r\n\tfor node {{node BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/cond/cond/Merge}}\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\n\r\nhttp://download.tensorflow.org/models/object_detection/mask_rcnn_resnet50_atrous_coco_2018_01_28.tar.gz\r\n\r\n", "comments": ["Hi, @miaout17, could you take a look at this, they seem to be having issues converting the while loop.", "Is Mask-RCNN not yet supported on TF-Lite or perhaps the mailing list announcement was referencing another implementation?", "Could you modify `pipeline.config` as follows:\r\nBefore:\r\n```\r\nfaster_rcnn {\r\n    number_of_stages: 3\r\n    \u2026\r\n    second_stage_post_processing {\r\n      batch_non_max_suppression {\r\n        score_threshold: 0.300000011921\r\n        iou_threshold: 0.600000023842\r\n        max_detections_per_class: 100\r\n        max_total_detections: 100\r\n      }\r\n      score_converter: SOFTMAX\r\n    }\r\n```\r\n\r\nAfter:\r\n```faster_rcnn {\r\n    number_of_stages: 2\r\n    \u2026\r\n    second_stage_post_processing {\r\n      batch_non_max_suppression {\r\n        score_threshold: 0.300000011921\r\n        iou_threshold: 0.600000023842\r\n        max_detections_per_class: 10\r\n        max_total_detections: 10\r\n        use_static_shapes: true\r\n        use_class_agnostic_nms: true\r\n      }\r\n      score_converter: SOFTMAX\r\n    }\r\n```\r\n\r\nThis helps prune out a lot of dynamicism from the graph. You could play with `max_total_detections` & the thresholds to see what works for you.\r\n\r\nThen we need to export only the inference part of the graph, since the original one contains training components. Run `tensorflow_models/object_detection/export_inference_graph.py` with the following arguments:\r\n```\r\n--input_type image_tensor --input_shape 1,800,1365,3 --pipeline_config_path /.../mask_rcnn_inception_v2_coco_2018_01_28/pipeline.config --trained_checkpoint_prefix .../model/mask_rcnn_inception_v2_coco_2018_01_28/model.ckpt --output_directory /.../mask_rcnn_inception_v2_coco_2018_01_28/exported\r\n```\r\n\r\n(I have mentioned a different model, please modify)\r\n\r\nThen convert the resulting graph to TFLite using the converter. Make sure to enable 'Select TF ops' & set input tensor to `Preprocessor/sub` & outputs to `detection_boxes,detection_classes,detection_scores,num_detections`.\r\n\r\nNOTE: The latency is very high, since the model is not made for mobile use-cases.", "@srjoglekar246 Thanks for looking at this -- I suspect your pipeline changes will reduce the graph complexity which why my main challenge.\r\n\r\nWhat version of TF should I use? I tried to use the latest to get the MLIR-based TOCO but `master` of `models` fails, seems to expect `TF 1.X` in https://github.com/tensorflow/models/blob/master/research/object_detection/exporter.py#L20:\r\n```\r\n/n_mounts/scr_ncore/parvizp/Git/tensorflow_public/tensorflow/lite/examples/experimental_new_converter/models/research/object_detection/exporter.py in <module>\r\n     18 import tempfile\r\n     19 import tensorflow as tf\r\n---> 20 from tensorflow.contrib.quantize.python import graph_matcher\r\n     21 from tensorflow.core.protobuf import saver_pb2\r\n     22 from tensorflow.python.tools import freeze_graph  # pylint: disable=g-direct-tensorflow-import\r\n\r\nModuleNotFoundError: No module named 'tensorflow.contrib'\r\n```\r\nI will try to use an older TF to produce the exported `.pb`. And then a newer TF to leverage the newer TOCO on that `.pb`?", "I think that makes sense. Sorry about the weirdness of this :-/", "For anyone else trying to reproduce, I've successfully used `tensorflow==1.15` and @srjoglekar246 's tips to generate a relatively clean inference graph.\r\nThen using a newer TF/TOCO (`2.2.0-dev20200122`)\r\nI was able to:\r\n```\r\nconverter = tf.lite.TFLiteConverter.from_saved_model('mask_rcnn_resnet50_atrous_coco_2018_01_28/exported_640_640/saved_model/')\r\n\r\n# https://www.tensorflow.org/lite/guide/ops_select\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,\r\n                                       tf.lite.OpsSet.SELECT_TF_OPS]\r\nconverter.experimental_new_converter = True # Must be true for Mask-RCNN.\r\ntflite_model = converter.convert()\r\n\r\n# Write TF-Lite to disk.\r\ntflite_models_dir = pathlib.Path(os.path.join(os.getcwd(), \"tflite_models\"))\r\ntflite_models_dir.mkdir(exist_ok=True, parents=True)\r\ntflite_model_file = tflite_models_dir/\"mask_rcnn_resnet50_atrous_coco_2018_01_28.exported_640_640.tflite\"\r\ntflite_model_file.write_bytes(tflite_model)\r\n```", "Thanks for confirming!", "@srjoglekar246 @parvizp Why does the output array only include: detection_boxes,detection_classes,detection_scores,num_detections? Is the mask head excluded? ", "@lidaweironaldo \r\nYup. Sadly the model becomes too large to be any good, if you also include the mask head (if you are runningn on mobile). If you are running on a device like Raspberry Pi, things might be different. Feel free to try with `number_of_stages: 3` in `pipeline.config` (see my long comment above).\r\n\r\nIf that doesnt work well for you, Deeplabv3 is also a good option for segmentation cases.", "Hi all! Tried to reproduce everything reported by @parvizp - all works fine regarding the conversion. Then when trying to run the inference with resulting TF-Lite model in Python - all crashes at attempt to create the tf.lite.Interpreter object: \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"convert_resnet_to_tflite.py\", line 37, in <module>\r\n    interpreter = tf.lite.Interpreter(model_path=tflite_model_file)\r\n  File \"/home/petglu01/anaconda3/envs/tst/lib/python3.7/site-packages/tensorflow_core/lite/python/interpreter.py\", line 204, in __init__\r\n    model_path, self._custom_op_registerers))\r\nNotImplementedError: Wrong number or type of arguments for overloaded function 'InterpreterWrapper_CreateWrapperCPPFromFile'.\r\n  Possible C/C++ prototypes are:\r\n    tflite::interpreter_wrapper::InterpreterWrapper::CreateWrapperCPPFromFile(char const *,std::vector< std::string > const &,std::string *)\r\n    tflite::interpreter_wrapper::InterpreterWrapper::tflite_interpreter_wrapper_InterpreterWrapper_CreateWrapperCPPFromFile__SWIG_1(char const *,PyObject *)\r\n```\r\n\r\nTensorflow version :  **tf-nightly  2.2.0.dev20200204**\r\n\r\nAt page with information about 'selected TF ops' ( https://www.tensorflow.org/lite/guide/ops_select ) it is said, that TF-Lite interpreter with selected-ops support for Python is under active development. Is that related to the errors that I see?\r\n\r\nThanks!\r\n\r\n\r\n", "I think so, yes :-(. Is your deployment environment Python-only? AFAIK things seem to work on C++ (which is what I usually use)", "Hello @srjoglekar246 !\r\nYes, my use cases depend on the Python back-end. Hopefully support for that will come some time soon", "Hi @srjoglekar246 \r\nI managed to get the same output as @parvizp. However, when I tried to test it using the TF Lite interpreter (using tf-nightly-cpu), I got the following error:\r\n```\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-5-7beb45ac9697> in <module>()\r\n     11 output_details = interpreter.get_output_details()\r\n     12 \r\n---> 13 interpreter.invoke()\r\n\r\n1 frames\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/python/interpreter.py in invoke(self)\r\n    506     \"\"\"\r\n    507     self._ensure_safe()\r\n--> 508     self._interpreter.Invoke()\r\n    509 \r\n    510   def reset_all_variables(self):\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py in Invoke(self)\r\n    111 \r\n    112     def Invoke(self):\r\n--> 113         return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_Invoke(self)\r\n    114 \r\n    115     def InputIndices(self):\r\n\r\nRuntimeError: Regular TensorFlow ops are not supported by this interpreter. Make sure you apply/link the Flex delegate before inference.Node number 194 (FlexCropAndResize) failed to prepare.\r\n```\r\n\r\nCode reference:\r\nFor the pipeline.config, I have changed it to the same as the one you suggested above (https://github.com/tensorflow/tensorflow/issues/34845#issuecomment-573156336).\r\n\r\n```\r\nmodel_path =\"./tflite_models/mask_rcnn_resnet50_atrous_coco_2018_01_28.exported_1024_800.tflite\"\r\ninterpreter = tf.lite.Interpreter(model_path=model_path)\r\ninterpreter.allocate_tensors()\r\n\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\n\r\ninterpreter.invoke()\r\n```\r\n\r\nIs this because the backend hasn't been implemented yet? Or am I doing something wrong?", "@limsijie93 You need to make some building changes as per the [official documentation](https://www.tensorflow.org/lite/guide/ops_select#running_the_model) for things to run :-)", "@srjoglekar246 Does  https://github.com/tensorflow/tensorflow/issues/34845#issuecomment-573156336 mean that we can't have instance segmentation for mobile inference at the moment? Or can it be done with some slight modification?", "@limsijie93 There are other models you can use, such as DeepLabv3 which has a [TFLite example](https://www.tensorflow.org/lite/models/segmentation/overview)", "@srjoglekar246 I see. So, TFLite only supports semantic segmentation for now? Any idea whether support for instance segementation is already in the pipeline?", "@limsijie93 Its a matter of coming up with a TF model that is light-weight enough to run fast on edge devices :-). I think there are some versions of 'small' Mask-RCNNs out there, but there are none on the TF-Object Detection model page.", "@srjoglekar246 I see. \r\n\r\n- For the 'small' Mask-RCNNs, are there any you would recommend looking at?\r\n\r\n- Does that mean that Mask-RCNN ops are already supported by TFLite? Previously I tried the conversion and it seems that some ops are not yet supported :(\r\n\r\nExample:\r\nhttps://github.com/tensorflow/tensorflow/issues/34845#issuecomment-584446076\r\n\r\nand\r\n\r\n```\r\nConverterError: See console for info.\r\n2020-02-12 01:32:59.228747: W tensorflow/compiler/mlir/lite/python/graphdef_to_tfl_flatbuffer.cc:108] Ignored output_format.\r\n2020-02-12 01:32:59.228823: W tensorflow/compiler/mlir/lite/python/graphdef_to_tfl_flatbuffer.cc:111] Ignored drop_control_dependency.\r\n2020-02-12 01:32:59.415031: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 18874368 exceeds 10% of free system memory.\r\n2020-02-12 01:33:00.081314: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 18874368 exceeds 10% of free system memory.\r\n2020-02-12 01:33:00.094513: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 18874368 exceeds 10% of free system memory.\r\n2020-02-12 01:33:00.351854: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 18874368 exceeds 10% of free system memory.\r\nloc(\"CropAndResize/CropAndResize\"): error: 'tf.CropAndResize' op is neither a custom op nor a flex op\r\nloc(\"SecondStageDetectionFeaturesExtract/CropAndResize/CropAndResize\"): error: 'tf.CropAndResize' op is neither a custom op nor a flex op\r\nerror: failed while converting: 'main': Ops that can be supported by the flex runtime (enabled via setting the -emit-select-tf-ops flag): CropAndResize,CropAndResize.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/toco_from_protos\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 93, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 56, in execute\r\n    enable_mlir_converter)\r\nException: <unknown>:0: error: loc(\"CropAndResize/CropAndResize\"): 'tf.CropAndResize' op is neither a custom op nor a flex op\r\n<unknown>:0: error: loc(\"SecondStageDetectionFeaturesExtract/CropAndResize/CropAndResize\"): 'tf.CropAndResize' op is neither a custom op nor a flex op\r\n<unknown>:0: error: failed while converting: 'main': Ops that can be supported by the flex runtime (enabled via setting the -emit-select-tf-ops flag): CropAndResize,CropAndResize.\r\n```", "You need to use [select TF ops](https://www.tensorflow.org/lite/guide/ops_select) to run all ops :-).", "@srjoglekar246 \r\nI tried turning on the select_tf_ops\r\n\r\n```\r\nconverter = tf.lite.TFLiteConverter.from_frozen_graph(model_pb_path, input_arrays, output_arrays,input_shapes)\r\n\r\ntf.enable_control_flow_v2()\r\n\r\nconverter.experimental_new_converter = True\r\nconverter.allow_custom_ops = True # will need to remove. Reference: https://github.com/tensorflow/tensorflow/issues/28485#issuecomment-574800279\r\n\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS, tf.lite.OpsSet.SELECT_TF_OPS] \r\n\r\nprint('Tflite model conversion starting')\r\ntflite_model = converter.convert()\r\nprint('Tflite model conversion completed')\r\n\r\nmodel_tflite_path = os.path.join(export_base_path, \"converted_model_unoptimized.tflite\")\r\n```\r\n\r\nBut I ran into the following errors:\r\n```\r\nConverterError: See console for info.\r\n2020-04-15 02:12:22.185353: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: NonMaxSuppressionV3\r\n2020-04-15 02:12:22.185553: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.185598: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.185645: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.185679: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.207749: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: DenseToDenseSetOperation\r\n2020-04-15 02:12:22.207844: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2020-04-15 02:12:22.207866: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.207891: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayScatterV3\r\n2020-04-15 02:12:22.207970: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2020-04-15 02:12:22.207978: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.207986: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.207999: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208014: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208030: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208044: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: LoopCond\r\n2020-04-15 02:12:22.208067: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208084: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.208092: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208103: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayReadV3\r\n2020-04-15 02:12:22.208114: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208140: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208156: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208178: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: NonMaxSuppressionV3\r\n2020-04-15 02:12:22.208201: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208261: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208274: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.208281: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayWriteV3\r\n2020-04-15 02:12:22.208309: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Exit\r\n2020-04-15 02:12:22.208321: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArraySizeV3\r\n2020-04-15 02:12:22.208345: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayGatherV3\r\n2020-04-15 02:12:22.208388: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: DenseToDenseSetOperation\r\n2020-04-15 02:12:22.208605: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.208641: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.208673: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.208705: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.408000: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 2239 operators, 3602 arrays (0 quantized)\r\n2020-04-15 02:12:22.470324: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 2239 operators, 3602 arrays (0 quantized)\r\n2020-04-15 02:12:23.086255: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 626 operators, 1350 arrays (0 quantized)\r\n2020-04-15 02:12:23.104595: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 618 operators, 1342 arrays (0 quantized)\r\n2020-04-15 02:12:23.122535: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 616 operators, 1338 arrays (0 quantized)\r\n2020-04-15 02:12:23.140117: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 616 operators, 1338 arrays (0 quantized)\r\n2020-04-15 02:12:23.155104: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 616 operators, 1338 arrays (0 quantized)\r\n2020-04-15 02:12:23.184439: I tensorflow/lite/toco/allocate_transient_arrays.cc:345] Total transient array allocated size: 259686592 bytes, theoretical optimal value: 157286592 bytes.\r\n2020-04-15 02:12:23.187524: I tensorflow/lite/toco/toco_tooling.cc:454] Number of parameters: 63458975\r\n2020-04-15 02:12:23.188504: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.188571: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.188837: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.188887: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.189116: E tensorflow/lite/toco/toco_tooling.cc:481] Some of the operators in the model are not supported by TensorFlow Flex runtime: Enter, Exit.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/toco_from_protos\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52, in execute\r\n    enable_mlir_converter)\r\nException: Some of the operators in the model are not supported by TensorFlow Flex runtime: Enter, Exit.\r\n```", "@limsijie93 Can you [enable control flow V2](https://www.tensorflow.org/api_docs/python/tf/compat/v1/enable_control_flow_v2)? TFLite doesn't support control flow V1, since the ops (Enter/Merge, etc etc) are very difficult to pattern-match.", "@srjoglekar246 I tried enabling control flow v2 with this\r\n```\r\ntf.enable_control_flow_v2()\r\n```\r\n\r\nOr do I need to do this?\r\n```\r\ntf.compat.v1.enable_control_flow_v2()\r\n```", "I think that should do. Do you get the same message as above? (i.e, ops like Merge, Switch etc?) In that case, your TF is not using Control Flow V2, so you might have to dig in why.", "This was the output I got @srjoglekar246 \r\n\r\n```\r\nConverterError: See console for info.\r\n2020-04-15 02:12:22.185353: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: NonMaxSuppressionV3\r\n2020-04-15 02:12:22.185553: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.185598: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.185645: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.185679: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.207749: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: DenseToDenseSetOperation\r\n2020-04-15 02:12:22.207844: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2020-04-15 02:12:22.207866: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.207891: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayScatterV3\r\n2020-04-15 02:12:22.207970: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2020-04-15 02:12:22.207978: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.207986: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.207999: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208014: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208030: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208044: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: LoopCond\r\n2020-04-15 02:12:22.208067: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208084: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.208092: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208103: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayReadV3\r\n2020-04-15 02:12:22.208114: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208140: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208156: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208178: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: NonMaxSuppressionV3\r\n2020-04-15 02:12:22.208201: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208261: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2020-04-15 02:12:22.208274: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2020-04-15 02:12:22.208281: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayWriteV3\r\n2020-04-15 02:12:22.208309: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Exit\r\n2020-04-15 02:12:22.208321: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArraySizeV3\r\n2020-04-15 02:12:22.208345: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayGatherV3\r\n2020-04-15 02:12:22.208388: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: DenseToDenseSetOperation\r\n2020-04-15 02:12:22.208605: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.208641: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.208673: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.208705: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: CropAndResize\r\n2020-04-15 02:12:22.408000: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 2239 operators, 3602 arrays (0 quantized)\r\n2020-04-15 02:12:22.470324: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 2239 operators, 3602 arrays (0 quantized)\r\n2020-04-15 02:12:23.086255: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 626 operators, 1350 arrays (0 quantized)\r\n2020-04-15 02:12:23.104595: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 618 operators, 1342 arrays (0 quantized)\r\n2020-04-15 02:12:23.122535: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 616 operators, 1338 arrays (0 quantized)\r\n2020-04-15 02:12:23.140117: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 616 operators, 1338 arrays (0 quantized)\r\n2020-04-15 02:12:23.155104: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 616 operators, 1338 arrays (0 quantized)\r\n2020-04-15 02:12:23.184439: I tensorflow/lite/toco/allocate_transient_arrays.cc:345] Total transient array allocated size: 259686592 bytes, theoretical optimal value: 157286592 bytes.\r\n2020-04-15 02:12:23.187524: I tensorflow/lite/toco/toco_tooling.cc:454] Number of parameters: 63458975\r\n2020-04-15 02:12:23.188504: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.188571: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.188837: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.188887: W tensorflow/lite/toco/tflite/operator.cc:2706] Op DenseToDenseSetOperation is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2020-04-15 02:12:23.189116: E tensorflow/lite/toco/toco_tooling.cc:481] Some of the operators in the model are not supported by TensorFlow Flex runtime: Enter, Exit.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/toco_from_protos\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52, in execute\r\n    enable_mlir_converter)\r\nException: Some of the operators in the model are not supported by TensorFlow Flex runtime: Enter, Exit.\r\n```", "I was able to convert the [mask-rcnn from matterport](https://github.com/matterport/) using [this script](https://gist.github.com/bmabir17/754a6e0450ec4fd5e25e462af949cde6 ) with tflite 1.3\r\n\r\n\r\nBut now i am facing a segmentation error, when i try to run inference with the tflite interpreter (Tried both 1.3 and 2.0 tflite versions)\r\n```python\r\ndef load_tf_model(model_path=\"mask_rcnn_coco_256_exp.tflite\"):\r\n    interpreter = tf.lite.Interpreter(model_path)\r\n    # Get input tensors.\r\n    input_details = interpreter.get_input_details()\r\n    interpreter.resize_tensor_input(input_details[0]['index'],(1,256,256,3))\r\n    interpreter.allocate_tensors()\r\n\r\n    # Get output tensors.\r\n    output_details = interpreter.get_output_details()\r\n    # Test model on random input data.\r\n    input_shape = input_details[0]['shape']\r\n    input_data = np.array(np.random.random_sample((1, 256, 256,3)), dtype=np.float32)\r\n    interpreter.set_tensor(input_details[0]['index'], input_data)\r\n    interpreter.invoke()\r\n\r\n    # The function `get_tensor()` returns a copy of the tensor data.\r\n    # Use `tensor()` in order to get a pointer to the tensor.\r\n    output_data = interpreter.get_tensor(output_details['index'])\r\n    print(output_data)\r\n```", "What is the error?", "Segmentation error , that's all i could get. I even tried to stop the line with debug. \nThe `interpreter.invoke()` causes it", "Is your model converted to tflite successfully ?"]}, {"number": 34844, "title": "Tensorboard example not reproducing GPU profile", "body": "When running this notebook on Colab:\r\n\r\nhttps://www.tensorflow.org/tensorboard/tensorboard_profiling_keras\r\n\r\nI am not getting the same profile output for profiling: on my side no GPU device is shown.\r\n\r\nThis is what is expected:\r\n[![enter image description here][1]][1]\r\n\r\nThis is what I am getting:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o5w0G.png\r\n  [2]: https://i.stack.imgur.com/mDlXb.png", "comments": ["I was not able to reproduce this issue using tf-nightly @eduardo4jesus Please find my gist [here](https://colab.sandbox.google.com/gist/gowthamkpr/53d60d2765423c83e931981c486bb811/external-tensorboard_profiling_keras.ipynb). Thank you!", "@gowthamkpr,  I just reproduced it using your gist.\r\n\r\nI only have /host:CPU, as seen bellow.\r\n\r\n<a href=\"https://ibb.co/vYTY4my\"><img src=\"https://i.ibb.co/Dpvpfkc/Screen-Shot-2019-12-04-at-10-18-19-PM.png\" alt=\"Screen-Shot-2019-12-04-at-10-18-19-PM\" border=\"0\"></a>\r\n\r\nNo /gpu is listed.\r\n\r\nPS:\r\n\r\nI noticed that, after using\r\n```\r\n!pip install tf-nightly-gpu\r\n```\r\n\r\nI became able to find the expression GPU on the `local.trace` file.\r\nHowever, nothing is shown on the Profle Tab on Tensorboard.", "I can reproduce the issue @eduardo4jesus mentioned using the gist.\r\nJose, do you know if this relates to the recent changes in profiling interface?", "Hi! We have the same issue with the profiler. Here some simpler gists that reproduce the problem:\r\nTF 2.1-rc, no GPU in trace devices: https://colab.research.google.com/drive/1WLUSb9inSabMm4x7IdHuM5CEwJq9QX5j\r\nTF 2.2 the nightly build, there is a GPU device in the trace: https://colab.research.google.com/drive/1GVlisiFGl5Hkjg0SIhCAQSDAKnJkN0HL\r\n\r\nThough for TF 2.2 nightly build I wasn't able to run tensorboard, and also from the parsed trace I don't see any events with GPU device but maybe I read it wrong.", "I suspect that the libcupti.so is not located.\r\nif I run !ldconfig -p | grep libcupti, I see nothing.", "colab team confirm this is LD_LIBRARY_PATH problem,\r\nyou can run this \r\n!ldconfig /usr/local/cuda-10.1/extras/CUPTI/lib64 /usr/local/lib /usr/local/lib/python3.6/dist-packages/ideep4py/lib\r\nbefore profiling as a temporary fix.", "this should be fixed after cl/292248849 lands and docker is rebuilt.", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34844\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34844\">No</a>\n"]}, {"number": 34843, "title": "add usage example for tf.image.rgb_to_grayscale", "body": "", "comments": ["We cannot accept PRs on release branches. All PRs must be on `master` branch and then they can be cherry-picked on release branches, if there is a release going on.\r\n\r\nPlease reopen against master", "@WilliamHYZhang , please reopen against master. ", "@kyscg I made a new pull request with more usage examples #34884 against master."]}, {"number": 34842, "title": "Fix for https://github.com/tensorflow/tensorflow/issues/34117", "body": "Bazel's change to legacy_whole_archive behavior is not the cause for TF's linking issues with protobuf. Protobuf's implementation and runtime are correctly being linked into TF here: https://github.com/tensorflow/tensorflow/blob/da5765ebad2e1d3c25d11ee45aceef0b60da499f/tensorflow/core/platform/default/build_config.bzl#L239 and https://github.com/tensorflow/tensorflow/blob/da5765ebad2e1d3c25d11ee45aceef0b60da499f/third_party/protobuf/protobuf.patch#L18, and I've confirmed that protobuf symbols are still present in libtensorflow_framework.so via nm.\r\n\r\nAfter examining the linker flags that bazel passes to gcc, https://gist.github.com/bmzhao/f51bbdef50e9db9b24acd5b5acc95080, I discovered that the order of the linker flags was what was causing the undefined reference.\r\n\r\nSee https://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking/ and https://stackoverflow.com/a/12272890. Basically linkers discard the objects they've been asked to link if those objects do not export any symbols that the linker currently has kept track as \"undefined\".\r\n\r\nTo prove this was the issue, I was able to successfully link after moving the linking shared object flag (-l:libtensorflow_framework.so.2) to the bottom of the flag order, and manually invoking g++.\r\n\r\nThis change uses cc_import to to link against a .so in the \"deps\" of tf_cc_binary, rather than as the \"srcs\" of tf_cc_binary. This technique was inspired by the comment here: https://github.com/bazelbuild/bazel/blob/387c610d09b99536f7f5b8ecb883d14ee6063fdd/examples/windows/dll/windows_dll_library.bzl#L47-L48\r\n\r\nSuccessfully built on vanilla Ubuntu 18.04 VM:\r\nbmzhao@bmzhao-tf-build-failure-reproing:~/tf-fix/tf$ bazel build -c opt --config=cuda --config=v2 --host_force_python=PY3 //tensorflow/tools/pip_package:build_pip_package\r\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:\r\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package\r\nINFO: Elapsed time: 2067.380s, Critical Path: 828.19s\r\nINFO: 12942 processes: 51 remote cache hit, 12891 local.\r\nINFO: Build completed successfully, 14877 total actions\r\n\r\nThe root cause might instead be https://github.com/bazelbuild/bazel/issues/7687, which is pending further investigation.\r\n\r\nPiperOrigin-RevId: 281341817\r\nChange-Id: Ia240eb050d9514ed5ac95b7b5fb7e0e98b7d1e83", "comments": []}, {"number": 34840, "title": "Tensorflow installs locally, but does not on Heroku - python django pipenv", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version:\r\n- Python version:\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\npipenv lock\r\nInstalls fine with \"*\" for tensorflow, but then pushing to remote heroku server fails install \r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nAn error occurred while installing tensorflow==2.0.0! Will try again.\r\n\r\nCould not find a version that satisfies the requirement tensorflow==2.0.0 (from -r /tmp/pipenv-7q4timpj-requirements/pipenv-4z54yb09-requirement.txt (line 1)) (from versions: 0.12.1, 1.0.0, 1.0.1, 1.1.0rc0, 1.1.0rc1, 1.1.0rc2, 1.1.0, 1.2.0rc0, 1.2.0rc1, 1.2.0rc2, 1.2.0, 1.2.1, 1.3.0rc0, 1.3.0rc1, 1.3.0rc2, 1.3.0, 1.4.0rc0, 1.4.0rc1, 1.4.0, 1.4.1, 1.5.0rc0, 1.5.0rc1, 1.5.0, 1.5.1, 1.6.0rc0, 1.6.0rc1, 1.6.0, 1.7.0rc0, 1.7.0rc1, 1.7.0, 1.7.1, 1.8.0rc0, 1.8.0rc1, 1.8.0, 1.9.0rc0, 1.9.0rc1, 1.9.0rc2, 1.9.0, 1.10.0rc0, 1.10.0rc1, 1.10.0, 1.10.1, 1.11.0rc0, 1.11.0rc1, 1.11.0rc2, 1.11.0, 1.12.0rc0, 1.12.0rc1, 1.12.0rc2, 1.12.0, 1.12.2, 1.12.3, 1.13.0rc0, 1.13.0rc1, 1.13.0rc2, 1.13.1, 1.13.2, 1.14.0rc0, 1.14.0rc1, 1.14.0, 2.0.0a0, 2.0.0b0, 2.0.0b1)\r\nremote:        No matching distribution found for tensorflow==2.0.0 (from -r /tmp/pipenv-7q4timpj-requirements/pipenv-4z54yb09-requirement.txt (line 1))", "comments": ["@JDonMc This is not a tensorflow issue. Also looking at the versions available from the error message its clear that tensorflow 2.0 stable version is not available and only tensorflow 2.0.0b1 is the latest version available.\r\n\r\nIf you are able to install it with pip and facing issues with pipenv, I would recommend you to post the issue [here](https://github.com/pypa/pipenv/issues). Thanks!", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34840\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34840\">No</a>\n"]}, {"number": 34839, "title": "Fix to earlier fix for big-endian support in TFLite Micro", "body": "https://github.com/tensorflow/tensorflow/pull/30362 modified TFLite Micro to work on big-endian processors. One of the code modifications in that pull request added byte-swapping to the accessor functions in `tensorflow/lite/kernels/kernel_util.h`. This byte swapping corrected for little-endian data in the `inputs` and `outputs` fields of `TfLiteNode` structs. This little-endian data was there because the `MicroAllocator` class initialized these fields with pointers to `flatbuffers::Vector<int32_t>` that were cast to `TfLiteIntArray*`. These two struct types happen to have the same format in memory on little-endian machines.\r\n\r\nAlthough these changes to `kernel_util.h` got TFLite Micro to work on big-endian machines at the time, there are two significant problems as a result of these changes:\r\n* The non-microcontroller version of TFLite is now broken on big-endian machines, because that version of TFLite keeps the `inputs` and `outputs` fields in host byte order.\r\n* Subsequent updates to `kernel_util.h` have added additional accessors that do not have the byte-swapping changes. As a result, TFLite Micro is once again broken on big-endian machines.\r\n\r\nThe upshot of this is that the versions of both TensorFlow Lite and TFLite Micro at the head of the master branch crash with segmentation faults if the user attempts to load a model on a machine with a big-endian architecture.\r\n\r\nThis pull request replaces the changes to `kernel_util.h` with an alternative that should be more maintainable. I have modified the model-loading code in `MicroAllocator::AllocateNodeAndRegistrations()` so that it copies and byte-swaps the `inputs` and `outputs` fields of nodes when loading graphs on big-endian machines. These arrays are small (typically 1-2 entries per node), so the additional memory allocated is minimal. After this change, the data in the `inputs` and `outputs` fields is always in host byte order. So I have removed the calls to `flatbuffers::EndianScalar()` from the accessors in `kernel_util.h`.\r\n\r\nAfter these changes, all but 2 of the regression tests under `//tensorflow/lite/experimental/micro` succeed on my big-endian test machine. These two tests fail because another change in https://github.com/tensorflow/tensorflow/pull/30362 is also broken. I will fix this other problem in a separate pull request.\r\n\r\nFYI @PeteBlackerThe3rd", "comments": ["@frreiss Could you please resolve the conflicts? Thanks!", "> @frreiss Could you please resolve the conflicts? Thanks!\r\n\r\nHi @gbaned , the conflicts seem to have resolved themselves. I've merged the latest changes from master with this branch and am rerunning the tests on my zLinux test machine.", "Update: Tests under `//tensorflow/lite/micro/...` still run as before on my big-endian test machine after the merge.", "@frreiss Could you please resolve the conflicts? Thanks!", "I've merged with the latest changes from master and rerun tests on Mac and zLinux.", "@frreiss Could you please resolve the conflicts? Thanks!", "Conflicts resolved.", "@frreiss can you please resolve conflicts ", "@frreiss  Can you please resolve conflicts? Thanks!", "Resolved some more conflicts.", "@frreiss I see these internal errors , can you please check \r\n\r\n`tensorflow/lite/micro/micro_allocator.cc:291:21: error: comparison of integers of different signs: 'int' and 'flatbuffers::uoffset_t' (aka 'unsigned int') [-Werror,-Wsign-compare]\r\n  for (int i = 0; i < flat_array->Length(); i++) {\r\n                  ~ ^ ~~~~~~~~~~~~~~~~~~~~\r\n/tensorflow/lite/micro/micro_allocator.cc:357:27: note: in instantiation of function template specialization 'tflite::internal::FlatBufferIntArrayToTfLiteIntArray<int>' requested here\r\n    TF_LITE_ENSURE_STATUS(FlatBufferIntArrayToTfLiteIntArray(`", "Checked in a change that should clear out that compiler error in the internal build."]}, {"number": 34838, "title": "Fix buffer overrun in MicroAllocator", "body": "The quantization code in the method `MicroAllocator::InitializeRuntimeTensor` writes past the end of the `params.zero_point` field in `TfLiteTensor` structs, clobbering the `allocation_type` field. This pull request fixes the overrun. I have also extended the test coverage for `MicroAllocator` to cover the lines of code where the overrun was occurring.\r\n\r\n**Edit:** After subsequent changes, the code in question now copies the first four bytes of a 64-bit integer value into the first four bytes of a 32-bit integer value. This behavior is subtly incorrect on little-endian machines (doesn't maintain sign bits properly) and very incorrect on big-endian machines.", "comments": ["@frreiss Could you please resolve the conflicts? Thanks!", "@gbaned the conflicts seem to have resolved themselves.", "@petewarden, @advaitjain Can you please take a look at this PR? Thanks!", "@frreiss Can you please resolve the conflicts? Thanks!", "Conflicts resolved. It looks like someone has attempted to patch the buffer overrun, but the change in the patch is incorrect. The changes in this PR are still needed, particularly on big-endian machines.", "Thanks for this change and for catching this subtle issue.  For future reference, The micro teams is likely to get to the PR faster if you add comp:micro to the tags (at least that's how I filter for micro-related PRs/bugs).", "@frreiss @mihaimaruseac - Thanks for this! - Is this in a patched release yet? Or would I need to build from source using master branch?", "2.2-rc0 has the commit. See attached image\r\n\r\n![1](https://user-images.githubusercontent.com/323199/76547242-19b6f680-644a-11ea-8d35-80989d53282b.png)\r\n"]}, {"number": 34837, "title": "Close filehandle to keras.json when initializing config", "body": "`json.load` does not close the file handle that is being passed in by the `open` statement. Using a context manager to open the file will guarantee that it is automatically closed as well. ", "comments": ["@fchollet Can you please take a look at this PR? Thanks!"]}, {"number": 34836, "title": "Avoid code duplication by calling pyo() method", "body": "", "comments": ["We found a Contributor License Agreement for you (the sender of this pull request), but were unable to find agreements for all the commit author(s) or Co-authors.  If you authored these, maybe you used a different email address in the git commits than was used to sign the CLA ([login here](https://cla.developers.google.com/) to double check)?  If these were authored by someone else, then they will need to sign a CLA as well, and confirm that they're okay with these being contributed to Google.\nIn order to pass this check, please resolve this problem and then comment `@googlebot I fixed it.`. If the bot doesn't comment, it means it doesn't think anything has changed.\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34836) for more info**.\n\n<!-- need_author_cla -->", "@googlebot I fixed it.", "@wurzelpeter thank you for your contribution, please sign CLA.", "CLAs look good, thanks!\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34836) for more info**.\n\n<!-- ok -->"]}, {"number": 34835, "title": "Fix segfault in error handling", "body": "In the case that we did not find a node we also cannot call\r\n(**node).name() since we never assigned *node.\r\nFix this by printing node_name.", "comments": []}, {"number": 34834, "title": "layer.output raises AttributeError because inbound nodes lost after call to activation function", "body": "**System information**\r\n- custom code\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nubuntu 18.04\r\n- TensorFlow installed from (source or binary):\r\npip install tensorflow-gpu\r\n- TensorFlow version (use command below):\r\n\r\nv2.0.0-rc2-26-g64c3d38 2.0.0\r\nand \r\nv2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n\r\n- Python version:\r\n3.6.9\r\n\r\n**Describe the current behavior**\r\ncalling layer.output on a keras layer that is called on the output of an activation function does not setup the inbound nodes properly and so one cannot call the layer.output method.\r\n\r\n**Describe the expected behavior**\r\nlayer.output should return the output tensor\r\n\r\n**Code to reproduce the issue**\r\n```\r\n\r\nimport tensorflow as tf\r\n\r\n\r\n\r\nclass MyModel(tf.keras.Model):\r\n    def __init__(self, **kwargs):\r\n        super().__init__(**kwargs)\r\n\r\n        self.dense0 = tf.keras.layers.Dense(10, name='dense0', input_shape=(5, 5, 1))\r\n        self.dense1 = tf.keras.layers.Dense(10, name='dense1')\r\n        self.dense2 = tf.keras.layers.Dense(10, name='dense2')\r\n\r\n    def call(self, x):\r\n        x = self.dense0(x)\r\n        # if you use this line it works\r\n        x = tf.keras.layers.ReLU()(x)\r\n        x = self.dense1(x)\r\n\r\n        print('correct:', self.dense1.inbound_nodes)\r\n\r\n        # if you use this line it doesn't work\r\n        relu = tf.keras.activations.get('relu')\r\n        x = relu(x)\r\n        x = self.dense2(x)\r\n\r\n        print('incorrect:', self.dense2.inbound_nodes)\r\n        return x\r\n\r\n\r\ndef main():\r\n    my_model = MyModel()\r\n\r\n    inp = tf.keras.Input(shape=(5, 5, 1))\r\n    out = my_model(inp)\r\n\r\n    my_model.compile(optimizer='adam',\r\n                     loss='sparse_categorical_crossentropy')\r\n\r\n    for l in my_model.layers:\r\n        try:\r\n            print(l.output)\r\n        except AttributeError:\r\n            print('EXCEPTION: {}.output raises attribute error'.format(l.name))\r\n\r\n\r\nif __name__=='__main__':\r\n    main()\r\n\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nUPDATED: to include input_shape which does not solve the problem.", "comments": ["@chahld ,\r\nWhen defining a network in Keras, the first layer added needs to have input_shape added, please check the [link](https://stackoverflow.com/questions/52754453/tensorflow-keras-attributeerror-layer-features-has-no-inbound-nodes) for more information.\r\nAlso refer [this](https://www.kaggle.com/adityaecdrid/mnist-with-keras-for-beginners-99457) example.Thanks!", "@oanush,\r\n\r\nI am not using the Sequential Model. I discovered the problem while subclassing a layer where I needed to call tf.stop_gradient. [Note: Subclassing a layer does not require the input_shape parameter. In my example I'm calling the model on a tf.keras.Input which provides the appropriate input shape. Just to prove this to myself I've ammended the code in my original post, it still fails.]\r\n\r\nTL;DNR: The inbound nodes problem happens whenever you are subclassing (either Model or Layer) and you use functions instead of classes for some of the steps in the call function. You can work around this problem by wrapping any tensorflow function inside a tf.keras.layers.Lambda.\r\n\r\nDetailed comments:\r\n- maybe tf.keras.activations.get should return the ReLU layer, not the relu function.\r\n- so long as you use only Keras Layers in the model, the inbound nodes are updated correctly. \r\n- If you use the functional interface outside of a keras.Layer, the error does not happen. So there is something about the context inside of Layer.call method that is not working properly. (see code below)\r\n\r\n    the fact that the node structure is updated correctly in the functional interface makes me think that the layer.call problem is actually a bug. \r\n- Workaround: My original problem happened because I needed to call tf.stop_gradient. There is no corresponding keras layer for this, but you can get around this by wrapping it inside a Lambda layer:\r\n```\r\n   StopGradient = tf.keras.layers.Lambda(tf.stop_gradient)\r\n```\r\n- or by defining a subclassed layer:\r\n```\r\nclass StopGradient(KL.Layer):\r\n    def call(self, x):\r\n        x = tf.stop_gradient(x)\r\n        return x\r\n```\r\n- I have no idea why this fixes the problem, because inside this layer's call function the nodes are probably not being correctly assigned, but somehow in the layer that calls this function, it recovers. Maybe if the function call is the last or only step in a layer then the node construction works properly? I don't know. \r\n- The Sequential object is helpful because it throws an error if you try to add function to the sequence instead of a class:\r\n\r\n```\r\n    my_model.add(tf.keras.activations.get('relu')) \r\n    \r\n    TypeError: The added layer must be an instance of class Layer. Found: <function relu at 0x7fee0be176a8>\r\n```\r\n- it would nice if the Layer subclassing system raised such a useful exception instead of silently building a  bad node structure.\r\n\r\n----------------\r\nAddendum:\r\n----------------\r\nSee my original post for code to reproduce the problem. \r\n\r\nHere is an example using the functional interface that works:\r\n```\r\n  import tensorflow as tf\r\n\r\ndef main():\r\n    inputs = tf.keras.Input(shape=(5, 5, 1))\r\n    x = inputs\r\n    x = tf.keras.layers.Dense(10, name='dense0')(x)\r\n    x = tf.keras.layers.ReLU()(x)\r\n    x = tf.stop_gradient(x)\r\n    x = tf.keras.layers.Dense(10, name='dense1')(x)\r\n    x = tf.keras.activations.relu(x)\r\n    x = tf.keras.layers.Dense(10, name='dense2')(x)\r\n    outputs = x\r\n    my_model = tf.keras.Model(inputs, outputs)\r\n\r\n    # inp = tf.keras.Input(shape=(5, 5, 1))\r\n\r\n    my_model.compile(optimizer='adam',\r\n                     loss='sparse_categorical_crossentropy')\r\n\r\n\r\n    for l in my_model.layers:\r\n\r\n        print(l.output)  # does not fail\r\n\r\n\r\nif __name__=='__main__':\r\n    main()\r\n\r\n```\r\n", "Issue replicating for given code,kindly find the [gist](https://colab.sandbox.google.com/gist/oanush/d463946e54ba866b1187fdd4aa7bc29e/34834.ipynb) of colab.Thanks!", "@chahld I am not sure why you are trying to use `relu = tf.keras.activations.get('relu')`. I tried to define `relu` in `def` method and used it. Please check the [gist here](https://colab.sandbox.google.com/gist/jvishnuvardhan/de45a4c21e719d322b0538d9ab867a9b/34834.ipynb). Thanks!\r\n\r\nPlease close the issue if it was resolved for you. Thanks!", "@jvishnuvardhan \r\n\r\nYes I know that the ReLU layer works (I showed that in my code to reproduce the problem). \r\n\r\nThere are two reasons why I don't think this should be closed. \r\n\r\nFirst: tf.keras.activations.get('relu') returns the function, not the layer class. If only the layer class is supported then it should be the one returned by the get. I was using the get method so that I could change the activation function from a configuration file. The get method does not accept \"ReLU\", which is another way to fix this part of the problem. \r\n\r\nAnd 2nd, As I said in my second post, the problem seems to occur whenever you use *any* tensorflow function in a layer subclass or model subclass. It is not limited to relu. For some tensorflow functions there is no Keras layer available: e.g. tf.stop_gradient()\r\n\r\nI know there is a workaround (I explained how to do that in my second post). But this problem  ought to be fixed, and not just worked around.  The error message is very obscure, and this was difficult to debug and reproduce. At the least, the documentation and tutorials discussing the subclass approach should indicate that there are issues if you use tensorflow functions in the pipeline, or the function should throw an exception if it is an invalid use of the function. ", "```python\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nfrom tensorflow.keras.layers import Dense, Flatten, Conv2D\r\nfrom tensorflow.keras import Model, backend as K\r\n\r\nmnist = keras.datasets.mnist\r\n\r\n(x_train, y_train), (x_test, y_test) = mnist.load_data()\r\nx_train, x_test = x_train / 255.0, x_test / 255.0\r\n\r\nx_train = x_train[..., tf.newaxis]\r\nx_test = x_test[..., tf.newaxis]\r\n\r\ntrain_ds = tf.data.Dataset.from_tensor_slices(\r\n    (x_train, y_train)).shuffle(10000).batch(32)\r\ntest_ds = tf.data.Dataset.from_tensor_slices((x_test, y_test)).batch(32)\r\n\r\n\r\nclass MyModel(Model):\r\n    def __init__(self):\r\n        super(MyModel, self).__init__()\r\n        self.conv1 = Conv2D(32, 3, activation='relu', input_shape=(28, 28, 1))\r\n        self.flatten = Flatten()\r\n        self.d1 = Dense(128, activation='relu')\r\n        self.d2 = Dense(10, activation='softmax')\r\n\r\n    def call(self, x):\r\n        x = self.conv1(x)\r\n        x = self.flatten(x)\r\n        x = self.d1(x)\r\n        return self.d2(x)\r\n\r\n\r\n# def get_layer_output(self):\r\n#     output = graph.get_tensor_by_name('output:0')\r\n\r\n\r\nmodel = MyModel()\r\n\r\nloss_object = tf.keras.losses.SparseCategoricalCrossentropy()\r\n\r\noptimizer = tf.keras.optimizers.Adam()\r\n\r\ntrain_loss = tf.keras.metrics.Mean(name='train_loss')\r\ntrain_accuracy = tf.keras.metrics.SparseCategoricalAccuracy(\r\n    name='train_accuracy')\r\n\r\ntest_loss = tf.keras.metrics.Mean(name='test_loss')\r\ntest_accuracy = tf.keras.metrics.SparseCategoricalAccuracy(\r\n    name='test_accuracy')\r\n\r\n\r\n@tf.function\r\ndef train_step(images, labels):\r\n    with tf.GradientTape() as tape:\r\n        predictions = model(images)\r\n        loss = loss_object(labels, predictions)\r\n    gradients = tape.gradient(loss, model.trainable_variables)\r\n    optimizer.apply_gradients(zip(gradients, model.trainable_variables))\r\n\r\n    train_loss(loss)\r\n    train_accuracy(labels, predictions)\r\n\r\n\r\n@tf.function\r\ndef test_step(images, labels):\r\n    predictions = model(images)\r\n    t_loss = loss_object(labels, predictions)\r\n\r\n    test_loss(t_loss)\r\n    test_accuracy(labels, predictions)\r\n\r\n\r\nEPOCHS = 1\r\n\r\nfor epoch in range(EPOCHS):\r\n    train_loss.reset_states()\r\n    train_accuracy.reset_states()\r\n    test_loss.reset_states()\r\n    test_accuracy.reset_states()\r\n\r\n    for images, labels in train_ds:\r\n        train_step(images, labels)\r\n\r\n    for test_images, test_labels in test_ds:\r\n        test_step(test_images, test_labels)\r\n\r\n    template = 'Epoch {}, Loss: {}, Accuracy: {}, Test Loss: {}, Test Accuracy: {}'\r\n    print(template.format(epoch+1,\r\n                          train_loss.result(),\r\n                          train_accuracy.result()*100,\r\n                          test_loss.result(),\r\n                          test_accuracy.result()*100))\r\n\r\n\r\ndef get_all_outputs(model, input_data, learning_phase=1):\r\n    outputs = [layer.output for layer in model.layers[1:]]  # exclude Input\r\n    layers_fn = K.function([model.input, K.learning_phase()], outputs)\r\n    return layers_fn([input_data, learning_phase])\r\n\r\n\r\noutputs = get_all_outputs(model, \"input_data\", 1)\r\nprint(outputs)\r\n```\r\n\r\nThe above sample code reproduces the error:\r\n\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"/Volumes/SAMSUNG/ai/get-layer-output.py\", line 102, in <module>\r\n    outputs = get_all_outputs(model, \"input_data\", 1)\r\n  File \"/Volumes/SAMSUNG/ai/get-layer-output.py\", line 97, in get_all_outputs\r\n    outputs = [layer.output for layer in model.layers[1:]]  # exclude Input\r\n  File \"/Volumes/SAMSUNG/ai/get-layer-output.py\", line 97, in <listcomp>\r\n    outputs = [layer.output for layer in model.layers[1:]]  # exclude Input\r\n  File \"/Users/xoxoxo/Library/Python/3.6/lib/python/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 1553, in output\r\n    raise AttributeError('Layer ' + self.name + ' has no inbound nodes.')\r\nAttributeError: Layer flatten has no inbound nodes.\r\n```\r\n\r\nI am using Python 3.6.6 on Mac with TF 2.1", "Was able to reproduce the issue with [TF v2.2](https://colab.research.google.com/gist/amahendrakar/c313a3d9c60f24b1b62dfacf3b988b99/34834.ipynb) and [TF-nightly](https://colab.research.google.com/gist/amahendrakar/7adcf816ab1010ee64ee9bf11a58bd20/34834-tf-nightly.ipynb). Please find the attached gist. Thanks!", "Hi @zzj0402 ... were you able to solve this issue with regard to the inbound nodes?  I am trying to do the exact same thing and am running into similar problems.  How did you get around this when using custom models in TF2?", "Was able to reproduce the issue in TF v2.5,please find the gist [here](https://colab.research.google.com/gist/sushreebarsa/fbe646d69dbd71ce4f228f76be05e358/untitled96.ipynb)..Thanks !", "@chahld @zzj0402 I solved this issue with a simple trick\r\n``` python\r\nimport tensorflow as tf\r\n\r\nclass MyModel(tf.keras.Model):\r\n    def __init__(self, **kwargs):\r\n        super().__init__(**kwargs)\r\n\r\n        self.dense0 = tf.keras.layers.Dense(10, name='dense0')\r\n        self.dense1 = tf.keras.layers.Dense(10, name='dense1')\r\n        self.dense2 = tf.keras.layers.Dense(10, name='dense2')\r\n\r\n    def build(self, input_shape):\r\n        self.dense2(self.dense1(self.dense0(tf.keras.layers.Input(shape=input_shape[1:], name=\"input_x\"))))\r\n\r\n    def call(self, x):\r\n        x = self.dense0(x)\r\n        # if you use this line it works\r\n        x = tf.keras.layers.ReLU()(x)\r\n        x = self.dense1(x)\r\n\r\n        print('correct:', self.dense1.inbound_nodes)\r\n\r\n        # if you use this line it doesn't work\r\n        relu = tf.keras.activations.get('relu')\r\n        x = relu(x)\r\n        x = self.dense2(x)\r\n\r\n        print('incorrect:', self.dense2.inbound_nodes)\r\n        return x\r\n\r\n\r\ndef main():\r\n    my_model = MyModel()\r\n\r\n    inp = tf.keras.Input(shape=(5, 5, 1))\r\n    out = my_model(inp)\r\n    my_model.summary()\r\n\r\n    my_model.compile(optimizer='adam',\r\n                     loss='sparse_categorical_crossentropy')\r\n\r\n    for l in my_model.layers:\r\n        try:\r\n            print(l.output)\r\n        except AttributeError:\r\n            print('EXCEPTION: {}.output raises attribute error'.format(l.name))\r\n\r\n\r\nif __name__=='__main__':\r\n    main()\r\n```\r\nand this is the output:\r\n\r\n```\r\ncorrect: [<tensorflow.python.keras.engine.node.Node object at 0x7fc4e55bfb90>]\r\nincorrect: [<tensorflow.python.keras.engine.node.Node object at 0x7fc4e4ea27d0>]\r\nModel: \"my_model_11\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ndense0 (Dense)               (None, 5, 5, 10)          20        \r\n_________________________________________________________________\r\ndense1 (Dense)               (None, 5, 5, 10)          110       \r\n_________________________________________________________________\r\ndense2 (Dense)               (None, 5, 5, 10)          110       \r\n=================================================================\r\nTotal params: 240\r\nTrainable params: 240\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\nKerasTensor(type_spec=TensorSpec(shape=(None, 5, 5, 10), dtype=tf.float32, name=None), name='dense0/BiasAdd:0', description=\"created by layer 'dense0'\")\r\nKerasTensor(type_spec=TensorSpec(shape=(None, 5, 5, 10), dtype=tf.float32, name=None), name='dense1/BiasAdd:0', description=\"created by layer 'dense1'\")\r\nKerasTensor(type_spec=TensorSpec(shape=(None, 5, 5, 10), dtype=tf.float32, name=None), name='dense2/BiasAdd:0', description=\"created by layer 'dense2'\")\r\n```\r\n\r\nBasically, I did add a build method to your model and explicitly computed the output of each layer.\r\nYou can now see the shapes of each layer in the summary.\r\nnote that if you don't pass tf.keras.Input(shape=(5, 5, 1)) to the model and pass tensor directly for example tf.random.uniform([5, 5, 1]) you need to get raide of the range selection in input_shape as follow:\r\n``` python\r\n    def build(self, input_shape):\r\n        self.dense2(self.dense1(self.dense0(tf.keras.layers.Input(shape=input_shape, name=\"input_x\"))))\r\n\r\n    my_model(tf.random.uniform([5, 5, 1])\r\n```\r\nI hope that helps good luck\r\nThis is the reproduced version in TF v2.5 but it should work on all TF v2.x versions, please find the gist [here](https://colab.research.google.com/drive/1sNBhNoiPJBjVg7PdlxAj8CUBT0kJ6CXh?usp=sharing) thanks", "@chahld please check https://github.com/tensorflow/tensorflow/issues/34834#issuecomment-860008343 and let us know if your issue got resolved or not? ", "This issue has been automatically marked as stale because it has no recent activity. It will be closed if no further activity occurs. Thank you.\n", "Closing as stale. Please reopen if you'd like to work on this further.\n", "Are you satisfied with the resolution of your issue?\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34834\">Yes</a>\n<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/34834\">No</a>\n"]}, {"number": 34833, "title": "Error building from source", "body": "<em>I'm getting this error after running \"bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package \"</em>\r\n\r\n**System information**\r\n- Windows 10\r\n- TensorFlow version: 1.13\r\n- Python version: 3.6\r\n- Installed using  conda:\r\n- Bazel version : 0.21.0\r\n- GCC/Compiler version : visual 2015\r\n\r\n\r\nWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\nc:\\tensorflow-build\\tensorflow/.bazelrc\r\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\r\nINFO: Invocation ID: c11f1d92-ce5b-430a-9113-7db1a5079995\r\nINFO: Build options --copt and --define have changed, discarding analysis cache.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:499:1: In rule 'decorator_utils_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:499:1: In rule 'decorator_utils_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:34:1: In rule 'base_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:34:1: In rule 'base_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:54:1: In rule 'tracking_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:54:1: In rule 'tracking_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:81:1: In rule 'data_structures_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:81:1: In rule 'data_structures_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:132:1: In rule 'util_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:132:1: In rule 'util_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:168:1: In rule 'util_with_v1_optimizers_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/training/checkpointable/BUILD:168:1: In rule 'util_with_v1_optimizers_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:510:1: In rule 'tf_export_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:510:1: In rule 'tf_export_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:521:1: In rule 'deprecation_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:521:1: In rule 'deprecation_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:532:1: In rule 'dispatch_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:532:1: In rule 'dispatch_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:543:1: In rule 'keyword_args_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:543:1: In rule 'keyword_args_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:1240:1: In rule 'function_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:1240:1: In rule 'function_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:2868:1: In rule 'sparse_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:2868:1: In rule 'sparse_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:2895:1: In rule 'sort_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:2895:1: In rule 'sort_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3266:1: In rule 'gradient_checker_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3266:1: In rule 'gradient_checker_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3266:1: In rule 'gradient_checker_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3266:1: In rule 'gradient_checker_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3282:1: In rule 'gradient_checker_v2_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3282:1: In rule 'gradient_checker_v2_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3282:1: In rule 'gradient_checker_v2_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3282:1: In rule 'gradient_checker_v2_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3298:1: In rule 'gradients_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3298:1: In rule 'gradients_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3298:1: In rule 'gradients_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3298:1: In rule 'gradients_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3345:1: In rule 'image_grad_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3345:1: In rule 'image_grad_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3345:1: In rule 'image_grad_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3345:1: In rule 'image_grad_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3358:1: In rule 'image_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3358:1: In rule 'image_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3358:1: In rule 'image_ops_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3358:1: In rule 'image_ops_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3432:1: In rule 'nn_batchnorm_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3432:1: In rule 'nn_batchnorm_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3432:1: In rule 'nn_batchnorm_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3432:1: In rule 'nn_batchnorm_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3467:1: In rule 'nn_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3467:1: In rule 'nn_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3467:1: In rule 'nn_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3467:1: In rule 'nn_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3487:1: In rule 'nn_xent_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3487:1: In rule 'nn_xent_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3487:1: In rule 'nn_xent_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3487:1: In rule 'nn_xent_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3804:1: In rule 'function_utils_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:3804:1: In rule 'function_utils_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4375:1: In rule 'localhost_cluster_performance_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4375:1: In rule 'localhost_cluster_performance_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4375:1: In rule 'localhost_cluster_performance_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4375:1: In rule 'localhost_cluster_performance_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4399:1: In rule 'sync_replicas_optimizer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4399:1: In rule 'sync_replicas_optimizer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4442:1: In rule 'session_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4442:1: In rule 'session_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'adadelta_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'adadelta_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'adagrad_da_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'adagrad_da_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'adagrad_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'adagrad_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'basic_loops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'basic_loops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'coordinator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'coordinator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'device_setter_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'device_setter_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'ftrl_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'ftrl_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'gradient_descent_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'gradient_descent_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'learning_rate_decay_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'learning_rate_decay_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'learning_rate_decay_v2_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'learning_rate_decay_v2_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'momentum_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'momentum_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'optimizer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'optimizer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'proximal_adagrad_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'proximal_adagrad_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'proximal_gradient_descent_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'proximal_gradient_descent_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'quantize_training_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'quantize_training_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'queue_runner_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'queue_runner_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'rmsprop_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'rmsprop_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'slot_creator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'slot_creator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'tensorboard_logging_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'tensorboard_logging_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'training_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4679:1: In rule 'training_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4752:1: In rule 'saver_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4752:1: In rule 'saver_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4752:1: In rule 'saver_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4752:1: In rule 'saver_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4825:1: In rule 'saver_large_variable_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4825:1: In rule 'saver_large_variable_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4846:1: In rule 'saver_large_partitioned_variable_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4846:1: In rule 'saver_large_partitioned_variable_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4865:1: In rule 'session_manager_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4865:1: In rule 'session_manager_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4865:1: In rule 'session_manager_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4865:1: In rule 'session_manager_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4908:1: In rule 'basic_session_run_hooks_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4908:1: In rule 'basic_session_run_hooks_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4985:1: In rule 'warm_starting_util_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:4985:1: In rule 'warm_starting_util_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5004:1: In rule 'monitored_session_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5004:1: In rule 'monitored_session_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5068:1: In rule 'input_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5068:1: In rule 'input_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5296:1: In rule 'layers_normalization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5296:1: In rule 'layers_normalization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5296:1: In rule 'layers_normalization_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5296:1: In rule 'layers_normalization_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5379:1: In rule 'batch_norm_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5379:1: In rule 'batch_norm_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5379:1: In rule 'batch_norm_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5379:1: In rule 'batch_norm_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5399:1: In rule 'concat_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5399:1: In rule 'concat_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5399:1: In rule 'concat_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5399:1: In rule 'concat_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5416:1: In rule 'control_flow_ops_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5416:1: In rule 'control_flow_ops_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5416:1: In rule 'control_flow_ops_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5416:1: In rule 'control_flow_ops_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5449:1: In rule 'split_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5449:1: In rule 'split_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5449:1: In rule 'split_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5449:1: In rule 'split_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5467:1: In rule 'transpose_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5467:1: In rule 'transpose_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5467:1: In rule 'transpose_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5467:1: In rule 'transpose_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5486:1: In rule 'matmul_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5486:1: In rule 'matmul_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5486:1: In rule 'matmul_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5486:1: In rule 'matmul_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5507:1: In rule 'matmul_benchmark_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5507:1: In rule 'matmul_benchmark_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5507:1: In rule 'matmul_benchmark_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5507:1: In rule 'matmul_benchmark_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5529:1: In rule 'session_benchmark', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5529:1: In rule 'session_benchmark', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5529:1: In rule 'session_benchmark_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5529:1: In rule 'session_benchmark_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5709:1: In rule 'memory_optimizer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5709:1: In rule 'memory_optimizer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5735:1: In rule 'constant_folding_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5735:1: In rule 'constant_folding_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5735:1: In rule 'constant_folding_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5735:1: In rule 'constant_folding_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5758:1: In rule 'layout_optimizer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5758:1: In rule 'layout_optimizer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5758:1: In rule 'layout_optimizer_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:5758:1: In rule 'layout_optimizer_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:1360:1: Target '//tensorflow/python:framework_for_generated_wrappers_v2' contains an error and its package is in error and referenced by '//tensorflow/python:test_ops'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/BUILD:1360:1: Target '//tensorflow/python:framework/test_ops.py' contains an error and its package is in error and referenced by '//tensorflow/python:test_ops'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:32:1: In rule 'batch_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:32:1: In rule 'batch_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:132:1: In rule 'dataset_constructor_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:132:1: In rule 'dataset_constructor_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:151:1: In rule 'filter_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:151:1: In rule 'filter_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:171:1: In rule 'fixed_length_record_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:171:1: In rule 'fixed_length_record_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:190:1: In rule 'flat_map_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:190:1: In rule 'flat_map_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:215:1: In rule 'group_by_reducer_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:215:1: In rule 'group_by_reducer_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:234:1: In rule 'group_by_window_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:234:1: In rule 'group_by_window_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:273:1: In rule 'interleave_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:273:1: In rule 'interleave_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:294:1: In rule 'map_and_batch_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:294:1: In rule 'map_and_batch_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:313:1: In rule 'numa_map_and_batch_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:313:1: In rule 'numa_map_and_batch_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:332:1: In rule 'map_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:332:1: In rule 'map_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:393:1: In rule 'padded_batch_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:393:1: In rule 'padded_batch_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:413:1: In rule 'parallel_interleave_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:413:1: In rule 'parallel_interleave_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:434:1: In rule 'parallel_map_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:434:1: In rule 'parallel_map_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:459:1: In rule 'parse_example_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:459:1: In rule 'parse_example_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:517:1: In rule 'sample_from_datasets_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:517:1: In rule 'sample_from_datasets_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:553:1: In rule 'sequence_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:553:1: In rule 'sequence_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:590:1: In rule 'shuffle_and_repeat_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:590:1: In rule 'shuffle_and_repeat_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:608:1: In rule 'shuffle_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:608:1: In rule 'shuffle_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:648:1: In rule 'stats_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:648:1: In rule 'stats_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:669:1: In rule 'textline_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:669:1: In rule 'textline_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:688:1: In rule 'tf_record_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:688:1: In rule 'tf_record_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:707:1: In rule 'unbatch_dataset_serialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/serialization/BUILD:707:1: In rule 'unbatch_dataset_serialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:618:1: In rule 'framework_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:618:1: In rule 'framework_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:976:1: In rule 'session_debug_grpc_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:976:1: In rule 'session_debug_grpc_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:976:1: In rule 'session_debug_grpc_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:976:1: In rule 'session_debug_grpc_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1003:1: In rule 'grpc_large_data_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1003:1: In rule 'grpc_large_data_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1003:1: In rule 'grpc_large_data_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1003:1: In rule 'grpc_large_data_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1029:1: In rule 'dist_session_debug_grpc_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1029:1: In rule 'dist_session_debug_grpc_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1029:1: In rule 'dist_session_debug_grpc_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1029:1: In rule 'dist_session_debug_grpc_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1123:1: In rule 'examples_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/debug/BUILD:1123:1: In rule 'examples_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/BUILD:23:1: In rule 'evaluation_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/BUILD:23:1: In rule 'evaluation_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/BUILD:70:1: In rule 'learning_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/BUILD:70:1: In rule 'learning_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/BUILD:168:1: In rule 'summaries_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/BUILD:168:1: In rule 'summaries_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:37:1: In rule 'tfe_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:37:1: In rule 'tfe_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:37:1: In rule 'tfe_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:37:1: In rule 'tfe_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:69:1: In rule 'datasets_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:69:1: In rule 'datasets_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:69:1: In rule 'datasets_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:69:1: In rule 'datasets_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:114:1: In rule 'saver_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:114:1: In rule 'saver_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:114:1: In rule 'saver_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:114:1: In rule 'saver_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:151:1: In rule 'metrics_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:151:1: In rule 'metrics_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:188:1: In rule 'evaluator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:188:1: In rule 'evaluator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:220:1: In rule 'network_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:220:1: In rule 'network_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:253:1: In rule 'remote_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:253:1: In rule 'remote_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:253:1: In rule 'remote_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/eager/python/BUILD:253:1: In rule 'remote_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/labeled_tensor/BUILD:66:1: In rule 'core_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/labeled_tensor/BUILD:66:1: In rule 'core_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/labeled_tensor/BUILD:168:1: In rule 'ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/labeled_tensor/BUILD:168:1: In rule 'ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:325:1: In rule 'ragged_tensor_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:325:1: In rule 'ragged_tensor_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:353:1: In rule 'ragged_eager_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:353:1: In rule 'ragged_eager_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:367:1: In rule 'ragged_range_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:367:1: In rule 'ragged_range_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:380:1: In rule 'ragged_tensor_bounding_shape_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:380:1: In rule 'ragged_tensor_bounding_shape_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:393:1: In rule 'ragged_row_lengths_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:393:1: In rule 'ragged_row_lengths_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:408:1: In rule 'ragged_gather_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:408:1: In rule 'ragged_gather_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:427:1: In rule 'ragged_batch_gather_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:427:1: In rule 'ragged_batch_gather_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:446:1: In rule 'ragged_gather_nd_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:446:1: In rule 'ragged_gather_nd_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:465:1: In rule 'ragged_row_splits_to_segment_ids_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:465:1: In rule 'ragged_row_splits_to_segment_ids_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:478:1: In rule 'ragged_segment_ids_to_row_splits_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:478:1: In rule 'ragged_segment_ids_to_row_splits_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:491:1: In rule 'ragged_from_tensor_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:491:1: In rule 'ragged_from_tensor_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:507:1: In rule 'ragged_to_sparse_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:507:1: In rule 'ragged_to_sparse_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:531:1: In rule 'ragged_from_sparse_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:531:1: In rule 'ragged_from_sparse_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:548:1: In rule 'ragged_to_tensor_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:548:1: In rule 'ragged_to_tensor_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:563:1: In rule 'ragged_segment_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:563:1: In rule 'ragged_segment_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:581:1: In rule 'ragged_reduce_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:581:1: In rule 'ragged_reduce_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:600:1: In rule 'ragged_map_flat_values_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:600:1: In rule 'ragged_map_flat_values_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:619:1: In rule 'ragged_const_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:619:1: In rule 'ragged_const_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:635:1: In rule 'ragged_constant_value_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:635:1: In rule 'ragged_constant_value_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:654:1: In rule 'convert_to_tensor_or_ragged_tensor_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:654:1: In rule 'convert_to_tensor_or_ragged_tensor_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:671:1: In rule 'ragged_boolean_mask_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:671:1: In rule 'ragged_boolean_mask_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:689:1: In rule 'ragged_concat_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:689:1: In rule 'ragged_concat_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:708:1: In rule 'ragged_stack_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:708:1: In rule 'ragged_stack_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:723:1: In rule 'ragged_tile_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:723:1: In rule 'ragged_tile_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:740:1: In rule 'ragged_util_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:740:1: In rule 'ragged_util_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:756:1: In rule 'ragged_expand_dims_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:756:1: In rule 'ragged_expand_dims_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:770:1: In rule 'ragged_where_op_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:770:1: In rule 'ragged_where_op_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:784:1: In rule 'ragged_dispatch_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:784:1: In rule 'ragged_dispatch_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:810:1: In rule 'ragged_operators_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:810:1: In rule 'ragged_operators_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:848:1: In rule 'ragged_tensor_shape_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/ops/ragged/BUILD:848:1: In rule 'ragged_tensor_shape_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/tpu/BUILD:316:1: In rule 'datasets_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/tpu/BUILD:316:1: In rule 'datasets_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/tpu/BUILD:396:1: In rule 'topology_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/tpu/BUILD:396:1: In rule 'topology_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:27:1: In rule 'interpreter_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:27:1: In rule 'interpreter_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:70:1: In rule 'lite_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:70:1: In rule 'lite_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:127:1: In rule 'convert_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:127:1: In rule 'convert_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:172:1: In rule 'convert_saved_model_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/python/BUILD:172:1: In rule 'convert_saved_model_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/pyct/common_transformers/BUILD:33:1: In rule 'anf_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/pyct/common_transformers/BUILD:33:1: In rule 'anf_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:145:1: In rule 'flat_map_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:145:1: In rule 'flat_map_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:166:1: In rule 'from_generator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:166:1: In rule 'from_generator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:248:1: In rule 'interleave_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:248:1: In rule 'interleave_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:267:1: In rule 'iterator_checkpoint_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:267:1: In rule 'iterator_checkpoint_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:314:1: In rule 'iterator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:314:1: In rule 'iterator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:314:1: In rule 'iterator_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:314:1: In rule 'iterator_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:370:1: In rule 'map_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:370:1: In rule 'map_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:402:1: In rule 'multi_device_iterator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:402:1: In rule 'multi_device_iterator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:402:1: In rule 'multi_device_iterator_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:402:1: In rule 'multi_device_iterator_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:654:1: In rule 'window_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/kernel_tests/BUILD:654:1: In rule 'window_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:54:1: In rule 'converter_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:54:1: In rule 'converter_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:65:1: In rule 'errors_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:65:1: In rule 'errors_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:80:1: In rule 'function_wrapping_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:80:1: In rule 'function_wrapping_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:90:1: In rule 'naming_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/autograph/core/BUILD:90:1: In rule 'naming_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:109:1: In rule 'saved_model_predictor_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:109:1: In rule 'saved_model_predictor_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:125:1: In rule 'predictor_factories_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:125:1: In rule 'predictor_factories_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:137:1: In rule 'core_estimator_predictor_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:137:1: In rule 'core_estimator_predictor_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:150:1: In rule 'contrib_estimator_predictor_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/predictor/BUILD:150:1: In rule 'contrib_estimator_predictor_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/nets/BUILD:44:1: In rule 'alexnet_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/nets/BUILD:44:1: In rule 'alexnet_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/nets/BUILD:190:1: In rule 'overfeat_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/nets/BUILD:190:1: In rule 'overfeat_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/nets/BUILD:304:1: In rule 'vgg_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/nets/BUILD:304:1: In rule 'vgg_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/api/generator/BUILD:38:1: In rule 'create_python_api_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/api/generator/BUILD:38:1: In rule 'create_python_api_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/api/generator/BUILD:52:1: In rule 'tensorflow_doc_srcs_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/api/generator/BUILD:52:1: In rule 'tensorflow_doc_srcs_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/api/generator/BUILD:68:1: In rule 'output_init_files_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/api/generator/BUILD:68:1: In rule 'output_init_files_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/session_bundle/BUILD:150:1: In rule 'gc_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/session_bundle/BUILD:150:1: In rule 'gc_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/session_bundle/BUILD:221:1: In rule 'session_bundle_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/session_bundle/BUILD:221:1: In rule 'session_bundle_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/specs/BUILD:38:1: In rule 'specs_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/specs/BUILD:38:1: In rule 'specs_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/specs/BUILD:52:1: In rule 'summaries_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/specs/BUILD:52:1: In rule 'summaries_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/BUILD:237:1: In rule 'print_selective_registration_header_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/BUILD:237:1: In rule 'print_selective_registration_header_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/BUILD:260:1: In rule 'saved_model_cli_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/tools/BUILD:260:1: In rule 'saved_model_cli_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/tensor_forest/hybrid/BUILD:206:1: In rule 'decisions_to_data_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/tensor_forest/hybrid/BUILD:206:1: In rule 'decisions_to_data_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/examples/tutorials/mnist/BUILD:92:1: In rule 'fully_connected_feed_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/examples/tutorials/mnist/BUILD:92:1: In rule 'fully_connected_feed_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:99:1: In rule 'tensor_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:99:1: In rule 'tensor_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:99:1: In rule 'tensor_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:99:1: In rule 'tensor_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:111:1: In rule 'backprop_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:111:1: In rule 'backprop_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:111:1: In rule 'backprop_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:111:1: In rule 'backprop_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:132:1: In rule 'core_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:132:1: In rule 'core_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:132:1: In rule 'core_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:132:1: In rule 'core_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:149:1: In rule 'function_argument_naming_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:149:1: In rule 'function_argument_naming_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:149:1: In rule 'function_argument_naming_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:149:1: In rule 'function_argument_naming_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:163:1: In rule 'function_defun_collection_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:163:1: In rule 'function_defun_collection_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:163:1: In rule 'function_defun_collection_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:163:1: In rule 'function_defun_collection_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:178:1: In rule 'function_gradients_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:178:1: In rule 'function_gradients_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:178:1: In rule 'function_gradients_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:178:1: In rule 'function_gradients_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:195:1: In rule 'function_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:195:1: In rule 'function_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:195:1: In rule 'function_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:195:1: In rule 'function_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:260:1: In rule 'execution_callbacks_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:260:1: In rule 'execution_callbacks_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:284:1: In rule 'graph_only_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:284:1: In rule 'graph_only_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:284:1: In rule 'graph_only_ops_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:284:1: In rule 'graph_only_ops_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:357:1: In rule 'benchmarks_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:357:1: In rule 'benchmarks_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:357:1: In rule 'benchmarks_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:357:1: In rule 'benchmarks_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:378:1: In rule 'tape_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:378:1: In rule 'tape_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:396:1: In rule 'ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:396:1: In rule 'ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:396:1: In rule 'ops_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:396:1: In rule 'ops_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:419:1: In rule 'pywrap_tfe_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:419:1: In rule 'pywrap_tfe_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:447:1: In rule 'memory_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:447:1: In rule 'memory_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:447:1: In rule 'memory_test_gpu', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:447:1: In rule 'memory_test_gpu', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:496:1: In rule 'def_function_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:496:1: In rule 'def_function_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:524:1: In rule 'wrap_function_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/eager/BUILD:524:1: In rule 'wrap_function_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/boosted_trees/BUILD:120:1: In rule 'gbdt_batch_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/boosted_trees/BUILD:120:1: In rule 'gbdt_batch_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:10:1: In rule 'bucket_by_sequence_length_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:10:1: In rule 'bucket_by_sequence_length_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:62:1: In rule 'csv_dataset_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:62:1: In rule 'csv_dataset_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:83:1: In rule 'dense_to_sparse_batch_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:83:1: In rule 'dense_to_sparse_batch_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:99:1: In rule 'directed_interleave_dataset_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:99:1: In rule 'directed_interleave_dataset_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:151:1: In rule 'group_by_reducer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:151:1: In rule 'group_by_reducer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:172:1: In rule 'group_by_window_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:172:1: In rule 'group_by_window_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:194:1: In rule 'ignore_errors_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:194:1: In rule 'ignore_errors_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:211:1: In rule 'indexed_dataset_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:211:1: In rule 'indexed_dataset_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:226:1: In rule 'make_batched_features_dataset_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:226:1: In rule 'make_batched_features_dataset_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:247:1: In rule 'make_csv_dataset_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:247:1: In rule 'make_csv_dataset_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:266:1: In rule 'make_tf_record_dataset_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:266:1: In rule 'make_tf_record_dataset_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:283:1: In rule 'map_and_batch_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:283:1: In rule 'map_and_batch_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:348:1: In rule 'cardinality_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:348:1: In rule 'cardinality_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:380:1: In rule 'parallel_interleave_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:380:1: In rule 'parallel_interleave_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:472:1: In rule 'rejection_resample_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:472:1: In rule 'rejection_resample_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:499:1: In rule 'restructured_dataset_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:499:1: In rule 'restructured_dataset_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:538:1: In rule 'shuffle_and_repeat_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:538:1: In rule 'shuffle_and_repeat_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:558:1: In rule 'sleep_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:558:1: In rule 'sleep_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:659:1: In rule 'unbatch_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/data/experimental/kernel_tests/BUILD:659:1: In rule 'unbatch_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/constrained_optimization/BUILD:41:1: In rule 'candidates_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/constrained_optimization/BUILD:41:1: In rule 'candidates_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/constrained_optimization/BUILD:70:1: In rule 'external_regret_optimizer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/constrained_optimization/BUILD:70:1: In rule 'external_regret_optimizer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/constrained_optimization/BUILD:84:1: In rule 'swap_regret_optimizer_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/constrained_optimization/BUILD:84:1: In rule 'swap_regret_optimizer_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:56:1: In rule 'train_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:56:1: In rule 'train_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:157:1: In rule 'losses_impl_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:157:1: In rule 'losses_impl_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:194:1: In rule 'tuple_losses_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:194:1: In rule 'tuple_losses_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:232:1: In rule 'conditioning_utils_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:232:1: In rule 'conditioning_utils_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:262:1: In rule 'random_tensor_pool_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:262:1: In rule 'random_tensor_pool_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:299:1: In rule 'virtual_batchnorm_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:299:1: In rule 'virtual_batchnorm_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:334:1: In rule 'clip_weights_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:334:1: In rule 'clip_weights_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:372:1: In rule 'classifier_metrics_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:372:1: In rule 'classifier_metrics_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:404:1: In rule 'eval_utils_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:404:1: In rule 'eval_utils_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:436:1: In rule 'summaries_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:436:1: In rule 'summaries_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:468:1: In rule 'head_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:468:1: In rule 'head_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:505:1: In rule 'gan_estimator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:505:1: In rule 'gan_estimator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:556:1: In rule 'stargan_estimator_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:556:1: In rule 'stargan_estimator_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:608:1: In rule 'sliced_wasserstein_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/gan/BUILD:608:1: In rule 'sliced_wasserstein_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/summary/BUILD:13:1: In rule 'summary_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/summary/BUILD:13:1: In rule 'summary_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/summary/BUILD:33:1: In rule 'summary_ops_graph_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/summary/BUILD:33:1: In rule 'summary_ops_graph_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/saved_model/BUILD:316:1: In rule 'save_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/saved_model/BUILD:316:1: In rule 'save_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/saved_model/BUILD:350:1: In rule 'load_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/saved_model/BUILD:350:1: In rule 'load_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/toco/python/BUILD:72:1: In rule 'toco_from_protos_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/lite/toco/python/BUILD:72:1: In rule 'toco_from_protos_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/data/BUILD:60:1: In rule 'dataset_data_provider_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/data/BUILD:60:1: In rule 'dataset_data_provider_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/data/BUILD:179:1: In rule 'tfexample_decoder_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/slim/python/slim/data/BUILD:179:1: In rule 'tfexample_decoder_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:53:1: In rule 'util_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:53:1: In rule 'util_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:65:1: In rule 'select_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:65:1: In rule 'select_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:77:1: In rule 'match_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:77:1: In rule 'match_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:89:1: In rule 'subgraph_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:89:1: In rule 'subgraph_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:101:1: In rule 'reroute_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:101:1: In rule 'reroute_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:114:1: In rule 'edit_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:114:1: In rule 'edit_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:127:1: In rule 'transform_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/graph_editor/BUILD:127:1: In rule 'transform_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/receptive_field/BUILD:62:1: In rule 'graph_compute_order_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/receptive_field/BUILD:62:1: In rule 'graph_compute_order_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/receptive_field/BUILD:78:1: In rule 'parse_layer_parameters_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/receptive_field/BUILD:78:1: In rule 'parse_layer_parameters_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/receptive_field/BUILD:94:1: In rule 'receptive_field_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/receptive_field/BUILD:94:1: In rule 'receptive_field_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/cluster_resolver/BUILD:33:1: In rule 'cluster_resolver_initialization_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/cluster_resolver/BUILD:33:1: In rule 'cluster_resolver_initialization_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:21:1: In rule 'dct_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:21:1: In rule 'dct_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:34:1: In rule 'fft_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:34:1: In rule 'fft_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:50:1: In rule 'mel_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:50:1: In rule 'mel_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:61:1: In rule 'mfcc_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:61:1: In rule 'mfcc_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:75:1: In rule 'reconstruction_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:75:1: In rule 'reconstruction_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:92:1: In rule 'shape_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:92:1: In rule 'shape_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:130:1: In rule 'window_ops_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/python/kernel_tests/signal/BUILD:130:1: In rule 'window_ops_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/compiler/BUILD:73:1: In rule 'xla_test', size 'medium' is not a valid size.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/contrib/compiler/BUILD:73:1: In rule 'xla_test', timeout 'illegal' is not a valid timeout.\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/examples/tutorials/mnist:package' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/lite/python:interpreter_test_data' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/lite/python:tflite_convert' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/lite/toco/python:toco_from_protos' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/autograph/core:test_lib' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/autograph/pyct/common_transformers:common_transformers' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:cond_v2' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'ERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:distributed_framework_test_lib' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:meta_graph_testdata' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:spectral_ops_test_util' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:util_example_parser_configuration' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/data/experimental/kernel_tests/serialization:dataset_serialization_test_base' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/data/experimental/kernel_tests:stats_dataset_test_base' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/data/kernel_tests:test_base' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/debug:debug_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/eager:eager_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/kernel_tests/signal:test_util' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/ops/ragged:ragged_test_util' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/saved_model:saved_model' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/tools:tools_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python/tools/api/generator:create_python_api' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:test_ops' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:while_v2' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/boosted_trees:boosted_trees_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/cluster_resolver:cluster_resolver_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/compiler:xla' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/constrained_optimization:constrained_optimization_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/eager/python:evaluator' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/gan:gan' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/graph_editor:graph_editor_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/labeled_tensor:labeled_tensor_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/predictor:predictor_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/receptive_field:receptive_field_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/session_bundle:session_bundle_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/slim:slim' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/slim/python/slim/data:data_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/slim/python/slim/nets:nets_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/specs:specs' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/summary:summary_test_util' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/tensor_forest/hybrid:hybrid_pip' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/contrib/tpu:tpu' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/tools/pip_package/BUILD:138:1: Target '//tensorflow/python:pywrap_tensorflow_import_lib_file' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:simple_console_for_windows'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: Cannot compute config conditions\r\nINFO: Elapsed time: 1,698s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (6 packages loaded, 56 targets configured)\r\n    currently loading: tensorflow/core\r\n    Fetching @six_archive; fetching\r\n", "comments": ["Hello SYeter@,\r\n\r\nCan you try upgrading your bazel version to 1.1.0? \r\n", "> Hello SYeter@,\r\n> \r\n> Can you try upgrading your bazel version to 1.1.0?\r\n\r\n(tensorflow-build) C:\\tensorflow-build\\tensorflow>bazel test\r\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\r\nINFO: Writing tracer profile to 'C:/users/saidy/_bazel_saidy/j7bi4x5j/command.profile.gz'\r\nERROR: C:/users/saidy/_bazel_saidy/j7bi4x5j/external/io_bazel_rules_closure/closure/private/files_equal_test.bzl:51:19: Traceback (most recent call last):\r\n        File \"C:/users/saidy/_bazel_saidy/j7bi4x5j/external/io_bazel_rules_closure/closure/private/files_equal_test.bzl\", line 49\r\n                rule(<3 more arguments>)\r\n        File \"C:/users/saidy/_bazel_saidy/j7bi4x5j/external/io_bazel_rules_closure/closure/private/files_equal_test.bzl\", line 51, in rule\r\n                attr.label(mandatory = True, <2 more arguments>)\r\n'single_file' is no longer supported. use allow_single_file instead. You can use --incompatible_disable_deprecated_attr_params=false to temporarily disable this check.\r\nERROR: error loading package '': in C:/users/saidy/_bazel_saidy/j7bi4x5j/external/io_bazel_rules_closure/closure/defs.bzl: Extension file 'closure/private/files_equal_test.bzl' has errors\r\nERROR: error loading package '': in C:/users/saidy/_bazel_saidy/j7bi4x5j/external/io_bazel_rules_closure/closure/defs.bzl: Extension file 'closure/private/files_equal_test.bzl' has errors\r\nINFO: Elapsed time: 0.100s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n\r\nHaving this error with 1.1.0", "Hello again.\r\nThe reason is system language, now I changed my system language to English and it is compiling right now. I've seen that solution another Github issue I don't remember which one. Thank you for help.", "Thanks for the update, @SYeter Could you share what was your system language before?", "> Hello again.\r\n> The reason is system language, now I changed my system language to English and it is compiling right now. I've seen that solution another Github issue I don't remember which one. Thank you for help.\r\n\r\nI think that is where you've seen the solution:\r\n\r\nhttps://github.com/tensorflow/tensorflow/issues/20815#issue-341306105\r\n\r\nChanging the system language solved my problem as well.\r\nAnd it's an issue with bazel. Here is my environment:\r\n\r\n```\r\n\r\n== check python ===================================================\r\npython version: 2.7.12\r\npython branch:\r\npython build version: ('v2.7.12:d33e0cf91556', 'Jun 26 2016 12:10:39')\r\npython compiler version: GCC 4.2.1 (Apple Inc. build 5666) (dot 3)\r\npython implementation: CPython\r\n\r\n\r\n== check os platform ===============================================\r\nos: Darwin\r\nos kernel version: Darwin Kernel Version 19.4.0: Wed Mar  4 22:28:40 PST 2020; root:xnu-6153.101.6~15/RELEASE_X86_64\r\nos release version: 19.4.0\r\nos platform: Darwin-19.4.0-x86_64-i386-64bit\r\nlinux distribution: ('', '', '')\r\nlinux os distribution: ('', '', '')\r\nmac version: ('10.15.4', ('', '', ''), 'x86_64')\r\nuname: ('Darwin', 'Ibrahim-MacBook-Pro-2.local', '19.4.0', 'Darwin Kernel Version 19.4.0: Wed Mar  4 22:28:40 PST 2020; root:xnu-6153.101.6~15/RELEASE_X86_64', 'x86_64', 'i386')\r\narchitecture: ('64bit', '')\r\nmachine: x86_64\r\n\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nApple clang version 11.0.3 (clang-1103.0.32.29)\r\nTarget: x86_64-apple-darwin19.4.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n\r\n== check pips ===================================================\r\nnumpy              1.16.6\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\n/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 147: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n== tensorflow installed from info ==================\r\n\r\n== python version  ==============================================\r\n(major, minor, micro, releaselevel, serial)\r\n(2, 7, 12, 'final', 0)\r\n\r\n== bazel version  ===============================================\r\nBuild label: 0.26.1\r\nBuild time: Thu Jun 6 11:08:11 2019 (1559819291)\r\nBuild timestamp: 1559819291\r\nBuild timestamp as int: 1559819291\r\n```"]}, {"number": 34832, "title": "Remove code owners for tf.contrib modules", "body": "Now that `tf.contrib` has been deleted, we should remove these code owners as well. ", "comments": []}, {"number": 34831, "title": "Enhance doc: column oriented -> column-oriented", "body": "", "comments": ["This is a simple change. Is there anything I can do to move this forward?"]}, {"number": 34830, "title": "Update keras/layers/dense_attention.py Doc", "body": "Just a minor revision of the Doc of the attention layer", "comments": ["\nThanks for your pull request. It looks like this may be your first contribution to a Google open source project (if not, look below for help). Before we can look at your pull request, you'll need to sign a Contributor License Agreement (CLA).\n\n:memo: **Please visit <https://cla.developers.google.com/> to sign.**\n\nOnce you've signed (or fixed any issues), please reply here with `@googlebot I signed it!` and we'll verify it.\n\n----\n\n#### What to do if you already signed the CLA\n\n##### Individual signers\n\n*   It's possible we don't have your GitHub username or you're using a different email address on your commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n\n##### Corporate signers\n\n*   Your company has a Point of Contact who decides which employees are authorized to participate. Ask your POC to be added to the group of authorized contributors. If you don't know who your Point of Contact is, direct the Google project maintainer to [go/cla#troubleshoot](http://go/cla#troubleshoot) ([Public version](https://opensource.google/docs/cla/#troubleshoot)).\n*   The email used to register you as an authorized contributor must be the email used for the Git commit. Check [your existing CLA data](https://cla.developers.google.com/clas) and verify that your [email is set on your git commits](https://help.github.com/articles/setting-your-email-in-git/).\n*   The email used to register you as an authorized contributor must also be [attached to your GitHub account](https://github.com/settings/emails).\n\t\t\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34830) for more info**.\n\n<!-- need_sender_cla -->", "@googlebot I signed it!", "CLAs look good, thanks!\n\n\u2139\ufe0f **Googlers: [Go here](https://goto.google.com/prinfo/https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fpull%2F34830) for more info**.\n\n<!-- ok -->", "Closing this PR as this not against `master`, please open a new PR against `master` \r\nCC @mihaimaruseac"]}, {"number": 34829, "title": "added usage example and errors raised", "body": "I was working on another GCI task and noticed that keras.utils.to_categorical didn't have a usage example or a raise-error(which I happened to get) so I updated the doc", "comments": ["Just changed the usage example to doctest format"]}, {"number": 34828, "title": "Missing default floating point values in single_image_random_dot_stereograms_ops.cc", "body": "- OS Platform and Distribution: Ubuntu 18.04\r\n- TensorFlow version: 1.12+ gpu installed with pip\r\n- CUDA/cuDNN version: 9.0/7.0\r\n- GPU model and memory: GTX 1060 6GB / NVIDIA-SMI 390.116\r\n- Exact command to reproduce: use code below in python3 script\r\n- Mobile device: N/A\r\n\r\nCode to reproduce:\r\n\r\n```python\r\nimport carla\r\nimport tensorflow as tf\r\nvol = tf.contrib.util.make_tensor_proto([256, 256])\r\n```\r\n\r\nRun with (carla egg package attached):\r\n\r\n``` shell\r\nPYTHONPATH=carla-0.9.6-py3.5-linux-x86_64.egg:$PYTHONPATH  python ./above_script.py\r\n```\r\n\r\n\r\n\r\nObserve:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"above_script.py\", line 3, in <module>\r\n    vol = tf.contrib.util.make_tensor_proto([256, 256])\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/python/util/lazy_loader.py\", line 53, in __getattr__\r\n    module = self._load()\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/python/util/lazy_loader.py\", line 42, in _load\r\n    module = importlib.import_module(self.__name__)\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/contrib/__init__.py\", line 57, in <module>\r\n    from tensorflow.contrib import image\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/contrib/image/__init__.py\", line 70, in <module>\r\n    from tensorflow.contrib.image.python.ops.single_image_random_dot_stereograms import single_image_random_dot_stereograms\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/contrib/image/python/ops/single_image_random_dot_stereograms.py\", line 27, in <module>\r\n    \"_single_image_random_dot_stereograms.so\"))\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/contrib/util/loader.py\", line 56, in load_op_library\r\n    ret = load_library.load_op_library(path)\r\n  File \"/home/pawel.ziecina/.virtualenvs/myvenv/lib/python3.6/site-packages/tensorflow/python/framework/load_library.py\", line 77, in load_op_library\r\n    exec(wrappers, module.__dict__)\r\n  File \"<string>\", line 28\r\n    def single_image_random_dot_stereograms(depth_values, hidden_surface_removal=True, convergence_dots_size=8, dots_per_inch=72, eye_separation=, mu=, normalize=True, normalize_max=, normalize_min=, border_level=, number_colors=256, output_image_shape=[1024, 768, 1], output_data_window=[1022, 757], name=None):\r\n                                                                                                                                                 ^\r\nSyntaxError: invalid syntax\r\n\r\n\r\n```\r\n\r\nRelated with #21164 - there was bug with wrong decimal separator, here we observe missing default value for float type attrributes in generated python wrapper. \r\n\r\nOther observations:\r\n1. Issue doesn't occur when switch order of imports i.e. import carla after tensorflow import\r\n1. Issue doesn't occur on tf 1.11 - probably it was introduced with #22044\r\n\r\n[carla_egg.tar.gz](https://github.com/tensorflow/tensorflow/files/3922153/carla_egg.tar.gz)", "comments": ["There issue seems to be that, when `import carla` is presented, I/O operation fails for `std::ostringstream s`.\r\n\r\nCreated a PR #34847 so that in case of failure, fallback to normal conversion."]}, {"number": 34827, "title": "Bogus cache keys in Network._output_shape_cache can cause wrong output shapes (and gradual but unbounded memory growth)", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.14.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: 3.7.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\n\r\nIncreasing amounts of memory get allocated and not garbage-collected on successive calls to `model.predict_on_batch(...)`, because output tensor shapes are cached into `Network._output_shape_cache` with cache keys based on Python object identity (which is based on the memory address of the object, in CPython), and cache entries are never expired (the cache is just a standard Python dict). This happens at the end of `Network._run_internal_graph`:\r\n\r\n```python\r\n      cache_key = generic_utils.object_list_uid(input_shapes)\r\n      self._output_shape_cache[cache_key] = nest.pack_sequence_as(\r\n          self._nested_outputs, output_shapes)\r\n```\r\n\r\nThis is seen in the output of my script (see further below), which shows memory growth like this:\r\n\r\n```\r\n...\r\nNotable memory usage diff over last 3000 predictions:\r\n+177 B     (+0 B    per prediction)   +3 objs (0.00 per prediction) at:\r\n    kerasbug.py:37\r\n    .../tensorflow_core/python/keras/engine/training.py:1135\r\n    .../tensorflow_core/python/keras/engine/training_v2_utils.py:370\r\n    .../tensorflow_core/python/keras/engine/base_layer.py:891\r\n    .../tensorflow_core/python/keras/engine/network.py:708\r\n    .../tensorflow_core/python/keras/engine/network.py:877\r\n    .../tensorflow_core/python/keras/utils/generic_utils.py:564\r\n    .../tensorflow_core/python/keras/utils/generic_utils.py:564\r\n\r\nmodel._output_shape_cache has grown to 300, new elements are:\r\n('5492540304', TensorShape([None, 3]))\r\n('5492540688', TensorShape([None, 3]))\r\n('5492539600', TensorShape([None, 3]))\r\n```\r\n\r\nIn practice, at least in my simple script, the growth rate _does_ decrease with time and the overall memory use _probably_ levels off, because input shape objects get garbage collected and their memory gets reused so new input shape objects _often_ get allocated at the same memory addresses, so their cache keys are already present in the cache. But there is no guarantee of this reuse of memory addresses and thus object identities (and its likelihood probably depends on what else is going on in the process), and thus there is no real guarantee of an upper bound to the growth of this cache.\r\n\r\nAdditionally, this cache key scheme hints at a likely functional bug: an input shape object that gets created at the same memory address as a previous input shape object will get the same object identity, and can thus lead to the same cache key in the output shape cache, even if it is not the same input shape. Such a case can cause `compute_output_shape` to return the wrong output shape (one that was valid for a _previous_ set of input shapes, still present in the cache). I have not tried to write code with varying input shapes to manifest this suspected bug.\r\n\r\n**Describe the expected behavior**\r\n\r\nI expect memory growth on successive model predictions to have an upper bound, when I  repeatedly call `predict_on_batch`.\r\n\r\nI expect the output tensor shape returned by `Network.compute_output_shape` to be unaffected by the shapes of inputs of _previous_ runs. (But I haven't demonstrated a failure of this expectation, just conjectured how it would happen.)\r\n\r\n**Code to reproduce the issue**\r\n\r\nThe following script shows the (theoretically) unbounded memory growth.\r\n\r\n```python\r\nimport gc\r\nimport time\r\nfrom itertools import islice\r\nimport tracemalloc\r\nfrom os.path import basename\r\n\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nTRACEMALLOC_EVERY = 3000\r\nTRACEMALLOC_IGNORE = \"tracemalloc.py:\",\r\n\r\ninput_tensor = tf.keras.Input(shape=(3,), name='input')\r\noutput_tensor = tf.keras.layers.Dense(3, name='output')(input_tensor)\r\nmodel = tf.keras.Model(inputs=[input_tensor], outputs=[output_tensor])\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='categorical_crossentropy',\r\n              metrics=['categorical_accuracy'])\r\n\r\n\r\ndef random_input():\r\n    return np.random.random_sample([1, 3])\r\n\r\nmodel.predict_on_batch(random_input())\r\n\r\ntracemalloc.start(50)\r\n\r\nlast_snapshot = tracemalloc.take_snapshot()\r\nalready_printed_from_output_shape_cache = []\r\n\r\nwhile True:\r\n    for _ in range(TRACEMALLOC_EVERY):\r\n        model.predict_on_batch(random_input())\r\n\r\n    gc.collect()\r\n    time.sleep(0.1)\r\n    snapshot = tracemalloc.take_snapshot()\r\n    top_stats = snapshot.compare_to(last_snapshot, 'traceback')\r\n    last_snapshot = snapshot\r\n\r\n    notable_mem_usage_diff = \"\\n\".join(\r\n        f\"{tracemalloc._format_size(stat.size_diff, True):10} \"\r\n        f\"({tracemalloc._format_size(stat.size_diff // TRACEMALLOC_EVERY, True):7} per prediction) \"\r\n        f\"{stat.count_diff:+4} objs \"\r\n        f\"({stat.count_diff / TRACEMALLOC_EVERY:.2f} per prediction) at:\\n\"\r\n        + \"\\n\".join(\"    %s\" % tb for tb in stat.traceback)\r\n        for stat in islice(\r\n            (s for s in top_stats\r\n             if not any(i in str(tb) for tb in s.traceback for i in TRACEMALLOC_IGNORE)\r\n             and not all(basename(__file__) + \":\" in str(tb) for tb in s.traceback)\r\n             and abs(s.size_diff) > 0  # // TRACEMALLOC_EVERY >= 8\r\n             ),\r\n            20\r\n        )\r\n    )\r\n    if notable_mem_usage_diff:\r\n        print(\"Notable memory usage diff over last %d predictions:\\n%s\\n\" % (TRACEMALLOC_EVERY, notable_mem_usage_diff))\r\n    else:\r\n        print(\"No notable memory usage diff over last %d predictions\\n\" % (TRACEMALLOC_EVERY,))\r\n    new_cache_elements = [item for item in model._output_shape_cache.items()\r\n                          if item not in already_printed_from_output_shape_cache]\r\n    if new_cache_elements:\r\n        print(\"model._output_shape_cache has grown to %d, new elements are:\\n%s\\n\" % (\r\n            len(model._output_shape_cache),\r\n            \"\\n\".join(str(item) for item in new_cache_elements)\r\n        ))\r\n        already_printed_from_output_shape_cache.extend(new_cache_elements)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nAs a sidenote, we are calling `predict_on_batch` instead of `predict` as a workaround for https://github.com/tensorflow/tensorflow/issues/33009 (another memory leak issue).", "comments": ["@gthb I am running into a few errors. Can you please correct them [here](https://colab.sandbox.google.com/gist/gowthamkpr/942f5057dd37df0ec67d7d2d3ee4ff4b/untitled257.ipynb). Thanks!", "@gowthamkpr I only see one error there, which is that `__file__` is not defined, which must be because you're running in a notebook, not a Python file on disk. You can probably just remove that line (and maybe get some more uninteresting memory allocations as noise), that condition is just there to ignore memory allocations occurring within the top-level module. If removing it yields too much noise, then maybe something like this will help:\r\n\r\n```python\r\nand \"<ipython-input\" in str(s.traceback[-1]))\r\n```\r\n\r\n... but that's not tested.", "@gthb Can you please try reproducing it in colab and share the gist. Thanks!", "[Here it is as a public gist in Github](https://gist.github.com/gthb/0498ea482a4d19df1b43dd74d93a1262). (Saving it as a Colab-published gist required me to grant Google access to all of my secret gists in Github (!) just to publish this gist _publicly_ in Colab \ud83e\udd14)\r\n\r\nI changed it a bit to show only stack traces with at least one stack frame with tensorflow in its code file path, and only those that have a memory usage delta of at least one byte per request _since the beginning_ (unless you change `CUMULATIVE` to `False`). That turns out to filter out all the small plus and minus allocation noise and reveal that this test case does not exhibit any notable growth in memory allocations by Tensorflow overall \u2014 but does exhibit the gradual (and I think useless) growth of `Network._output_shape_cache`.\r\n\r\nTo be clear, I think this gradual growth is a minor issue and the more important thing here (I'll rename the issue accordingly) is the prospect of returning wrong output shapes because of the clearly incorrect use of object identities as cache keys. That's a code review observation, and a different test case (with varying output shapes) would be needed to demonstrate the wrong-output effects in practice.", "@gthb,\r\nIs this still an issue? \r\n\r\nI ran the code for over 50000 predictions and did not observe any memory usage difference or growth in model._output_shape_cache / new elements. Please find the gist of it [here](https://colab.research.google.com/gist/amahendrakar/a39cdf91bfcfeb34a43b4b43ff214231/untitled257.ipynb). Thanks!\r\n\r\n", "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you.\n", "> @gthb,\r\n> Is this still an issue?\r\n\r\nI don't know.\r\n* **gradual growth:** I prevented this in my use case by just blowing away that cache periodically, and even before that I never observed it to be a _significant_ problem (I just happened to stumble across it when troubleshooting an unrelated unbounded memory growth problem, not involving Tensorflow).\r\n* **returning wrong output shapes** \u2014 the possibility of this is a code review observation and I never tried to observe it actually happening. I haven't tried to quantify how _probable_ it is, and the probability each time may well be _very_ low, but I am quite certain it is nonzero, as the bogus use of object identities as cache keys definitely invites it.", "@gthb It looks like you are using an older Version of Tensorflow (2.3). Can you please execute your code using Latest Version 2.6.0 and let us know if the issue still persists? Thanks!", "Sorry @sushreebarsa, I have since changed jobs and no longer have access to the codebase where I observed this, so can't check in a way that's reliably comparable to what I saw before. Also am not currently using Tensorflow at all so this is out of scope for me.", "@gthb Thanks for the quick update! ", "Hi There,\r\n\r\n This is a stale issue. As you are using an older version of tensorflow, we are checking to see if you still need help on this issue. Please test the issue with the latest TensorFlow (TF2.7 and tf-nightly). If the issue still persists with the newer versions of TF, please feel free to open it in [keras-team/keras](https://github.com/keras-team/keras/issues) repository by providing details about the issue and a standalone code to reproduce the issue. Thanks! \r\n\r\n Please note that Keras development has moved to a separate Keras-team/keras repository to focus entirely on only Keras. Thanks! "]}]